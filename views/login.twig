<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Login</title>
  <style>
    body { text-align: center;}
    h1 { font-size: 50px; text-align: center }
    span[frown] { transform: rotate(90deg); display:inline-block; color: #bbb; }
    body { font: 20px Constantia, 'Hoefler Text',  "Adobe Caslon Pro", Baskerville, Georgia, Times, serif; color: #999; text-shadow: 2px 2px 2px rgba(200, 200, 200, 0.5); }
    ::-moz-selection{ background:#FF5E99; color:#fff; }
    ::selection { background:#FF5E99; color:#fff; }
    article {display:block; text-align: left; width: 500px; margin: 0 auto; }

    a { color: rgb(36, 109, 56); text-decoration:none; }
    a:hover { color: rgb(96, 73, 141) ; text-shadow: 2px 2px 2px rgba(36, 109, 56, 0.5); }
    form {
        margin: 0 auto 1em;
        clear: both;
        margin: 0 auto 2em;
        max-width: 500px;
    }
    .formcontrols {
      border: 1px solid #D7D7D7;
      border-radius: 4px 4px 4px 4px;
      background: none no-repeat scroll 0 0 #FFFFFF;
      padding: 1em;
    }

    .formcontrols .heading {
      color: #96B5C5;
      font-size: 1em;
      margin: 5px auto 15px;
      width: 90%;
    }
    .formcontrols .row {
      margin: 5px auto;
      width: 90%;
    }
    .formcontrols .row label {
      float: left;
      font-weight: bold;
      width: 150px;
    }
    form .footer {
      margin-top: 12px;
    }
    form .footer .submit{
      text-align: right;
    }
    .error {
      color: red;
      font-size: 0.9em;
      margin-bottom: 0.5em;
    }
  </style>
</head>
<body>
     <article>
      <h1>Login</span></h1>
        {% if message is defined %}
            <div class="error">{{ message }}</div>
        {% endif %}
        <form class="form" method="post" action="login{% if redirect %}?r={{ redirect }}{% endif %}" onsubmit="pwhash(login_password, login_spassword, token, s)">
            <input type="hidden" name="login_spassword" value="">
            <input type="hidden" name="s" value="{{ salt }}">
            <input type="hidden" name="token" value="{{ token }}">

            <div class="formcontrols">
                <h3 class="heading">Login to the system</h3>
                <div class="row">
                    <label for="login_username">User Name:</label>

                    <input type="text" class="primary textbox" id="login_username" name="login_username" accesskey="u" tabindex="1">
                </div>
                <div class="row">
                    <label for="login_password">Password:</label>
                    <input type="password" class="primary textbox" id="login_password" name="login_password" tabindex="1">
                </div>
            </div>
            <div class="footer">
                <div class="submit">
                    <input type="submit" class="button-link inline" value="Log in" accesskey="s" tabindex="1">

                </div>
            </div>
        </form>
     </article>
    <script src="js/mylibs/sha256.js" type="text/javascript"></script>
    <script type="text/javascript">
        function pwhash(I,O,T,S) {
            var P = hex_hmac_sha256(T.value,hex_hmac_sha256(S.value,I.value));
            O.value = P;
            I.value = ""
            return true
        };
    </script>
</body>
</html>
