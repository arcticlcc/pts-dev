{% import "metadata/macros.twig" as macros %}
{% import "metadata/citation.twig" as citation %}
{% autoescape 'json' %}
    {
      "resourceType": "{{ resourceType }}",
      {% if resource.startdate or resource.enddate %}
      "resourceTimePeriod": {
        "description": "{{ resourceType == 'project' ? 'Span of project activity' : 'Time span for which resource(' ~ resourceType ~ ') is relevant' }}",
        {% if resource.startdate %}"beginPosition": "{{resource.startdate}}"{% endif %}{% if resource.startdate and resource.enddate %},{% endif %}
        {% if resource.enddate %}"endPosition": "{{resource.enddate}}"{% endif %}
      },
      {% endif %}
      "citation": {{ citation.citation(_context) }},
      "pointOfContact": [
        {
          "contactId": "{{ organization.contactId }}",
          "role": "pointOfContact"
        }
        {% if resourceType == 'project' %}
        {{ contactref.ref(roles,[6,2,8],true) }}
        {% else %}
        {{ contactref.ref(roles,[2, 7, 10],true) }}
        {% endif %}
      ],
      "abstract": "{{ resource.abstract }}",
      "shortAbstract": "{{ resource.shortAbstract }}",
      "status": "{{ resource.status }}",
      "hasMapLocation": {{ resource.features is empty ? 'false' : 'true'}},
      "hasDataAvailable": true,
      "language": ["eng; USA"],
      "characterSet": ["utf8"],
      {#"purpose": "",
      "credit": [""],#}
      "topicCategory": [{{ macros.arraytostring(topics) }}],
      {#"environmentDescription": "",
      "resourceNativeFormat": [
        {
          "formatName": "",
          "version": ""
        }
      ],#}
      {% if keywords or projectkeywords or usertypes or cats %}
      "keyword": [
        {% if keywords %}
          {
            "keyword": [
              {{ macros.arraytostring(keywords) }}
            ],
            "keywordType": "theme",
            "thesaurus":{
              "title":"NASA/Global Change Master Directory (GCMD) Earth Science Keywords",
              "date":[
                {
                  "date":"2013-04-01",
                  "dateType":"revision"
                }
              ],
              "edition":"Version 8.0.0",
              "presentationForm":[
                "documentDigital"
              ],
              "onlineResource":[
                {
                  "uri":"http://gcmd.nasa.gov/learn/keywords.html"
                }
              ]
            }
          }{% if projectkeywords or usertypes or cats %},{% endif %}
        {% endif %}
        {% if projectkeywords %}
          {
            "keyword": [
              {{ macros.arraytostring(projectkeywords) }}
            ],
            "keywordType": "project",
            "thesaurus":{
              "title":"NASA/Global Change Master Directory (GCMD) Earth Science Keywords",
              "date":[
                {
                  "date":"2013-04-01",
                  "dateType":"revision"
                }
              ],
              "edition":"Version 8.0.0",
              "presentationForm":[
                "documentDigital"
              ],
              "onlineResource":[
                {
                  "uri":"http://gcmd.nasa.gov/learn/keywords.html"
                }
              ]
            }
          }{% if usertypes or cats %},{% endif %}
        {% endif %}
        {% if usertypes %}
          {
            "keyword": [
              {{ macros.arraytostring(usertypes) }}
            ],
            "keywordType": "theme",
            "thesaurus":{
              "title":"LCC End User Type Keywords",
              "date":[
                {
                  "date":"2015-05-11",
                  "dateType":"revision"
                }
              ],
              "edition":"Version 1.9.2",
              "presentationForm":[
                "documentDigital"
              ],
              "onlineResource":[
                {
                  "uri":"https://www.sciencebase.gov/vocab/vocabulary/54760ef9e4b0f62cb5dc41a0"
                }
              ]
            }
          }{% if cats %},{% endif %}
        {% endif %}
        {% if cats %}
          {
            "keyword": [
              {{ macros.arraytostring(cats) }}
            ],
            "keywordType": "theme",
            "thesaurus":{
              "title":"LCC Project Category Keywords",
              "date":[
                {
                  "date":"2015-05-11",
                  "dateType":"revision"
                }
              ],
              "edition":"Version 1.9.2",
              "presentationForm":[
                "documentDigital"
              ],
              "onlineResource":[
                {
                  "uri":"https://www.sciencebase.gov/vocab/vocabulary/52dee7c5e4b0dee2a6cd6b18"
                }
              ]
            }
          }
        {% endif %}
      ],
      {% endif %}
      {#"resourceMaintenance": [
        {
          "maintenanceFrequency": "",
          "maintenanceNote": [""],
          "maintenanceContact": [
            {
              "contactId": "",
              "role": ""
            }
          ]
        }
      ],
      "resourceSpecificUsage": [
        {
          "specificUsage": "",
          "userDeterminedLimitation": "",
          "userContactInfo": [
            {
              "contactId": "",
              "role": ""
            }
          ]
        }
      ],
      "graphicOverview": [
        {
          "fileName": "",
          "fileDescription": "",
          "fileType": "",
          "fileUri": "http://thisisanexample.com"
        }
      ],#}
      "constraint": {
        "useLimitation": ["While every effort has been made to ensure that these data are accurate and reliable within the limits of the current state of the art, the Arctic LCC cannot assume liability for any damages caused by any errors or omissions in the data, nor as a result of the failure of the data to function on a particular system. The Arctic LCC makes no warranty, expressed or implied, nor does the fact of distribution constitute such a warranty."]{#,
        "legalConstraint": [
          {
            "accessConstraint": [""],
            "useConstraint": [""],
            "otherConstraint": [""]
          }
        ],
        "securityConstraint": [
          {
            "classification": "",
            "classificationSystem": "",
            "handlingDescription": "",
            "userNote": ""
          }
        ]#}
      },
      {#"taxonomy": {
        "classificationSystem": [
          {
            "title": "",
            "date": [
              {
                "date": "0000-00-00",
                "dateType": ""
              }
            ],
            "edition": "",
            "responsibleParty": [
              {
                "contactId": "",
                "role": ""
              }
            ],
            "presentationForm": [""],
            "identifier": [
              {
                "identifier": "",
                "type": "",
                "authority": {
                  "title": "",
                  "date": [
                    {
                      "date": "0000-00-00",
                      "dateType": ""
                    }
                  ],
                  "responsibleParty": [
                    {
                      "contactId": "",
                      "role": ""
                    }
                  ],
                  "onlineResource": [
                    {
                      "uri": "http://thisisanexample.com",
                      "protocol": "",
                      "name": "",
                      "description": "",
                      "function": ""
                    }
                  ]
                }
              }
            ],
            "onlineResource": [
              {
                "uri": "http://thisisanexample.com",
                "protocol": "",
                "name": "",
                "description": "",
                "function": ""
              }
            ]
          }
        ],
        "taxonGeneralScope": "",
        "observer": [
          {
            "contactId": "",
            "role": ""
          }
        ],
        "taxonomicProcedure": "",
        "voucher": {
          "specimen": "",
          "repository": {
            "contactId": "",
            "role": ""
          }
        },
        "taxonClass": [
          {
            "common": "",
            "taxonRank": "",
            "taxonValue": ""
          }
        ]
      },#}
      "spatialReferenceSystem": {
        "epsgNumber": [{{ macros.arraytoints(epsgcodes) }}],
        "wkt": [{{ macros.arraytostring(wkt) }}]
      },
      "spatialRepresentation": [{{ macros.arraytostring(spatialformats) }}],
      {#"spatialResolution": [
        {
          "equivalentScale": 0
        }, {
          "distance": 0,
          "uom": ""
        }
      ],#}
      {% if resource.features %}
      "extent": [
        {
          "description":"{{ resourceType }} bounding box {{ resource.featuresInherited is defined ? '(inherited from parent project)' }}",
          "geographicElement":[
            {
              "type":"Feature",
              "bbox": {{ resource.bbox }},
              "id": "boundingExtent",
              "geometry":null,
              "properties":{
                "description":"{{ resourceType }} bounding box {{ resource.featuresInherited is defined ? '(inherited from parent project)' }}"
              },
              "crs":{
                "type":"name",
                "properties":{
                  "name":"urn:ogc:def:crs:OGC:1.3:CRS84"
                }
              }
            }
          ]
        },{
          "description":"{{ resourceType }} locations {{ resource.featuresInherited is defined ? '(inherited from parent project)' }}",
          "geographicElement":[
            {
              "type": "FeatureCollection",
              "crs":{
                "type":"name",
                "properties":{
                  "name":"urn:ogc:def:crs:OGC:1.3:CRS84"
                }
              },
              "features": {{ resource.features|raw }}
            }
          ]
        }
      ],
      {% endif %}
      {#"dataQualityInfo": [
        {
          "scope": "",
          "lineage": {
            "statement": "",
            "processStep": [
              {
                "stepId": "",
                "description": "",
                "rationale": "",
                "dateTime": "0000-00-00",
                "processor": [
                  {
                    "contactId": "",
                    "role": ""
                  }
                ]
              }
            ],
            "source": [
              {
                "description": "",
                "citation": {
                  "title": "",
                  "date": [
                    {
                      "date": "0000-00-00",
                      "dateType": ""
                    }
                  ],
                  "edition": "",
                  "responsibleParty": [
                    {
                      "contactId": "",
                      "role": ""
                    }
                  ],
                  "presentationForm": [""],
                  "identifier": [
                    {
                      "identifier": "",
                      "type": "",
                      "authority": {
                        "title": "",
                        "date": [
                          {
                            "date": "0000-00-00",
                            "dateType": ""
                          }
                        ],
                        "responsibleParty": [
                          {
                            "contactId": "",
                            "role": ""
                          }
                        ],
                        "onlineResource": [
                          {
                            "uri": "http://thisisanexample.com",
                            "protocol": "",
                            "name": "",
                            "description": "",
                            "function": ""
                          }
                        ]
                      }
                    }
                  ]
                },
                "processStep": [
                  {
                    "stepId": "",
                    "description": "",
                    "rationale": "",
                    "dateTime": "0000-00-00",
                    "processor": [
                      {
                        "contactId": "",
                        "role": ""
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      ],#}
      {% if resourceType == 'project' %}
      "supplementalInfo": "{{ resource.supplemental }}"
      {% else %}
      "purpose": "{{ resource.purpose }}"
      {% endif %}
    }
{% endautoescape %}