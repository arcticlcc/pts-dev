<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/*
 * File: app/view/dashboard/Dashboard.js
 * Description: Project dashboard.
 */

Ext.define('PTS.view.dashboard.Dashboard', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.dashboard',
    requires: [
        /*'ArcticPTS.view.DashboardTaskGrid',
        'ArcticPTS.view.DashBoardQuickView',*/
        'PTS.view.dashboard.Calendar',
        'Extensible.calendar.gadget.CalendarListPanel'
    ],

    layout: {
        type: 'border'
    },
    title: 'Dashboard',

    initComponent: function() {
        var me = this,
        calStore = Ext.create('Extensible.calendar.data.MemoryCalendarStore', {
            data: Ext.create('PTS.data.Calendar'),
            storeId: 'CalendarStore'
        });

        Ext.applyIf(me, {
            items: [{
                    //id:'app-west',
                    region: 'west',
                    width: 179,
                    border: false,
                    items: [{
                        xtype: 'datepicker',
                        id: 'app-nav-picker',
                        cls: 'ext-cal-nav-picker',
                        listeners: {
                            'select': {
                                fn: function(dp, dt){
                                    Ext.ComponentQuery.query('dashboardcalendar')[0].setStartDate(dt);
                                },
                                scope: this
                            }
                        }
                    },{
                        xtype: 'extensible.calendarlist',
                        store: calStore,
                        border: false,
                        width: 178
                    }]
                },
                {
                    xtype: 'dashboardcalendar',
                    id: 'pts-dashboardcalendar',
                    calendarStore: calStore,
                    bodyPadding: '',
                    //border: '0 1 0 1',
                    style: {
                        border: &quot;1px&quot;,
                        padding: 0
                    },
                    //title: 'Calendar',
                    flex: 2,
                    region: 'center',
                    viewConfig: {
                        showHeader: true
                    }
                },
                {
                    xtype: 'tasklist',
                    flex: 1,
                    region: 'east',
                    collapsible: true,
                    animCollapse: !Ext.isIE8 //TODO: remove this IE8 hack
                }/*,
                {
                    xtype: 'dashboardquickview',
                    region: 'south',
                    collapsed: true
                }*/
            ]
        });

        me.callParent(arguments);
    }

});
</pre>
</body>
</html>
