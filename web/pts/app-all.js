/*
Copyright(c) 2011-2013 Arctic Landscape Conservation Cooperative http://arcticlcc.org
*/
Ext.define("Ext.util.Observable",{requires:["Ext.util.Event"],statics:{releaseCapture:function(a){a.fireEvent=this.prototype.fireEvent},capture:function(c,b,a){c.fireEvent=Ext.Function.createInterceptor(c.fireEvent,b,a)},observe:function(a,b){if(a){if(!a.isObservable){Ext.applyIf(a,new this());this.capture(a.prototype,a.fireEvent,a)}if(Ext.isObject(b)){a.on(b)}return a}}},isObservable:true,constructor:function(a){var b=this;Ext.apply(b,a);if(b.listeners){b.on(b.listeners);delete b.listeners}b.events=b.events||{};if(b.bubbleEvents){b.enableBubble(b.bubbleEvents)}},eventOptionsRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|element|vertical|horizontal|freezeEvent)$/,addManagedListener:function(i,e,g,f,c){var h=this,a=h.managedListeners=h.managedListeners||[],b;if(typeof e!=="string"){c=e;for(e in c){if(c.hasOwnProperty(e)){b=c[e];if(!h.eventOptionsRe.test(e)){h.addManagedListener(i,e,b.fn||b,b.scope||c.scope,b.fn?b:c)}}}}else{a.push({item:i,ename:e,fn:g,scope:f,options:c});i.on(e,g,f,c)}},removeManagedListener:function(k,c,g,l){var f=this,m,b,h,a,e;if(typeof c!=="string"){m=c;for(c in m){if(m.hasOwnProperty(c)){b=m[c];if(!f.eventOptionsRe.test(c)){f.removeManagedListener(k,c,b.fn||b,b.scope||m.scope)}}}}h=f.managedListeners?f.managedListeners.slice():[];for(e=0,a=h.length;e<a;e++){f.removeManagedListenerItem(false,h[e],k,c,g,l)}},fireEvent:function(b){var c=b.toLowerCase(),e=this.events,f=e&&e[c],a=f&&f.bubble;return this.continueFireEvent(c,Ext.Array.slice(arguments,1),a)},continueFireEvent:function(c,f,b){var h=this,a,g,e=true;do{if(h.eventsSuspended===true){if((a=h.eventQueue)){a.push([c,f,b])}return e}else{g=h.events[c];if(g&&g!=true){if((e=g.fire.apply(g,f))===false){break}}}}while(b&&(h=h.getBubbleParent()));return e},getBubbleParent:function(){var b=this,a=b.getBubbleTarget&&b.getBubbleTarget();if(a&&a.isObservable){return a}return null},addListener:function(c,f,e,b){var h=this,a,g;if(typeof c!=="string"){b=c;for(c in b){if(b.hasOwnProperty(c)){a=b[c];if(!h.eventOptionsRe.test(c)){h.addListener(c,a.fn||a,a.scope||b.scope,a.fn?a:b)}}}}else{c=c.toLowerCase();h.events[c]=h.events[c]||true;g=h.events[c]||true;if(Ext.isBoolean(g)){h.events[c]=g=new Ext.util.Event(h,c)}g.addListener(f,e,Ext.isObject(b)?b:{})}},removeListener:function(c,f,e){var h=this,b,g,a;if(typeof c!=="string"){a=c;for(c in a){if(a.hasOwnProperty(c)){b=a[c];if(!h.eventOptionsRe.test(c)){h.removeListener(c,b.fn||b,b.scope||a.scope)}}}}else{c=c.toLowerCase();g=h.events[c];if(g&&g.isEvent){g.removeListener(f,e)}}},clearListeners:function(){var b=this.events,c,a;for(a in b){if(b.hasOwnProperty(a)){c=b[a];if(c.isEvent){c.clearListeners()}}}this.clearManagedListeners()},purgeListeners:function(){if(Ext.global.console){Ext.global.console.warn("Observable: purgeListeners has been deprecated. Please use clearListeners.")}return this.clearListeners.apply(this,arguments)},clearManagedListeners:function(){var b=this.managedListeners||[],c=0,a=b.length;for(;c<a;c++){this.removeManagedListenerItem(true,b[c])}this.managedListeners=[]},removeManagedListenerItem:function(b,a,g,c,f,e){if(b||(a.item===g&&a.ename===c&&(!f||a.fn===f)&&(!e||a.scope===e))){a.item.un(a.ename,a.fn,a.scope);if(!b){Ext.Array.remove(this.managedListeners,a)}}},purgeManagedListeners:function(){if(Ext.global.console){Ext.global.console.warn("Observable: purgeManagedListeners has been deprecated. Please use clearManagedListeners.")}return this.clearManagedListeners.apply(this,arguments)},addEvents:function(f){var e=this,b,a,c;e.events=e.events||{};if(Ext.isString(f)){b=arguments;c=b.length;while(c--){e.events[b[c]]=e.events[b[c]]||true}}else{Ext.applyIf(e.events,f)}},hasListener:function(a){var b=this.events[a.toLowerCase()];return b&&b.isEvent===true&&b.listeners.length>0},suspendEvents:function(a){this.eventsSuspended=true;if(a&&!this.eventQueue){this.eventQueue=[]}},resumeEvents:function(){var a=this,b=a.eventQueue;a.eventsSuspended=false;delete a.eventQueue;if(b){Ext.each(b,function(c){a.continueFireEvent.apply(a,c)})}},relayEvents:function(c,f,k){k=k||"";var h=this,a=f.length,e=0,g,b;for(;e<a;e++){g=f[e].substr(k.length);b=k+g;h.events[b]=h.events[b]||true;c.on(g,h.createRelayer(b))}},createRelayer:function(a){var b=this;return function(){return b.fireEvent.apply(b,[a].concat(Array.prototype.slice.call(arguments,0,-1)))}},enableBubble:function(a){var b=this;if(!Ext.isEmpty(a)){a=Ext.isArray(a)?a:Ext.Array.toArray(arguments);Ext.each(a,function(c){c=c.toLowerCase();var e=b.events[c]||true;if(Ext.isBoolean(e)){e=new Ext.util.Event(b,c);b.events[c]=e}e.bubble=true})}}},function(){this.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener"});this.observeClass=this.observe;Ext.apply(Ext.util.Observable.prototype,function(){function a(k){var i=(this.methodEvents=this.methodEvents||{})[k],f,c,g,h=this;if(!i){this.methodEvents[k]=i={};i.originalFn=this[k];i.methodName=k;i.before=[];i.after=[];var b=function(m,l,e){if((c=m.apply(l||h,e))!==undefined){if(typeof c=="object"){if(c.returnValue!==undefined){f=c.returnValue}else{f=c}g=!!c.cancel}else{if(c===false){g=true}else{f=c}}}};this[k]=function(){var m=Array.prototype.slice.call(arguments,0),l,n,e;f=c=undefined;g=false;for(n=0,e=i.before.length;n<e;n++){l=i.before[n];b(l.fn,l.scope,m);if(g){return f}}if((c=i.originalFn.apply(h,m))!==undefined){f=c}for(n=0,e=i.after.length;n<e;n++){l=i.after[n];b(l.fn,l.scope,m);if(g){return f}}return f}}return i}return{beforeMethod:function(e,c,b){a.call(this,e).before.push({fn:c,scope:b})},afterMethod:function(e,c,b){a.call(this,e).after.push({fn:c,scope:b})},removeMethodListener:function(k,g,f){var h=this.getMethodEvent(k),c,b;for(c=0,b=h.before.length;c<b;c++){if(h.before[c].fn==g&&h.before[c].scope==f){Ext.Array.erase(h.before,c,1);return}}for(c=0,b=h.after.length;c<b;c++){if(h.after[c].fn==g&&h.after[c].scope==f){Ext.Array.erase(h.after,c,1);return}}},toggleEventLogging:function(b){Ext.util.Observable[b?"capture":"releaseCapture"](this,function(c){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(c,arguments)}})}}}())});Ext.define("Ext.app.Controller",{mixins:{observable:"Ext.util.Observable"},onClassExtended:function(i,c){var h=Ext.getClassName(i),e=h.match(/^(.*)\.controller\./);if(e!==null){var a=Ext.Loader.getPrefix(h)||e[1],g=c.onBeforeClassCreated,k=[],b=["model","view","store"],f;c.onBeforeClassCreated=function(u,n){var p,r,l,s,m,q,t;for(p=0,r=b.length;p<r;p++){l=b[p];s=Ext.Array.from(n[l+"s"]);for(m=0,q=s.length;m<q;m++){t=s[m];f=Ext.Loader.getPrefix(t);if(f===""||f===t){k.push(a+"."+l+"."+t)}else{k.push(t)}}}Ext.require(k,Ext.Function.pass(g,arguments,this))}}},constructor:function(a){this.mixins.observable.constructor.call(this,a);Ext.apply(this,a||{});this.createGetters("model",this.models);this.createGetters("store",this.stores);this.createGetters("view",this.views);if(this.refs){this.ref(this.refs)}},init:function(a){},onLaunch:function(a){},createGetters:function(b,a){b=Ext.String.capitalize(b);Ext.Array.each(a,function(e){var c="get",f=e.split(".");Ext.Array.each(f,function(g){c+=Ext.String.capitalize(g)});c+=b;if(!this[c]){this[c]=Ext.Function.pass(this["get"+b],[e],this)}this[c](e)},this)},ref:function(a){var b=this;a=Ext.Array.from(a);Ext.Array.each(a,function(f){var e=f.ref,c="get"+Ext.String.capitalize(e);if(!b[c]){b[c]=Ext.Function.pass(b.getRef,[e,f],b)}})},getRef:function(f,g,b){this.refCache=this.refCache||{};g=g||{};b=b||{};Ext.apply(g,b);if(g.forceCreate){return Ext.ComponentManager.create(g,"component")}var e=this,a=g.selector,c=e.refCache[f];if(!c){e.refCache[f]=c=Ext.ComponentQuery.query(g.selector)[0];if(!c&&g.autoCreate){e.refCache[f]=c=Ext.ComponentManager.create(g,"component")}if(c){c.on("beforedestroy",function(){e.refCache[f]=null})}}return c},control:function(a,b){this.application.control(a,b,this)},getController:function(a){return this.application.getController(a)},getStore:function(a){return this.application.getStore(a)},getModel:function(a){return this.application.getModel(a)},getView:function(a){return this.application.getView(a)}});Ext.define("Ext.app.EventBus",{requires:["Ext.util.Event"],mixins:{observable:"Ext.util.Observable"},constructor:function(){this.mixins.observable.constructor.call(this);this.bus={};var a=this;Ext.override(Ext.Component,{fireEvent:function(b){if(Ext.util.Observable.prototype.fireEvent.apply(this,arguments)!==false){return a.dispatch.call(a,b,this,arguments)}return false}})},dispatch:function(m,g,l){var h=this.bus,n=h[m],e,c,b,p,a,f,k;if(n){for(e in n){if(g.is(e)){c=n[e];for(b in c){p=c[b];for(f=0,k=p.length;f<k;f++){a=p[f];if(a.fire.apply(a,Array.prototype.slice.call(l,1))===false){return false}}}}}}},control:function(e,g,c){var b=this.bus,a,f;if(Ext.isString(e)){a=e;e={};e[a]=g;this.control(e,null,c);return}Ext.Object.each(e,function(h,i){Ext.Object.each(i,function(n,p){var k={},l=c,m=Ext.create("Ext.util.Event",c,n);if(Ext.isObject(p)){k=p;p=k.fn;l=k.scope||c;delete k.fn;delete k.scope}m.addListener(p,l,k);b[n]=b[n]||{};b[n][h]=b[n][h]||{};b[n][h][c.id]=b[n][h][c.id]||[];b[n][h][c.id].push(m)})})}});Ext.define("Ext.data.Connection",{mixins:{observable:"Ext.util.Observable"},statics:{requestId:0},url:null,async:true,method:null,username:"",password:"",disableCaching:true,withCredentials:false,cors:false,disableCachingParam:"_dc",timeout:30000,useDefaultHeader:true,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest",constructor:function(a){a=a||{};Ext.apply(this,a);this.addEvents("beforerequest","requestcomplete","requestexception");this.requests={};this.mixins.observable.constructor.call(this)},request:function(l){l=l||{};var g=this,k=l.scope||window,f=l.username||g.username,h=l.password||g.password||"",b,c,e,a,i;if(g.fireEvent("beforerequest",g,l)!==false){c=g.setOptions(l,k);if(this.isFormUpload(l)===true){this.upload(l.form,c.url,c.data,l);return null}if(l.autoAbort===true||g.autoAbort){g.abort()}if((l.cors===true||g.cors===true)&&Ext.isIe&&Ext.ieVersion>=8){i=new XDomainRequest()}else{i=this.getXhrInstance()}b=l.async!==false?(l.async||g.async):false;if(f){i.open(c.method,c.url,b,f,h)}else{i.open(c.method,c.url,b)}if(l.withCredentials===true||g.withCredentials===true){i.withCredentials=true}a=g.setupHeaders(i,l,c.data,c.params);e={id:++Ext.data.Connection.requestId,xhr:i,headers:a,options:l,async:b,timeout:setTimeout(function(){e.timedout=true;g.abort(e)},l.timeout||g.timeout)};g.requests[e.id]=e;g.latestId=e.id;if(b){i.onreadystatechange=Ext.Function.bind(g.onStateChange,g,[e])}i.send(c.data);if(!b){return this.onComplete(e)}return e}else{Ext.callback(l.callback,l.scope,[l,undefined,undefined]);return null}},upload:function(e,b,i,l){e=Ext.getDom(e);l=l||{};var c=Ext.id(),g=document.createElement("iframe"),k=[],h="multipart/form-data",f={target:e.target,method:e.method,encoding:e.encoding,enctype:e.enctype,action:e.action},a;Ext.fly(g).set({id:c,name:c,cls:Ext.baseCSSPrefix+"hide-display",src:Ext.SSL_SECURE_URL});document.body.appendChild(g);if(document.frames){document.frames[c].name=c}Ext.fly(e).set({target:c,method:"POST",enctype:h,encoding:h,action:b||f.action});if(i){Ext.iterate(Ext.Object.fromQueryString(i),function(m,n){a=document.createElement("input");Ext.fly(a).set({type:"hidden",value:n,name:m});e.appendChild(a);k.push(a)})}Ext.fly(g).on("load",Ext.Function.bind(this.onUploadComplete,this,[g,l]),null,{single:true});e.submit();Ext.fly(e).set(f);Ext.each(k,function(m){Ext.removeNode(m)})},onUploadComplete:function(i,b){var c=this,a={responseText:"",responseXML:null},h,g;try{h=i.contentWindow.document||i.contentDocument||window.frames[i.id].document;if(h){if(h.body){if(/textarea/i.test((g=h.body.firstChild||{}).tagName)){a.responseText=g.value}else{a.responseText=h.body.innerHTML}}a.responseXML=h.XMLDocument||h}}catch(f){}c.fireEvent("requestcomplete",c,a,b);Ext.callback(b.success,b.scope,[a,b]);Ext.callback(b.callback,b.scope,[b,true,a]);setTimeout(function(){Ext.removeNode(i)},100)},isFormUpload:function(a){var b=this.getForm(a);if(b){return(a.isUpload||(/multipart\/form-data/i).test(b.getAttribute("enctype")))}return false},getForm:function(a){return Ext.getDom(a.form)||null},setOptions:function(m,l){var i=this,f=m.params||{},h=i.extraParams,e=m.urlParams,c=m.url||i.url,k=m.jsonData,b,a,g;if(Ext.isFunction(f)){f=f.call(l,m)}if(Ext.isFunction(c)){c=c.call(l,m)}c=this.setupUrl(m,c);if(!c){Ext.Error.raise({options:m,msg:"No URL specified"})}g=m.rawData||m.xmlData||k||null;if(k&&!Ext.isPrimitive(k)){g=Ext.encode(g)}if(Ext.isObject(f)){f=Ext.Object.toQueryString(f)}if(Ext.isObject(h)){h=Ext.Object.toQueryString(h)}f=f+((h)?((f)?"&":"")+h:"");e=Ext.isObject(e)?Ext.Object.toQueryString(e):e;f=this.setupParams(m,f);b=(m.method||i.method||((f||g)?"POST":"GET")).toUpperCase();this.setupMethod(m,b);a=m.disableCaching!==false?(m.disableCaching||i.disableCaching):false;if(b==="GET"&&a){c=Ext.urlAppend(c,(m.disableCachingParam||i.disableCachingParam)+"="+(new Date().getTime()))}if((b=="GET"||g)&&f){c=Ext.urlAppend(c,f);f=null}if(e){c=Ext.urlAppend(c,e)}return{url:c,method:b,data:g||f||null}},setupUrl:function(b,a){var c=this.getForm(b);if(c){a=a||c.action}return a},setupParams:function(a,e){var c=this.getForm(a),b;if(c&&!this.isFormUpload(a)){b=Ext.Element.serializeForm(c);e=e?(e+"&"+b):b}return e},setupMethod:function(a,b){if(this.isFormUpload(a)){return"POST"}return b},setupHeaders:function(n,p,f,c){var i=this,b=Ext.apply({},p.headers||{},i.defaultHeaders||{}),m=i.defaultPostHeader,k=p.jsonData,a=p.xmlData,l,g;if(!b["Content-Type"]&&(f||c)){if(f){if(p.rawData){m="text/plain"}else{if(a&&Ext.isDefined(a)){m="text/xml"}else{if(k&&Ext.isDefined(k)){m="application/json"}}}}b["Content-Type"]=m}if(i.useDefaultXhrHeader&&!b["X-Requested-With"]){b["X-Requested-With"]=i.defaultXhrHeader}try{for(l in b){if(b.hasOwnProperty(l)){g=b[l];n.setRequestHeader(l,g)}}}catch(h){i.fireEvent("exception",l,g)}return b},getXhrInstance:(function(){var b=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0,a=b.length,g;for(;c<a;++c){try{g=b[c];g();break}catch(f){}}return g})(),isLoading:function(a){if(!a){a=this.getLatest()}if(!(a&&a.xhr)){return false}var b=a.xhr.readyState;return !(b===0||b==4)},abort:function(b){var a=this;if(!b){b=a.getLatest()}if(b&&a.isLoading(b)){b.xhr.onreadystatechange=null;b.xhr.abort();a.clearTimeout(b);if(!b.timedout){b.aborted=true}a.onComplete(b);a.cleanup(b)}},abortAll:function(){var b=this.requests,a;for(a in b){if(b.hasOwnProperty(a)){this.abort(b[a])}}},getLatest:function(){var b=this.latestId,a;if(b){a=this.requests[b]}return a||null},onStateChange:function(a){if(a.xhr.readyState==4){this.clearTimeout(a);this.onComplete(a);this.cleanup(a)}},clearTimeout:function(a){clearTimeout(a.timeout);delete a.timeout},cleanup:function(a){a.xhr=null;delete a.xhr},onComplete:function(g){var f=this,c=g.options,a,i,b;try{a=f.parseStatus(g.xhr.status)}catch(h){a={success:false,isException:false}}i=a.success;if(i){b=f.createResponse(g);f.fireEvent("requestcomplete",f,b,c);Ext.callback(c.success,c.scope,[b,c])}else{if(a.isException||g.aborted||g.timedout){b=f.createException(g)}else{b=f.createResponse(g)}f.fireEvent("requestexception",f,b,c);Ext.callback(c.failure,c.scope,[b,c])}Ext.callback(c.callback,c.scope,[c,i,b]);delete f.requests[g.id];return b},parseStatus:function(a){a=a==1223?204:a;var c=(a>=200&&a<300)||a==304,b=false;if(!c){switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:b=true;break}}return{success:c,isException:b}},createResponse:function(c){var i=c.xhr,a={},k=i.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),e=k.length,l,f,h,g,b;while(e--){l=k[e];f=l.indexOf(":");if(f>=0){h=l.substr(0,f).toLowerCase();if(l.charAt(f+1)==" "){++f}a[h]=l.substr(f+1)}}c.xhr=null;delete c.xhr;b={request:c,requestId:c.id,status:i.status,statusText:i.statusText,getResponseHeader:function(m){return a[m.toLowerCase()]},getAllResponseHeaders:function(){return a},responseText:i.responseText,responseXML:i.responseXML};i=null;return b},createException:function(a){return{request:a,requestId:a.id,status:a.aborted?-1:0,statusText:a.aborted?"transaction aborted":"communication failure",aborted:a.aborted,timedout:a.timedout}}});Ext.define("Ext.util.Floating",{uses:["Ext.Layer","Ext.window.Window"],focusOnToFront:true,shadow:"sides",constructor:function(a){var b=this;b.floating=true;b.el=Ext.create("Ext.Layer",Ext.apply({},a,{hideMode:b.hideMode,hidden:b.hidden,shadow:Ext.isDefined(b.shadow)?b.shadow:"sides",shadowOffset:b.shadowOffset,constrain:false,shim:b.shim===false?false:undefined}),b.el)},onFloatRender:function(){var a=this;a.zIndexParent=a.getZIndexParent();a.setFloatParent(a.ownerCt);delete a.ownerCt;if(a.zIndexParent){a.zIndexParent.registerFloatingItem(a)}else{Ext.WindowManager.register(a)}},setFloatParent:function(b){var a=this;if(a.floatParent){a.mun(a.floatParent,{hide:a.onFloatParentHide,show:a.onFloatParentShow,scope:a})}a.floatParent=b;if(b){a.mon(a.floatParent,{hide:a.onFloatParentHide,show:a.onFloatParentShow,scope:a})}if((a.constrain||a.constrainHeader)&&!a.constrainTo){a.constrainTo=b?b.getTargetEl():a.container}},onFloatParentHide:function(){var a=this;if(a.hideOnParentHide!==false){a.showOnParentShow=a.isVisible();a.hide()}},onFloatParentShow:function(){if(this.showOnParentShow){delete this.showOnParentShow;this.show()}},getZIndexParent:function(){var a=this.ownerCt,b;if(a){while(a){b=a;a=a.ownerCt}if(b.floating){return b}}},setZIndex:function(a){var b=this;b.el.setZIndex(a);a+=10;if(b.floatingItems){a=Math.floor(b.floatingItems.setBase(a)/100)*100+10000}return a},doConstrain:function(b){var c=this,a=c.getConstrainVector(b||c.el.getScopeParent()),e;if(a){e=c.getPosition();e[0]+=a[0];e[1]+=a[1];c.setPosition(e)}},getConstrainVector:function(b){var c=this,a;if(c.constrain||c.constrainHeader){a=c.constrainHeader?c.header.el:c.el;b=b||(c.floatParent&&c.floatParent.getTargetEl())||c.container;return a.getConstrainVector(b)}},alignTo:function(b,a,c){if(b.isComponent){b=b.getEl()}var e=this.el.getAlignToXY(b,a,c);this.setPagePosition(e);return this},toFront:function(b){var a=this;if(a.zIndexParent){a.zIndexParent.toFront(true)}if(a.zIndexManager.bringToFront(a)){if(!Ext.isDefined(b)){b=!a.focusOnToFront}if(!b){a.focus(false,true)}}return a},setActive:function(b,c){var a=this;if(b){if(a.el.shadow&&!a.maximized){a.el.enableShadow(true)}a.fireEvent("activate",a)}else{if((a instanceof Ext.window.Window)&&(c instanceof Ext.window.Window)){a.el.disableShadow()}a.fireEvent("deactivate",a)}},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var a=this,b=a.el.getAlignToXY(a.container,"c-c");a.setPagePosition(b);return a},syncShadow:function(){if(this.floating){this.el.sync(true)}},fitContainer:function(){var c=this.floatParent,a=c?c.getTargetEl():this.container,b=a.getViewSize(false);this.setSize(b)}});Ext.define("Ext.form.action.Action",{alternateClassName:"Ext.form.Action",submitEmptyText:true,constructor:function(a){if(a){Ext.apply(this,a)}var b=a.params;if(Ext.isString(b)){this.params=Ext.Object.fromQueryString(b)}},run:Ext.emptyFn,onFailure:function(a){this.response=a;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;this.form.afterAction(this,false)},processResponse:function(a){this.response=a;if(!a.responseText&&!a.responseXML){return true}return(this.result=this.handleResponse(a))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var c=this,a,b=c.form;return{success:c.onSuccess,failure:c.onFailure,scope:c,timeout:(this.timeout*1000)||(b.timeout*1000),upload:b.fileUpload?c.onSuccess:a}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}});Ext.define("Ext.Template",{requires:["Ext.DomHelper","Ext.util.Format"],inheritableStatics:{from:function(b,a){b=Ext.getDom(b);return new this(b.value||b.innerHTML,a||"")}},constructor:function(e){var g=this,b=arguments,a=[],c=0,f=b.length,h;g.initialConfig={};if(f>1){for(;c<f;c++){h=b[c];if(typeof h=="object"){Ext.apply(g.initialConfig,h);Ext.apply(g,h)}else{a.push(h)}}e=a.join("")}else{if(Ext.isArray(e)){a.push(e.join(""))}else{a.push(e)}}g.html=a.join("");if(g.compiled){g.compile()}},isTemplate:true,disableFormats:false,re:/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,applyTemplate:function(a){var g=this,c=g.disableFormats!==true,f=Ext.util.Format,b=g;if(g.compiled){return g.compiled(a)}function e(h,k,l,i){if(l&&c){if(i){i=[a[k]].concat(Ext.functionFactory("return ["+i+"];")())}else{i=[a[k]]}if(l.substr(0,5)=="this."){return b[l.substr(5)].apply(b,i)}else{return f[l].apply(f,i)}}else{return a[k]!==undefined?a[k]:""}}return g.html.replace(g.re,e)},set:function(a,c){var b=this;b.html=a;b.compiled=null;return c?b.compile():b},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var me=this,fm=Ext.util.Format,useFormat=me.disableFormats!==true,body,bodyReturn;function fn(m,name,format,args){if(format&&useFormat){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format="this."+format.substr(5)+"("}}else{args="";format="(values['"+name+"'] == undefined ? '' : "}return"',"+format+"values['"+name+"']"+args+") ,'"}bodyReturn=me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn);body="this.compiled = function(values){ return ['"+bodyReturn+"'].join('');};";eval(body);return me},insertFirst:function(b,a,c){return this.doInsert("afterBegin",b,a,c)},insertBefore:function(b,a,c){return this.doInsert("beforeBegin",b,a,c)},insertAfter:function(b,a,c){return this.doInsert("afterEnd",b,a,c)},append:function(b,a,c){return this.doInsert("beforeEnd",b,a,c)},doInsert:function(c,f,b,a){f=Ext.getDom(f);var e=Ext.DomHelper.insertHtml(c,f,this.applyTemplate(b));return a?Ext.get(e,true):e},overwrite:function(b,a,c){b=Ext.getDom(b);b.innerHTML=this.applyTemplate(a);return c?Ext.get(b.firstChild,true):b.firstChild}},function(){this.createAlias("apply","applyTemplate")});Ext.define("Ext.data.IdGenerator",{isGenerator:true,constructor:function(a){var b=this;Ext.apply(b,a);if(b.id){Ext.data.IdGenerator.all[b.id]=b}},getRecId:function(a){return a.modelName+"-"+a.internalId},statics:{all:{},get:function(a){var c,e,b;if(typeof a=="string"){e=b=a;a=null}else{if(a.isGenerator){return a}else{e=a.id||a.type;b=a.type}}c=this.all[e];if(!c){c=Ext.create("idgen."+b,a)}return c}}});Ext.define("Ext.data.Association",{primaryKey:"id",defaultReaderType:"json",statics:{create:function(a){if(!a.isAssociation){if(Ext.isString(a)){a={type:a}}switch(a.type){case"belongsTo":return Ext.create("Ext.data.BelongsToAssociation",a);case"hasMany":return Ext.create("Ext.data.HasManyAssociation",a);default:Ext.Error.raise('Unknown Association type: "'+a.type+'"')}}return a}},constructor:function(b){Ext.apply(this,b);var c=Ext.ModelManager.types,e=b.ownerModel,g=b.associatedModel,f=c[e],h=c[g],a;if(f===undefined){Ext.Error.raise("The configured ownerModel was not valid (you tried "+e+")")}if(h===undefined){Ext.Error.raise("The configured associatedModel was not valid (you tried "+g+")")}this.ownerModel=f;this.associatedModel=h;Ext.applyIf(this,{ownerName:e,associatedName:g})},getReader:function(){var c=this,a=c.reader,b=c.associatedModel;if(a){if(Ext.isString(a)){a={type:a}}if(a.isReader){a.setModel(b)}else{Ext.applyIf(a,{model:b,type:c.defaultReaderType})}c.reader=Ext.createByAlias("reader."+a.type,a)}return c.reader||null}});Ext.define("Ext.data.Operation",{synchronous:true,action:undefined,filters:undefined,sorters:undefined,group:undefined,start:undefined,limit:undefined,batch:undefined,callback:undefined,scope:undefined,started:false,running:false,complete:false,success:undefined,exception:false,error:undefined,actionCommitRecordsRe:/^(?:create|update)$/i,actionSkipSyncRe:/^destroy$/i,constructor:function(a){Ext.apply(this,a||{})},commitRecords:function(b){var g=this,h,c,e,f,a;if(!g.actionSkipSyncRe.test(g.action)){e=g.records;if(e&&e.length){h=Ext.create("Ext.util.MixedCollection",true,function(i){return i.getId()});h.addAll(e);for(c=b?b.length:0;c--;){f=b[c];a=h.get(f.getId());if(a){a.beginEdit();a.set(f.data);a.endEdit(true)}}if(g.actionCommitRecordsRe.test(g.action)){for(c=e.length;c--;){e[c].commit()}}}}},setStarted:function(){this.started=true;this.running=true},setCompleted:function(){this.complete=true;this.running=false},setSuccessful:function(){this.success=true},setException:function(a){this.exception=true;this.success=false;this.running=false;this.error=a},hasException:function(){return this.exception===true},getError:function(){return this.error},getRecords:function(){var a=this.getResultSet();return(a===undefined?this.records:a.records)},getResultSet:function(){return this.resultSet},isStarted:function(){return this.started===true},isRunning:function(){return this.running===true},isComplete:function(){return this.complete===true},wasSuccessful:function(){return this.isComplete()&&this.success===true},setBatch:function(a){this.batch=a},allowWrite:function(){return this.action!="read"}});Ext.define("Ext.data.validations",{singleton:true,presenceMessage:"must be present",lengthMessage:"is the wrong length",formatMessage:"is the wrong format",inclusionMessage:"is not included in the list of acceptable values",exclusionMessage:"is not an acceptable value",emailMessage:"is not a valid email address",emailRe:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,presence:function(a,b){if(b===undefined){b=a}return !!b||b===0},length:function(b,f){if(f===undefined||f===null){return false}var e=f.length,c=b.min,a=b.max;if((c&&e<c)||(a&&e>a)){return false}else{return true}},email:function(b,a){return Ext.data.validations.emailRe.test(a)},format:function(a,b){return !!(a.matcher&&a.matcher.test(b))},inclusion:function(a,b){return a.list&&Ext.Array.indexOf(a.list,b)!=-1},exclusion:function(a,b){return a.list&&Ext.Array.indexOf(a.list,b)==-1}});Ext.define("Ext.util.Sorter",{direction:"ASC",constructor:function(a){var b=this;Ext.apply(b,a);if(b.property===undefined&&b.sorterFn===undefined){Ext.Error.raise("A Sorter requires either a property or a sorter function")}b.updateSortFunction()},createSortFunction:function(b){var c=this,e=c.property,f=c.direction||"ASC",a=f.toUpperCase()=="DESC"?-1:1;return function(h,g){return a*b.call(c,h,g)}},defaultSorterFn:function(e,c){var b=this,a=b.transform,g=b.getRoot(e)[b.property],f=b.getRoot(c)[b.property];if(a){g=a(g);f=a(f)}return g>f?1:(g<f?-1:0)},getRoot:function(a){return this.root===undefined?a:a[this.root]},setDirection:function(b){var a=this;a.direction=b;a.updateSortFunction()},toggle:function(){var a=this;a.direction=Ext.String.toggle(a.direction,"ASC","DESC");a.updateSortFunction()},updateSortFunction:function(a){var b=this;a=a||b.sorterFn||b.defaultSorterFn;b.sort=b.createSortFunction(a)}});Ext.define("Ext.util.Filter",{anyMatch:false,exactMatch:false,caseSensitive:false,constructor:function(a){var b=this;Ext.apply(b,a);b.filter=b.filter||b.filterFn;if(b.filter===undefined){if(b.property===undefined||b.value===undefined){}else{b.filter=b.createFilterFn()}b.filterFn=b.filter}},createFilterFn:function(){var a=this,c=a.createValueMatcher(),b=a.property;return function(e){var f=a.getRoot.call(a,e)[b];return c===null?f===null:c.test(f)}},getRoot:function(b){var a=this.root;return a===undefined?b:b[a]},createValueMatcher:function(){var e=this,f=e.value,g=e.anyMatch,c=e.exactMatch,a=e.caseSensitive,b=Ext.String.escapeRegex;if(f===null){return f}if(!f.exec){f=String(f);if(g===true){f=b(f)}else{f="^"+b(f);if(c===true){f+="$"}}f=new RegExp(f,a?"":"i")}return f}});Ext.define("Ext.util.Animate",{uses:["Ext.fx.Manager","Ext.fx.Anim"],animate:function(a){var b=this;if(Ext.fx.Manager.hasFxBlock(b.id)){return b}Ext.fx.Manager.queueFx(Ext.create("Ext.fx.Anim",b.anim(a)));return this},anim:function(a){if(!Ext.isObject(a)){return(a)?{}:false}var b=this;if(a.stopAnimation){b.stopAnimation()}Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id));return Ext.apply({target:b,paused:true},a)},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){Ext.fx.Manager.stopAnimation(this.id);return this},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:true});return this},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:false});return this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},function(){Ext.applyIf(Ext.Element.prototype,this.prototype);Ext.CompositeElementLite.importElementMethods()});Ext.define("Ext.ComponentQuery",{singleton:true,uses:["Ext.ComponentManager"]},function(){var h=this,l=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),f=function(r,q){return q.method.apply(this,[r].concat(q.args))},a=function(s,w){var q=[],t=0,v=s.length,u,r=w!==">";for(;t<v;t++){u=s[t];if(u.getRefItems){q=q.concat(u.getRefItems(r))}}return q},g=function(r){var q=[],s=0,u=r.length,t;for(;s<u;s++){t=r[s];while(!!(t=(t.ownerCt||t.floatParent))){q.push(t)}}return q},n=function(r,w,v){if(w==="*"){return r.slice()}else{var q=[],s=0,u=r.length,t;for(;s<u;s++){t=r[s];if(t.isXType(w,v)){q.push(t)}}return q}},k=function(r,u){var w=Ext.Array,q=[],s=0,v=r.length,t;for(;s<v;s++){t=r[s];if(t.el?t.el.hasCls(u):w.contains(t.initCls(),u)){q.push(t)}}return q},p=function(s,x,r,w){var q=[],t=0,v=s.length,u;for(;t<v;t++){u=s[t];if(!w?!!u[x]:(String(u[x])===w)){q.push(u)}}return q},e=function(r,v){var q=[],s=0,u=r.length,t;for(;s<u;s++){t=r[s];if(t.getItemId()===v){q.push(t)}}return q},m=function(q,r,s){return h.pseudos[r](q,s)},i=/^(\s?([>\^])\s?|\s|$)/,c=/^(#)?([\w\-]+|\*)(?:\((true|false)\))?/,b=[{re:/^\.([\w\-]+)(?:\((true|false)\))?/,method:n},{re:/^(?:[\[](?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]])/,method:p},{re:/^#([\w\-]+)/,method:e},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:m},{re:/^(?:\{([^\}]+)\})/,method:l}];h.Query=Ext.extend(Object,{constructor:function(q){q=q||{};Ext.apply(this,q)},execute:function(r){var t=this.operations,u=0,v=t.length,s,q;if(!r){q=Ext.ComponentManager.all.getArray()}else{if(Ext.isArray(r)){q=r}}for(;u<v;u++){s=t[u];if(s.mode==="^"){q=g(q||[r])}else{if(s.mode){q=a(q||[r],s.mode)}else{q=f(q||a([r]),s)}}if(u===v-1){return q}}return[]},is:function(s){var r=this.operations,v=Ext.isArray(s)?s:[s],q=v.length,w=r[r.length-1],u,t;v=f(v,w);if(v.length===q){if(r.length>1){for(t=0,u=v.length;t<u;t++){if(Ext.Array.indexOf(this.execute(),v[t])===-1){return false}}}return true}return false}});Ext.apply(this,{cache:{},pseudos:{not:function(w,q){var x=Ext.ComponentQuery,u=0,v=w.length,t=[],s=-1,r;for(;u<v;++u){r=w[u];if(!x.is(r,q)){t[++s]=r}}return t},last:function(q){return q[q.length-1]}},query:function(r,y){var z=r.split(","),q=z.length,s=0,t=[],A=[],x={},v,u,w;for(;s<q;s++){r=Ext.String.trim(z[s]);v=this.cache[r];if(!v){this.cache[r]=v=this.parse(r)}t=t.concat(v.execute(y))}if(q>1){u=t.length;for(s=0;s<u;s++){w=t[s];if(!x[w.id]){A.push(w);x[w.id]=true}}t=A}return t},is:function(r,q){if(!q){return true}var s=this.cache[q];if(!s){this.cache[q]=s=this.parse(q)}return s.is(r)},parse:function(t){var r=[],s=b.length,x,u,y,z,A,v,w,q;while(t&&x!==t){x=t;u=t.match(c);if(u){y=u[1];if(y==="#"){r.push({method:e,args:[Ext.String.trim(u[2])]})}else{if(y==="."){r.push({method:k,args:[Ext.String.trim(u[2])]})}else{r.push({method:n,args:[Ext.String.trim(u[2]),Boolean(u[3])]})}}t=t.replace(u[0],"")}while(!(z=t.match(i))){for(v=0;t&&v<s;v++){w=b[v];A=t.match(w.re);q=w.method;if(A){r.push({method:Ext.isString(w.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[q].concat(A.slice(1)))):w.method,args:A.slice(1)});t=t.replace(A[0],"");break}if(v===(s-1)){Ext.Error.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}}}if(z[1]){r.push({mode:z[2]||z[1]});t=t.replace(z[0],"")}}return new h.Query({operations:r})}})});Ext.define("Ext.form.field.VTypes",(function(){var c=/^[a-zA-Z_]+$/,e=/^[a-zA-Z0-9_]+$/,b=/^(\w+)([\-+.][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,a=/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{singleton:true,alternateClassName:"Ext.form.VTypes",email:function(f){return b.test(f)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[a-z0-9_\.\-@\+]/i,url:function(f){return a.test(f)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(f){return c.test(f)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(f){return e.test(f)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}})());Ext.define("Ext.util.TextMetrics",{statics:{shared:null,measure:function(a,e,f){var b=this,c=b.shared;if(!c){c=b.shared=new b(a,f)}c.bind(a);c.setFixedWidth(f||"auto");return c.getSize(e)},destroy:function(){var a=this;Ext.destroy(a.shared);a.shared=null}},constructor:function(a,c){var b=this.measure=Ext.getBody().createChild({cls:"x-textmetrics"});this.el=Ext.get(a);b.position("absolute");b.setLeftTop(-1000,-1000);b.hide();if(c){b.setWidth(c)}},getSize:function(c){var b=this.measure,a;b.update(c);a=b.getSize();b.update("");return a},bind:function(a){var b=this;b.el=Ext.get(a);b.measure.setStyle(b.el.getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(a){this.measure.setWidth(a)},getWidth:function(a){this.measure.dom.style.width="auto";return this.getSize(a).width},getHeight:function(a){return this.getSize(a).height},destroy:function(){var a=this;a.measure.remove();delete a.el;delete a.measure}},function(){Ext.Element.addMethods({getTextWidth:function(c,b,a){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.value(c,this.dom.innerHTML,true)).width,b||0,a||1000000)}})});Ext.define("Ext.util.ClickRepeater",{extend:"Ext.util.Observable",constructor:function(b,a){this.el=Ext.get(b);this.el.unselectable();Ext.apply(this,a);this.addEvents("mousedown","click","mouseup");if(!this.disabled){this.disabled=true;this.enable()}if(this.handler){this.on("click",this.handler,this.scope||this)}this.callParent()},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE){this.el.on("dblclick",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(a){if(a||!this.disabled){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.removeAllListeners()}this.disabled=true},setDisabled:function(a){this[a?"disable":"enable"]()},eventOptions:function(a){if(this.preventDefault){a.preventDefault()}if(this.stopDefault){a.stopEvent()}},destroy:function(){this.disable(true);Ext.destroy(this.el);this.clearListeners()},handleDblClick:function(a){clearTimeout(this.timer);this.el.blur();this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a)},handleMouseDown:function(a){clearTimeout(this.timer);this.el.blur();if(this.pressedCls){this.el.addCls(this.pressedCls)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a);if(this.accelerate){this.delay=400}a=new Ext.EventObjectImpl(a);this.timer=Ext.defer(this.click,this.delay||this.interval,this,[a])},click:function(a){this.fireEvent("click",this,a);this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12000):this.interval,this,[a])},easeOutExpo:function(e,a,g,f){return(e==f)?a+g:g*(-Math.pow(2,-10*e/f)+1)+a},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.click()},handleMouseUp:function(a){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.fireEvent("mouseup",this,a)}});Ext.define("Ext.util.HashMap",{mixins:{observable:"Ext.util.Observable"},constructor:function(a){a=a||{};var c=this,b=a.keyFn;c.addEvents("add","clear","remove","replace");c.mixins.observable.constructor.call(c,a);c.clear(true);if(b){c.getKey=b}},getCount:function(){return this.length},getData:function(a,b){if(b===undefined){b=a;a=this.getKey(b)}return[a,b]},getKey:function(a){return a.id},add:function(a,e){var b=this,c;if(arguments.length===1){e=a;a=b.getKey(e)}if(b.containsKey(a)){return b.replace(a,e)}c=b.getData(a,e);a=c[0];e=c[1];b.map[a]=e;++b.length;b.fireEvent("add",b,a,e);return e},replace:function(b,e){var c=this,f=c.map,a;if(!c.containsKey(b)){c.add(b,e)}a=f[b];f[b]=e;c.fireEvent("replace",c,b,e,a);return e},remove:function(b){var a=this.findKey(b);if(a!==undefined){return this.removeAtKey(a)}return false},removeAtKey:function(a){var b=this,c;if(b.containsKey(a)){c=b.map[a];delete b.map[a];--b.length;b.fireEvent("remove",b,a,c);return true}return false},get:function(a){return this.map[a]},clear:function(a){var b=this;b.map={};b.length=0;if(a!==true){b.fireEvent("clear",b)}return b},containsKey:function(a){return this.map[a]!==undefined},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(true)},getValues:function(){return this.getArray(false)},getArray:function(e){var a=[],b,c=this.map;for(b in c){if(c.hasOwnProperty(b)){a.push(e?b:c[b])}}return a},each:function(e,c){var a=Ext.apply({},this.map),b,f=this.length;c=c||this;for(b in a){if(a.hasOwnProperty(b)){if(e.call(c,b,a[b],f)===false){break}}}return this},clone:function(){var c=new this.self(),b=this.map,a;c.suspendEvents();for(a in b){if(b.hasOwnProperty(a)){c.add(a,b[a])}}c.resumeEvents();return c},findKey:function(b){var a,c=this.map;for(a in c){if(c.hasOwnProperty(a)&&c[a]===b){return a}}return undefined}});Ext.define("Ext.util.KeyMap",{alternateClassName:"Ext.KeyMap",constructor:function(b,e,a){var c=this;Ext.apply(c,{el:Ext.get(b),eventName:a||c.eventName,bindings:[]});if(e){c.addBinding(e)}c.enable()},eventName:"keydown",addBinding:function(h){if(Ext.isArray(h)){Ext.each(h,this.addBinding,this);return}var g=h.key,k=false,e,f,b,c,a;if(Ext.isString(g)){f=[];b=g.toUpperCase();for(c=0,a=b.length;c<a;++c){f.push(b.charCodeAt(c))}g=f;k=true}if(!Ext.isArray(g)){g=[g]}if(!k){for(c=0,a=g.length;c<a;++c){e=g[c];if(Ext.isString(e)){g[c]=e.toUpperCase().charCodeAt(0)}}}this.bindings.push(Ext.apply({keyCode:g},h))},handleKeyDown:function(c){if(this.enabled){var e=this.bindings,b=0,a=e.length;c=this.processEvent(c);for(;b<a;++b){this.processBinding(e[b],c)}}},processEvent:function(a){return a},processBinding:function(g,a){if(this.checkModifiers(g,a)){var h=a.getKey(),l=g.fn||g.handler,m=g.scope||this,k=g.keyCode,b=g.defaultEventAction,c,f,e=new Ext.EventObjectImpl(a);for(c=0,f=k.length;c<f;++c){if(h===k[c]){if(l.call(m,h,a)!==true&&b){e[b]()}break}}}},checkModifiers:function(k,g){var f=["shift","ctrl","alt"],c=0,a=f.length,h,b;for(;c<a;++c){b=f[c];h=k[b];if(!(h===undefined||(h===g[b+"Key"]))){return false}}return true},on:function(b,e,c){var h,a,f,g;if(Ext.isObject(b)&&!Ext.isArray(b)){h=b.key;a=b.shift;f=b.ctrl;g=b.alt}else{h=b}this.addBinding({key:h,shift:a,ctrl:f,alt:g,fn:e,scope:c})},isEnabled:function(){return this.enabled},enable:function(){var a=this;if(!a.enabled){a.el.on(a.eventName,a.handleKeyDown,a);a.enabled=true}},disable:function(){var a=this;if(a.enabled){a.el.removeListener(a.eventName,a.handleKeyDown,a);a.enabled=false}},setDisabled:function(a){if(a){this.disable()}else{this.enable()}},destroy:function(b){var a=this;a.bindings=[];a.disable();if(b===true){a.el.remove()}delete a.el}});Ext.define("Ext.data.SortTypes",{singleton:true,none:function(a){return a},stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return String(a).replace(this.stripTagsRE,"")},asUCText:function(a){return String(a).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(a){return String(a).toUpperCase()},asDate:function(a){if(!a){return 0}if(Ext.isDate(a)){return a.getTime()}return Date.parse(String(a))},asFloat:function(a){var b=parseFloat(String(a).replace(/,/g,""));return isNaN(b)?0:b},asInt:function(a){var b=parseInt(String(a).replace(/,/g,""),10);return isNaN(b)?0:b}});Ext.define("Ext.Ajax",{extend:"Ext.data.Connection",singleton:true,autoAbort:false});Ext.define("Ext.util.Offset",{statics:{fromObject:function(a){return new this(a.x,a.y)}},constructor:function(a,b){this.x=(a!=null&&!isNaN(a))?a:0;this.y=(b!=null&&!isNaN(b))?b:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(a){this.x=a.x;this.y=a.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(a){if(!(a instanceof this.statics())){Ext.Error.raise("Offset must be an instance of Ext.util.Offset")}return(this.x==a.x&&this.y==a.y)},round:function(b){if(!isNaN(b)){var a=Math.pow(10,b);this.x=Math.round(this.x*a)/a;this.y=Math.round(this.y*a)/a}else{this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x==0&&this.y==0}});Ext.define("Ext.util.Memento",function(){function e(h,g,i){h[i]=g[i]}function c(h,g,i){delete h[i]}function f(i,h,k){var g=i[k];if(g||i.hasOwnProperty(k)){a(h,k,g)}}function a(h,i,g){if(Ext.isDefined(g)){h[i]=g}else{delete h[i]}}function b(g,k,i,h){if(k){if(Ext.isArray(h)){Ext.each(h,function(l){g(k,i,l)})}else{g(k,i,h)}}}return{data:null,target:null,constructor:function(h,g){if(h){this.target=h;if(g){this.capture(g)}}},capture:function(g,h){b(e,this.data||(this.data={}),h||this.target,g)},remove:function(g){b(c,this.data,null,g)},restore:function(h,g,i){b(f,this.data,i||this.target,h);if(g!==false){this.remove(h)}},restoreAll:function(g,k){var i=this,h=k||this.target;Ext.Object.each(i.data,function(m,l){a(h,m,l)});if(g!==false){delete i.data}}}}());Ext.define("Ext.util.KeyNav",{alternateClassName:"Ext.KeyNav",requires:["Ext.util.KeyMap"],statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(b,a){this.setConfig(b,a||{})},setConfig:function(e,a){if(this.map){this.map.destroy()}var g=Ext.create("Ext.util.KeyMap",e,null,this.getKeyEvent("forceKeyDown" in a?a.forceKeyDown:this.forceKeyDown)),f=Ext.util.KeyNav.keyOptions,c=a.scope||this,b;this.map=g;for(b in f){if(f.hasOwnProperty(b)){if(a[b]){g.addBinding({scope:c,key:f[b],handler:Ext.Function.bind(this.handleEvent,c,[a[b]],true),defaultEventAction:a.defaultEventAction||this.defaultEventAction})}}}g.disable();if(!a.disabled){g.enable()}},handleEvent:function(c,b,a){return a.call(this,b)},disabled:false,defaultEventAction:"stopEvent",forceKeyDown:false,destroy:function(a){this.map.destroy(a);delete this.map},enable:function(){this.map.enable();this.disabled=false},disable:function(){this.map.disable();this.disabled=true},setDisabled:function(a){this.map.setDisabled(a);this.disabled=a},getKeyEvent:function(a){return(a||Ext.EventManager.useKeyDown)?"keydown":"keypress"}});Ext.define("Ext.dd.DragTracker",{uses:["Ext.util.Region"],mixins:{observable:"Ext.util.Observable"},active:false,trackOver:false,tolerance:5,autoStart:false,constructor:function(a){Ext.apply(this,a);this.addEvents("mouseover","mouseout","mousedown","mouseup","mousemove","beforedragstart","dragstart","dragend","drag");this.dragRegion=Ext.create("Ext.util.Region",0,0,0,0);if(this.el){this.initEl(this.el)}this.mixins.observable.constructor.call(this);if(this.disabled){this.disable()}},initEl:function(a){this.el=Ext.get(a);this.handle=Ext.get(this.delegate);this.delegate=this.handle?undefined:this.delegate;if(!this.handle){this.handle=this.el}this.mon(this.handle,{mousedown:this.onMouseDown,delegate:this.delegate,scope:this});if(this.trackOver||this.overCls){this.mon(this.handle,{mouseover:this.onMouseOver,mouseout:this.onMouseOut,delegate:this.delegate,scope:this})}},disable:function(){this.disabled=true},enable:function(){this.disabled=false},destroy:function(){this.clearListeners();delete this.el},onMouseOver:function(c,b){var a=this;if(!a.disabled){if(Ext.EventManager.contains(c)||a.delegate){a.mouseIsOut=false;if(a.overCls){a.el.addCls(a.overCls)}a.fireEvent("mouseover",a,c,a.delegate?c.getTarget(a.delegate,b):a.handle)}}},onMouseOut:function(a){if(this.mouseIsDown){this.mouseIsOut=true}else{if(this.overCls){this.el.removeCls(this.overCls)}this.fireEvent("mouseout",this,a)}},onMouseDown:function(b,a){if(this.disabled||b.dragTracked){return}this.dragTarget=this.delegate?a:this.handle.dom;this.startXY=this.lastXY=b.getXY();this.startRegion=Ext.fly(this.dragTarget).getRegion();if(this.fireEvent("mousedown",this,b)===false||this.fireEvent("beforedragstart",this,b)===false||this.onBeforeStart(b)===false){return}this.mouseIsDown=true;b.dragTracked=true;if(this.preventDefault!==false){b.preventDefault()}Ext.getDoc().on({scope:this,mouseup:this.onMouseUp,mousemove:this.onMouseMove,selectstart:this.stopSelect});if(this.autoStart){this.timer=Ext.defer(this.triggerStart,this.autoStart===true?1000:this.autoStart,this,[b])}},onMouseMove:function(f,c){if(this.active&&Ext.isIE&&!f.browserEvent.button){f.preventDefault();this.onMouseUp(f);return}f.preventDefault();var b=f.getXY(),a=this.startXY;this.lastXY=b;if(!this.active){if(Math.max(Math.abs(a[0]-b[0]),Math.abs(a[1]-b[1]))>this.tolerance){this.triggerStart(f)}else{return}}if(this.fireEvent("mousemove",this,f)===false){this.onMouseUp(f)}else{this.onDrag(f);this.fireEvent("drag",this,f)}},onMouseUp:function(a){this.mouseIsDown=false;if(this.mouseIsOut){this.mouseIsOut=false;this.onMouseOut(a)}a.preventDefault();this.fireEvent("mouseup",this,a);this.endDrag(a)},endDrag:function(c){var b=Ext.getDoc(),a=this.active;b.un("mousemove",this.onMouseMove,this);b.un("mouseup",this.onMouseUp,this);b.un("selectstart",this.stopSelect,this);this.clearStart();this.active=false;if(a){this.onEnd(c);this.fireEvent("dragend",this,c)}delete this._constrainRegion;delete Ext.EventObject.dragTracked},triggerStart:function(a){this.clearStart();this.active=true;this.onStart(a);this.fireEvent("dragstart",this,a)},clearStart:function(){if(this.timer){clearTimeout(this.timer);delete this.timer}},stopSelect:function(a){a.stopEvent();return false},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){if(this.constrainTo){if(this.constrainTo instanceof Ext.util.Region){return this.constrainTo}if(!this._constrainRegion){this._constrainRegion=Ext.fly(this.constrainTo).getViewRegion()}}else{if(!this._constrainRegion){this._constrainRegion=this.getDragCt().getViewRegion()}}return this._constrainRegion},getXY:function(a){return a?this.constrainModes[a](this,this.lastXY):this.lastXY},getOffset:function(c){var b=this.getXY(c),a=this.startXY;return[b[0]-a[0],b[1]-a[1]]},constrainModes:{point:function(b,e){var c=b.dragRegion,a=b.getConstrainRegion();if(!a){return e}c.x=c.left=c[0]=c.right=e[0];c.y=c.top=c[1]=c.bottom=e[1];c.constrainTo(a);return[c.left,c.top]},dragTarget:function(c,g){var b=c.startXY,f=c.startRegion.copy(),a=c.getConstrainRegion(),e;if(!a){return g}f.translateBy(g[0]-b[0],g[1]-b[1]);if(f.right>a.right){g[0]+=e=(a.right-f.right);f.left+=e}if(f.left<a.left){g[0]+=(a.left-f.left)}if(f.bottom>a.bottom){g[1]+=e=(a.bottom-f.bottom);f.top+=e}if(f.top<a.top){g[1]+=(a.top-f.top)}return g}}});Ext.define("Ext.form.field.Field",{isFormField:true,disabled:false,submitValue:true,validateOnChange:true,suspendCheckChange:0,initField:function(){this.addEvents("change","validitychange","dirtychange");this.initValue()},initValue:function(){var a=this;a.originalValue=a.lastValue=a.value;a.suspendCheckChange++;a.setValue(a.value);a.suspendCheckChange--},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(b){var a=this;a.value=b;a.checkChange();return a},isEqual:function(b,a){return String(b)===String(a)},isEqualAsString:function(b,a){return String(Ext.value(b,""))===String(Ext.value(a,""))},getSubmitData:function(){var a=this,b=null;if(!a.disabled&&a.submitValue&&!a.isFileUpload()){b={};b[a.getName()]=""+a.getValue()}return b},getModelData:function(){var a=this,b=null;if(!a.disabled&&!a.isFileUpload()){b={};b[a.getName()]=a.getValue()}return b},reset:function(){var a=this;a.setValue(a.originalValue);a.clearInvalid();delete a.wasValid},resetOriginalValue:function(){this.originalValue=this.getValue();this.checkDirty()},checkChange:function(){if(!this.suspendCheckChange){var c=this,b=c.getValue(),a=c.lastValue;if(!c.isEqual(b,a)&&!c.isDestroyed){c.lastValue=b;c.fireEvent("change",c,b,a);c.onChange(b,a)}}},onChange:function(b,a){if(this.validateOnChange){this.validate()}this.checkDirty()},isDirty:function(){var a=this;return !a.disabled&&!a.isEqual(a.getValue(),a.originalValue)},checkDirty:function(){var a=this,b=a.isDirty();if(b!==a.wasDirty){a.fireEvent("dirtychange",a,b);a.onDirtyChange(b);a.wasDirty=b}},onDirtyChange:Ext.emptyFn,getErrors:function(a){return[]},isValid:function(){var a=this;return a.disabled||Ext.isEmpty(a.getErrors())},validate:function(){var a=this,b=a.isValid();if(b!==a.wasValid){a.wasValid=b;a.fireEvent("validitychange",a,b)}return b},batchChanges:function(a){try{this.suspendCheckChange++;a()}catch(b){throw b}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return false},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.define("Ext.layout.container.boxOverflow.None",{alternateClassName:"Ext.layout.boxOverflow.None",constructor:function(b,a){this.layout=b;Ext.apply(this,a||{})},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,onRemove:Ext.emptyFn,getItem:function(a){return this.layout.owner.getComponent(a)},onRemove:Ext.emptyFn});Ext.define("Ext.data.writer.Writer",{alias:"writer.base",alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],writeAllFields:true,nameProperty:"name",constructor:function(a){Ext.apply(this,a)},write:function(f){var c=f.operation,b=c.records||[],a=b.length,e=0,g=[];for(;e<a;e++){g.push(this.getRecordData(b[e]))}return this.writeRecords(f,g)},getRecordData:function(f){var k=f.phantom===true,b=this.writeAllFields||k,c=this.nameProperty,g=f.fields,e={},i,a,h,l;if(b){g.each(function(m){if(m.persist){a=m[c]||m.name;e[a]=f.get(m.name)}})}else{i=f.getChanges();for(l in i){if(i.hasOwnProperty(l)){h=g.get(l);a=h[c]||h.name;e[a]=i[l]}}if(!k){e[f.idProperty]=f.getId()}}return e}});Ext.define("Ext.panel.Proxy",{alternateClassName:"Ext.dd.PanelProxy",constructor:function(a,b){this.panel=a;this.id=this.panel.id+"-ddproxy";Ext.apply(this,b)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){if(this.ghost){if(this.proxy){this.proxy.remove();delete this.proxy}this.panel.unghost(null,false);delete this.ghost}},show:function(){if(!this.ghost){var a=this.panel.getSize();this.panel.el.setVisibilityMode(Ext.Element.DISPLAY);this.ghost=this.panel.ghost();if(this.insertProxy){this.proxy=this.panel.el.insertSibling({cls:Ext.baseCSSPrefix+"panel-dd-spacer"});this.proxy.setSize(a)}}},repair:function(b,c,a){this.hide();if(typeof c=="function"){c.call(a||this)}},moveProxy:function(a,b){if(this.proxy){a.insertBefore(this.proxy.dom,b)}}});Ext.define("Ext.fx.CubicBezier",{singleton:true,cubicBezierAtTime:function(q,e,b,p,n,i){var k=3*e,m=3*(p-e)-k,a=1-k-m,h=3*b,l=3*(n-b)-h,r=1-h-l;function g(s){return((a*s+m)*s+k)*s}function c(s,v){var u=f(s,v);return((r*u+l)*u+h)*u}function f(s,A){var z,y,v,t,w,u;for(v=s,u=0;u<8;u++){t=g(v)-s;if(Math.abs(t)<A){return v}w=(3*a*v+2*m)*v+k;if(Math.abs(w)<0.000001){break}v=v-t/w}z=0;y=1;v=s;if(v<z){return z}if(v>y){return y}while(z<y){t=g(v);if(Math.abs(t-s)<A){return v}if(s>t){z=v}else{y=v}v=(y-z)/2+z}return v}return c(q,1/(200*i))},cubicBezier:function(b,f,a,c){var e=function(g){return Ext.fx.CubicBezier.cubicBezierAtTime(g,b,f,a,c,1)};e.toCSS3=function(){return"cubic-bezier("+[b,f,a,c].join(",")+")"};e.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-a,1-c,1-b,1-f)};return e}});Ext.define("Ext.ZIndexManager",{alternateClassName:"Ext.WindowGroup",statics:{zBase:9000},constructor:function(a){var b=this;b.list={};b.zIndexStack=[];b.front=null;if(a){if(a.isContainer){a.on("resize",b._onContainerResize,b);b.zseed=Ext.Number.from(a.getEl().getStyle("zIndex"),b.getNextZSeed());b.targetEl=a.getTargetEl();b.container=a}else{Ext.EventManager.onWindowResize(b._onContainerResize,b);b.zseed=b.getNextZSeed();b.targetEl=Ext.get(a)}}else{Ext.EventManager.onWindowResize(b._onContainerResize,b);b.zseed=b.getNextZSeed();Ext.onDocumentReady(function(){b.targetEl=Ext.getBody()})}},getNextZSeed:function(){return(Ext.ZIndexManager.zBase+=10000)},setBase:function(a){this.zseed=a;return this.assignZIndices()},assignZIndices:function(){var c=this.zIndexStack,b=c.length,f=0,g=this.zseed,e;for(;f<b;f++){e=c[f];if(e&&!e.hidden){g=e.setZIndex(g)}}this._activateLast();return g},_setActiveChild:function(a){if(a!==this.front){if(this.front){this.front.setActive(false,a)}this.front=a;if(a){a.setActive(true);if(a.modal){this._showModalMask(a)}}}},_activateLast:function(a){var b,e=false,c;for(c=this.zIndexStack.length-1;c>=0;--c){b=this.zIndexStack[c];if(!b.hidden){if(!e){this._setActiveChild(b);e=true}if(b.modal){this._showModalMask(b);return}}}this._hideModalMask();if(!e){this._setActiveChild(null)}},_showModalMask:function(a){var e=a.el.getStyle("zIndex")-4,b=a.floatParent?a.floatParent.getTargetEl():Ext.get(a.getEl().dom.parentNode),c;if(!b){Ext.global.console&&Ext.global.console.warn&&Ext.global.console.warn("mask target could not be found. Mask cannot be shown");return}c=b.getBox();if(!this.mask){this.mask=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"mask"});this.mask.setVisibilityMode(Ext.Element.DISPLAY);this.mask.on("click",this._onMaskClick,this)}if(b.dom===document.body){c.height=Ext.Element.getViewHeight()}b.addCls(Ext.baseCSSPrefix+"body-masked");this.mask.setBox(c);this.mask.setStyle("zIndex",e);this.mask.show()},_hideModalMask:function(){if(this.mask&&this.mask.dom.parentNode){Ext.get(this.mask.dom.parentNode).removeCls(Ext.baseCSSPrefix+"body-masked");this.mask.hide()}},_onMaskClick:function(){if(this.front){this.front.focus()}},_onContainerResize:function(){if(this.mask&&this.mask.isVisible()){this.mask.setSize(Ext.get(this.mask.dom.parentNode).getViewSize(true))}},register:function(a){if(a.zIndexManager){a.zIndexManager.unregister(a)}a.zIndexManager=this;this.list[a.id]=a;this.zIndexStack.push(a);a.on("hide",this._activateLast,this)},unregister:function(a){delete a.zIndexManager;if(this.list&&this.list[a.id]){delete this.list[a.id];a.un("hide",this._activateLast);Ext.Array.remove(this.zIndexStack,a);this._activateLast(a)}},get:function(a){return typeof a=="object"?a:this.list[a]},bringToFront:function(a){a=this.get(a);if(a!==this.front){Ext.Array.remove(this.zIndexStack,a);this.zIndexStack.push(a);this.assignZIndices();return true}if(a.modal){this._showModalMask(a)}return false},sendToBack:function(a){a=this.get(a);Ext.Array.remove(this.zIndexStack,a);this.zIndexStack.unshift(a);this.assignZIndices();return a},hideAll:function(){for(var a in this.list){if(this.list[a].isComponent&&this.list[a].isVisible()){this.list[a].hide()}}},hide:function(){var b=0,c=this.zIndexStack.length,a;this.tempHidden=[];for(;b<c;b++){a=this.zIndexStack[b];if(a.isVisible()){this.tempHidden.push(a);a.hide()}}},show:function(){var c=0,e=this.tempHidden.length,b,a,f;for(;c<e;c++){b=this.tempHidden[c];a=b.x;f=b.y;b.show();b.setPosition(a,f)}delete this.tempHidden},getActive:function(){return this.front},getBy:function(f,e){var g=[],c=0,a=this.zIndexStack.length,b;for(;c<a;c++){b=this.zIndexStack[c];if(f.call(e||b,b)!==false){g.push(b)}}return g},each:function(c,b){var a;for(var e in this.list){a=this.list[e];if(a.isComponent&&c.call(b||a,a)===false){return}}},eachBottomUp:function(f,e){var b,a=this.zIndexStack,c,g;for(c=0,g=a.length;c<g;c++){b=a[c];if(b.isComponent&&f.call(e||b,b)===false){return}}},eachTopDown:function(f,e){var b,a=this.zIndexStack,c;for(c=a.length;c-->0;){b=a[c];if(b.isComponent&&f.call(e||b,b)===false){return}}},destroy:function(){this.each(function(a){a.destroy()});delete this.zIndexStack;delete this.list;delete this.container;delete this.targetEl}},function(){Ext.WindowManager=Ext.WindowMgr=new this()});Ext.define("Ext.state.Provider",{mixins:{observable:"Ext.util.Observable"},prefix:"ext-",constructor:function(a){a=a||{};var b=this;Ext.apply(b,a);b.addEvents("statechange");b.state={};b.mixins.observable.constructor.call(b)},get:function(b,a){return typeof this.state[b]=="undefined"?a:this.state[b]},clear:function(a){var b=this;delete b.state[a];b.fireEvent("statechange",b,a,null)},set:function(a,c){var b=this;b.state[a]=c;b.fireEvent("statechange",b,a,c)},decodeValue:function(g){var e=this,c=/^(a|n|d|b|s|o|e)\:(.*)$/,f=c.exec(unescape(g)),b,a,g,h;if(!f||!f[1]){return}a=f[1];g=f[2];switch(a){case"e":return null;case"n":return parseFloat(g);case"d":return new Date(Date.parse(g));case"b":return(g=="1");case"a":b=[];if(g!=""){Ext.each(g.split("^"),function(i){b.push(e.decodeValue(i))},e)}return b;case"o":b={};if(g!=""){Ext.each(g.split("^"),function(i){h=i.split("=");b[h[0]]=e.decodeValue(h[1])},e)}return b;default:return g}},encodeValue:function(f){var g="",e=0,b,a,c;if(f==null){return"e:1"}else{if(typeof f=="number"){b="n:"+f}else{if(typeof f=="boolean"){b="b:"+(f?"1":"0")}else{if(Ext.isDate(f)){b="d:"+f.toGMTString()}else{if(Ext.isArray(f)){for(a=f.length;e<a;e++){g+=this.encodeValue(f[e]);if(e!=a-1){g+="^"}}b="a:"+g}else{if(typeof f=="object"){for(c in f){if(typeof f[c]!="function"&&f[c]!==undefined){g+=c+"="+this.encodeValue(f[c])+"^"}}b="o:"+g.substring(0,g.length-1)}else{b="s:"+f}}}}}}return escape(b)}});Ext.define("Ext.layout.Layout",{isLayout:true,initialized:false,statics:{create:function(b,c){var a;if(b instanceof Ext.layout.Layout){return Ext.createByAlias("layout."+b)}else{if(!b||typeof b==="string"){a=b||c;b={}}else{a=b.type||c}return Ext.createByAlias("layout."+a,b||{})}}},constructor:function(a){this.id=Ext.id(null,this.type+"-");Ext.apply(this,a)},layout:function(){var a=this;a.layoutBusy=true;a.initLayout();if(a.beforeLayout.apply(a,arguments)!==false){a.layoutCancelled=false;a.onLayout.apply(a,arguments);a.childrenChanged=false;a.owner.needsLayout=false;a.layoutBusy=false;a.afterLayout.apply(a,arguments)}else{a.layoutCancelled=true}a.layoutBusy=false;a.doOwnerCtLayouts()},beforeLayout:function(){this.renderChildren();return true},renderChildren:function(){this.renderItems(this.getLayoutItems(),this.getRenderTarget())},renderItems:function(a,g){var f=this,e=a.length,b=0,c;for(;b<e;b++){c=a[b];if(c&&!c.rendered){f.renderItem(c,g,b)}else{if(!f.isValidParent(c,g,b)){f.moveItem(c,g,b)}else{f.configureItem(c)}}}},isValidParent:function(b,c,a){var e=b.el?b.el.dom:Ext.getDom(b);if(e&&c&&c.dom){if(Ext.isNumber(a)&&e!==c.dom.childNodes[a]){return false}return(e.parentNode==(c.dom||c))}return false},renderItem:function(c,e,a){var b=this;if(!c.rendered){if(b.itemCls){c.addCls(b.itemCls)}if(b.owner.itemCls){c.addCls(b.owner.itemCls)}c.render(e,a);b.configureItem(c);b.childrenChanged=true}},moveItem:function(b,c,a){c=c.dom||c;if(typeof a=="number"){a=c.childNodes[a]}c.insertBefore(b.el.dom,a||null);b.container=Ext.get(c);this.configureItem(b);this.childrenChanged=true},initLayout:function(){var a=this,b=a.targetCls;if(!a.initialized&&!Ext.isEmpty(b)){a.getTarget().addCls(b)}a.initialized=true},setOwner:function(a){this.owner=a},getLayoutItems:function(){return[]},configureItem:Ext.emptyFn,onLayout:Ext.emptyFn,afterLayout:Ext.emptyFn,onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,doOwnerCtLayouts:Ext.emptyFn,afterRemove:function(c){var b=c.el,a=this.owner,f=this.itemCls,e=a.itemCls;if(c.rendered&&!c.isDestroyed){if(f){b.removeCls(f)}if(e){b.removeCls(e)}}delete c.layoutManagedWidth;delete c.layoutManagedHeight},destroy:function(){var b=this.targetCls,a;if(!Ext.isEmpty(b)){a=this.getTarget();if(a){a.removeCls(b)}}this.onDestroy()}});Ext.define("Ext.data.ResultSet",{loaded:true,count:0,total:0,success:false,constructor:function(a){Ext.apply(this,a);this.totalRecords=this.total;if(a.count===undefined){this.count=this.records.length}}});Ext.define("Ext.fx.Queue",{requires:["Ext.util.HashMap"],constructor:function(){this.targets=Ext.create("Ext.util.HashMap");this.fxQueue={}},getFxDefaults:function(a){var b=this.targets.get(a);if(b){return b.fxDefaults}return{}},setFxDefaults:function(a,c){var b=this.targets.get(a);if(b){b.fxDefaults=Ext.apply(b.fxDefaults||{},c)}},stopAnimation:function(b){var e=this,a=e.getFxQueue(b),c=a.length;while(c){a[c-1].end();c--}},getActiveAnimation:function(b){var a=this.getFxQueue(b);return(a&&!!a.length)?a[0]:false},hasFxBlock:function(b){var a=this.getFxQueue(b);return a&&a[0]&&a[0].block},getFxQueue:function(b){if(!b){return false}var c=this,a=c.fxQueue[b],e=c.targets.get(b);if(!e){return false}if(!a){c.fxQueue[b]=[];if(e.type!="element"){e.target.on("destroy",function(){c.fxQueue[b]=[]})}}return c.fxQueue[b]},queueFx:function(e){var c=this,f=e.target,a,b;if(!f){return}a=c.getFxQueue(f.getId());b=a.length;if(b){if(e.concurrent){e.paused=false}else{a[b-1].on("afteranimate",function(){e.paused=false})}}else{e.paused=false}e.on("afteranimate",function(){Ext.Array.remove(a,e);if(e.remove){if(f.type=="element"){var g=Ext.get(f.id);if(g){g.remove()}}}},this);a.push(e)}});Ext.define("Ext.dd.StatusProxy",{animRepair:false,constructor:function(a){Ext.apply(this,a);this.id=this.id||Ext.id();this.proxy=Ext.createWidget("component",{floating:true,stateful:false,id:this.id,html:'<div class="'+Ext.baseCSSPrefix+'dd-drop-icon"></div><div class="'+Ext.baseCSSPrefix+'dd-drag-ghost"></div>',cls:Ext.baseCSSPrefix+"dd-drag-proxy "+this.dropNotAllowed,shadow:!a||a.shadow!==false,renderTo:document.body});this.el=this.proxy.el;this.el.show();this.el.setVisibilityMode(Ext.Element.VISIBILITY);this.el.hide();this.ghost=Ext.get(this.el.dom.childNodes[1]);this.dropStatus=this.dropNotAllowed},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",setStatus:function(a){a=a||this.dropNotAllowed;if(this.dropStatus!=a){this.el.replaceCls(this.dropStatus,a);this.dropStatus=a}},reset:function(a){this.el.dom.className=Ext.baseCSSPrefix+"dd-drag-proxy "+this.dropNotAllowed;this.dropStatus=this.dropNotAllowed;if(a){this.ghost.update("")}},update:function(a){if(typeof a=="string"){this.ghost.update(a)}else{this.ghost.update("");a.style.margin="0";this.ghost.dom.appendChild(a)}var b=this.ghost.dom.firstChild;if(b){Ext.fly(b).setStyle("float","none")}},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(a){this.proxy.hide();if(a){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},show:function(){this.proxy.show();this.proxy.toFront()},sync:function(){this.proxy.el.sync()},repair:function(b,c,a){this.callback=c;this.scope=a;if(b&&this.animRepair!==false){this.el.addCls(Ext.baseCSSPrefix+"dd-drag-repair");this.el.hideUnders(true);this.anim=this.el.animate({duration:this.repairDuration||500,easing:"ease-out",to:{x:b[0],y:b[1]},stopAnimation:true,callback:this.afterRepair,scope:this})}else{this.afterRepair()}},afterRepair:function(){this.hide(true);if(typeof this.callback=="function"){this.callback.call(this.scope||this)}this.callback=null;this.scope=null},destroy:function(){Ext.destroy(this.ghost,this.proxy,this.el)}});Ext.define("Ext.fx.target.Target",{isAnimTarget:true,constructor:function(a){this.target=a;this.id=this.getId()},getId:function(){return this.target.id}});Ext.define("Ext.draw.Color",{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbRe:/\s*rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)\s*/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/,lightnessFactor:0.2,constructor:function(e,c,a){var b=this,f=Ext.Number.constrain;b.r=f(e,0,255);b.g=f(c,0,255);b.b=f(a,0,255)},getRed:function(){return this.r},getGreen:function(){return this.g},getBlue:function(){return this.b},getRGB:function(){var a=this;return[a.r,a.g,a.b]},getHSL:function(){var k=this,a=k.r/255,i=k.g/255,m=k.b/255,n=Math.max(a,i,m),e=Math.min(a,i,m),p=n-e,f,q=0,c=0.5*(n+e);if(e!=n){q=(c<0.5)?p/(n+e):p/(2-n-e);if(a==n){f=60*(i-m)/p}else{if(i==n){f=120+60*(m-a)/p}else{f=240+60*(a-i)/p}}if(f<0){f+=360}if(f>=360){f-=360}}return[f,q,c]},getLighter:function(b){var a=this.getHSL();b=b||this.lightnessFactor;a[2]=Ext.Number.constrain(a[2]+b,0,1);return this.fromHSL(a[0],a[1],a[2])},getDarker:function(a){a=a||this.lightnessFactor;return this.getLighter(-a)},toString:function(){var h=this,c=Math.round,f=c(h.r).toString(16),e=c(h.g).toString(16),a=c(h.b).toString(16);f=(f.length==1)?"0"+f:f;e=(e.length==1)?"0"+e:e;a=(a.length==1)?"0"+a:a;return["#",f,e,a].join("")},toHex:function(b){if(Ext.isArray(b)){b=b[0]}if(!Ext.isString(b)){return""}if(b.substr(0,1)==="#"){return b}var f=this.colorToHexRe.exec(b);if(Ext.isArray(f)){var g=parseInt(f[2],10),e=parseInt(f[3],10),a=parseInt(f[4],10),c=a|(e<<8)|(g<<16);return f[1]+"#"+("000000"+c.toString(16)).slice(-6)}else{return""}},fromString:function(i){var c,f,e,a,h=parseInt;if((i.length==4||i.length==7)&&i.substr(0,1)==="#"){c=i.match(this.hexRe);if(c){f=h(c[1],16)>>0;e=h(c[2],16)>>0;a=h(c[3],16)>>0;if(i.length==4){f+=(f*16);e+=(e*16);a+=(a*16)}}}else{c=i.match(this.rgbRe);if(c){f=c[1];e=c[2];a=c[3]}}return(typeof f=="undefined")?undefined:Ext.create("Ext.draw.Color",f,e,a)},getGrayscale:function(){return this.r*0.3+this.g*0.59+this.b*0.11},fromHSL:function(g,q,e){var a,b,c,f,n=[],p=Math.abs,k=Math.floor;if(q==0||g==null){n=[e,e,e]}else{g/=60;a=q*(1-p(2*e-1));b=a*(1-p(g-2*k(g/2)-1));c=e-a/2;switch(k(g)){case 0:n=[a,b,0];break;case 1:n=[b,a,0];break;case 2:n=[0,a,b];break;case 3:n=[0,b,a];break;case 4:n=[b,0,a];break;case 5:n=[a,0,b];break}n=[n[0]+c,n[1]+c,n[2]+c]}return Ext.create("Ext.draw.Color",n[0]*255,n[1]*255,n[2]*255)}},function(){var a=this.prototype;this.addStatics({fromHSL:function(){return a.fromHSL.apply(a,arguments)},fromString:function(){return a.fromString.apply(a,arguments)},toHex:function(){return a.toHex.apply(a,arguments)}})});Ext.define("Ext.form.action.Load",{extend:"Ext.form.action.Action",requires:["Ext.data.Connection"],alternateClassName:"Ext.form.Action.Load",alias:"formaction.load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(b){var a=this.processResponse(b),c=this.form;if(a===true||!a.success||!a.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;c.afterAction(this,false);return}c.clearInvalid();c.setValues(a.data);c.afterAction(this,true)},handleResponse:function(c){var a=this.form.reader,b,e;if(a){b=a.read(c);e=b.records&&b.records[0]?b.records[0].data:null;return{success:b.success,data:e}}return Ext.decode(c.responseText)}});Ext.define("Ext.XTemplate",{extend:"Ext.Template",argsRe:/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/,nameRe:/^<tpl\b[^>]*?for="(.*?)"/,ifRe:/^<tpl\b[^>]*?if="(.*?)"/,execRe:/^<tpl\b[^>]*?exec="(.*?)"/,constructor:function(){this.callParent(arguments);var A=this,k=A.html,x=A.argsRe,c=A.nameRe,v=A.ifRe,z=A.execRe,r=0,l=[],q="values",y="parent",n="xindex",p="xcount",e="return ",b="with(values){ ",s,g,w,a,f,h,t,B,u;k=["<tpl>",k,"</tpl>"].join("");while((s=k.match(x))){f=null;h=null;t=null;g=s[0].match(c);w=s[0].match(v);a=s[0].match(z);f=w?w[1]:null;if(f){h=Ext.functionFactory(q,y,n,p,b+"try{"+e+Ext.String.htmlDecode(f)+";}catch(e){return;}}")}f=a?a[1]:null;if(f){t=Ext.functionFactory(q,y,n,p,b+Ext.String.htmlDecode(f)+";}")}B=g?g[1]:null;if(B){if(B==="."){B=q}else{if(B===".."){B=y}}B=Ext.functionFactory(q,y,"try{"+b+e+B+";}}catch(e){return;}")}l.push({id:r,target:B,exec:t,test:h,body:s[1]||""});k=k.replace(s[0],"{xtpl"+r+"}");r=r+1}for(u=l.length-1;u>=0;--u){A.compileTpl(l[u])}A.master=l[l.length-1];A.tpls=l},applySubTemplate:function(h,a,c,f,g){var e=this,b=e.tpls[h];return b.compiled.call(e,a,c,f,g)},codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,re:/\{([\w-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?\}/g,compileTpl:function(tpl){var fm=Ext.util.Format,me=this,useFormat=me.disableFormats!==true,body,bodyReturn,evaluatedFn;function fn(m,name,format,args,math){var v;if(name.substr(0,4)=="xtpl"){return"',this.applySubTemplate("+name.substr(4)+", values, parent, xindex, xcount),'"}if(name=="."){v='Ext.Array.indexOf(["string", "number", "boolean"], typeof values) > -1 || Ext.isDate(values) ? values : ""'}else{if(name=="#"){v="xindex"}else{if(name.substr(0,7)=="parent."){v=name}else{if(name.indexOf(".")!=-1){v="values."+name}else{v="values['"+name+"']"}}}}if(math){v="("+v+math+")"}if(format&&useFormat){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format="this."+format.substr(5)+"("}}else{args="";format="("+v+" === undefined ? '' : "}return"',"+format+v+args+"),'"}function codeFn(m,code){return"',("+code.replace(me.compileARe,"'")+"),'"}bodyReturn=tpl.body.replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn).replace(me.codeRe,codeFn);body="evaluatedFn = function(values, parent, xindex, xcount){return ['"+bodyReturn+"'].join('');};";eval(body);tpl.compiled=function(values,parent,xindex,xcount){var vs,length,buffer,i;if(tpl.test&&!tpl.test.call(me,values,parent,xindex,xcount)){return""}vs=tpl.target?tpl.target.call(me,values,parent):values;if(!vs){return""}parent=tpl.target?values:parent;if(tpl.target&&Ext.isArray(vs)){buffer=[];length=vs.length;if(tpl.exec){for(i=0;i<length;i++){buffer[buffer.length]=evaluatedFn.call(me,vs[i],parent,i+1,length);tpl.exec.call(me,vs[i],parent,i+1,length)}}else{for(i=0;i<length;i++){buffer[buffer.length]=evaluatedFn.call(me,vs[i],parent,i+1,length)}}return buffer.join("")}if(tpl.exec){tpl.exec.call(me,vs,parent,xindex,xcount)}return evaluatedFn.call(me,vs,parent,xindex,xcount)};return this},applyTemplate:function(a){return this.master.compiled.call(this,a,{},1,1)},compile:function(){return this}},function(){this.createAlias("apply","applyTemplate")});Ext.define("Ext.form.action.Submit",{extend:"Ext.form.action.Action",alternateClassName:"Ext.form.Action.Submit",alias:"formaction.submit",type:"submit",run:function(){var a=this.form;if(this.clientValidation===false||a.isValid()){this.doSubmit()}else{this.failureType=Ext.form.action.Action.CLIENT_INVALID;a.afterAction(this,false)}},doSubmit:function(){var b,a=Ext.apply(this.createCallback(),{url:this.getUrl(),method:this.getMethod(),headers:this.headers});if(this.form.hasUpload()){b=a.form=this.buildForm();a.isUpload=true}else{a.params=this.getParams()}Ext.Ajax.request(a);if(b){Ext.removeNode(b)}},getParams:function(){var c=false,b=this.callParent(),a=this.form.getValues(c,c,this.submitEmptyText!==c);return Ext.apply({},a,b)},buildForm:function(){var c=[],e,f,b=this.form,h=this.getParams(),a=[];b.getFields().each(function(i){if(i.isFileUpload()){a.push(i)}});function g(i,k){c.push({tag:"input",type:"hidden",name:i,value:Ext.String.htmlEncode(k)})}Ext.iterate(h,function(i,k){if(Ext.isArray(k)){Ext.each(k,function(l){g(i,l)})}else{g(i,k)}});e={tag:"form",action:this.getUrl(),method:this.getMethod(),target:this.target||"_self",style:"display:none",cn:c};if(a.length){e.encoding=e.enctype="multipart/form-data"}f=Ext.DomHelper.append(Ext.getBody(),e);Ext.Array.each(a,function(i){if(i.rendered){f.appendChild(i.extractFileInput())}});return f},onSuccess:function(b){var c=this.form,e=true,a=this.processResponse(b);if(a!==true&&!a.success){if(a.errors){c.markInvalid(a.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;e=false}c.afterAction(this,e)},handleResponse:function(e){var h=this.form,f=h.errorReader,c,k,g,a,b;if(f){c=f.read(e);b=c.records;k=[];if(b){for(g=0,a=b.length;g<a;g++){k[g]=b[g].data}}if(k.length<1){k=null}return{success:c.success,errors:k}}return Ext.decode(e.responseText)}});Ext.define("Ext.util.AbstractMixedCollection",{requires:["Ext.util.Filter"],mixins:{observable:"Ext.util.Observable"},constructor:function(b,a){var c=this;c.items=[];c.map={};c.keys=[];c.length=0;c.addEvents("clear","add","replace","remove");c.allowFunctions=b===true;if(a){c.getKey=a}c.mixins.observable.constructor.call(c)},allowFunctions:false,add:function(b,f){var e=this,g=f,c=b,a;if(arguments.length==1){g=c;c=e.getKey(g)}if(typeof c!="undefined"&&c!==null){a=e.map[c];if(typeof a!="undefined"){return e.replace(c,g)}e.map[c]=g}e.length++;e.items.push(g);e.keys.push(c);e.fireEvent("add",e.length-1,g,c);return g},getKey:function(a){return a.id},replace:function(c,f){var e=this,a,b;if(arguments.length==1){f=arguments[0];c=e.getKey(f)}a=e.map[c];if(typeof c=="undefined"||c===null||typeof a=="undefined"){return e.add(c,f)}b=e.indexOfKey(c);e.items[b]=f;e.map[c]=f;e.fireEvent("replace",c,a,f);return f},addAll:function(g){var f=this,e=0,b,a,c;if(arguments.length>1||Ext.isArray(g)){b=arguments.length>1?arguments:g;for(a=b.length;e<a;e++){f.add(b[e])}}else{for(c in g){if(g.hasOwnProperty(c)){if(f.allowFunctions||typeof g[c]!="function"){f.add(c,g[c])}}}}},each:function(f,e){var b=[].concat(this.items),c=0,a=b.length,g;for(;c<a;c++){g=b[c];if(f.call(e||g,g,c,a)===false){break}}},eachKey:function(f,e){var g=this.keys,b=this.items,c=0,a=g.length;for(;c<a;c++){f.call(e||window,g[c],b[c],c,a)}},findBy:function(f,e){var g=this.keys,b=this.items,c=0,a=b.length;for(;c<a;c++){if(f.call(e||window,b[c],g[c])){return b[c]}}return null},find:function(){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.util.MixedCollection: find has been deprecated. Use findBy instead.")}return this.findBy.apply(this,arguments)},insert:function(a,b,f){var e=this,c=b,g=f;if(arguments.length==2){g=c;c=e.getKey(g)}if(e.containsKey(c)){e.suspendEvents();e.removeAtKey(c);e.resumeEvents()}if(a>=e.length){return e.add(c,g)}e.length++;Ext.Array.splice(e.items,a,0,g);if(typeof c!="undefined"&&c!==null){e.map[c]=g}Ext.Array.splice(e.keys,a,0,c);e.fireEvent("add",a,g,c);return g},remove:function(a){return this.removeAt(this.indexOf(a))},removeAll:function(a){Ext.each(a||[],function(b){this.remove(b)},this);return this},removeAt:function(a){var c=this,e,b;if(a<c.length&&a>=0){c.length--;e=c.items[a];Ext.Array.erase(c.items,a,1);b=c.keys[a];if(typeof b!="undefined"){delete c.map[b]}Ext.Array.erase(c.keys,a,1);c.fireEvent("remove",e,b);return e}return false},removeAtKey:function(a){return this.removeAt(this.indexOfKey(a))},getCount:function(){return this.length},indexOf:function(a){return Ext.Array.indexOf(this.items,a)},indexOfKey:function(a){return Ext.Array.indexOf(this.keys,a)},get:function(b){var e=this,a=e.map[b],c=a!==undefined?a:(typeof b=="number")?e.items[b]:undefined;return typeof c!="function"||e.allowFunctions?c:null},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:function(a){return Ext.Array.contains(this.items,a)},containsKey:function(a){return typeof this.map[a]!="undefined"},clear:function(){var a=this;a.length=0;a.items=[];a.keys=[];a.map={};a.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(h,b,k,a){var c=this.extractValues(h,b),g=c.length,f=0,e;k=k||0;a=(a||a===0)?a:g-1;for(e=k;e<=a;e++){f+=c[e]}return f},collect:function(l,f,h){var m=this.extractValues(l,f),a=m.length,b={},c=[],k,g,e;for(e=0;e<a;e++){k=m[e];g=String(k);if((h||!Ext.isEmpty(k))&&!b[g]){b[g]=true;c.push(k)}}return c},extractValues:function(c,a){var b=this.items;if(a){b=Ext.Array.pluck(b,a)}return Ext.Array.pluck(b,c)},getRange:function(g,a){var f=this,c=f.items,b=[],e;if(c.length<1){return b}g=g||0;a=Math.min(typeof a=="undefined"?f.length-1:a,f.length-1);if(g<=a){for(e=g;e<=a;e++){b[b.length]=c[e]}}else{for(e=g;e>=a;e--){b[b.length]=c[e]}}return b},filter:function(e,c,g,a){var b=[],f;if(Ext.isString(e)){b.push(Ext.create("Ext.util.Filter",{property:e,value:c,anyMatch:g,caseSensitive:a}))}else{if(Ext.isArray(e)||e instanceof Ext.util.Filter){b=b.concat(e)}}f=function(h){var p=true,q=b.length,k;for(k=0;k<q;k++){var n=b[k],m=n.filterFn,l=n.scope;p=p&&m.call(l,h)}return p};return this.filterBy(f)},filterBy:function(f,e){var k=this,a=new this.self(),h=k.keys,b=k.items,g=b.length,c;a.getKey=k.getKey;for(c=0;c<g;c++){if(f.call(e||k,b[c],h[c])){a.add(h[c],b[c])}}return a},findIndex:function(c,b,f,e,a){if(Ext.isEmpty(b,false)){return -1}b=this.createValueMatcher(b,e,a);return this.findIndexBy(function(g){return g&&b.test(g[c])},null,f)},findIndexBy:function(f,e,k){var h=this,g=h.keys,b=h.items,c=k||0,a=b.length;for(;c<a;c++){if(f.call(e||h,b[c],g[c])){return c}}return -1},createValueMatcher:function(c,f,a,b){if(!c.exec){var e=Ext.String.escapeRegex;c=String(c);if(f===true){c=e(c)}else{c="^"+e(c);if(b===true){c+="$"}}c=new RegExp(c,a?"":"i")}return c},clone:function(){var f=this,g=new this.self(),e=f.keys,b=f.items,c=0,a=b.length;for(;c<a;c++){g.add(e[c],b[c])}g.getKey=f.getKey;return g}});Ext.define("Ext.util.Sortable",{isSortable:true,defaultSortDirection:"ASC",requires:["Ext.util.Sorter"],initSortable:function(){var a=this,b=a.sorters;a.sorters=Ext.create("Ext.util.AbstractMixedCollection",false,function(c){return c.id||c.property});if(b){a.sorters.addAll(a.decodeSorters(b))}},sort:function(h,g,c,f){var e=this,i,b,a;if(Ext.isArray(h)){f=c;c=g;a=h}else{if(Ext.isObject(h)){f=c;c=g;a=[h]}else{if(Ext.isString(h)){i=e.sorters.get(h);if(!i){i={property:h,direction:g};a=[i]}else{if(g===undefined){i.toggle()}else{i.setDirection(g)}}}}}if(a&&a.length){a=e.decodeSorters(a);if(Ext.isString(c)){if(c==="prepend"){h=e.sorters.clone().items;e.sorters.clear();e.sorters.addAll(a);e.sorters.addAll(h)}else{e.sorters.addAll(a)}}else{e.sorters.clear();e.sorters.addAll(a)}}if(f!==false){e.onBeforeSort(a);h=e.sorters.items;if(h.length){b=function(m,l){var k=h[0].sort(m,l),p=h.length,n;for(n=1;n<p;n++){k=k||h[n].sort.call(this,m,l)}return k};e.doSort(b)}}return h},onBeforeSort:Ext.emptyFn,decodeSorters:function(g){if(!Ext.isArray(g)){if(g===undefined){g=[]}else{g=[g]}}var e=g.length,h=Ext.util.Sorter,a=this.model?this.model.prototype.fields:null,f,b,c;for(c=0;c<e;c++){b=g[c];if(!(b instanceof h)){if(Ext.isString(b)){b={property:b}}Ext.applyIf(b,{root:this.sortRoot,direction:"ASC"});if(b.fn){b.sorterFn=b.fn}if(typeof b=="function"){b={sorterFn:b}}if(a&&!b.transform){f=a.get(b.property);b.transform=f?f.sortType:undefined}g[c]=Ext.create("Ext.util.Sorter",b)}}return g},getSorters:function(){return this.sorters.items}});Ext.define("Ext.util.MixedCollection",{extend:"Ext.util.AbstractMixedCollection",mixins:{sortable:"Ext.util.Sortable"},constructor:function(){var a=this;a.callParent(arguments);a.addEvents("sort");a.mixins.sortable.initSortable.call(a)},doSort:function(a){this.sortBy(a)},_sort:function(m,a,l){var k=this,e,f,b=String(a).toUpperCase()=="DESC"?-1:1,h=[],n=k.keys,g=k.items;l=l||function(i,c){return i-c};for(e=0,f=g.length;e<f;e++){h[h.length]={key:n[e],value:g[e],index:e}}Ext.Array.sort(h,function(i,c){var p=l(i[m],c[m])*b;if(p===0){p=(i.index<c.index?-1:1)}return p});for(e=0,f=h.length;e<f;e++){g[e]=h[e].value;n[e]=h[e].key}k.fireEvent("sort",k)},sortBy:function(c){var h=this,b=h.items,g=h.keys,f=b.length,a=[],e;for(e=0;e<f;e++){a[e]={key:g[e],value:b[e],index:e}}Ext.Array.sort(a,function(k,i){var l=c(k.value,i.value);if(l===0){l=(k.index<i.index?-1:1)}return l});for(e=0;e<f;e++){b[e]=a[e].value;g[e]=a[e].key}h.fireEvent("sort",h,b,g)},reorder:function(e){var h=this,b=h.items,c=0,g=b.length,a=[],f=[],i;h.suspendEvents();for(i in e){a[e[i]]=b[i]}for(c=0;c<g;c++){if(e[c]==undefined){f.push(b[c])}}for(c=0;c<g;c++){if(a[c]==undefined){a[c]=f.shift()}}h.clear();h.addAll(a);h.resumeEvents();h.fireEvent("sort",h)},sortByKey:function(a,b){this._sort("key",a,b||function(e,c){var g=String(e).toUpperCase(),f=String(c).toUpperCase();return g>f?1:(g<f?-1:0)})}});Ext.define("Ext.data.StoreManager",{extend:"Ext.util.MixedCollection",alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:true,uses:["Ext.data.ArrayStore"],register:function(){for(var a=0,b;(b=arguments[a]);a++){this.add(b)}},unregister:function(){for(var a=0,b;(b=arguments[a]);a++){this.remove(this.lookup(b))}},lookup:function(c){if(Ext.isArray(c)){var b=["field1"],f=!Ext.isArray(c[0]),g=c,e,a;if(f){g=[];for(e=0,a=c.length;e<a;++e){g.push([c[e]])}}else{for(e=2,a=c[0].length;e<=a;++e){b.push("field"+e)}}return Ext.create("Ext.data.ArrayStore",{data:g,fields:b,autoDestroy:true,autoCreated:true,expanded:f})}if(Ext.isString(c)){return this.get(c)}else{return Ext.data.AbstractStore.create(c)}},getKey:function(a){return a.storeId}},function(){Ext.regStore=function(c,b){var a;if(Ext.isObject(c)){b=c}else{b.storeId=c}if(b instanceof Ext.data.Store){a=b}else{a=Ext.create("Ext.data.Store",b)}return Ext.data.StoreManager.register(a)};Ext.getStore=function(a){return Ext.data.StoreManager.lookup(a)}});Ext.define("Ext.data.Errors",{extend:"Ext.util.MixedCollection",isValid:function(){return this.length===0},getByField:function(f){var e=[],a,c,b;for(b=0;b<this.length;b++){a=this.items[b];if(a.field==f){e.push(a)}}return e}});Ext.define("Ext.AbstractManager",{requires:["Ext.util.HashMap"],typeName:"type",constructor:function(a){Ext.apply(this,a||{});this.all=Ext.create("Ext.util.HashMap");this.types={}},get:function(a){return this.all.get(a)},register:function(c){var b=this.all,a=b.getKey(c);if(b.containsKey(a)){Ext.Error.raise('Registering duplicate id "'+a+'" with this manager')}this.all.add(c)},unregister:function(a){this.all.remove(a)},registerType:function(b,a){this.types[b]=a;a[this.typeName]=b},isRegistered:function(a){return this.types[a]!==undefined},create:function(a,e){var b=a[this.typeName]||a.type||e,c=this.types[b];if(c===undefined){Ext.Error.raise("The '"+b+"' type has not been registered with this manager")}return new c(a)},onAvailable:function(f,c,b){var a=this.all,e;if(a.containsKey(f)){e=a.get(f);c.call(b||e,e)}else{a.on("add",function(i,g,h){if(g==f){c.call(b||h,h);a.un("add",c,b)}})}},each:function(b,a){this.all.each(b,a||this)},getCount:function(){return this.all.getCount()}});Ext.define("Ext.ModelManager",{extend:"Ext.AbstractManager",alternateClassName:"Ext.ModelMgr",requires:["Ext.data.Association"],singleton:true,typeName:"mtype",associationStack:[],registerType:function(c,b){var e=b.prototype,a;if(e&&e.isModel){a=b}else{if(!b.extend){b.extend="Ext.data.Model"}a=Ext.define(c,b)}this.types[c]=a;return a},onModelDefined:function(c){var a=this.associationStack,g=a.length,f=[],b,e,h;for(e=0;e<g;e++){b=a[e];if(b.associatedModel==c.modelName){f.push(b)}}for(e=0,g=f.length;e<g;e++){h=f[e];this.types[h.ownerModel].prototype.associations.add(Ext.data.Association.create(h));Ext.Array.remove(a,h)}},registerDeferredAssociation:function(a){this.associationStack.push(a)},getModel:function(b){var a=b;if(typeof a=="string"){a=this.types[a]}return a},create:function(c,b,e){var a=typeof b=="function"?b:this.types[b||c.name];return new a(c,e)}},function(){Ext.regModel=function(){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn('Ext.regModel has been deprecated. Models can now be created by extending Ext.data.Model: Ext.define("MyModel", {extend: "Ext.data.Model", fields: []});.')}return this.ModelManager.registerType.apply(this.ModelManager,arguments)}});Ext.define("Ext.ComponentManager",{extend:"Ext.AbstractManager",alternateClassName:"Ext.ComponentMgr",singleton:true,typeName:"xtype",create:function(b,e){if(b instanceof Ext.AbstractComponent){return b}else{if(Ext.isString(b)){return Ext.createByAlias("widget."+b)}else{var c=b.xtype||e,a=b;return Ext.createByAlias("widget."+c,a)}}},registerType:function(b,a){this.types[b]=a;a[this.typeName]=b;a.prototype[this.typeName]=b}});Ext.define("Ext.util.Region",{requires:["Ext.util.Offset"],statics:{getRegion:function(a){return Ext.fly(a).getPageBox(true)},from:function(a){return new this(a.top,a.right,a.bottom,a.left)}},constructor:function(e,g,a,c){var f=this;f.y=f.top=f[1]=e;f.right=g;f.bottom=a;f.x=f.left=f[0]=c},contains:function(b){var a=this;return(b.x>=a.x&&b.right<=a.right&&b.y>=a.y&&b.bottom<=a.bottom)},intersect:function(h){var g=this,e=Math.max(g.y,h.y),f=Math.min(g.right,h.right),a=Math.min(g.bottom,h.bottom),c=Math.max(g.x,h.x);if(a>e&&f>c){return new this.self(e,f,a,c)}else{return false}},union:function(h){var g=this,e=Math.min(g.y,h.y),f=Math.max(g.right,h.right),a=Math.max(g.bottom,h.bottom),c=Math.min(g.x,h.x);return new this.self(e,f,a,c)},constrainTo:function(b){var a=this,c=Ext.Number.constrain;a.top=a.y=c(a.top,b.y,b.bottom);a.bottom=c(a.bottom,b.y,b.bottom);a.left=a.x=c(a.left,b.x,b.right);a.right=c(a.right,b.x,b.right);return a},adjust:function(e,g,a,c){var f=this;f.top=f.y+=e;f.left=f.x+=c;f.right+=g;f.bottom+=a;return f},getOutOfBoundOffset:function(a,b){if(!Ext.isObject(a)){if(a=="x"){return this.getOutOfBoundOffsetX(b)}else{return this.getOutOfBoundOffsetY(b)}}else{b=a;var c=Ext.create("Ext.util.Offset");c.x=this.getOutOfBoundOffsetX(b.x);c.y=this.getOutOfBoundOffsetY(b.y);return c}},getOutOfBoundOffsetX:function(a){if(a<=this.x){return this.x-a}else{if(a>=this.right){return this.right-a}}return 0},getOutOfBoundOffsetY:function(a){if(a<=this.y){return this.y-a}else{if(a>=this.bottom){return this.bottom-a}}return 0},isOutOfBound:function(a,b){if(!Ext.isObject(a)){if(a=="x"){return this.isOutOfBoundX(b)}else{return this.isOutOfBoundY(b)}}else{b=a;return(this.isOutOfBoundX(b.x)||this.isOutOfBoundY(b.y))}},isOutOfBoundX:function(a){return(a<this.x||a>this.right)},isOutOfBoundY:function(a){return(a<this.y||a>this.bottom)},restrict:function(b,e,a){if(Ext.isObject(b)){var c;a=e;e=b;if(e.copy){c=e.copy()}else{c={x:e.x,y:e.y}}c.x=this.restrictX(e.x,a);c.y=this.restrictY(e.y,a);return c}else{if(b=="x"){return this.restrictX(e,a)}else{return this.restrictY(e,a)}}},restrictX:function(b,a){if(!a){a=1}if(b<=this.x){b-=(b-this.x)*a}else{if(b>=this.right){b-=(b-this.right)*a}}return b},restrictY:function(b,a){if(!a){a=1}if(b<=this.y){b-=(b-this.y)*a}else{if(b>=this.bottom){b-=(b-this.bottom)*a}}return b},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(b){var a=this;a.top=a.y=a[1]=b.y;a.right=b.right;a.bottom=b.bottom;a.left=a.x=a[0]=b.x;return this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(a,c){if(arguments.length==1){c=a.y;a=a.x}var b=this;b.top=b.y+=c;b.right+=a;b.bottom+=c;b.left=b.x+=a;return b},round:function(){var a=this;a.top=a.y=Math.round(a.y);a.right=Math.round(a.right);a.bottom=Math.round(a.bottom);a.left=a.x=Math.round(a.x);return a},equals:function(a){return(this.top==a.top&&this.right==a.right&&this.bottom==a.bottom&&this.left==a.left)}});Ext.define("Ext.util.ComponentDragger",{extend:"Ext.dd.DragTracker",autoStart:500,constructor:function(a,b){this.comp=a;this.initialConstrainTo=b.constrainTo;this.callParent([b])},onStart:function(c){var b=this,a=b.comp;this.startPosition=a.getPosition();if(a.ghost&&!a.liveDrag){b.proxy=a.ghost();b.dragTarget=b.proxy.header.el}if(b.constrain||b.constrainDelegate){b.constrainTo=b.calculateConstrainRegion()}},calculateConstrainRegion:function(){var e=this,a=e.comp,h=e.initialConstrainTo,f,g,b=a.el.shadow?a.el.shadow.offset:0;if(!(h instanceof Ext.util.Region)){h=Ext.fly(h).getViewRegion()}if(b){h.adjust(0,-b,-b,b)}if(!e.constrainDelegate){f=Ext.fly(e.dragTarget).getRegion();g=e.proxy?e.proxy.el.getRegion():a.el.getRegion();h.adjust(f.top-g.top,f.right-g.right,f.bottom-g.bottom,f.left-g.left)}return h},onDrag:function(c){var b=this,a=(b.proxy&&!b.comp.liveDrag)?b.proxy:b.comp,f=b.getOffset(b.constrain||b.constrainDelegate?"dragTarget":null);a.setPosition(b.startPosition[0]+f[0],b.startPosition[1]+f[1])},onEnd:function(a){if(this.proxy&&!this.comp.liveDrag){this.comp.unghost()}}});Ext.define("Ext.FocusManager",{singleton:true,alternateClassName:"Ext.FocusMgr",mixins:{observable:"Ext.util.Observable"},requires:["Ext.ComponentManager","Ext.ComponentQuery","Ext.util.HashMap","Ext.util.KeyNav"],enabled:false,focusElementCls:Ext.baseCSSPrefix+"focus-element",focusFrameCls:Ext.baseCSSPrefix+"focus-frame",whitelist:["textfield"],tabIndexWhitelist:["a","button","embed","frame","iframe","img","input","object","select","textarea"],constructor:function(){var a=this,b=Ext.ComponentQuery;a.addEvents("beforecomponentfocus","componentfocus","disable","enable");a.keyNav=Ext.create("Ext.util.KeyNav",Ext.getDoc(),{disabled:true,scope:a,backspace:a.focusLast,enter:a.navigateIn,esc:a.navigateOut,tab:a.navigateSiblings});a.focusData={};a.subscribers=Ext.create("Ext.util.HashMap");a.focusChain={};Ext.apply(b.pseudos,{focusable:function(g){var e=g.length,k=[],h=0,l,f=function(c){return c&&c.focusable!==false&&b.is(c,"[rendered]:not([destroying]):not([isDestroyed]):not([disabled]){isVisible(true)}{el && c.el.dom && c.el.isVisible()}")};for(;h<e;h++){l=g[h];if(f(l)){k.push(l)}}return k},nextFocus:function(g,f,k){k=k||1;f=parseInt(f,10);var e=g.length,h=f+k,l;for(;h!=f;h+=k){if(h>=e){h=0}else{if(h<0){h=e-1}}l=g[h];if(b.is(l,":focusable")){return[l]}else{if(l.placeholder&&b.is(l.placeholder,":focusable")){return[l.placeholder]}}}return[]},prevFocus:function(e,c){return this.nextFocus(e,c,-1)},root:function(f){var e=f.length,h=[],g=0,k;for(;g<e;g++){k=f[g];if(!k.ownerCt){h.push(k)}}return h}})},addXTypeToWhitelist:function(b){var a=this;if(Ext.isArray(b)){Ext.Array.forEach(b,a.addXTypeToWhitelist,a);return}if(!Ext.Array.contains(a.whitelist,b)){a.whitelist.push(b)}},clearComponent:function(a){clearTimeout(this.cmpFocusDelay);if(!a.isDestroyed){a.blur()}},disable:function(){var a=this;if(!a.enabled){return}delete a.options;a.enabled=false;Ext.ComponentManager.all.un("add",a.onComponentCreated,a);a.removeDOM();a.keyNav.disable();a.setFocusAll(false);a.fireEvent("disable",a)},enable:function(a){var b=this;if(a===true){a={focusFrame:true}}b.options=a=a||{};if(b.enabled){return}Ext.ComponentManager.all.on("add",b.onComponentCreated,b);b.initDOM(a);b.keyNav.enable();b.setFocusAll(true,a);b.focusEl.focus();delete b.focusedCmp;b.enabled=true;b.fireEvent("enable",b)},focusLast:function(b){var a=this;if(a.isWhitelisted(a.focusedCmp)){return true}if(a.previousFocusedCmp){a.previousFocusedCmp.focus()}},getRootComponents:function(){var a=this,c=Ext.ComponentQuery,b=c.query(":focusable:root:not([floating])"),e=c.query(":focusable:root[floating]");e.sort(function(g,f){return g.el.getZIndex()>f.el.getZIndex()});return e.concat(b)},initDOM:function(b){var c=this,e="&#160",a=c.focusFrameCls;if(!Ext.isReady){Ext.onReady(c.initDOM,c);return}if(!c.focusEl){c.focusEl=Ext.getBody().createChild({tabIndex:"-1",cls:c.focusElementCls,html:e})}if(!c.focusFrame&&b.focusFrame){c.focusFrame=Ext.getBody().createChild({cls:a,children:[{cls:a+"-top"},{cls:a+"-bottom"},{cls:a+"-left"},{cls:a+"-right"}],style:"top: -100px; left: -100px;"});c.focusFrame.setVisibilityMode(Ext.Element.DISPLAY);c.focusFrameWidth=2;c.focusFrame.hide().setLeftTop(0,0)}},isWhitelisted:function(a){return a&&Ext.Array.some(this.whitelist,function(b){return a.isXType(b)})},navigateIn:function(f){var b=this,a=b.focusedCmp,g,c;if(!a){g=b.getRootComponents();if(g.length){g[0].focus()}}else{c=Ext.ComponentQuery.query(">:focusable",a)[0];if(c){c.focus()}else{if(Ext.isFunction(a.onClick)){f.button=0;a.onClick(f);a.focus()}}}},navigateOut:function(c){var b=this,a;if(!b.focusedCmp||!(a=b.focusedCmp.up(":focusable"))){b.focusEl.focus()}else{a.focus()}return true},navigateSiblings:function(i,b,p){var k=this,a=b||k,q=i.getKey(),g=Ext.EventObject,l=i.shiftKey||q==g.LEFT||q==g.UP,c=q==g.LEFT||q==g.RIGHT||q==g.UP||q==g.DOWN,h=l?"prev":"next",n,f,m;m=(a.focusedCmp&&a.focusedCmp.comp)||a.focusedCmp;if(!m&&!p){return}if(c&&k.isWhitelisted(m)){return true}p=p||m.up();if(p){n=m?Ext.Array.indexOf(p.getRefItems(),m):-1;f=Ext.ComponentQuery.query(">:"+h+"Focus("+n+")",p)[0];if(f&&m!==f){f.focus();return f}}},onComponentBlur:function(b,c){var a=this;if(a.focusedCmp===b){a.previousFocusedCmp=b;delete a.focusedCmp}if(a.focusFrame){a.focusFrame.hide()}},onComponentCreated:function(b,c,a){this.setFocus(a,true,this.options)},onComponentDestroy:function(a){this.setFocus(a,false)},onComponentFocus:function(q,m){var n=this,a=n.focusChain;if(!Ext.ComponentQuery.is(q,":focusable")){n.clearComponent(q);if(a[q.id]){return}var s=q.up();if(s){a[q.id]=true;s.focus()}return}n.focusChain={};clearTimeout(n.cmpFocusDelay);if(arguments.length!==2){n.cmpFocusDelay=Ext.defer(n.onComponentFocus,90,n,[q,m]);return}if(n.fireEvent("beforecomponentfocus",n,q,n.previousFocusedCmp)===false){n.clearComponent(q);return}n.focusedCmp=q;if(n.shouldShowFocusFrame(q)){var u="."+n.focusFrameCls+"-",b=n.focusFrame,g=n.focusFrameWidth,k=q.el.getPageBox(),t=k.top,c=k.left,p=k.width,h=k.height,i=b.child(u+"top"),f=b.child(u+"bottom"),r=b.child(u+"left"),l=b.child(u+"right");i.setWidth(p).setLeftTop(c,t);f.setWidth(p).setLeftTop(c,t+h-g);r.setHeight(h-g-g).setLeftTop(c,t+g);l.setHeight(h-g-g).setLeftTop(c+p-g,t+g);b.show()}n.fireEvent("componentfocus",n,q,n.previousFocusedCmp)},onComponentHide:function(f){var e=this,g=Ext.ComponentQuery,b=false,a,c;if(e.focusedCmp){a=g.query("[id="+e.focusedCmp.id+"]",f)[0];b=e.focusedCmp.id===f.id||a;if(a){e.clearComponent(a)}}e.clearComponent(f);if(b){c=g.query("^:focusable",f)[0];if(c){c.focus()}}},removeDOM:function(){var a=this;if(a.enabled||a.subscribers.length){return}Ext.destroy(a.focusEl,a.focusFrame);delete a.focusEl;delete a.focusFrame;delete a.focusFrameWidth},removeXTypeFromWhitelist:function(b){var a=this;if(Ext.isArray(b)){Ext.Array.forEach(b,a.removeXTypeFromWhitelist,a);return}Ext.Array.remove(a.whitelist,b)},setFocus:function(f,i,b){var e=this,c,h,g,a=function(k){return !Ext.Array.contains(e.tabIndexWhitelist,k.tagName.toLowerCase())&&k.tabIndex<=0};b=b||{};if(!f.rendered){f.on("afterrender",Ext.pass(e.setFocus,arguments,e),e,{single:true});return}c=f.getFocusEl();h=c.dom;if((i&&!e.focusData[f.id])||(!i&&e.focusData[f.id])){if(i){g={focusFrame:b.focusFrame};if(a(h)){g.tabIndex=h.tabIndex;h.tabIndex=-1}c.on({focus:g.focusFn=Ext.bind(e.onComponentFocus,e,[f],0),blur:g.blurFn=Ext.bind(e.onComponentBlur,e,[f],0),scope:e});f.on({hide:e.onComponentHide,close:e.onComponentHide,beforedestroy:e.onComponentDestroy,scope:e});e.focusData[f.id]=g}else{g=e.focusData[f.id];if("tabIndex" in g){h.tabIndex=g.tabIndex}c.un("focus",g.focusFn,e);c.un("blur",g.blurFn,e);f.un("hide",e.onComponentHide,e);f.un("close",e.onComponentHide,e);f.un("beforedestroy",e.onComponentDestroy,e);delete e.focusData[f.id]}}},setFocusAll:function(h,c){var g=this,b=Ext.ComponentManager.all.getArray(),a=b.length,f,e=0;for(;e<a;e++){g.setFocus(b[e],h,c)}},setupSubscriberKeys:function(a,g){var f=this,e=a.getFocusEl(),c=g.scope,b={backspace:f.focusLast,enter:f.navigateIn,esc:f.navigateOut,scope:f},h=function(i){if(f.focusedCmp===a){return f.navigateSiblings(i,f,a)}else{return f.navigateSiblings(i)}};Ext.iterate(g,function(k,i){b[k]=function(m){var l=h(m);if(Ext.isFunction(i)&&i.call(c||a,m,l)===true){return true}return l}},f);return Ext.create("Ext.util.KeyNav",e,b)},shouldShowFocusFrame:function(c){var b=this,a=b.options||{};if(!b.focusFrame||!c){return false}if(a.focusFrame){return true}if(b.focusData[c.id].focusFrame){return true}return false},subscribe:function(a,c){var g=this,f=Ext.Array,h={},e=g.subscribers,b=function(i){if(i.isContainer&&!e.containsKey(i.id)){f.forEach(i.query(">"),b);g.setFocus(i,true,c);i.on("add",h.onAdd,g)}else{if(!i.isContainer){g.setFocus(i,true,c)}}};if(!a||!a.isContainer){return}if(!a.rendered){a.on("afterrender",Ext.pass(g.subscribe,arguments,g),g,{single:true});return}g.initDOM(c);h.keyNav=g.setupSubscriberKeys(a,c.keys);h.onAdd=function(k,l,i){b(l)};a.on("beforedestroy",g.unsubscribe,g);b(a);e.add(a.id,h)},unsubscribe:function(a){var f=this,e=Ext.Array,c=f.subscribers,g,b=function(h){if(h.isContainer&&!c.containsKey(h.id)){e.forEach(h.query(">"),b);f.setFocus(h,false);h.un("add",g.onAdd,f)}else{if(!h.isContainer){f.setFocus(h,false)}}};if(!a||!c.containsKey(a.id)){return}g=c.get(a.id);g.keyNav.destroy();a.un("beforedestroy",f.unsubscribe,f);c.removeAtKey(a.id);b(a);f.removeDOM()}});Ext.define("Ext.menu.Manager",{singleton:true,requires:["Ext.util.MixedCollection","Ext.util.KeyMap"],alternateClassName:"Ext.menu.MenuMgr",uses:["Ext.menu.Menu"],menus:{},groups:{},attached:false,lastShow:new Date(),init:function(){var a=this;a.active=Ext.create("Ext.util.MixedCollection");Ext.getDoc().addKeyListener(27,function(){if(a.active.length>0){a.hideAll()}},a)},hideAll:function(){var a=this.active,b;if(a&&a.length>0){b=a.clone();b.each(function(c){c.hide()});return true}return false},onHide:function(a){var b=this,c=b.active;c.remove(a);if(c.length<1){Ext.getDoc().un("mousedown",b.onMouseDown,b);b.attached=false}},onShow:function(a){var f=this,g=f.active,e=g.last(),c=f.attached,b=a.getEl(),h;f.lastShow=new Date();g.add(a);if(!c){Ext.getDoc().on("mousedown",f.onMouseDown,f);f.attached=true}a.toFront()},onBeforeHide:function(a){if(a.activeChild){a.activeChild.hide()}if(a.autoHideTimer){clearTimeout(a.autoHideTimer);delete a.autoHideTimer}},onBeforeShow:function(a){var c=this.active,b=a.parentMenu;c.remove(a);if(!b&&!a.allowOtherMenus){this.hideAll()}else{if(b&&b.activeChild&&a!=b.activeChild){b.activeChild.hide()}}},onMouseDown:function(g){var b=this,f=b.active,a=b.lastShow,c=g.target;if(Ext.Date.getElapsed(a)>50&&f.length>0&&!g.getTarget("."+Ext.baseCSSPrefix+"menu")){b.hideAll();if(Ext.isIE&&Ext.fly(c).focusable()){c.focus()}}},register:function(b){var a=this;if(!a.active){a.init()}if(b.floating){a.menus[b.id]=b;b.on({beforehide:a.onBeforeHide,hide:a.onHide,beforeshow:a.onBeforeShow,show:a.onShow,scope:a})}},get:function(b){var a=this.menus;if(typeof b=="string"){if(!a){return null}return a[b]}else{if(b.isMenu){return b}else{if(Ext.isArray(b)){return Ext.create("Ext.menu.Menu",{items:b})}else{return Ext.ComponentManager.create(b,"menu")}}}},unregister:function(e){var a=this,b=a.menus,c=a.active;delete b[e.id];c.remove(e);e.un({beforehide:a.onBeforeHide,hide:a.onHide,beforeshow:a.onBeforeShow,show:a.onShow,scope:a})},registerCheckable:function(c){var a=this.groups,b=c.group;if(b){if(!a[b]){a[b]=[]}a[b].push(c)}},unregisterCheckable:function(c){var a=this.groups,b=c.group;if(b){Ext.Array.remove(a[b],c)}},onCheckChange:function(e,g){var a=this.groups,c=e.group,b=0,k,f,h;if(c&&g){k=a[c];f=k.length;for(;b<f;b++){h=k[b];if(h!=e){h.setChecked(false)}}}}});Ext.define("Ext.data.Types",{singleton:true,requires:["Ext.data.SortTypes"]},function(){var a=Ext.data.SortTypes;Ext.apply(Ext.data.Types,{stripRe:/[\$,%]/g,AUTO:{convert:function(b){return b},sortType:a.none,type:"auto"},STRING:{convert:function(c){var b=this.useNull?null:"";return(c===undefined||c===null)?b:String(c)},sortType:a.asUCString,type:"string"},INT:{convert:function(b){return b!==undefined&&b!==null&&b!==""?parseInt(String(b).replace(Ext.data.Types.stripRe,""),10):(this.useNull?null:0)},sortType:a.none,type:"int"},FLOAT:{convert:function(b){return b!==undefined&&b!==null&&b!==""?parseFloat(String(b).replace(Ext.data.Types.stripRe,""),10):(this.useNull?null:0)},sortType:a.none,type:"float"},BOOL:{convert:function(b){if(this.useNull&&(b===undefined||b===null||b==="")){return null}return b===true||b==="true"||b==1},sortType:a.none,type:"bool"},DATE:{convert:function(c){var e=this.dateFormat,b;if(!c){return null}if(Ext.isDate(c)){return c}if(e){if(e=="timestamp"){return new Date(c*1000)}if(e=="time"){return new Date(parseInt(c,10))}return Ext.Date.parse(c,e)}b=Date.parse(c);return b?new Date(b):null},sortType:a.asDate,type:"date"}});Ext.apply(Ext.data.Types,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})});Ext.define("Ext.data.Field",{requires:["Ext.data.Types","Ext.data.SortTypes"],alias:"data.field",constructor:function(b){if(Ext.isString(b)){b={name:b}}Ext.apply(this,b);var e=Ext.data.Types,a=this.sortType,c;if(this.type){if(Ext.isString(this.type)){this.type=e[this.type.toUpperCase()]||e.AUTO}}else{this.type=e.AUTO}if(Ext.isString(a)){this.sortType=Ext.data.SortTypes[a]}else{if(Ext.isEmpty(a)){this.sortType=this.type.sortType}}if(!this.convert){this.convert=this.type.convert}},dateFormat:null,useNull:false,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:true,persist:true});Ext.define("Ext.data.writer.Json",{extend:"Ext.data.writer.Writer",alternateClassName:"Ext.data.JsonWriter",alias:"writer.json",root:undefined,encode:false,allowSingle:true,writeRecords:function(b,c){var a=this.root;if(this.allowSingle&&c.length==1){c=c[0]}if(this.encode){if(a){b.params[a]=Ext.encode(c)}else{Ext.Error.raise("Must specify a root when using encode")}}else{b.jsonData=b.jsonData||{};if(a){b.jsonData[a]=c}else{b.jsonData=c}}return b}});Ext.ns("Ext.fx");Ext.require("Ext.fx.CubicBezier",function(){var f=Math,h=f.PI,e=f.pow,b=f.sin,g=f.sqrt,a=f.abs,c=1.70158;Ext.fx.Easing={};Ext.apply(Ext.fx.Easing,{linear:function(i){return i},ease:function(m){var i=0.07813-m/2,p=-0.25,r=g(0.0066+i*i),u=r-i,l=e(a(u),1/3)*(u<0?-1:1),s=-r-i,k=e(a(s),1/3)*(s<0?-1:1),v=l+k+0.25;return e(1-v,2)*3*v*0.1+(1-v)*3*v*v+v*v*v},easeIn:function(i){return e(i,1.7)},easeOut:function(i){return e(i,0.48)},easeInOut:function(u){var m=0.48-u/1.04,l=g(0.1734+m*m),i=l-m,s=e(a(i),1/3)*(i<0?-1:1),r=-l-m,p=e(a(r),1/3)*(r<0?-1:1),k=s+p+0.5;return(1-k)*3*k*k+k*k*k},backIn:function(i){return i*i*((c+1)*i-c)},backOut:function(i){i=i-1;return i*i*((c+1)*i+c)+1},elasticIn:function(l){if(l===0||l===1){return l}var k=0.3,i=k/4;return e(2,-10*l)*b((l-i)*(2*h)/k)+1},elasticOut:function(i){return 1-Ext.fx.Easing.elasticIn(1-i)},bounceIn:function(i){return 1-Ext.fx.Easing.bounceOut(1-i)},bounceOut:function(q){var k=7.5625,m=2.75,i;if(q<(1/m)){i=k*q*q}else{if(q<(2/m)){q-=(1.5/m);i=k*q*q+0.75}else{if(q<(2.5/m)){q-=(2.25/m);i=k*q*q+0.9375}else{q-=(2.625/m);i=k*q*q+0.984375}}}return i}});Ext.apply(Ext.fx.Easing,{"back-in":Ext.fx.Easing.backIn,"back-out":Ext.fx.Easing.backOut,"ease-in":Ext.fx.Easing.easeIn,"ease-out":Ext.fx.Easing.easeOut,"elastic-in":Ext.fx.Easing.elasticIn,"elastic-out":Ext.fx.Easing.elasticIn,"bounce-in":Ext.fx.Easing.bounceIn,"bounce-out":Ext.fx.Easing.bounceOut,"ease-in-out":Ext.fx.Easing.easeInOut})});Ext.define("Ext.form.Labelable",{requires:["Ext.XTemplate"],labelableRenderTpl:['<tpl if="!hideLabel && !(!fieldLabel && hideEmptyLabel)">','<label id="{id}-labelEl"<tpl if="inputId"> for="{inputId}"</tpl> class="{labelCls}"','<tpl if="labelStyle"> style="{labelStyle}"</tpl>>','<tpl if="fieldLabel">{fieldLabel}{labelSeparator}</tpl>',"</label>","</tpl>",'<div class="{baseBodyCls} {fieldBodyCls}" id="{id}-bodyEl" role="presentation">{subTplMarkup}</div>','<div id="{id}-errorEl" class="{errorMsgCls}" style="display:none"></div>','<div class="{clearCls}" role="presentation"><!-- --></div>',{compiled:true,disableFormats:true}],activeErrorsTpl:['<tpl if="errors && errors.length">','<ul><tpl for="errors"><li<tpl if="xindex == xcount"> class="last"</tpl>>{.}</li></tpl></ul>',"</tpl>"],isFieldLabelable:true,formItemCls:Ext.baseCSSPrefix+"form-item",labelCls:Ext.baseCSSPrefix+"form-item-label",errorMsgCls:Ext.baseCSSPrefix+"form-error-msg",baseBodyCls:Ext.baseCSSPrefix+"form-item-body",fieldBodyCls:"",clearCls:Ext.baseCSSPrefix+"clear",invalidCls:Ext.baseCSSPrefix+"form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:false,hideEmptyLabel:true,preventMark:false,autoFitErrors:true,msgTarget:"qtip",initLabelable:function(){this.addCls(this.formItemCls);this.addEvents("errorchange")},getFieldLabel:function(){return this.fieldLabel||""},getLabelableRenderData:function(){var f=this,b=f.labelAlign,g=f.labelCls,e=f.labelClsExtra,c=f.labelPad,a;if(b==="top"){a="margin-bottom:"+c+"px;"}else{a="margin-right:"+c+"px;";if(Ext.isBorderBox){a+="width:"+f.labelWidth+"px;"}}return Ext.copyTo({inputId:f.getInputId(),fieldLabel:f.getFieldLabel(),labelCls:e?g+" "+e:g,labelStyle:a+(f.labelStyle||""),subTplMarkup:f.getSubTplMarkup()},f,"hideLabel,hideEmptyLabel,fieldBodyCls,baseBodyCls,errorMsgCls,clearCls,labelSeparator",true)},onLabelableRender:function(){this.addChildEls("labelEl","bodyEl","errorEl")},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(a){this.activeError=a;this.activeErrors=[a];this.renderActiveError()},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(a){this.activeErrors=a;this.activeError=this.getTpl("activeErrorsTpl").apply({errors:a});this.renderActiveError()},unsetActiveError:function(){delete this.activeError;delete this.activeErrors;this.renderActiveError()},renderActiveError:function(){var c=this,b=c.getActiveError(),a=!!b;if(b!==c.lastActiveError){c.fireEvent("errorchange",c,b);c.lastActiveError=b}if(c.rendered&&!c.isDestroyed&&!c.preventMark){c.el[a?"addCls":"removeCls"](c.invalidCls);c.getActionEl().dom.setAttribute("aria-invalid",a);c.errorEl.dom.innerHTML=b}},setFieldDefaults:function(b){var a=this;Ext.iterate(b,function(c,e){if(!a.hasOwnProperty(c)){a[c]=e}})},getBodyNaturalWidth:function(){return this.bodyEl.getWidth()}});Ext.define("Ext.state.Manager",{singleton:true,requires:["Ext.state.Provider"],constructor:function(){this.provider=Ext.create("Ext.state.Provider")},setProvider:function(a){this.provider=a},get:function(b,a){return this.provider.get(b,a)},set:function(a,b){this.provider.set(a,b)},clear:function(a){this.provider.clear(a)},getProvider:function(){return this.provider}});Ext.define("Ext.state.Stateful",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.state.Manager"],stateful:true,saveDelay:100,autoGenIdRe:/^((\w+-)|(ext-comp-))\d{4,}$/i,constructor:function(a){var b=this;a=a||{};if(Ext.isDefined(a.stateful)){b.stateful=a.stateful}if(Ext.isDefined(a.saveDelay)){b.saveDelay=a.saveDelay}b.stateId=b.stateId||a.stateId;if(!b.stateEvents){b.stateEvents=[]}if(a.stateEvents){b.stateEvents.concat(a.stateEvents)}this.addEvents("beforestaterestore","staterestore","beforestatesave","statesave");b.mixins.observable.constructor.call(b);if(b.stateful!==false){b.initStateEvents();b.initState()}},initStateEvents:function(){this.addStateEvents(this.stateEvents)},addStateEvents:function(c){if(!Ext.isArray(c)){c=[c]}var e=this,b=0,a=c.length;for(;b<a;++b){e.on(c[b],e.onStateChange,e)}},onStateChange:function(){var b=this,a=b.saveDelay;if(a>0){if(!b.stateTask){b.stateTask=Ext.create("Ext.util.DelayedTask",b.saveState,b)}b.stateTask.delay(b.saveDelay)}else{b.saveState()}},saveState:function(){var a=this,c,b;if(a.stateful!==false){c=a.getStateId();if(c){b=a.getState();if(a.fireEvent("beforestatesave",a,b)!==false){Ext.state.Manager.set(c,b);a.fireEvent("statesave",a,b)}}}},getState:function(){return null},applyState:function(a){if(a){Ext.apply(this,a)}},getStateId:function(){var a=this,b=a.stateId;if(!b){b=a.autoGenIdRe.test(String(a.id))?null:a.id}return b},initState:function(){var a=this,c=a.getStateId(),b;if(a.stateful!==false){if(c){b=Ext.state.Manager.get(c);if(b){b=Ext.apply({},b);if(a.fireEvent("beforestaterestore",a,b)!==false){a.applyState(b);a.fireEvent("staterestore",a,b)}}}}},savePropToState:function(g,f,e){var b=this,c=b[g],a=b.initialConfig;if(b.hasOwnProperty(g)){if(!a||a[g]!==c){if(f){f[e||g]=c}return true}}return false},savePropsToState:function(c,b){var a=this;Ext.each(c,function(e){a.savePropToState(e,b)});return b},destroy:function(){var a=this.stateTask;if(a){a.cancel()}this.clearListeners()}});Ext.define("Ext.AbstractComponent",{requires:["Ext.ComponentQuery","Ext.ComponentManager"],mixins:{observable:"Ext.util.Observable",animate:"Ext.util.Animate",state:"Ext.state.Stateful"},uses:["Ext.PluginManager","Ext.ComponentManager","Ext.Element","Ext.DomHelper","Ext.XTemplate","Ext.ComponentQuery","Ext.ComponentLoader","Ext.EventManager","Ext.layout.Layout","Ext.layout.component.Auto","Ext.LoadMask","Ext.ZIndexManager"],statics:{AUTO_ID:1000},isComponent:true,getAutoId:function(){return ++Ext.AbstractComponent.AUTO_ID},renderTpl:null,tplWriteMode:"overwrite",baseCls:Ext.baseCSSPrefix+"component",disabledCls:Ext.baseCSSPrefix+"item-disabled",ui:"default",uiCls:[],hidden:false,disabled:false,draggable:false,floating:false,hideMode:"display",styleHtmlContent:false,styleHtmlCls:Ext.baseCSSPrefix+"html",autoShow:false,autoRender:false,needsLayout:false,allowDomMove:true,rendered:false,componentLayoutCounter:0,weight:0,trimRe:/^\s+|\s+$/g,spacesRe:/\s+/,maskOnDisable:true,constructor:function(b){var e=this,c,a;b=b||{};e.initialConfig=b;Ext.apply(e,b);e.addEvents("beforeactivate","activate","beforedeactivate","deactivate","added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","beforedestroy","destroy","resize","move");e.getId();e.mons=[];e.additionalCls=[];e.renderData=e.renderData||{};e.renderSelectors=e.renderSelectors||{};if(e.plugins){e.plugins=[].concat(e.plugins);e.constructPlugins()}e.initComponent();Ext.ComponentManager.register(e);e.mixins.observable.constructor.call(e);e.mixins.state.constructor.call(e,b);this.addStateEvents("resize");if(e.plugins){e.plugins=[].concat(e.plugins);for(c=0,a=e.plugins.length;c<a;c++){e.plugins[c]=e.initPlugin(e.plugins[c])}}e.loader=e.getLoader();if(e.renderTo){e.render(e.renderTo)}if(e.autoShow){e.show()}if(Ext.isDefined(e.disabledClass)){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.Component: disabledClass has been deprecated. Please use disabledCls.")}e.disabledCls=e.disabledClass;delete e.disabledClass}},initComponent:function(){this.constructPlugins()},getState:function(){var g=this,f=g.ownerCt?(g.shadowOwnerCt||g.ownerCt).getLayout():null,h={collapsed:g.collapsed},c=g.width,b=g.height,a=g.collapseMemento,e;if(g.collapsed&&a){if(Ext.isDefined(a.data.width)){c=a.width}if(Ext.isDefined(a.data.height)){b=a.height}}if(f&&g.flex){h.flex=g.flex;if(f.perpendicularPrefix){h[f.perpendicularPrefix]=g["get"+f.perpendicularPrefixCap]()}else{if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.Component: Specified a flex value on a component not inside a Box layout")}}}else{if(f&&g.anchor){h.anchor=g.anchor;e=g.anchor.split(" ").concat(null);if(!e[0]){if(g.width){h.width=c}}if(!e[1]){if(g.height){h.height=b}}}else{if(g.width){h.width=c}if(g.height){h.height=b}}}if(h.width==g.initialConfig.width){delete h.width}if(h.height==g.initialConfig.height){delete h.height}if(f&&f.align&&(f.align.indexOf("stretch")!==-1)){delete h[f.perpendicularPrefix]}return h},show:Ext.emptyFn,animate:function(b){var g=this,l;b=b||{};l=b.to||{};if(Ext.fx.Manager.hasFxBlock(g.id)){return g}if(!b.dynamic&&(l.height||l.width)){var f=g.getWidth(),m=f,e=g.getHeight(),c=e,a=false;if(l.height&&l.height>e){c=l.height;a=true}if(l.width&&l.width>f){m=l.width;a=true}if(a){var k=!Ext.isNumber(g.width),i=!Ext.isNumber(g.height);g.componentLayout.childrenChanged=true;g.setSize(m,c,g.ownerCt);g.el.setSize(f,e);if(k){delete g.width}if(i){delete g.height}}}return g.mixins.animate.animate.apply(g,arguments)},findLayoutController:function(){return this.findParentBy(function(a){return !a.ownerCt||(a.layout.layoutBusy&&!a.ownerCt.layout.layoutBusy)})},onShow:function(){var a=this.needsLayout;if(Ext.isObject(a)){this.doComponentLayout(a.width,a.height,a.isSetSize,a.ownerCt)}},constructPlugin:function(a){if(a.ptype&&typeof a.init!="function"){a.cmp=this;a=Ext.PluginManager.create(a)}else{if(typeof a=="string"){a=Ext.PluginManager.create({ptype:a,cmp:this})}}return a},constructPlugins:function(){var e=this,b=e.plugins,c,a;if(b){for(c=0,a=b.length;c<a;c++){b[c]=e.constructPlugin(b[c])}}},initPlugin:function(a){a.init(this);return a},doAutoRender:function(){var a=this;if(a.floating){a.render(document.body)}else{a.render(Ext.isBoolean(a.autoRender)?Ext.getBody():a.autoRender)}},render:function(b,a){var c=this;if(!c.rendered&&c.fireEvent("beforerender",c)!==false){c.rendering=true;if(c.el){c.el=Ext.get(c.el)}if(c.floating){c.onFloatRender()}b=c.initContainer(b);c.onRender(b,a);c.el.setVisibilityMode(Ext.Element[c.hideMode.toUpperCase()]);if(c.overCls){c.el.hover(c.addOverCls,c.removeOverCls,c)}c.fireEvent("render",c);c.initContent();c.afterRender(b);c.fireEvent("afterrender",c);c.initEvents();if(c.hidden){c.el.hide()}if(c.disabled){c.disable(true)}delete c.rendering}return c},onRender:function(b,a){var g=this,e=g.el,f=g.initStyles(),k,h,c;a=g.getInsertPosition(a);if(!e){if(a){e=Ext.DomHelper.insertBefore(a,g.getElConfig(),true)}else{e=Ext.DomHelper.append(b,g.getElConfig(),true)}}else{if(g.allowDomMove!==false){if(a){b.dom.insertBefore(e.dom,a)}else{b.dom.appendChild(e.dom)}}}if(Ext.scopeResetCSS&&!g.ownerCt){if(e.dom==Ext.getBody().dom){e.parent().addCls(Ext.baseCSSPrefix+"reset")}else{g.resetEl=e.wrap({cls:Ext.baseCSSPrefix+"reset"})}}g.setUI(g.ui);e.addCls(g.initCls());e.setStyle(f);g.el=e;g.initFrame();k=g.initRenderTpl();if(k){h=g.initRenderData();k.append(g.getTargetEl(),h)}g.applyRenderSelectors();g.rendered=true},afterRender:function(){var a=this,c,b;a.getComponentLayout();if(a.collapsed||(!a.ownerCt||(a.height||a.width))){a.setSize(a.width,a.height)}else{a.renderChildren()}if(a.floating&&(a.x===undefined||a.y===undefined)){if(a.floatParent){b=a.el.getAlignToXY(a.floatParent.getTargetEl(),"c-c");c=a.floatParent.getTargetEl().translatePoints(b[0],b[1])}else{b=a.el.getAlignToXY(a.container,"c-c");c=a.container.translatePoints(b[0],b[1])}a.x=a.x===undefined?c.left:a.x;a.y=a.y===undefined?c.top:a.y}if(Ext.isDefined(a.x)||Ext.isDefined(a.y)){a.setPosition(a.x,a.y)}if(a.styleHtmlContent){a.getTargetEl().addCls(a.styleHtmlCls)}},registerFloatingItem:function(b){var a=this;if(!a.floatingItems){a.floatingItems=Ext.create("Ext.ZIndexManager",a)}a.floatingItems.register(b)},renderChildren:function(){var b=this,a=b.getComponentLayout();b.suspendLayout=true;a.renderChildren();delete b.suspendLayout},frameCls:Ext.baseCSSPrefix+"frame",frameIdRegex:/[-]frame\d+[TMB][LCR]$/,frameElementCls:{tl:[],tc:[],tr:[],ml:[],mc:[],mr:[],bl:[],bc:[],br:[]},frameTpl:['<tpl if="top">','<tpl if="left"><div id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl></tpl>" style="background-position: {tl}; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl></tpl>" style="background-position: {tr}; padding-right: {frameWidth}px" role="presentation"></tpl>','<div id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl></tpl>" style="background-position: {tc}; height: {frameWidth}px" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl></tpl>" style="background-position: {ml}; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl></tpl>" style="background-position: {mr}; padding-right: {frameWidth}px" role="presentation"></tpl>','<div id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl></tpl>" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl></tpl>" style="background-position: {bl}; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl></tpl>" style="background-position: {br}; padding-right: {frameWidth}px" role="presentation"></tpl>','<div id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl></tpl>" style="background-position: {bc}; height: {frameWidth}px" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>"],frameTableTpl:["<table><tbody>",'<tpl if="top">',"<tr>",'<tpl if="left"><td id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl></tpl>" style="background-position: {tl}; padding-left:{frameWidth}px" role="presentation"></td></tpl>','<td id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl></tpl>" style="background-position: {tc}; height: {frameWidth}px" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl></tpl>" style="background-position: {tr}; padding-left: {frameWidth}px" role="presentation"></td></tpl>',"</tr>","</tpl>","<tr>",'<tpl if="left"><td id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl></tpl>" style="background-position: {ml}; padding-left: {frameWidth}px" role="presentation"></td></tpl>','<td id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl></tpl>" style="background-position: 0 0;" role="presentation"></td>','<tpl if="right"><td id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl></tpl>" style="background-position: {mr}; padding-left: {frameWidth}px" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">',"<tr>",'<tpl if="left"><td id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl></tpl>" style="background-position: {bl}; padding-left: {frameWidth}px" role="presentation"></td></tpl>','<td id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl></tpl>" style="background-position: {bc}; height: {frameWidth}px" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl></tpl>" style="background-position: {br}; padding-left: {frameWidth}px" role="presentation"></td></tpl>',"</tr>","</tpl>","</tbody></table>"],initFrame:function(){if(Ext.supports.CSS3BorderRadius){return false}var f=this,e=f.getFrameInfo(),b=e.width,a=f.getFrameTpl(e.table),c;if(f.frame){f.frameGenId=c=(f.frameGenId||0)+1;c=f.id+"-frame"+c;a.insertFirst(f.el,Ext.apply({},{fgid:c,ui:f.ui,uiCls:f.uiCls,frameCls:f.frameCls,baseCls:f.baseCls,frameWidth:b,top:!!e.top,left:!!e.left,right:!!e.right,bottom:!!e.bottom},f.getFramePositions(e)));f.frameBody=f.el.down("."+f.frameCls+"-mc");f.removeChildEls(function(g){return g.id&&f.frameIdRegex.test(g.id)});Ext.each(["TL","TC","TR","ML","MC","MR","BL","BC","BR"],function(g){f.childEls.push({name:"frame"+g,id:c+g})})}},updateFrame:function(){if(Ext.supports.CSS3BorderRadius){return false}var f=this,h=this.frameSize&&this.frameSize.table,g=this.frameTL,e=this.frameBL,c=this.frameML,a=this.frameMC,b;this.initFrame();if(a){if(f.frame){delete f.frameTL;delete f.frameTC;delete f.frameTR;delete f.frameML;delete f.frameMC;delete f.frameMR;delete f.frameBL;delete f.frameBC;delete f.frameBR;this.applyRenderSelectors();b=this.frameMC.dom.className;a.insertAfter(this.frameMC);this.frameMC.remove();this.frameBody=this.frameMC=a;a.dom.className=b;if(h){f.el.query("> table")[1].remove()}else{if(g){g.remove()}if(e){e.remove()}c.remove()}}else{}}else{if(f.frame){this.applyRenderSelectors()}}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius){return false}var c=this,g=c.el.getStyle("background-position-x"),f=c.el.getStyle("background-position-y"),e,b=false,a;if(!g&&!f){e=c.el.getStyle("background-position").split(" ");g=e[0];f=e[1]}if(parseInt(g,10)>=1000000&&parseInt(f,10)>=1000000){a=Math.max;b={table:g.substr(0,3)=="110",vertical:f.substr(0,3)=="110",top:a(g.substr(3,2),g.substr(5,2)),right:a(g.substr(5,2),f.substr(3,2)),bottom:a(f.substr(3,2),f.substr(5,2)),left:a(f.substr(5,2),g.substr(3,2))};b.width=a(b.top,b.right,b.bottom,b.left);c.el.setStyle("background-image","none")}if(c.frame===true&&!b){Ext.Error.raise("You have set frame: true explicity on this component while it doesn't have any framing defined in the CSS template. In this case IE can't figure out what sizes to use and thus framing on this component will be disabled.")}c.frame=c.frame||!!b;c.frameSize=b||false;return b},getFramePositions:function(f){var h=this,i=f.width,k=h.dock,e,b,g,c,a;if(f.vertical){b="0 -"+(i*0)+"px";g="0 -"+(i*1)+"px";if(k&&k=="right"){b="right -"+(i*0)+"px";g="right -"+(i*1)+"px"}e={tl:"0 -"+(i*0)+"px",tr:"0 -"+(i*1)+"px",bl:"0 -"+(i*2)+"px",br:"0 -"+(i*3)+"px",ml:"-"+(i*1)+"px 0",mr:"right 0",tc:b,bc:g}}else{c="-"+(i*0)+"px 0";a="right 0";if(k&&k=="bottom"){c="left bottom";a="right bottom"}e={tl:"0 -"+(i*2)+"px",tr:"right -"+(i*3)+"px",bl:"0 -"+(i*4)+"px",br:"right -"+(i*5)+"px",ml:c,mr:a,tc:"0 -"+(i*0)+"px",bc:"0 -"+(i*1)+"px"}}return e},getFrameTpl:function(a){return a?this.getTpl("frameTableTpl"):this.getTpl("frameTpl")},initCls:function(){var b=this,a=[];a.push(b.baseCls);if(Ext.isDefined(b.cmpCls)){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.Component: cmpCls has been deprecated. Please use componentCls.")}b.componentCls=b.cmpCls;delete b.cmpCls}if(b.componentCls){a.push(b.componentCls)}else{b.componentCls=b.baseCls}if(b.cls){a.push(b.cls);delete b.cls}return a.concat(b.additionalCls)},setUI:function(g){var f=this,b=Ext.Array.clone(f.uiCls),h=[],e=[],a,c;for(c=0;c<b.length;c++){a=b[c];e=e.concat(f.removeClsWithUI(a,true));h.push(a)}if(e.length){f.removeCls(e)}f.removeUIFromElement();f.ui=g;f.addUIToElement();e=[];for(c=0;c<h.length;c++){a=h[c];e=e.concat(f.addClsWithUI(a,true))}if(e.length){f.addCls(e)}},addClsWithUI:function(a,f){var e=this,c=[],b;if(!Ext.isArray(a)){a=[a]}for(b=0;b<a.length;b++){if(a[b]&&!e.hasUICls(a[b])){e.uiCls=Ext.Array.clone(e.uiCls);e.uiCls.push(a[b]);c=c.concat(e.addUIClsToElement(a[b]))}}if(f!==true){e.addCls(c)}return c},removeClsWithUI:function(a,f){var e=this,c=[],b;if(!Ext.isArray(a)){a=[a]}for(b=0;b<a.length;b++){if(a[b]&&e.hasUICls(a[b])){e.uiCls=Ext.Array.remove(e.uiCls,a[b]);c=c.concat(e.removeUIClsFromElement(a[b]))}}if(f!==true){e.removeCls(c)}return c},hasUICls:function(a){var b=this,c=b.uiCls||[];return Ext.Array.contains(c,a)},addUIClsToElement:function(l,a){var h=this,m=[],k=h.frameElementCls;m.push(Ext.baseCSSPrefix+l);m.push(h.baseCls+"-"+l);m.push(h.baseCls+"-"+h.ui+"-"+l);if(!a&&h.frame&&!Ext.supports.CSS3BorderRadius){var f=["tl","tc","tr","ml","mc","mr","bl","bc","br"],c,g,e,b;for(g=0;g<f.length;g++){b=h["frame"+f[g].toUpperCase()];c=[h.baseCls+"-"+h.ui+"-"+f[g],h.baseCls+"-"+h.ui+"-"+l+"-"+f[g]];if(b&&b.dom){b.addCls(c)}else{for(e=0;e<c.length;e++){if(Ext.Array.indexOf(k[f[g]],c[e])==-1){k[f[g]].push(c[e])}}}}}h.frameElementCls=k;return m},removeUIClsFromElement:function(b,k){var h=this,a=[],g=h.frameElementCls;a.push(Ext.baseCSSPrefix+b);a.push(h.baseCls+"-"+b);a.push(h.baseCls+"-"+h.ui+"-"+b);if(!k&&h.frame&&!Ext.supports.CSS3BorderRadius){var e=["tl","tc","tr","ml","mc","mr","bl","bc","br"],c,f;b=h.baseCls+"-"+h.ui+"-"+b+"-"+e[c];for(c=0;c<e.length;c++){f=h["frame"+e[c].toUpperCase()];if(f&&f.dom){f.removeCls(b)}else{Ext.Array.remove(g[e[c]],b)}}}h.frameElementCls=g;return a},addUIToElement:function(h){var g=this,f=g.frameElementCls;g.addCls(g.baseCls+"-"+g.ui);if(g.frame&&!Ext.supports.CSS3BorderRadius){var c=["tl","tc","tr","ml","mc","mr","bl","bc","br"],b,e,a;for(b=0;b<c.length;b++){e=g["frame"+c[b].toUpperCase()];a=g.baseCls+"-"+g.ui+"-"+c[b];if(e){e.addCls(a)}else{if(!Ext.Array.contains(f[c[b]],a)){f[c[b]].push(a)}}}}},removeUIFromElement:function(){var h=this,g=h.frameElementCls;h.removeCls(h.baseCls+"-"+h.ui);if(h.frame&&!Ext.supports.CSS3BorderRadius){var e=["tl","tc","tr","ml","mc","mr","bl","bc","br"],c,b,f,a;for(c=0;c<e.length;c++){f=h["frame"+e[c].toUpperCase()];a=h.baseCls+"-"+h.ui+"-"+e[c];if(f){f.removeCls(a)}else{Ext.Array.remove(g[e[c]],a)}}}},getElConfig:function(){if(Ext.isString(this.autoEl)){this.autoEl={tag:this.autoEl}}var a=this.autoEl||{tag:"div"};a.id=this.id;return a},getInsertPosition:function(a){if(a!==undefined){if(Ext.isNumber(a)){a=this.container.dom.childNodes[a]}else{a=Ext.getDom(a)}}return a},initContainer:function(a){var b=this;if(!a&&b.el){a=b.el.dom.parentNode;b.allowDomMove=false}b.container=Ext.get(a);if(b.ctCls){b.container.addCls(b.ctCls)}return b.container},initRenderData:function(){var a=this;return Ext.applyIf(a.renderData,{id:a.id,ui:a.ui,uiCls:a.uiCls,baseCls:a.baseCls,componentCls:a.componentCls,frame:a.frame})},getTpl:function(c){var f=this,b=f.self.prototype,e,a;if(f.hasOwnProperty(c)){a=f[c];if(a&&!(a instanceof Ext.XTemplate)){f[c]=Ext.ClassManager.dynInstantiate("Ext.XTemplate",a)}return f[c]}if(!(b[c] instanceof Ext.XTemplate)){e=b;do{if(e.hasOwnProperty(c)){a=e[c];if(a&&!(a instanceof Ext.XTemplate)){e[c]=Ext.ClassManager.dynInstantiate("Ext.XTemplate",a);break}}e=e.superclass}while(e)}return b[c]},initRenderTpl:function(){return this.getTpl("renderTpl")},initStyles:function(){var b={},c=this,a=Ext.Element;if(Ext.isString(c.style)){b=a.parseStyles(c.style)}else{b=Ext.apply({},c.style)}if(c.padding!==undefined){b.padding=a.unitizeBox((c.padding===true)?5:c.padding)}if(c.margin!==undefined){b.margin=a.unitizeBox((c.margin===true)?5:c.margin)}delete c.style;return b},initContent:function(){var b=this,e=b.getTargetEl(),a,c;if(b.html){e.update(Ext.DomHelper.markup(b.html));delete b.html}if(b.contentEl){a=Ext.get(b.contentEl);c=Ext.baseCSSPrefix;a.removeCls([c+"hidden",c+"hide-display",c+"hide-offsets",c+"hide-nosize"]);e.appendChild(a.dom)}if(b.tpl){if(!b.tpl.isTemplate){b.tpl=Ext.create("Ext.XTemplate",b.tpl)}if(b.data){b.tpl[b.tplWriteMode](e,b.data);delete b.data}}},initEvents:function(){var c=this,f=c.afterRenderEvents,b,e,a=function(g){c.mon(b,g)};if(f){for(e in f){if(f.hasOwnProperty(e)){b=c[e];if(b&&b.on){Ext.each(f[e],a)}}}}},addChildEls:function(){var b=this,a=b.childEls||(b.childEls=[]);a.push.apply(a,arguments)},removeChildEls:function(g){var f=this,a=f.childEls,e=(f.childEls=[]),h,b,c;for(b=0,h=a.length;b<h;++b){c=a[b];if(!g(c)){e.push(c)}}},applyRenderSelectors:function(){var g=this,h=g.childEls,k=g.renderSelectors,a=g.el,e=a.dom,l,m,c,f,b;if(h){l=g.id+"-";for(f=h.length;f--;){m=c=h[f];if(typeof(m)!="string"){c=m.id||(l+m.itemId);m=m.name}else{c=l+c}g[m]=a.getById(c)}}if(k){for(b in k){if(k.hasOwnProperty(b)&&k[b]){g[b]=Ext.get(Ext.DomQuery.selectNode(k[b],e))}}}},is:function(a){return Ext.ComponentQuery.is(this,a)},up:function(b){var a=this.ownerCt;if(b){for(;a;a=a.ownerCt){if(Ext.ComponentQuery.is(a,b)){return a}}}return a},nextSibling:function(b){var g=this.ownerCt,e,f,a,h;if(g){e=g.items;a=e.indexOf(this)+1;if(a){if(b){for(f=e.getCount();a<f;a++){if((h=e.getAt(a)).is(b)){return h}}}else{if(a<e.getCount()){return e.getAt(a)}}}}return null},previousSibling:function(b){var f=this.ownerCt,e,a,g;if(f){e=f.items;a=e.indexOf(this);if(a!=-1){if(b){for(--a;a>=0;a--){if((g=e.getAt(a)).is(b)){return g}}}else{if(a){return e.getAt(--a)}}}}return null},previousNode:function(c,e){var h=this,b,g,a,f;if(e&&h.is(c)){return h}b=this.prev(c);if(b){return b}if(h.ownerCt){for(g=h.ownerCt.items.items,f=Ext.Array.indexOf(g,h)-1;f>-1;f--){if(g[f].query){b=g[f].query(c);b=b[b.length-1];if(b){return b}}}return h.ownerCt.previousNode(c,true)}},nextNode:function(c,e){var h=this,b,g,a,f;if(e&&h.is(c)){return h}b=this.next(c);if(b){return b}if(h.ownerCt){for(g=h.ownerCt.items,f=g.indexOf(h)+1,g=g.items,a=g.length;f<a;f++){if(g[f].down){b=g[f].down(c);if(b){return b}}}return h.ownerCt.nextNode(c)}},getId:function(){return this.id||(this.id="ext-comp-"+(this.getAutoId()))},getItemId:function(){return this.itemId||this.id},getEl:function(){return this.el},getTargetEl:function(){return this.frameBody||this.el},isXType:function(b,a){if(Ext.isFunction(b)){b=b.xtype}else{if(Ext.isObject(b)){b=b.statics().xtype}}return !a?("/"+this.getXTypes()+"/").indexOf("/"+b+"/")!=-1:this.self.xtype==b},getXTypes:function(){var c=this.self,e,b,a;if(!c.xtypes){e=[];b=this;while(b){a=b.xtypes;if(a!==undefined){e.unshift.apply(e,a)}b=b.superclass}c.xtypeChain=e;c.xtypes=e.join("/")}return c.xtypes},update:function(b,c,a){var e=this;if(e.tpl&&!Ext.isString(b)){e.data=b;if(e.rendered){e.tpl[e.tplWriteMode](e.getTargetEl(),b||{})}}else{e.html=Ext.isObject(b)?Ext.DomHelper.markup(b):b;if(e.rendered){e.getTargetEl().update(e.html,c,a)}}if(e.rendered){e.doComponentLayout()}},setVisible:function(a){return this[a?"show":"hide"]()},isVisible:function(a){var c=this,f=c,e=!c.hidden,b=c.ownerCt;c.hiddenAncestor=false;if(c.destroyed){return false}if(a&&e&&c.rendered&&b){while(b){if(b.hidden||(b.collapsed&&!(b.getDockedItems&&Ext.Array.contains(b.getDockedItems(),f)))){c.hiddenAncestor=b;e=false;break}f=b;b=b.ownerCt}}return e},enable:function(a){var b=this;if(b.rendered){b.el.removeCls(b.disabledCls);b.el.dom.disabled=false;b.onEnable()}b.disabled=false;if(a!==true){b.fireEvent("enable",b)}return b},disable:function(a){var b=this;if(b.rendered){b.el.addCls(b.disabledCls);b.el.dom.disabled=true;b.onDisable()}b.disabled=true;if(a!==true){b.fireEvent("disable",b)}return b},onEnable:function(){if(this.maskOnDisable){this.el.unmask()}},onDisable:function(){if(this.maskOnDisable){this.el.mask()}},isDisabled:function(){return this.disabled},setDisabled:function(a){return this[a?"disable":"enable"]()},isHidden:function(){return this.hidden},addCls:function(a){var b=this;if(!a){return b}if(!Ext.isArray(a)){a=a.replace(b.trimRe,"").split(b.spacesRe)}if(b.rendered){b.el.addCls(a)}else{b.additionalCls=Ext.Array.unique(b.additionalCls.concat(a))}return b},addClass:function(){return this.addCls.apply(this,arguments)},removeCls:function(a){var b=this;if(!a){return b}if(!Ext.isArray(a)){a=a.replace(b.trimRe,"").split(b.spacesRe)}if(b.rendered){b.el.removeCls(a)}else{if(b.additionalCls.length){Ext.each(a,function(c){Ext.Array.remove(b.additionalCls,c)})}}return b},removeClass:function(){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.Component: removeClass has been deprecated. Please use removeCls.")}return this.removeCls.apply(this,arguments)},addOverCls:function(){var a=this;if(!a.disabled){a.el.addCls(a.overCls)}},removeOverCls:function(){this.el.removeCls(this.overCls)},addListener:function(b,g,f,a){var h=this,e,c;if(Ext.isString(b)&&(Ext.isObject(g)||a&&a.element)){if(a.element){e=g;g={};g[b]=e;b=a.element;if(f){g.scope=f}for(c in a){if(a.hasOwnProperty(c)){if(h.eventOptionsRe.test(c)){g[c]=a[c]}}}}if(h[b]&&h[b].on){h.mon(h[b],g)}else{h.afterRenderEvents=h.afterRenderEvents||{};if(!h.afterRenderEvents[b]){h.afterRenderEvents[b]=[]}h.afterRenderEvents[b].push(g)}}return h.mixins.observable.addListener.apply(h,arguments)},removeManagedListenerItem:function(b,a,i,e,g,f){var h=this,c=a.options?a.options.element:null;if(c){c=h[c];if(c&&c.un){if(b||(a.item===i&&a.ename===e&&(!g||a.fn===g)&&(!f||a.scope===f))){c.un(a.ename,a.fn,a.scope);if(!b){Ext.Array.remove(h.managedListeners,a)}}}}else{return h.mixins.observable.removeManagedListenerItem.apply(h,arguments)}},getBubbleTarget:function(){return this.ownerCt},isFloating:function(){return this.floating},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},onAdded:function(a,b){this.ownerCt=a;this.fireEvent("added",this,a,b)},onRemoved:function(){var a=this;a.fireEvent("removed",a,a.ownerCt);delete a.ownerCt},beforeDestroy:Ext.emptyFn,onResize:Ext.emptyFn,setSize:function(b,a){var c=this,e;if(Ext.isObject(b)){a=b.height;b=b.width}if(Ext.isNumber(b)){b=Ext.Number.constrain(b,c.minWidth,c.maxWidth)}if(Ext.isNumber(a)){a=Ext.Number.constrain(a,c.minHeight,c.maxHeight)}if(!c.rendered||!c.isVisible()){if(c.hiddenAncestor){e=c.hiddenAncestor.layoutOnShow;e.remove(c);e.add(c)}c.needsLayout={width:b,height:a,isSetSize:true};if(!c.rendered){c.width=(b!==undefined)?b:c.width;c.height=(a!==undefined)?a:c.height}return c}c.doComponentLayout(b,a,true);return c},isFixedWidth:function(){var b=this,a=b.layoutManagedWidth;if(Ext.isDefined(b.width)||a==1){return true}if(a==2){return false}return(b.ownerCt&&b.ownerCt.isFixedWidth())},isFixedHeight:function(){var a=this,b=a.layoutManagedHeight;if(Ext.isDefined(a.height)||b==1){return true}if(b==2){return false}return(a.ownerCt&&a.ownerCt.isFixedHeight())},setCalculatedSize:function(b,a,f){var c=this,e;if(Ext.isObject(b)){f=b.ownerCt;a=b.height;b=b.width}if(Ext.isNumber(b)){b=Ext.Number.constrain(b,c.minWidth,c.maxWidth)}if(Ext.isNumber(a)){a=Ext.Number.constrain(a,c.minHeight,c.maxHeight)}if(!c.rendered||!c.isVisible()){if(c.hiddenAncestor){e=c.hiddenAncestor.layoutOnShow;e.remove(c);e.add(c)}c.needsLayout={width:b,height:a,isSetSize:false,ownerCt:f};return c}c.doComponentLayout(b,a,false,f);return c},doComponentLayout:function(f,b,c,h){var g=this,e=g.getComponentLayout(),a=e.lastComponentSize||{width:undefined,height:undefined};if(g.rendered&&e){if(!Ext.isDefined(f)){if(g.isFixedWidth()){f=Ext.isDefined(g.width)?g.width:a.width}}if(!Ext.isDefined(b)){if(g.isFixedHeight()){b=Ext.isDefined(g.height)?g.height:a.height}}if(c){g.width=f;g.height=b}e.layout(f,b,c,h)}return g},forceComponentLayout:function(){this.doComponentLayout()},setComponentLayout:function(b){var a=this.componentLayout;if(a&&a.isLayout&&a!=b){a.setOwner(null)}this.componentLayout=b;b.setOwner(this)},getComponentLayout:function(){var a=this;if(!a.componentLayout||!a.componentLayout.isLayout){a.setComponentLayout(Ext.layout.Layout.create(a.componentLayout,"autocomponent"))}return a.componentLayout},afterComponentLayout:function(c,a,b,h){var g=this,f=g.componentLayout,e=g.preLayoutSize;++g.componentLayoutCounter;if(!e||((c!==e.width)||(a!==e.height))){g.fireEvent("resize",g,c,a)}},beforeComponentLayout:function(c,a,b,e){this.preLayoutSize=this.componentLayout.lastComponentSize;return true},setPosition:function(a,c){var b=this;if(Ext.isObject(a)){c=a.y;a=a.x}if(!b.rendered){return b}if(a!==undefined||c!==undefined){b.el.setBox(a,c);b.onPosition(a,c);b.fireEvent("move",b,a,c)}return b},onPosition:Ext.emptyFn,setWidth:function(a){return this.setSize(a)},setHeight:function(a){return this.setSize(undefined,a)},getSize:function(){return this.el.getSize()},getWidth:function(){return this.el.getWidth()},getHeight:function(){return this.el.getHeight()},getLoader:function(){var c=this,b=c.autoLoad?(Ext.isObject(c.autoLoad)?c.autoLoad:{url:c.autoLoad}):null,a=c.loader||b;if(a){if(!a.isLoader){c.loader=Ext.create("Ext.ComponentLoader",Ext.apply({target:c,autoLoad:b},a))}else{a.setTarget(c)}return c.loader}return null},setLoading:function(c,e){var b=this,a;if(b.rendered){if(c!==false&&!b.collapsed){if(Ext.isObject(c)){a=c}else{if(Ext.isString(c)){a={msg:c}}else{a={}}}b.loadMask=b.loadMask||Ext.create("Ext.LoadMask",e?b.getTargetEl():b.el,a);b.loadMask.show()}else{if(b.loadMask){Ext.destroy(b.loadMask);b.loadMask=null}}}return b.loadMask},setDocked:function(b,c){var a=this;a.dock=b;if(c&&a.ownerCt&&a.rendered){a.ownerCt.doComponentLayout()}return a},onDestroy:function(){var a=this;if(a.monitorResize&&Ext.EventManager.resizeEvent){Ext.EventManager.resizeEvent.removeListener(a.setSize,a)}Ext.destroy(a.componentLayout,a.loadMask,a.floatingItems)},cleanElementRefs:function(){var h=this,f=0,g=h.childEls,e=h.renderSelectors,b,c,a;if(h.rendered){if(g){for(a=g.length;f<a;++f){c=g[f];if(typeof(c)!="string"){c=c.name}delete h[c]}}if(e){for(b in e){if(e.hasOwnProperty(b)){delete h[b]}}}}delete h.rendered;delete h.el;delete h.frameBody},destroy:function(){var a=this;if(!a.isDestroyed){if(a.fireEvent("beforedestroy",a)!==false){a.destroying=true;a.beforeDestroy();if(a.floating){delete a.floatParent;if(a.zIndexManager){a.zIndexManager.unregister(a)}}else{if(a.ownerCt&&a.ownerCt.remove){a.ownerCt.remove(a,false)}}a.onDestroy();Ext.destroy(a.plugins);if(a.rendered){a.el.remove()}a.fireEvent("destroy",a);Ext.ComponentManager.unregister(a);a.mixins.state.destroy.call(a);a.clearListeners();a.cleanElementRefs();a.destroying=false;a.isDestroyed=true}}},getPlugin:function(b){var c=0,a=this.plugins,e=a.length;for(;c<e;c++){if(a[c].pluginId===b){return a[c]}}},isDescendantOf:function(a){return !!this.findParentBy(function(b){return b===a})}},function(){this.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"})});Ext.define("Ext.Component",{alias:["widget.component","widget.box"],extend:"Ext.AbstractComponent",requires:["Ext.util.DelayedTask"],uses:["Ext.Layer","Ext.resizer.Resizer","Ext.util.ComponentDragger"],mixins:{floating:"Ext.util.Floating"},statics:{DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g},resizeHandles:"all",floating:false,toFrontOnShow:true,hideMode:"display",hideParent:false,ariaRole:"presentation",bubbleEvents:[],actionMode:"el",monPropRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,constructor:function(a){var b=this;a=a||{};if(a.initialConfig){if(a.isAction){b.baseAction=a}a=a.initialConfig}else{if(a.tagName||a.dom||Ext.isString(a)){a={applyTo:a,id:a.id||a}}}b.callParent([a]);if(b.baseAction){b.baseAction.addComponent(b)}},initComponent:function(){var a=this;a.callParent();if(a.listeners){a.on(a.listeners);delete a.listeners}a.enableBubble(a.bubbleEvents);a.mons=[]},afterRender:function(){var b=this,a=b.resizable;if(b.floating){b.makeFloating(b.floating)}else{b.el.setVisibilityMode(Ext.Element[b.hideMode.toUpperCase()])}if(Ext.isDefined(b.autoScroll)){b.setAutoScroll(b.autoScroll)}b.callParent();if(!(b.x&&b.y)&&(b.pageX||b.pageY)){b.setPagePosition(b.pageX,b.pageY)}if(a){b.initResizable(a)}if(b.draggable){b.initDraggable()}b.initAria()},initAria:function(){var a=this.getActionEl(),b=this.ariaRole;if(b){a.dom.setAttribute("role",b)}},setAutoScroll:function(a){var b=this,c;a=!!a;if(b.rendered){c=b.getTargetEl();c.setStyle("overflow",a?"auto":"");if(a&&(Ext.isIE6||Ext.isIE7)){c.position()}}b.autoScroll=a;return b},makeFloating:function(a){this.mixins.floating.constructor.call(this,a)},initResizable:function(a){var b=this;a=Ext.apply({target:b,dynamic:false,constrainTo:b.constrainTo||(b.floatParent?b.floatParent.getTargetEl():b.el.getScopeParent()),handles:b.resizeHandles},a);a.target=b;b.resizer=Ext.create("Ext.resizer.Resizer",a)},getDragEl:function(){return this.el},initDraggable:function(){var b=this,a=Ext.applyIf({el:b.getDragEl(),constrainTo:b.constrain?(b.constrainTo||(b.floatParent?b.floatParent.getTargetEl():b.el.getScopeParent())):undefined},b.draggable);if(b.constrain||b.constrainDelegate){a.constrain=b.constrain;a.constrainDelegate=b.constrainDelegate}b.dd=Ext.create("Ext.util.ComponentDragger",b,a)},setPosition:function(l,i,a){var g=this,b=g.el,m={},h,k,f,e,c;if(Ext.isArray(l)){a=i;i=l[1];l=l[0]}g.x=l;g.y=i;if(!g.rendered){return g}h=g.adjustPosition(l,i);k=h.x;f=h.y;e=Ext.isNumber(k);c=Ext.isNumber(f);if(e||c){if(a){if(e){m.left=k}if(c){m.top=f}g.stopAnimation();g.animate(Ext.apply({duration:1000,listeners:{afteranimate:Ext.Function.bind(g.afterSetPosition,g,[k,f])},to:m},a))}else{if(!e){b.setTop(f)}else{if(!c){b.setLeft(k)}else{b.setLeftTop(k,f)}}g.afterSetPosition(k,f)}}return g},afterSetPosition:function(b,a){this.onPosition(b,a);this.fireEvent("move",this,b,a)},showAt:function(a,e,b){var c=this;if(c.floating){c.setPosition(a,e,b)}else{c.setPagePosition(a,e,b)}c.show()},setPagePosition:function(a,f,b){var c=this,e;if(Ext.isArray(a)){f=a[1];a=a[0]}c.pageX=a;c.pageY=f;if(c.floating&&c.floatParent){e=c.floatParent.getTargetEl().getViewRegion();if(Ext.isNumber(a)&&Ext.isNumber(e.left)){a-=e.left}if(Ext.isNumber(f)&&Ext.isNumber(e.top)){f-=e.top}c.setPosition(a,f,b)}else{e=c.el.translatePoints(a,f);c.setPosition(e.left,e.top,b)}return c},getBox:function(b){var c=this.getPosition(b),a=this.getSize();a.x=c[0];a.y=c[1];return a},updateBox:function(a){this.setSize(a.width,a.height);this.setPagePosition(a.x,a.y);return this},getOuterSize:function(){var a=this.el;return{width:a.getWidth()+a.getMargin("lr"),height:a.getHeight()+a.getMargin("tb")}},adjustPosition:function(a,c){if(this.floating&&this.floatParent){var b=this.floatParent.getTargetEl().getViewRegion();a+=b.left;c+=b.top}return{x:a,y:c}},getPosition:function(a){var c=this,b=c.el,e,f;if((a===true)||(c.floating&&!c.floatParent)){return[b.getLeft(true),b.getTop(true)]}e=c.xy||b.getXY();if(c.floating){f=c.floatParent.getTargetEl().getViewRegion();e[0]-=f.left;e[1]-=f.top}return e},getId:function(){var a=this,b;if(!a.id){b=a.getXType();b=b?b.replace(Ext.Component.INVALID_ID_CHARS_Re,"-"):"ext-comp";a.id=b+"-"+a.getAutoId()}return a.id},onEnable:function(){var a=this.getActionEl();a.dom.removeAttribute("aria-disabled");a.dom.disabled=false;this.callParent()},onDisable:function(){var a=this.getActionEl();a.dom.setAttribute("aria-disabled",true);a.dom.disabled=true;this.callParent()},show:function(e,a,b){var c=this;if(c.rendered&&c.isVisible()){if(c.toFrontOnShow&&c.floating){c.toFront()}}else{if(c.fireEvent("beforeshow",c)!==false){c.hidden=false;if(!c.rendered&&(c.autoRender||c.floating)){c.doAutoRender()}if(c.rendered){c.beforeShow();c.onShow.apply(c,arguments);if(c.ownerCt&&!c.floating&&!(c.ownerCt.suspendLayout||c.ownerCt.layout.layoutBusy)){c.ownerCt.doLayout()}c.afterShow.apply(c,arguments)}}}return c},beforeShow:Ext.emptyFn,onShow:function(){var a=this;a.el.show();a.callParent(arguments);if(a.floating&&a.constrain){a.doConstrain()}},afterShow:function(h,b,f){var g=this,a,c,e;h=h||g.animateTarget;if(!g.ghost){h=null}if(h){h=h.el?h.el:Ext.get(h);c=g.el.getBox();a=h.getBox();g.el.addCls(Ext.baseCSSPrefix+"hide-offsets");e=g.ghost();e.el.stopAnimation();e.el.setX(-10000);e.el.animate({from:a,to:c,listeners:{afteranimate:function(){delete e.componentLayout.lastComponentSize;g.unghost();g.el.removeCls(Ext.baseCSSPrefix+"hide-offsets");g.onShowComplete(b,f)}}})}else{g.onShowComplete(b,f)}},onShowComplete:function(a,b){var c=this;if(c.floating){c.toFront()}Ext.callback(a,b||c);c.fireEvent("show",c)},hide:function(){var a=this;a.showOnParentShow=false;if(!(a.rendered&&!a.isVisible())&&a.fireEvent("beforehide",a)!==false){a.hidden=true;if(a.rendered){a.onHide.apply(a,arguments);if(a.ownerCt&&!a.floating&&!(a.ownerCt.suspendLayout||a.ownerCt.layout.layoutBusy)){a.ownerCt.doLayout()}}}return a},onHide:function(g,a,e){var f=this,c,b;g=g||f.animateTarget;if(!f.ghost){g=null}if(g){g=g.el?g.el:Ext.get(g);c=f.ghost();c.el.stopAnimation();b=g.getBox();b.width+="px";b.height+="px";c.el.animate({to:b,listeners:{afteranimate:function(){delete c.componentLayout.lastComponentSize;c.el.hide();f.afterHide(a,e)}}})}f.el.hide();if(!g){f.afterHide(a,e)}},afterHide:function(a,b){Ext.callback(a,b||this);this.fireEvent("hide",this)},onDestroy:function(){var a=this;if(a.rendered){Ext.destroy(a.proxy,a.proxyWrap,a.resizer);if(a.actionMode=="container"||a.removeMode=="container"){a.container.remove()}}delete a.focusTask;a.callParent()},deleteMembers:function(){var b=arguments,a=b.length,c=0;for(;c<a;++c){delete this[b[c]]}},focus:function(e,b){var c=this,a;if(b){if(!c.focusTask){c.focusTask=Ext.create("Ext.util.DelayedTask",c.focus)}c.focusTask.delay(Ext.isNumber(b)?b:10,null,c,[e,false]);return c}if(c.rendered&&!c.isDestroyed){a=c.getFocusEl();a.focus();if(a.dom&&e===true){a.dom.select()}if(c.floating){c.toFront(true)}}return c},getFocusEl:function(){return this.el},blur:function(){if(this.rendered){this.getFocusEl().blur()}return this},getEl:function(){return this.el},getResizeEl:function(){return this.el},getPositionEl:function(){return this.el},getActionEl:function(){return this.el},getVisibilityEl:function(){return this.el},onResize:Ext.emptyFn,getBubbleTarget:function(){return this.ownerCt},getContentTarget:function(){return this.el},cloneConfig:function(c){c=c||{};var e=c.id||Ext.id(),a=Ext.applyIf(c,this.initialConfig),b;a.id=e;b=Ext.getClass(this);return new b(a)},getXType:function(){return this.self.xtype},findParentBy:function(a){var b;for(b=this.ownerCt;b&&!a(b,this);b=b.ownerCt){}return b||null},findParentByType:function(a){return Ext.isFunction(a)?this.findParentBy(function(b){return b.constructor===a}):this.up(a)},bubble:function(c,b,a){var e=this;while(e){if(c.apply(b||e,a||[e])===false){break}e=e.ownerCt}return this},getProxy:function(){var a=this,b;if(!a.proxy){b=Ext.getBody();if(Ext.scopeResetCSS){a.proxyWrap=b=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"reset"})}a.proxy=a.el.createProxy(Ext.baseCSSPrefix+"proxy-el",b,true)}return a.proxy}});Ext.define("Ext.picker.Color",{extend:"Ext.Component",requires:"Ext.XTemplate",alias:"widget.colorpicker",alternateClassName:"Ext.ColorPalette",componentCls:Ext.baseCSSPrefix+"color-picker",selectedCls:Ext.baseCSSPrefix+"color-picker-selected",value:null,clickEvent:"click",allowReselect:false,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],colorRe:/(?:^|\s)color-(.{6})(?:\s|$)/,renderTpl:['<tpl for="colors">','<a href="#" class="color-{.}" hidefocus="on">','<em><span style="background:#{.}" unselectable="on">&#160;</span></em>',"</a>","</tpl>"],initComponent:function(){var a=this;a.callParent(arguments);a.addEvents("select");if(a.handler){a.on("select",a.handler,a.scope,true)}},onRender:function(c,b){var e=this,a=e.clickEvent;Ext.apply(e.renderData,{itemCls:e.itemCls,colors:e.colors});e.callParent(arguments);e.mon(e.el,a,e.handleClick,e,{delegate:"a"});if(a!="click"){e.mon(e.el,"click",Ext.emptyFn,e,{delegate:"a",stopEvent:true})}},afterRender:function(){var a=this,b;a.callParent(arguments);if(a.value){b=a.value;a.value=null;a.select(b,true)}},handleClick:function(c,e){var b=this,a;c.stopEvent();if(!b.disabled){a=e.className.match(b.colorRe)[1];b.select(a.toUpperCase())}},select:function(b,a){var e=this,g=e.selectedCls,f=e.value,c;b=b.replace("#","");if(!e.rendered){e.value=b;return}if(b!=f||e.allowReselect){c=e.el;if(e.value){c.down("a.color-"+f).removeCls(g)}c.down("a.color-"+b).addCls(g);e.value=b;if(a!==true){e.fireEvent("select",e,b)}}},getValue:function(){return this.value||null}});Ext.define("Ext.toolbar.Fill",{extend:"Ext.Component",alias:"widget.tbfill",alternateClassName:"Ext.Toolbar.Fill",isFill:true,flex:1});Ext.define("Ext.layout.component.Component",{extend:"Ext.layout.Layout",type:"component",monitorChildren:true,initLayout:function(){var c=this,a=c.owner,b=a.el;if(!c.initialized){if(a.frameSize){c.frameSize=a.frameSize}else{a.frameSize=c.frameSize={top:0,left:0,bottom:0,right:0}}}c.callParent(arguments)},beforeLayout:function(b,l,m,i){this.callParent(arguments);var h=this,c=h.owner,e=c.ownerCt,g=c.layout,f=c.isVisible(true),a=c.el.child,k;h.previousComponentSize=h.lastComponentSize;if(!m&&((!Ext.isNumber(b)&&c.isFixedWidth())||(!Ext.isNumber(l)&&c.isFixedHeight()))&&i&&i!==e){h.doContainerLayout();return false}if(!f&&(c.hiddenAncestor||c.floating)){if(c.hiddenAncestor){k=c.hiddenAncestor.layoutOnShow;k.remove(c);k.add(c)}c.needsLayout={width:b,height:l,isSetSize:false}}if(f&&this.needsLayout(b,l)){return c.beforeComponentLayout(b,l,m,i)}else{return false}},needsLayout:function(e,a){var f=this,c,b;f.lastComponentSize=f.lastComponentSize||{width:-Infinity,height:-Infinity};c=!Ext.isDefined(e)||f.lastComponentSize.width!==e;b=!Ext.isDefined(a)||f.lastComponentSize.height!==a;return !f.isSizing&&(f.childrenChanged||c||b)},setElementSize:function(c,b,a){if(b!==undefined&&a!==undefined){c.setSize(b,a)}else{if(a!==undefined){c.setHeight(a)}else{if(b!==undefined){c.setWidth(b)}}}},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},setTargetSize:function(e,a){var f=this;f.setElementSize(f.owner.el,e,a);if(f.owner.frameBody){var h=f.getTargetInfo(),g=h.padding,c=h.border,b=f.frameSize;f.setElementSize(f.owner.frameBody,Ext.isNumber(e)?(e-b.left-b.right-g.left-g.right-c.left-c.right):e,Ext.isNumber(a)?(a-b.top-b.bottom-g.top-g.bottom-c.top-c.bottom):a)}f.autoSized={width:!Ext.isNumber(e),height:!Ext.isNumber(a)};f.lastComponentSize={width:e,height:a}},getTargetInfo:function(){if(!this.targetInfo){var b=this.getTarget(),a=this.owner.getTargetEl();this.targetInfo={padding:{top:b.getPadding("t"),right:b.getPadding("r"),bottom:b.getPadding("b"),left:b.getPadding("l")},border:{top:b.getBorderWidth("t"),right:b.getBorderWidth("r"),bottom:b.getBorderWidth("b"),left:b.getBorderWidth("l")},bodyMargin:{top:a.getMargin("t"),right:a.getMargin("r"),bottom:a.getMargin("b"),left:a.getMargin("l")}}}return this.targetInfo},doOwnerCtLayouts:function(){var b=this.owner,f=b.ownerCt,c,i,e=this.lastComponentSize,h=this.previousComponentSize,a=(h&&e&&Ext.isNumber(e.width))?e.width!==h.width:true,g=(h&&e&&Ext.isNumber(e.height))?e.height!==h.height:true;if(!f||(!a&&!g)){return}c=f.componentLayout;i=f.layout;if(!b.floating&&c&&c.monitorChildren&&!c.layoutBusy){if(!f.suspendLayout&&i&&!i.layoutBusy){if(((a&&!f.isFixedWidth())||(g&&!f.isFixedHeight()))){this.isSizing=true;f.doComponentLayout();this.isSizing=false}else{if(i.bindToOwnerCtContainer===true){i.layout()}}}}},doContainerLayout:function(){var f=this,a=f.owner,c=a.ownerCt,e=a.layout,b;if(!a.suspendLayout&&e&&e.isLayout&&!e.layoutBusy&&!e.isAutoDock){e.layout()}if(c&&c.componentLayout){b=c.componentLayout;if(!a.floating&&b.monitorChildren&&!b.layoutBusy){b.childrenChanged=true}}},afterLayout:function(c,a,b,e){this.doContainerLayout();this.owner.afterComponentLayout(c,a,b,e)}});Ext.define("Ext.layout.component.Button",{alias:["layout.button"],extend:"Ext.layout.component.Component",type:"button",cellClsRE:/-btn-(tl|br)\b/,htmlRE:/<.*>/,beforeLayout:function(){return this.callParent(arguments)||this.lastText!==this.owner.text},onLayout:function(c,q){var m=this,h=Ext.isNumber,e=m.owner,p=e.el,i=e.btnEl,f=e.btnInnerEl,g=e.btnIconEl,k=(e.icon||e.iconCls)&&(e.iconAlign=="top"||e.iconAlign=="bottom"),b=e.minWidth,n=e.maxWidth,a,r,l;m.getTargetInfo();m.callParent(arguments);f.unclip();m.setTargetSize(c,q);if(!h(c)){if(e.text&&(Ext.isIE6||Ext.isIE7)&&Ext.isStrict&&i&&i.getWidth()>20){r=m.btnFrameWidth;l=Ext.util.TextMetrics.measure(f,e.text);p.setWidth(l.width+r+m.adjWidth);i.setWidth(l.width+r);f.setWidth(l.width+r);if(k){g.setWidth(l.width+r)}}else{p.setWidth(null);i.setWidth(null);f.setWidth(null);g.setWidth(null)}if(b||n){a=p.getWidth();if(b&&(a<b)){m.setTargetSize(b,q)}else{if(n&&(a>n)){f.clip();m.setTargetSize(n,q)}}}}this.lastText=e.text},setTargetSize:function(a,m){var h=this,b=h.owner,f=Ext.isNumber,e=b.btnInnerEl,k=(f(a)?a-h.adjWidth:a),g=(f(m)?m-h.adjHeight:m),c=h.btnFrameHeight,l=b.getText(),i;h.callParent(arguments);h.setElementSize(b.btnEl,k,g);h.setElementSize(e,k,g);if(g>=0){e.setStyle("line-height",g-c+"px")}if(l&&this.htmlRE.test(l)){e.setStyle("line-height","normal");i=Ext.util.TextMetrics.measure(e,l).height;e.setStyle("padding-top",h.btnFrameTop+Math.max(e.getHeight()-c-i,0)/2+"px");h.setElementSize(e,k,g)}},getTargetInfo:function(){var f=this,a=f.owner,e=a.el,c=f.frameSize,h=a.frameBody,b=a.btnWrap,g=a.btnInnerEl;if(!("adjWidth" in f)){Ext.apply(f,{adjWidth:c.left+c.right+e.getBorderWidth("lr")+e.getPadding("lr")+b.getPadding("lr")+(h?h.getFrameWidth("lr"):0),adjHeight:c.top+c.bottom+e.getBorderWidth("tb")+e.getPadding("tb")+b.getPadding("tb")+(h?h.getFrameWidth("tb"):0),btnFrameWidth:g.getFrameWidth("lr"),btnFrameHeight:g.getFrameWidth("tb"),btnFrameTop:g.getFrameWidth("t")})}return f.callParent()}});Ext.define("Ext.button.Button",{alias:"widget.button",extend:"Ext.Component",requires:["Ext.menu.Manager","Ext.util.ClickRepeater","Ext.layout.component.Button","Ext.util.TextMetrics","Ext.util.KeyMap"],alternateClassName:"Ext.Button",isButton:true,componentLayout:"button",hidden:false,disabled:false,pressed:false,enableToggle:false,menuAlign:"tl-bl?",textAlign:"center",type:"button",clickEvent:"click",preventDefault:true,handleMouseEvents:true,tooltipType:"qtip",baseCls:Ext.baseCSSPrefix+"btn",pressedCls:"pressed",overCls:"over",focusCls:"focus",menuActiveCls:"menu-active",ariaRole:"button",renderTpl:'<em id="{id}-btnWrap" class="{splitCls}"><tpl if="href"><a id="{id}-btnEl" href="{href}" target="{target}"<tpl if="tabIndex"> tabIndex="{tabIndex}"</tpl> role="link"><span id="{id}-btnInnerEl" class="{baseCls}-inner">{text}</span><span id="{id}-btnIconEl" class="{baseCls}-icon"></span></a></tpl><tpl if="!href"><button id="{id}-btnEl" type="{type}" hidefocus="true"<tpl if="tabIndex"> tabIndex="{tabIndex}"</tpl> role="button" autocomplete="off"><span id="{id}-btnInnerEl" class="{baseCls}-inner" style="{innerSpanStyle}">{text}</span><span id="{id}-btnIconEl" class="{baseCls}-icon {iconCls}">&#160;</span></button></tpl></em>',scale:"small",allowedScales:["small","medium","large"],iconAlign:"left",arrowAlign:"right",arrowCls:"arrow",maskOnDisable:false,initComponent:function(){var a=this;a.callParent(arguments);a.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout");if(a.menu){a.split=true;a.menu=Ext.menu.Manager.get(a.menu);a.menu.ownerCt=a}if(a.url){a.href=a.url}if(a.href&&!a.hasOwnProperty("preventDefault")){a.preventDefault=false}if(Ext.isString(a.toggleGroup)){a.enableToggle=true}},initAria:function(){this.callParent();var a=this.getActionEl();if(this.menu){a.dom.setAttribute("aria-haspopup",true)}},getActionEl:function(){return this.btnEl},getFocusEl:function(){return this.btnEl},setButtonCls:function(){var e=this,b=[],a=e.btnIconEl,c="x-hide-display";if(e.useSetClass){if(!Ext.isEmpty(e.oldCls)){e.removeClsWithUI(e.oldCls);e.removeClsWithUI(e.pressedCls)}if(e.iconCls||e.icon){if(e.text){b.push("icon-text-"+e.iconAlign)}else{b.push("icon")}if(a){a.removeCls(c)}}else{if(e.text){b.push("noicon")}if(a){a.addCls(c)}}e.oldCls=b;e.addClsWithUI(b);e.addClsWithUI(e.pressed?e.pressedCls:null)}},onRender:function(e,a){var f=this,c,b;Ext.applyIf(f.renderData,f.getTemplateArgs());f.addChildEls("btnEl","btnWrap","btnInnerEl","btnIconEl");if(f.scale){f.ui=f.ui+"-"+f.scale}f.callParent(arguments);if(f.split&&f.arrowTooltip){f.arrowEl.dom.setAttribute(f.getTipAttr(),f.arrowTooltip)}f.mon(f.btnEl,{scope:f,focus:f.onFocus,blur:f.onBlur});b=f.el;if(f.icon){f.setIcon(f.icon)}if(f.iconCls){f.setIconCls(f.iconCls)}if(f.tooltip){f.setTooltip(f.tooltip,true)}if(f.textAlign){f.setTextAlign(f.textAlign)}if(f.handleMouseEvents){f.mon(b,{scope:f,mouseover:f.onMouseOver,mouseout:f.onMouseOut,mousedown:f.onMouseDown});if(f.split){f.mon(b,{mousemove:f.onMouseMove,scope:f})}}if(f.menu){f.mon(f.menu,{scope:f,show:f.onMenuShow,hide:f.onMenuHide});f.keyMap=Ext.create("Ext.util.KeyMap",f.el,{key:Ext.EventObject.DOWN,handler:f.onDownKey,scope:f})}if(f.repeat){c=Ext.create("Ext.util.ClickRepeater",b,Ext.isObject(f.repeat)?f.repeat:{});f.mon(c,"click",f.onRepeatClick,f)}else{f.mon(b,f.clickEvent,f.onClick,f)}Ext.ButtonToggleManager.register(f)},getTemplateArgs:function(){var c=this,b=c.getPersistentBtnPadding(),a="";if(Math.max.apply(Math,b)>0){a="margin:"+Ext.Array.map(b,function(e){return -e+"px"}).join(" ")}return{href:c.getHref(),target:c.target||"_blank",type:c.type,splitCls:c.getSplitCls(),cls:c.cls,iconCls:c.iconCls||"",text:c.text||"&#160;",tabIndex:c.tabIndex,innerSpanStyle:a}},getHref:function(){var a=this,b=Ext.apply({},a.baseParams);b=Ext.apply(b,a.params);return a.href?Ext.urlAppend(a.href,Ext.Object.toQueryString(b)):false},setParams:function(a){this.params=a;this.btnEl.dom.href=this.getHref()},getSplitCls:function(){var a=this;return a.split?(a.baseCls+"-"+a.arrowCls)+" "+(a.baseCls+"-"+a.arrowCls+"-"+a.arrowAlign):""},afterRender:function(){var a=this;a.useSetClass=true;a.setButtonCls();a.doc=Ext.getDoc();this.callParent(arguments)},setIconCls:function(b){var e=this,a=e.btnIconEl,c=e.iconCls;e.iconCls=b;if(a){a.removeCls(c);a.addCls(b||"");e.setButtonCls()}return e},setTooltip:function(c,a){var b=this;if(b.rendered){if(!a){b.clearTip()}if(Ext.isObject(c)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.btnEl.id},c));b.tooltip=c}else{b.btnEl.dom.setAttribute(b.getTipAttr(),c)}}else{b.tooltip=c}return b},setTextAlign:function(c){var b=this,a=b.btnEl;if(a){a.removeCls(b.baseCls+"-"+b.textAlign);a.addCls(b.baseCls+"-"+c)}b.textAlign=c;return b},getTipAttr:function(){return this.tooltipType=="qtip"?"data-qtip":"title"},getRefItems:function(a){var c=this.menu,b;if(c){b=c.getRefItems(a);b.unshift(c)}return b||[]},clearTip:function(){if(Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.btnEl)}},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}if(a.menu&&a.destroyMenu!==false){Ext.destroy(a.menu)}Ext.destroy(a.btnInnerEl,a.repeater);a.callParent()},onDestroy:function(){var a=this;if(a.rendered){a.doc.un("mouseover",a.monitorMouseOver,a);a.doc.un("mouseup",a.onMouseUp,a);delete a.doc;Ext.ButtonToggleManager.unregister(a);Ext.destroy(a.keyMap);delete a.keyMap}a.callParent()},setHandler:function(b,a){this.handler=b;this.scope=a;return this},setText:function(b){var a=this;a.text=b;if(a.el){a.btnInnerEl.update(b||"&#160;");a.setButtonCls()}a.doComponentLayout();return a},setIcon:function(b){var c=this,a=c.btnIconEl;c.icon=b;if(a){a.setStyle("background-image",b?"url("+b+")":"");c.setButtonCls()}return c},getText:function(){return this.text},toggle:function(c,a){var b=this;c=c===undefined?!b.pressed:!!c;if(c!==b.pressed){if(b.rendered){b[c?"addClsWithUI":"removeClsWithUI"](b.pressedCls)}b.btnEl.dom.setAttribute("aria-pressed",c);b.pressed=c;if(!a){b.fireEvent("toggle",b,c);Ext.callback(b.toggleHandler,b.scope||b,[b,c])}}return b},maybeShowMenu:function(){var a=this;if(a.menu&&!a.hasVisibleMenu()&&!a.ignoreNextClick){a.showMenu()}},showMenu:function(){var a=this;if(a.rendered&&a.menu){if(a.tooltip&&a.getTipAttr()!="title"){Ext.tip.QuickTipManager.getQuickTip().cancelShow(a.btnEl)}if(a.menu.isVisible()){a.menu.hide()}a.menu.showBy(a.el,a.menuAlign)}return a},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){var a=this.menu;return a&&a.rendered&&a.isVisible()},onRepeatClick:function(a,b){this.onClick(b)},onClick:function(b){var a=this;if(a.preventDefault||(a.disabled&&a.getHref())&&b){b.preventDefault()}if(b.button!==0){return}if(!a.disabled){a.doToggle();a.maybeShowMenu();a.fireHandler(b)}},fireHandler:function(c){var b=this,a=b.handler;b.fireEvent("click",b,c);if(a){a.call(b.scope||b,b,c)}b.onBlur()},doToggle:function(){var a=this;if(a.enableToggle&&(a.allowDepress!==false||!a.pressed)){a.toggle()}},onMouseOver:function(b){var a=this;if(!a.disabled&&!b.within(a.el,true,true)){a.onMouseEnter(b)}},onMouseOut:function(b){var a=this;if(!b.within(a.el,true,true)){if(a.overMenuTrigger){a.onMenuTriggerOut(b)}a.onMouseLeave(b)}},onMouseMove:function(h){var f=this,c=f.el,g=f.overMenuTrigger,b,a;if(f.split){if(f.arrowAlign==="right"){b=h.getX()-c.getX();a=c.getWidth()}else{b=h.getY()-c.getY();a=c.getHeight()}if(b>(a-f.getTriggerSize())){if(!g){f.onMenuTriggerOver(h)}}else{if(g){f.onMenuTriggerOut(h)}}}},getTriggerSize:function(){var f=this,c=f.triggerSize,b,a,e;if(c===e){b=f.arrowAlign;a=b.charAt(0);c=f.triggerSize=f.el.getFrameWidth(a)+f.btnWrap.getFrameWidth(a)+(f.frameSize&&f.frameSize[b]||0)}return c},onMouseEnter:function(b){var a=this;a.addClsWithUI(a.overCls);a.fireEvent("mouseover",a,b)},onMouseLeave:function(b){var a=this;a.removeClsWithUI(a.overCls);a.fireEvent("mouseout",a,b)},onMenuTriggerOver:function(b){var a=this;a.overMenuTrigger=true;a.fireEvent("menutriggerover",a,a.menu,b)},onMenuTriggerOut:function(b){var a=this;delete a.overMenuTrigger;a.fireEvent("menutriggerout",a,a.menu,b)},enable:function(a){var b=this;b.callParent(arguments);b.removeClsWithUI("disabled");return b},disable:function(a){var b=this;b.callParent(arguments);b.addClsWithUI("disabled");b.removeClsWithUI(b.overCls);return b},setScale:function(c){var a=this,b=a.ui.replace("-"+a.scale,"");if(!Ext.Array.contains(a.allowedScales,c)){throw ("#setScale: scale must be an allowed scale ("+a.allowedScales.join(", ")+")")}a.scale=c;a.setUI(b)},setUI:function(b){var a=this;if(a.scale&&!b.match(a.scale)){b=b+"-"+a.scale}a.callParent([b])},onFocus:function(b){var a=this;if(!a.disabled){a.addClsWithUI(a.focusCls)}},onBlur:function(b){var a=this;a.removeClsWithUI(a.focusCls)},onMouseDown:function(b){var a=this;if(!a.disabled&&b.button===0){a.addClsWithUI(a.pressedCls);a.doc.on("mouseup",a.onMouseUp,a)}},onMouseUp:function(b){var a=this;if(b.button===0){if(!a.pressed){a.removeClsWithUI(a.pressedCls)}a.doc.un("mouseup",a.onMouseUp,a)}},onMenuShow:function(b){var a=this;a.ignoreNextClick=0;a.addClsWithUI(a.menuActiveCls);a.fireEvent("menushow",a,a.menu)},onMenuHide:function(b){var a=this;a.removeClsWithUI(a.menuActiveCls);a.ignoreNextClick=Ext.defer(a.restoreClick,250,a);a.fireEvent("menuhide",a,a.menu)},restoreClick:function(){this.ignoreNextClick=0},onDownKey:function(){var a=this;if(!a.disabled){if(a.menu){a.showMenu()}}},getPersistentBtnPadding:function(){var a=Ext.button.Button,f=a.persistentPadding,c,b,e,g;if(!f){f=a.persistentPadding=[0,0,0,0];if(!Ext.isIE){c=Ext.create("Ext.button.Button",{renderTo:Ext.getBody(),text:"test",style:"position:absolute;top:-999px;"});e=c.btnEl;g=c.btnInnerEl;e.setSize(null,null);b=g.getOffsetsTo(e);f[0]=b[1];f[1]=e.getWidth()-g.getWidth()-b[0];f[2]=e.getHeight()-g.getHeight()-b[1];f[3]=b[0];c.destroy()}}return f}},function(){var a={};function b(f,k){var h,e,c;if(k){h=a[f.toggleGroup];for(e=0,c=h.length;e<c;e++){if(h[e]!==f){h[e].toggle(false)}}}}Ext.ButtonToggleManager={register:function(c){if(!c.toggleGroup){return}var e=a[c.toggleGroup];if(!e){e=a[c.toggleGroup]=[]}e.push(c);c.on("toggle",b)},unregister:function(c){if(!c.toggleGroup){return}var e=a[c.toggleGroup];if(e){Ext.Array.remove(e,c);c.un("toggle",b)}},getPressed:function(h){var f=a[h],e=0,c;if(f){for(c=f.length;e<c;e++){if(f[e].pressed===true){return f[e]}}}return null}}});Ext.define("Ext.layout.component.ProgressBar",{alias:["layout.progressbar"],extend:"Ext.layout.component.Component",type:"progressbar",onLayout:function(e,b){var f=this,a=f.owner,c=a.textEl;f.setElementSize(a.el,e,b);c.setWidth(a.el.getWidth(true));f.callParent([e,b]);a.updateProgress(a.value)}});Ext.define("Ext.ProgressBar",{extend:"Ext.Component",alias:"widget.progressbar",requires:["Ext.Template","Ext.CompositeElement","Ext.TaskManager","Ext.layout.component.ProgressBar"],uses:["Ext.fx.Anim"],baseCls:Ext.baseCSSPrefix+"progress",config:{animate:false,text:""},waitTimer:null,renderTpl:['<div class="{baseCls}-text {baseCls}-text-back">',"<div>&#160;</div>","</div>",'<div id="{id}-bar" class="{baseCls}-bar">','<div class="{baseCls}-text">',"<div>&#160;</div>","</div>","</div>"],componentLayout:"progressbar",initComponent:function(){this.callParent();this.addChildEls("bar");this.addEvents("update")},afterRender:function(){var a=this;a.textEl=a.textEl?Ext.get(a.textEl):a.el.select("."+a.baseCls+"-text");a.callParent(arguments);if(a.value){a.updateProgress(a.value,a.text)}else{a.updateText(a.text)}},updateProgress:function(e,f,a){var c=this,b;c.value=e||0;if(f){c.updateText(f)}if(c.rendered&&!c.isDestroyed){if(c.isVisible(true)){b=Math.floor(c.value*c.el.getWidth(true));if(Ext.isForcedBorderBox){b+=c.bar.getBorderWidth("lr")}if(a===true||(a!==false&&c.animate)){c.bar.stopAnimation();c.bar.animate(Ext.apply({to:{width:b+"px"}},c.animate))}else{c.bar.setWidth(b)}}else{c.doComponentLayout()}}c.fireEvent("update",c,c.value,f);return c},updateText:function(b){var a=this;a.text=b;if(a.rendered){a.textEl.update(a.text)}return a},applyText:function(a){this.updateText(a)},wait:function(b){var a=this;if(!a.waitTimer){scope=a;b=b||{};a.updateText(b.text);a.waitTimer=Ext.TaskManager.start({run:function(c){var e=b.increment||10;c-=1;a.updateProgress(((((c+e)%e)+1)*(100/e))*0.01,null,b.animate)},interval:b.interval||1000,duration:b.duration,onStop:function(){if(b.fn){b.fn.apply(b.scope||a)}a.reset()},scope:scope})}return a},isWaiting:function(){return this.waitTimer!==null},reset:function(a){var b=this;b.updateProgress(0);b.clearTimer();if(a===true){b.hide()}return b},clearTimer:function(){var a=this;if(a.waitTimer){a.waitTimer.onStop=null;Ext.TaskManager.stop(a.waitTimer);a.waitTimer=null}},onDestroy:function(){var a=this;a.clearTimer();if(a.rendered){if(a.textEl.isComposite){a.textEl.clear()}Ext.destroyMembers(a,"textEl","progressBar")}a.callParent()}});Ext.define("Ext.layout.container.boxOverflow.Scroller",{extend:"Ext.layout.container.boxOverflow.None",requires:["Ext.util.ClickRepeater","Ext.Element"],alternateClassName:"Ext.layout.boxOverflow.Scroller",mixins:{observable:"Ext.util.Observable"},animateScroll:false,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:Ext.baseCSSPrefix+"box-scroller",constructor:function(b,a){this.layout=b;Ext.apply(this,a||{});this.addEvents("scroll")},initCSSClasses:function(){var b=this,a=b.layout;if(!b.CSSinitialized){b.beforeCtCls=b.beforeCtCls||Ext.baseCSSPrefix+"box-scroller-"+a.parallelBefore;b.afterCtCls=b.afterCtCls||Ext.baseCSSPrefix+"box-scroller-"+a.parallelAfter;b.beforeScrollerCls=b.beforeScrollerCls||Ext.baseCSSPrefix+a.owner.getXType()+"-scroll-"+a.parallelBefore;b.afterScrollerCls=b.afterScrollerCls||Ext.baseCSSPrefix+a.owner.getXType()+"-scroll-"+a.parallelAfter;b.CSSinitializes=true}},handleOverflow:function(a,g){var f=this,e=f.layout,c="get"+e.parallelPrefixCap,b={};f.initCSSClasses();f.callParent(arguments);this.createInnerElements();this.showScrollers();b[e.perpendicularPrefix]=g[e.perpendicularPrefix];b[e.parallelPrefix]=g[e.parallelPrefix]-(f.beforeCt[c]()+f.afterCt[c]());return{targetSize:b}},createInnerElements:function(){var a=this,b=a.layout.getRenderTarget();if(!a.beforeCt){b.addCls(Ext.baseCSSPrefix+a.layout.direction+"-box-overflow-body");a.beforeCt=b.insertSibling({cls:Ext.layout.container.Box.prototype.innerCls+" "+a.beforeCtCls},"before");a.afterCt=b.insertSibling({cls:Ext.layout.container.Box.prototype.innerCls+" "+a.afterCtCls},"after");a.createWheelListener()}},createWheelListener:function(){this.layout.innerCt.on({scope:this,mousewheel:function(a){a.stopEvent();this.scrollBy(a.getWheelDelta()*this.wheelIncrement*-1,false)}})},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){this.createScrollers();this.beforeScroller.show();this.afterScroller.show();this.updateScrollButtons();this.layout.owner.addClsWithUI("scroller")},hideScrollers:function(){if(this.beforeScroller!=undefined){this.beforeScroller.hide();this.afterScroller.hide();this.layout.owner.removeClsWithUI("scroller")}},createScrollers:function(){if(!this.beforeScroller&&!this.afterScroller){var a=this.beforeCt.createChild({cls:Ext.String.format("{0} {1} ",this.scrollerCls,this.beforeScrollerCls)});var b=this.afterCt.createChild({cls:Ext.String.format("{0} {1}",this.scrollerCls,this.afterScrollerCls)});a.addClsOnOver(this.beforeScrollerCls+"-hover");b.addClsOnOver(this.afterScrollerCls+"-hover");a.setVisibilityMode(Ext.Element.DISPLAY);b.setVisibilityMode(Ext.Element.DISPLAY);this.beforeRepeater=Ext.create("Ext.util.ClickRepeater",a,{interval:this.scrollRepeatInterval,handler:this.scrollLeft,scope:this});this.afterRepeater=Ext.create("Ext.util.ClickRepeater",b,{interval:this.scrollRepeatInterval,handler:this.scrollRight,scope:this});this.beforeScroller=a;this.afterScroller=b}},destroy:function(){Ext.destroy(this.beforeRepeater,this.afterRepeater,this.beforeScroller,this.afterScroller,this.beforeCt,this.afterCt)},scrollBy:function(b,a){this.scrollTo(this.getScrollPosition()+b,a)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){if(this.beforeScroller==undefined||this.afterScroller==undefined){return}var e=this.atExtremeBefore()?"addCls":"removeCls",c=this.atExtremeAfter()?"addCls":"removeCls",a=this.beforeScrollerCls+"-disabled",b=this.afterScrollerCls+"-disabled";this.beforeScroller[e](a);this.afterScroller[c](b);this.scrolling=false},atExtremeBefore:function(){return this.getScrollPosition()===0},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,false)},scrollRight:function(){this.scrollBy(this.scrollIncrement,false)},getScrollPosition:function(){var a=this.layout;return parseInt(a.innerCt.dom["scroll"+a.parallelBeforeCap],10)||0},getMaxScrollPosition:function(){var a=this.layout;return a.innerCt.dom["scroll"+a.parallelPrefixCap]-this.layout.innerCt["get"+a.parallelPrefixCap]()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},scrollTo:function(a,b){var g=this,f=g.layout,e=g.getScrollPosition(),c=Ext.Number.constrain(a,0,g.getMaxScrollPosition());if(c!=e&&!g.scrolling){if(b==undefined){b=g.animateScroll}f.innerCt.scrollTo(f.parallelBefore,c,b?g.getScrollAnim():false);if(b){g.scrolling=true}else{g.scrolling=false;g.updateScrollButtons()}g.fireEvent("scroll",g,c,b?g.getScrollAnim():false)}},scrollToItem:function(h,b){var g=this,f=g.layout,a,e,c;h=g.getItem(h);if(h!=undefined){a=this.getItemVisibility(h);if(!a.fullyVisible){e=h.getBox(true,true);c=e[f.parallelPosition];if(a.hiddenEnd){c-=(this.layout.innerCt["get"+f.parallelPrefixCap]()-e[f.parallelPrefix])}this.scrollTo(c,b)}}},getItemVisibility:function(g){var f=this,e=f.getItem(g).getBox(true,true),c=f.layout,b=e[c.parallelPosition],h=b+e[c.parallelPrefix],i=f.getScrollPosition(),a=i+c.innerCt["get"+c.parallelPrefixCap]();return{hiddenStart:b<i,hiddenEnd:h>a,fullyVisible:b>i&&h<a}}});Ext.define("Ext.dd.DragDropManager",{singleton:true,requires:["Ext.util.Region"],uses:["Ext.tip.QuickTipManager"],alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(c,b){for(var e in this.ids){for(var a in this.ids[e]){var f=this.ids[e][a];if(!this.isTypeOfDD(f)){continue}f[c].apply(f,b)}}},_onLoad:function(){this.init();var a=Ext.EventManager;a.on(document,"mouseup",this.handleMouseUp,this,true);a.on(document,"mousemove",this.handleMouseMove,this,true);a.on(window,"unload",this._onUnload,this,true);a.on(window,"resize",this._onResize,this,true)},_onResize:function(a){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(b,a){if(!this.initialized){this.init()}if(!this.ids[a]){this.ids[a]={}}this.ids[a][b.id]=b},removeDDFromGroup:function(c,a){if(!this.ids[a]){this.ids[a]={}}var b=this.ids[a];if(b&&b[c.id]){delete b[c.id]}},_remove:function(b){for(var a in b.groups){if(a&&this.ids[a]&&this.ids[a][b.id]){delete this.ids[a][b.id]}}delete this.handleIds[b.id]},regHandle:function(b,a){if(!this.handleIds[b]){this.handleIds[b]={}}this.handleIds[b][a]=a},isDragDrop:function(a){return(this.getDDById(a))?true:false},getRelated:function(g,b){var f=[];for(var e in g.groups){for(var c in this.ids[e]){var a=this.ids[e][c];if(!this.isTypeOfDD(a)){continue}if(!b||a.isTarget){f[f.length]=a}}}return f},isLegalTarget:function(f,e){var b=this.getRelated(f,true);for(var c=0,a=b.length;c<a;++c){if(b[c].id==e.id){return true}}return false},isTypeOfDD:function(a){return(a&&a.__ygDragDrop)},isHandle:function(b,a){return(this.handleIds[b]&&this.handleIds[b][a])},getDDById:function(b){for(var a in this.ids){if(this.ids[a][b]){return this.ids[a][b]}}return null},handleMouseDown:function(c,b){if(Ext.tip.QuickTipManager){Ext.tip.QuickTipManager.ddDisable()}if(this.dragCurrent){this.handleMouseUp(c)}this.currentTarget=c.getTarget();this.dragCurrent=b;var a=b.getEl();this.startX=c.getPageX();this.startY=c.getPageY();this.deltaX=this.startX-a.offsetLeft;this.deltaY=this.startY-a.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var e=Ext.dd.DragDropManager;e.startDrag(e.startX,e.startY)},this.clickTimeThresh)},startDrag:function(a,b){clearTimeout(this.clickTimeout);if(this.dragCurrent){this.dragCurrent.b4StartDrag(a,b);this.dragCurrent.startDrag(a,b)}this.dragThreshMet=true},handleMouseUp:function(a){if(Ext.tip&&Ext.tip.QuickTipManager){Ext.tip.QuickTipManager.ddEnable()}if(!this.dragCurrent){return}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this.fireEvents(a,true)}else{}this.stopDrag(a);this.stopEvent(a)},stopEvent:function(a){if(this.stopPropagation){a.stopPropagation()}if(this.preventDefault){a.preventDefault()}},stopDrag:function(a){if(this.dragCurrent){if(this.dragThreshMet){this.dragCurrent.b4EndDrag(a);this.dragCurrent.endDrag(a)}this.dragCurrent.onMouseUp(a)}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(c){if(!this.dragCurrent){return true}if(Ext.isIE&&(c.button!==0&&c.button!==1&&c.button!==2)){this.stopEvent(c);return this.handleMouseUp(c)}if(!this.dragThreshMet){var b=Math.abs(this.startX-c.getPageX());var a=Math.abs(this.startY-c.getPageY());if(b>this.clickPixelThresh||a>this.clickPixelThresh){this.startDrag(this.startX,this.startY)}}if(this.dragThreshMet){this.dragCurrent.b4Drag(c);this.dragCurrent.onDrag(c);if(!this.dragCurrent.moveOnly){this.fireEvents(c,false)}}this.stopEvent(c);return true},fireEvents:function(n,p){var r=this.dragCurrent;if(!r||r.isLocked()){return}var s=n.getPoint();var a=[];var f=[];var l=[];var h=[];var c=[];for(var g in this.dragOvers){var b=this.dragOvers[g];if(!this.isTypeOfDD(b)){continue}if(!this.isOverTarget(s,b,this.mode)){f.push(b)}a[g]=true;delete this.dragOvers[g]}for(var q in r.groups){if("string"!=typeof q){continue}for(g in this.ids[q]){var k=this.ids[q][g];if(!this.isTypeOfDD(k)){continue}if(k.isTarget&&!k.isLocked()&&((k!=r)||(r.ignoreSelf===false))){if(this.isOverTarget(s,k,this.mode)){if(p){h.push(k)}else{if(!a[k.id]){c.push(k)}else{l.push(k)}this.dragOvers[k.id]=k}}}}}if(this.mode){if(f.length){r.b4DragOut(n,f);r.onDragOut(n,f)}if(c.length){r.onDragEnter(n,c)}if(l.length){r.b4DragOver(n,l);r.onDragOver(n,l)}if(h.length){r.b4DragDrop(n,h);r.onDragDrop(n,h)}}else{var m=0;for(g=0,m=f.length;g<m;++g){r.b4DragOut(n,f[g].id);r.onDragOut(n,f[g].id)}for(g=0,m=c.length;g<m;++g){r.onDragEnter(n,c[g].id)}for(g=0,m=l.length;g<m;++g){r.b4DragOver(n,l[g].id);r.onDragOver(n,l[g].id)}for(g=0,m=h.length;g<m;++g){r.b4DragDrop(n,h[g].id);r.onDragDrop(n,h[g].id)}}if(p&&!h.length){r.onInvalidDrop(n)}},getBestMatch:function(c){var f=null;var b=c.length;if(b==1){f=c[0]}else{for(var e=0;e<b;++e){var a=c[e];if(a.cursorIsOver){f=a;break}else{if(!f||f.overlap.getArea()<a.overlap.getArea()){f=a}}}}return f},refreshCache:function(b){for(var a in b){if("string"!=typeof a){continue}for(var c in this.ids[a]){var e=this.ids[a][c];if(this.isTypeOfDD(e)){var f=this.getLocation(e);if(f){this.locationCache[e.id]=f}else{delete this.locationCache[e.id]}}}}},verifyEl:function(b){if(b){var a;if(Ext.isIE){try{a=b.offsetParent}catch(c){}}else{a=b.offsetParent}if(a){return true}}return false},getLocation:function(i){if(!this.isTypeOfDD(i)){return null}if(i.getRegion){return i.getRegion()}var g=i.getEl(),n,f,c,q,p,s,a,m,h;try{n=Ext.Element.getXY(g)}catch(k){}if(!n){return null}f=n[0];c=f+g.offsetWidth;q=n[1];p=q+g.offsetHeight;s=q-i.padding[0];a=c+i.padding[1];m=p+i.padding[2];h=f-i.padding[3];return Ext.create("Ext.util.Region",s,a,m,h)},isOverTarget:function(k,a,c){var f=this.locationCache[a.id];if(!f||!this.useCache){f=this.getLocation(a);this.locationCache[a.id]=f}if(!f){return false}a.cursorIsOver=f.contains(k);var i=this.dragCurrent;if(!i||!i.getTargetCoord||(!c&&!i.constrainX&&!i.constrainY)){return a.cursorIsOver}a.overlap=null;var g=i.getTargetCoord(k.x,k.y);var b=i.getDragEl();var e=Ext.create("Ext.util.Region",g.y,g.x+b.offsetWidth,g.y+b.offsetHeight,g.x);var h=e.intersect(f);if(h){a.overlap=h;return(c)?true:a.cursorIsOver}else{return false}},_onUnload:function(b,a){Ext.dd.DragDropManager.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll("unreg",[]);for(var a in this.elementCache){delete this.elementCache[a]}this.elementCache={};this.ids={}},elementCache:{},getElWrapper:function(b){var a=this.elementCache[b];if(!a||!a.el){a=this.elementCache[b]=new this.ElementWrapper(Ext.getDom(b))}return a},getElement:function(a){return Ext.getDom(a)},getCss:function(b){var a=Ext.getDom(b);return(a)?a.style:null},ElementWrapper:function(a){this.el=a||null;this.id=this.el&&a.id;this.css=this.el&&a.style},getPosX:function(a){return Ext.Element.getX(a)},getPosY:function(a){return Ext.Element.getY(a)},swapNode:function(c,a){if(c.swapNode){c.swapNode(a)}else{var e=a.parentNode;var b=a.nextSibling;if(b==c){e.insertBefore(c,a)}else{if(a==c.nextSibling){e.insertBefore(a,c)}else{c.parentNode.replaceChild(a,c);e.insertBefore(c,b)}}}},getScroll:function(){var e=window.document,f=e.documentElement,a=e.body,c=0,b=0;if(Ext.isGecko4){c=window.scrollYOffset;b=window.scrollXOffset}else{if(f&&(f.scrollTop||f.scrollLeft)){c=f.scrollTop;b=f.scrollLeft}else{if(a){c=a.scrollTop;b=a.scrollLeft}}}return{top:c,left:b}},getStyle:function(b,a){return Ext.fly(b).getStyle(a)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(a,c){var b=Ext.Element.getXY(c);Ext.Element.setXY(a,b)},numericSort:function(e,c){return(e-c)},_timeoutCount:0,_addListeners:function(){if(document){this._onLoad()}else{if(this._timeoutCount>2000){}else{setTimeout(this._addListeners,10);if(document&&document.body){this._timeoutCount+=1}}}},handleWasClicked:function(a,c){if(this.isHandle(c,a.id)){return true}else{var b=a.parentNode;while(b){if(this.isHandle(c,b.id)){return true}else{b=b.parentNode}}}return false}},function(){this._addListeners()});Ext.define("Ext.layout.component.field.Field",{alias:["layout.field"],extend:"Ext.layout.component.Component",uses:["Ext.tip.QuickTip","Ext.util.TextMetrics"],type:"field",beforeLayout:function(b,a){var c=this;return c.callParent(arguments)||(!c.owner.preventMark&&c.activeError!==c.owner.getActiveError())},onLayout:function(a,n){var g=this,b=g.owner,f=g.getLabelStrategy(),m=g.getErrorStrategy(),k=Ext.isDefined,p=Ext.isNumber,i,h,l,c,e;i=g.lastComponentSize||{};if(!k(a)){a=i.width;if(a<0){a=e}}if(!k(n)){n=i.height;if(n<0){n=e}}h=!p(a);l=!p(n);c={autoWidth:h,autoHeight:l,width:h?b.getBodyNaturalWidth():a,height:n,setOuterWidth:false,insets:{top:0,right:0,bottom:0,left:0}};f.prepare(b,c);m.prepare(b,c);f.adjustHorizInsets(b,c);m.adjustHorizInsets(b,c);f.layoutHoriz(b,c);m.layoutHoriz(b,c);f.adjustVertInsets(b,c);m.adjustVertInsets(b,c);f.layoutVert(b,c);m.layoutVert(b,c);if(h&&l){g.setElementSize(b.el,(c.setOuterWidth?c.width:e),c.height)}else{g.setTargetSize((!h||c.setOuterWidth?c.width:e),c.height)}g.sizeBody(c);g.activeError=b.getActiveError()},onFocus:function(){this.getErrorStrategy().onFocus(this.owner)},sizeBody:function(i){var h=this,c=h.owner,e=i.insets,b=i.width,f=i.height,g=Ext.isNumber(b)?b-e.left-e.right:b,a=Ext.isNumber(f)?f-e.top-e.bottom:f;h.setElementSize(c.bodyEl,g,a);h.sizeBodyContents(g,a)},sizeBodyContents:Ext.emptyFn,getLabelStrategy:function(){var b=this,c=b.labelStrategies,a=b.owner.labelAlign;return c[a]||c.base},getErrorStrategy:function(){var c=this,a=c.owner,e=c.errorStrategies,b=a.msgTarget;return !a.preventMark&&Ext.isString(b)?(e[b]||e.elementId):e.none},labelStrategies:(function(){var b=Ext.applyIf,a=Ext.emptyFn,c={prepare:function(f,i){var g=f.labelCls+"-"+f.labelAlign,h=f.labelEl;if(h&&!h.hasCls(g)){h.addCls(g)}},adjustHorizInsets:a,adjustVertInsets:a,layoutHoriz:a,layoutVert:a},e=b({prepare:function(f,g){c.prepare(f,g);if(g.autoWidth){g.width+=(!f.labelEl?0:f.labelWidth+f.labelPad)}g.setOuterWidth=true},adjustHorizInsets:function(f,g){if(f.labelEl){g.insets.left+=f.labelWidth+f.labelPad}},layoutHoriz:function(f,h){var g=f.labelEl;if(g&&!f.isLabelSized&&!Ext.isBorderBox){g.setWidth(f.labelWidth);f.isLabelSized=true}}},c);return{base:c,top:b({adjustVertInsets:function(f,h){var g=f.labelEl;if(g){h.insets.top+=Ext.util.TextMetrics.measure(g,f.fieldLabel,h.width).height+g.getFrameWidth("tb")+f.labelPad}}},c),left:e,right:e}})(),errorStrategies:(function(){function e(i,h){var k=i.getStyle("display")!=="none";if(h!==k){i.setDisplayed(h)}}function g(i,h,k){if(i.getStyle(h)!==k){i.setStyle(h,k)}}function c(h){var i=Ext.layout.component.field.Field.tip,k;if(i&&i.isVisible()){k=i.activeTarget;if(k&&k.el===h.getActionEl().dom){i.toFront(true)}}}var b=Ext.applyIf,a=Ext.emptyFn,f={prepare:function(h){e(h.errorEl,false)},adjustHorizInsets:a,adjustVertInsets:a,layoutHoriz:a,layoutVert:a,onFocus:a};return{none:f,side:b({prepare:function(h){var i=h.errorEl;i.addCls(Ext.baseCSSPrefix+"form-invalid-icon");Ext.layout.component.field.Field.initTip();i.dom.setAttribute("data-errorqtip",h.getActiveError()||"");e(i,h.hasActiveError())},adjustHorizInsets:function(h,i){if(h.autoFitErrors&&h.hasActiveError()){i.insets.right+=h.errorEl.getWidth()}},layoutHoriz:function(h,i){if(h.hasActiveError()){g(h.errorEl,"left",i.width-i.insets.right+"px")}},layoutVert:function(h,i){if(h.hasActiveError()){g(h.errorEl,"top",i.insets.top+"px")}},onFocus:c},f),under:b({prepare:function(h){var k=h.errorEl,i=Ext.baseCSSPrefix+"form-invalid-under";if(!k.hasCls(i)){k.addCls(i)}e(k,h.hasActiveError())},adjustVertInsets:function(h,i){if(h.autoFitErrors){i.insets.bottom+=h.errorEl.getHeight()}},layoutHoriz:function(h,k){var l=h.errorEl,i=k.insets;g(l,"width",k.width-i.right-i.left+"px");g(l,"marginLeft",i.left+"px")}},f),qtip:b({prepare:function(h){e(h.errorEl,false);Ext.layout.component.field.Field.initTip();h.getActionEl().dom.setAttribute("data-errorqtip",h.getActiveError()||"")},onFocus:c},f),title:b({prepare:function(h){e(h.errorEl,false);h.el.dom.title=h.getActiveError()||""}},f),elementId:b({prepare:function(h){e(h.errorEl,false);var i=Ext.fly(h.msgTarget);if(i){i.dom.innerHTML=h.getActiveError()||"";i.setDisplayed(h.hasActiveError())}}},f)}})(),statics:{initTip:function(){var a=this.tip;if(!a){a=this.tip=Ext.create("Ext.tip.QuickTip",{baseCls:Ext.baseCSSPrefix+"form-invalid-tip",renderTo:Ext.getBody()});a.tagConfig=Ext.apply({},{attribute:"errorqtip"},a.tagConfig)}},destroyTip:function(){var a=this.tip;if(a){a.destroy();delete this.tip}}}});Ext.define("Ext.form.field.Base",{extend:"Ext.Component",mixins:{labelable:"Ext.form.Labelable",field:"Ext.form.field.Field"},alias:"widget.field",alternateClassName:["Ext.form.Field","Ext.form.BaseField"],requires:["Ext.util.DelayedTask","Ext.XTemplate","Ext.layout.component.field.Field"],fieldSubTpl:['<input id="{id}" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" />',{compiled:true,disableFormats:true}],inputType:"text",invalidText:"The value in this field is invalid",fieldCls:Ext.baseCSSPrefix+"form-field",focusCls:Ext.baseCSSPrefix+"form-focus",dirtyCls:Ext.baseCSSPrefix+"form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<9)?["change","propertychange"]:["change","input","textInput","keyup","dragdrop"],checkChangeBuffer:50,componentLayout:"field",readOnly:false,readOnlyCls:Ext.baseCSSPrefix+"form-readonly",validateOnBlur:true,hasFocus:false,baseCls:Ext.baseCSSPrefix+"field",maskOnDisable:false,initComponent:function(){var a=this;a.callParent();a.subTplData=a.subTplData||{};a.addEvents("focus","blur","specialkey");a.initLabelable();a.initField();if(!a.name){a.name=a.getInputId()}},getInputId:function(){return this.inputId||(this.inputId=Ext.id())},getSubTplData:function(){var c=this,b=c.inputType,a=c.getInputId();return Ext.applyIf(c.subTplData,{id:a,cmpId:c.id,name:c.name||a,type:b,size:c.size||20,cls:c.cls,fieldCls:c.fieldCls,tabIdx:c.tabIndex,typeCls:Ext.baseCSSPrefix+"form-"+(b==="password"?"text":b)})},afterRender:function(){this.callParent();if(this.inputEl){this.inputEl.selectable()}},getSubTplMarkup:function(){return this.getTpl("fieldSubTpl").apply(this.getSubTplData())},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return a.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},setFieldStyle:function(a){var b=this,c=b.inputEl;if(c){c.applyStyles(a)}b.fieldStyle=a},onRender:function(){var b=this,a=b.fieldStyle;b.onLabelableRender();b.addChildEls({name:"inputEl",id:b.getInputId()});b.callParent(arguments);b.setRawValue(b.rawValue);if(b.readOnly){b.setReadOnly(true)}if(b.disabled){b.disable()}if(a){b.setFieldStyle(a)}b.renderActiveError()},initAria:function(){var a=this;a.callParent();a.getActionEl().dom.setAttribute("aria-describedby",Ext.id(a.errorEl))},getFocusEl:function(){return this.inputEl},isFileUpload:function(){return this.inputType==="file"},extractFileInput:function(){var b=this,a=b.isFileUpload()?b.inputEl.dom:null,c;if(a){c=a.cloneNode(true);a.parentNode.replaceChild(c,a);b.inputEl=Ext.get(c)}return a},getSubmitData:function(){var a=this,b=null,c;if(!a.disabled&&a.submitValue&&!a.isFileUpload()){c=a.getSubmitValue();if(c!==null){b={};b[a.getName()]=c}}return b},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var b=this,a=(b.inputEl?b.inputEl.getValue():Ext.value(b.rawValue,""));b.rawValue=a;return a},setRawValue:function(b){var a=this;b=Ext.value(b,"");a.rawValue=b;if(a.inputEl){a.inputEl.dom.value=b}return b},valueToRaw:function(a){return""+Ext.value(a,"")},rawToValue:function(a){return a},processRawValue:function(a){return a},getValue:function(){var a=this,b=a.rawToValue(a.processRawValue(a.getRawValue()));a.value=b;return b},setValue:function(b){var a=this;a.setRawValue(a.valueToRaw(b));return a.mixins.field.setValue.call(a,b)},onDisable:function(){var a=this,b=a.inputEl;a.callParent();if(b){b.dom.disabled=true}},onEnable:function(){var a=this,b=a.inputEl;a.callParent();if(b){b.dom.disabled=false}},setReadOnly:function(c){var a=this,b=a.inputEl;if(b){b.dom.readOnly=c;b.dom.setAttribute("aria-readonly",c)}a[c?"addCls":"removeCls"](a.readOnlyCls);a.readOnly=c},fireKey:function(a){if(a.isSpecialKey()){this.fireEvent("specialkey",this,Ext.create("Ext.EventObjectImpl",a))}},initEvents:function(){var b=this,c=b.inputEl,a,e;if(c){b.mon(c,Ext.EventManager.getKeyEvent(),b.fireKey,b);b.mon(c,"focus",b.onFocus,b);b.mon(c,"blur",b.onBlur,b,b.inEditor?{buffer:10}:null);a=Ext.create("Ext.util.DelayedTask",b.checkChange,b);b.onChangeEvent=e=function(){a.delay(b.checkChangeBuffer)};Ext.each(b.checkChangeEvents,function(f){if(f==="propertychange"){b.usesPropertychange=true}b.mon(c,f,e)},b)}b.callParent()},doComponentLayout:function(){var c=this,e=c.inputEl,a=c.usesPropertychange,b="propertychange",f=c.onChangeEvent;if(a){c.mun(e,b,f)}c.callParent(arguments);if(a){c.mon(e,b,f)}},preFocus:Ext.emptyFn,onFocus:function(){var b=this,a=b.focusCls,c=b.inputEl;b.preFocus();if(a&&c){c.addCls(a)}if(!b.hasFocus){b.hasFocus=true;b.componentLayout.onFocus();b.fireEvent("focus",b)}},beforeBlur:Ext.emptyFn,onBlur:function(){var b=this,a=b.focusCls,c=b.inputEl;if(b.destroying){return}b.beforeBlur();if(a&&c){c.removeCls(a)}if(b.validateOnBlur){b.validate()}b.hasFocus=false;b.fireEvent("blur",b);b.postBlur()},postBlur:Ext.emptyFn,onDirtyChange:function(a){this[a?"addCls":"removeCls"](this.dirtyCls)},isValid:function(){var a=this;return a.disabled||a.validateValue(a.processRawValue(a.getRawValue()))},validateValue:function(b){var a=this,e=a.getErrors(b),c=Ext.isEmpty(e);if(!a.preventMark){if(c){a.clearInvalid()}else{a.markInvalid(e)}}return c},markInvalid:function(c){var b=this,a=b.getActiveError();b.setActiveErrors(Ext.Array.from(c));if(a!==b.getActiveError()){b.doComponentLayout()}},clearInvalid:function(){var b=this,a=b.hasActiveError();b.unsetActiveError();if(a){b.doComponentLayout()}},renderActiveError:function(){var b=this,a=b.hasActiveError();if(b.inputEl){b.inputEl[a?"addCls":"removeCls"](b.invalidCls+"-field")}b.mixins.labelable.renderActiveError.call(b)},getActionEl:function(){return this.inputEl||this.el}});Ext.define("Ext.layout.component.field.Text",{extend:"Ext.layout.component.field.Field",alias:"layout.textfield",requires:["Ext.util.TextMetrics"],type:"textfield",beforeLayout:function(e,b){var f=this,a=f.owner,c=this.lastValue,g=a.getRawValue();this.lastValue=g;return f.callParent(arguments)||(a.grow&&g!==c)},sizeBodyContents:function(c,a){var b=this.adjustForGrow(c,a);this.setElementSize(this.owner.inputEl,b[0],b[1])},adjustForGrow:function(f,c){var g=this,b=g.owner,i,h,e,a=[f,c];if(b.grow){i=b.inputEl;h=(i.dom.value||(b.hasFocus?"":b.emptyText)||"")+b.growAppend;e=i.getTextWidth(h)+i.getBorderWidth("lr")+i.getPadding("lr");a[0]=Ext.Number.constrain(e,b.growMin,Math.max(b.growMin,Math.min(b.growMax,Ext.isNumber(f)?f:Infinity)))}return a}});Ext.define("Ext.form.field.Text",{extend:"Ext.form.field.Base",alias:"widget.textfield",requires:["Ext.form.field.VTypes","Ext.layout.component.field.Text"],alternateClassName:["Ext.form.TextField","Ext.form.Text"],size:20,growMin:30,growMax:800,growAppend:"W",allowBlank:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyCls:Ext.baseCSSPrefix+"form-empty-field",ariaRole:"textbox",componentLayout:"textfield",initComponent:function(){this.callParent();this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){var b=this,a=b.inputEl;b.callParent();if(b.selectOnFocus||b.emptyText){b.mon(a,"mousedown",b.onMouseDown,b)}if(b.maskRe||(b.vtype&&b.disableKeyFilter!==true&&(b.maskRe=Ext.form.field.VTypes[b.vtype+"Mask"]))){b.mon(a,"keypress",b.filterKeys,b)}if(b.enableKeyEvents){b.mon(a,{scope:b,keyup:b.onKeyUp,keydown:b.onKeyDown,keypress:b.onKeyPress})}},isEqual:function(b,a){return this.isEqualAsString(b,a)},onChange:function(){this.callParent();this.autoSize()},afterRender:function(){var a=this;if(a.enforceMaxLength){a.inputEl.dom.maxLength=a.maxLength}a.applyEmptyText();a.autoSize();a.callParent()},onMouseDown:function(b){var a=this;if(!a.hasFocus){a.mon(a.inputEl,"mouseup",Ext.emptyFn,a,{single:true,preventDefault:true})}},processRawValue:function(b){var a=this,e=a.stripCharsRe,c;if(e){c=b.replace(e,"");if(c!==b){a.setRawValue(c);b=c}}return b},onDisable:function(){this.callParent();if(Ext.isIE){this.inputEl.dom.unselectable="on"}},onEnable:function(){this.callParent();if(Ext.isIE){this.inputEl.dom.unselectable=""}},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},reset:function(){this.callParent();this.applyEmptyText()},applyEmptyText:function(){var b=this,a=b.emptyText,c;if(b.rendered&&a){c=b.getRawValue().length<1&&!b.hasFocus;if(Ext.supports.Placeholder){b.inputEl.dom.placeholder=a}else{if(c){b.setRawValue(a)}}if(c){b.inputEl.addCls(b.emptyCls)}b.autoSize()}},preFocus:function(){var b=this,c=b.inputEl,a=b.emptyText,e;if(a&&!Ext.supports.Placeholder&&c.dom.value===a){b.setRawValue("");e=true;c.removeCls(b.emptyCls)}else{if(Ext.supports.Placeholder){b.inputEl.removeCls(b.emptyCls)}}if(b.selectOnFocus||e){c.dom.select()}},onFocus:function(){var a=this;a.callParent(arguments);if(a.emptyText){a.autoSize()}},postBlur:function(){this.applyEmptyText()},filterKeys:function(c){if(c.ctrlKey&&!c.altKey){return}var b=c.getKey(),a=String.fromCharCode(c.getCharCode());if(Ext.isGecko&&(c.isNavKeyPress()||b===c.BACKSPACE||(b===c.DELETE&&c.button===-1))){return}if(!Ext.isGecko&&c.isSpecialKey()&&!a){return}if(!this.maskRe.test(a)){c.stopEvent()}},getRawValue:function(){var b=this,a=b.callParent();if(a===b.emptyText){a=""}return a},setValue:function(b){var a=this,c=a.inputEl;if(c&&a.emptyText&&!Ext.isEmpty(b)){c.removeCls(a.emptyCls)}a.callParent(arguments);a.applyEmptyText();return a},getErrors:function(m){var g=this,l=g.callParent(arguments),a=g.validator,e=g.emptyText,c=g.allowBlank,f=g.vtype,h=Ext.form.field.VTypes,i=g.regex,k=Ext.String.format,b;m=m||g.processRawValue(g.getRawValue());if(Ext.isFunction(a)){b=a.call(g,m);if(b!==true){l.push(b)}}if(m.length<1||m===e){if(!c){l.push(g.blankText)}return l}if(m.length<g.minLength){l.push(k(g.minLengthText,g.minLength))}if(m.length>g.maxLength){l.push(k(g.maxLengthText,g.maxLength))}if(f){if(!h[f](m,g)){l.push(g.vtypeText||h[f+"Text"])}}if(i&&!i.test(m)){l.push(g.regexText||g.invalidText)}return l},selectText:function(i,a){var h=this,c=h.getRawValue(),e=true,g=h.inputEl.dom,f,b;if(c.length>0){i=i===f?0:i;a=a===f?c.length:a;if(g.setSelectionRange){g.setSelectionRange(i,a)}else{if(g.createTextRange){b=g.createTextRange();b.moveStart("character",i);b.moveEnd("character",a-c.length);b.select()}}e=Ext.isGecko||Ext.isOpera}if(e){h.focus()}},autoSize:function(){var b=this,a;if(b.grow&&b.rendered){b.doComponentLayout();a=b.inputEl.getWidth();if(a!==b.lastInputWidth){b.fireEvent("autosize",a);b.lastInputWidth=a}}},initAria:function(){this.callParent();this.getActionEl().dom.setAttribute("aria-required",this.allowBlank===false)},getBodyNaturalWidth:function(){return Math.round(this.size*6.5)+20}});Ext.define("Ext.layout.component.field.TextArea",{extend:"Ext.layout.component.field.Text",alias:"layout.textareafield",type:"textareafield",adjustForGrow:function(a,l){var f=this,b=f.owner,i,h,g,e,c,k,m=[a,l];if(b.grow){i=b.inputEl;e=i.getWidth(true);c=i.getHeight();h=i.dom.value||"&#160;";h+=b.growAppend;h=h.replace(/\n/g,"<br>");k=Ext.util.TextMetrics.measure(i,h,e).height+i.getBorderWidth("tb")+i.getPadding("tb");g=b.growMax;if(Ext.isNumber(l)){g=Math.min(g,l)}m[1]=Ext.Number.constrain(k,b.growMin,g)}return m}});Ext.define("Ext.form.field.TextArea",{extend:"Ext.form.field.Text",alias:["widget.textareafield","widget.textarea"],alternateClassName:"Ext.form.TextArea",requires:["Ext.XTemplate","Ext.layout.component.field.TextArea"],fieldSubTpl:['<textarea id="{id}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="rows">rows="{rows}" </tpl>','<tpl if="cols">cols="{cols}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" ','autocomplete="off">',"</textarea>",{compiled:true,disableFormats:true}],growMin:60,growMax:1000,growAppend:"\n-",cols:20,rows:4,enterIsSpecial:false,preventScrollbars:false,componentLayout:"textareafield",onRender:function(b,a){var c=this;Ext.applyIf(c.subTplData,{cols:c.cols,rows:c.rows});c.callParent(arguments)},afterRender:function(){var a=this;a.callParent(arguments);if(a.grow){if(a.preventScrollbars){a.inputEl.setStyle("overflow","hidden")}a.inputEl.setHeight(a.growMin)}},fireKey:function(a){if(a.isSpecialKey()&&(this.enterIsSpecial||(a.getKey()!==a.ENTER||a.hasModifier()))){this.fireEvent("specialkey",this,a)}},autoSize:function(){var b=this,a;if(b.grow&&b.rendered){b.doComponentLayout();a=b.inputEl.getHeight();if(a!==b.lastInputHeight){b.fireEvent("autosize",a);b.lastInputHeight=a}}},initAria:function(){this.callParent(arguments);this.getActionEl().dom.setAttribute("aria-multiline",true)},getBodyNaturalWidth:function(){return Math.round(this.cols*6.5)+20}});Ext.define("Ext.data.reader.Reader",{requires:["Ext.data.ResultSet"],alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],totalProperty:"total",successProperty:"success",root:"",implicitIncludes:true,isReader:true,constructor:function(a){var b=this;Ext.apply(b,a||{});b.fieldCount=0;b.model=Ext.ModelManager.getModel(a.model);if(b.model){b.buildExtractors()}},setModel:function(a,c){var b=this;b.model=Ext.ModelManager.getModel(a);b.buildExtractors(true);if(c&&b.proxy){b.proxy.setModel(b.model,true)}},read:function(a){var b=a;if(a&&a.responseText){b=this.getResponseData(a)}if(b){return this.readRecords(b)}else{return this.nullResultSet}},readRecords:function(c){var e=this;if(e.fieldCount!==e.getFields().length){e.buildExtractors(true)}e.rawData=c;c=e.getData(c);var g=Ext.isArray(c)?c:e.getRoot(c),i=true,b=0,f,h,a,k;if(g){f=g.length}if(e.totalProperty){h=parseInt(e.getTotal(c),10);if(!isNaN(h)){f=h}}if(e.successProperty){h=e.getSuccess(c);if(h===false||h==="false"){i=false}}if(e.messageProperty){k=e.getMessage(c)}if(g){a=e.extractData(g);b=a.length}else{b=0;a=[]}return Ext.create("Ext.data.ResultSet",{total:f||b,count:b,records:a,success:i,message:k})},extractData:function(l){var k=this,m=[],f=[],e=k.model,g=0,b=l.length,n=k.getIdProperty(),c,a,h;if(!l.length&&Ext.isObject(l)){l=[l];b=1}for(;g<b;g++){c=l[g];m=k.extractValues(c);a=k.getId(c);h=new e(m,a,c);f.push(h);if(k.implicitIncludes){k.readAssociated(h,c)}}return f},readAssociated:function(h,f){var e=h.associations.items,g=0,a=e.length,c,b,l,k;for(;g<a;g++){c=e[g];b=this.getAssociatedDataRoot(f,c.associationKey||c.name);if(b){k=c.getReader();if(!k){l=c.associatedModel.proxy;if(l){k=l.getReader()}else{k=new this.constructor({model:c.associatedName})}}c.read(h,k,b)}}},getAssociatedDataRoot:function(b,a){return b[a]},getFields:function(){return this.model.prototype.fields.items},extractValues:function(g){var a=this.getFields(),c=0,e=a.length,b={},h,f;for(;c<e;c++){h=a[c];f=this.extractorFunctions[c](g);b[h.name]=f}return b},getData:function(a){return a},getRoot:function(a){return a},getResponseData:function(a){Ext.Error.raise("getResponseData must be implemented in the Ext.data.reader.Reader subclass")},onMetaChange:function(c){var a=c.fields,b;Ext.apply(this,c);if(a){b=Ext.define("Ext.data.reader.Json-Model"+Ext.id(),{extend:"Ext.data.Model",fields:a});this.setModel(b,true)}else{this.buildExtractors(true)}},getIdProperty:function(){var a=this.idProperty;if(Ext.isEmpty(a)){a=this.model.prototype.idProperty}return a},buildExtractors:function(f){var c=this,h=c.getIdProperty(),e=c.totalProperty,b=c.successProperty,g=c.messageProperty,a;if(f===true){delete c.extractorFunctions}if(c.extractorFunctions){return}if(e){c.getTotal=c.createAccessor(e)}if(b){c.getSuccess=c.createAccessor(b)}if(g){c.getMessage=c.createAccessor(g)}if(h){a=c.createAccessor(h);c.getId=function(i){var k=a.call(c,i);return(k===undefined||k==="")?null:k}}else{c.getId=function(){return null}}c.buildFieldExtractors()},buildFieldExtractors:function(){var e=this,a=e.getFields(),c=a.length,b=0,h=[],g,f;for(;b<c;b++){g=a[b];f=(g.mapping!==undefined&&g.mapping!==null)?g.mapping:g.name;h.push(e.createAccessor(f))}e.fieldCount=c;e.extractorFunctions=h}},function(){Ext.apply(this,{nullResultSet:Ext.create("Ext.data.ResultSet",{total:0,count:0,records:[],success:true})})});Ext.define("Ext.data.reader.Json",{extend:"Ext.data.reader.Reader",alternateClassName:"Ext.data.JsonReader",alias:"reader.json",root:"",useSimpleAccessors:false,readRecords:function(a){if(a.metaData){this.onMetaChange(a.metaData)}this.jsonData=a;return this.callParent([a])},getResponseData:function(a){var c;try{c=Ext.decode(a.responseText)}catch(b){Ext.Error.raise({response:a,json:a.responseText,parseError:b,msg:"Unable to parse the JSON returned by the server: "+b.toString()})}if(!c){Ext.Error.raise("JSON object not found")}return c},buildExtractors:function(){var a=this;a.callParent(arguments);if(a.root){a.getRoot=a.createAccessor(a.root)}else{a.getRoot=function(b){return b}}},extractData:function(a){var f=this.record,e=[],c,b;if(f){c=a.length;if(!c&&Ext.isObject(a)){c=1;a=[a]}for(b=0;b<c;b++){e[b]=a[b][f]}}else{e=a}return this.callParent([e])},createAccessor:function(){var a=/[\[\.]/;return function(c){if(Ext.isEmpty(c)){return Ext.emptyFn}if(Ext.isFunction(c)){return c}if(this.useSimpleAccessors!==true){var b=String(c).search(a);if(b>=0){return Ext.functionFactory("obj","return obj"+(b>0?".":"")+c)}}return function(e){return e[c]}}}()});Ext.define("Ext.data.proxy.Proxy",{alias:"proxy.proxy",alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],requires:["Ext.data.reader.Json","Ext.data.writer.Json"],uses:["Ext.data.Batch","Ext.data.Operation","Ext.data.Model"],mixins:{observable:"Ext.util.Observable"},batchOrder:"create,update,destroy",batchActions:true,defaultReaderType:"json",defaultWriterType:"json",isProxy:true,constructor:function(a){a=a||{};if(a.model===undefined){delete a.model}this.mixins.observable.constructor.call(this,a);if(this.model!==undefined&&!(this.model instanceof Ext.data.Model)){this.setModel(this.model)}},setModel:function(b,c){this.model=Ext.ModelManager.getModel(b);var a=this.reader,e=this.writer;this.setReader(a);this.setWriter(e);if(c&&this.store){this.store.setModel(this.model)}},getModel:function(){return this.model},setReader:function(a){var b=this;if(a===undefined||typeof a=="string"){a={type:a}}if(a.isReader){a.setModel(b.model)}else{Ext.applyIf(a,{proxy:b,model:b.model,type:b.defaultReaderType});a=Ext.createByAlias("reader."+a.type,a)}b.reader=a;return b.reader},getReader:function(){return this.reader},setWriter:function(a){if(a===undefined||typeof a=="string"){a={type:a}}if(!(a instanceof Ext.data.writer.Writer)){Ext.applyIf(a,{model:this.model,type:this.defaultWriterType});a=Ext.createByAlias("writer."+a.type,a)}this.writer=a;return this.writer},getWriter:function(){return this.writer},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,destroy:Ext.emptyFn,batch:function(e,f){var g=this,c=Ext.create("Ext.data.Batch",{proxy:g,listeners:f||{}}),b=g.batchActions,a;Ext.each(g.batchOrder.split(","),function(h){a=e[h];if(a){if(b){c.add(Ext.create("Ext.data.Operation",{action:h,records:a}))}else{Ext.each(a,function(i){c.add(Ext.create("Ext.data.Operation",{action:h,records:[i]}))})}}},g);c.start();return c}},function(){Ext.data.DataProxy=this});Ext.define("Ext.data.proxy.Client",{extend:"Ext.data.proxy.Proxy",alternateClassName:"Ext.data.ClientProxy",clear:function(){Ext.Error.raise("The Ext.data.proxy.Client subclass that you are using has not defined a 'clear' function. See src/data/ClientProxy.js for details.")}});Ext.define("Ext.data.proxy.Memory",{extend:"Ext.data.proxy.Client",alias:"proxy.memory",alternateClassName:"Ext.data.MemoryProxy",constructor:function(a){this.callParent([a]);this.setReader(this.reader)},read:function(c,g,e){var f=this,b=f.getReader(),a=b.read(f.data);Ext.apply(c,{resultSet:a});c.setCompleted();c.setSuccessful();Ext.callback(g,e||f,[c])},clear:Ext.emptyFn});Ext.define("Ext.data.proxy.Server",{extend:"Ext.data.proxy.Proxy",alias:"proxy.server",alternateClassName:"Ext.data.ServerProxy",uses:["Ext.data.Request"],pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",sortParam:"sort",filterParam:"filter",directionParam:"dir",simpleSortMode:false,noCache:true,cacheString:"_dc",timeout:30000,constructor:function(a){var b=this;a=a||{};this.addEvents("exception");b.callParent([a]);b.extraParams=a.extraParams||{};b.api=a.api||{};b.nocache=b.noCache},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},destroy:function(){return this.doRequest.apply(this,arguments)},buildRequest:function(a){var c=Ext.applyIf(a.params||{},this.extraParams||{}),b;c=Ext.applyIf(c,this.getParams(a));if(a.id&&!c.id){c.id=a.id}b=Ext.create("Ext.data.Request",{params:c,action:a.action,records:a.records,operation:a,url:a.url});b.url=this.buildUrl(b);a.request=b;return b},processResponse:function(h,a,c,b,g,i){var f=this,e,k;if(h===true){e=f.getReader();k=e.read(f.extractResponseData(b));if(k.success!==false){Ext.apply(a,{response:b,resultSet:k});a.commitRecords(k.records);a.setCompleted();a.setSuccessful()}else{a.setException(k.message);f.fireEvent("exception",this,b,a)}}else{f.setException(a,b);f.fireEvent("exception",this,b,a)}if(typeof g=="function"){g.call(i||f,a)}f.afterRequest(c,h)},setException:function(b,a){b.setException({status:a.status,statusText:a.statusText})},extractResponseData:function(a){return a},applyEncoding:function(a){return Ext.encode(a)},encodeSorters:function(e){var b=[],c=e.length,a=0;for(;a<c;a++){b[a]={property:e[a].property,direction:e[a].direction}}return this.applyEncoding(b)},encodeFilters:function(e){var b=[],c=e.length,a=0;for(;a<c;a++){b[a]={property:e[a].property,value:e[a].value}}return this.applyEncoding(b)},getParams:function(m){var u=this,t={},q=Ext.isDefined,r=m.groupers,a=m.sorters,k=m.filters,h=m.page,g=m.start,s=m.limit,i=u.simpleSortMode,p=u.pageParam,e=u.startParam,b=u.limitParam,c=u.groupParam,f=u.sortParam,n=u.filterParam,l=u.directionParam;if(p&&q(h)){t[p]=h}if(e&&q(g)){t[e]=g}if(b&&q(s)){t[b]=s}if(c&&r&&r.length>0){t[c]=u.encodeSorters(r)}if(f&&a&&a.length>0){if(i){t[f]=a[0].property;t[l]=a[0].direction}else{t[f]=u.encodeSorters(a)}}if(n&&k&&k.length>0){t[n]=u.encodeFilters(k)}return t},buildUrl:function(c){var b=this,a=b.getUrl(c);if(!a){Ext.Error.raise("You are using a ServerProxy but have not supplied it with a url.")}if(b.noCache){a=Ext.urlAppend(a,Ext.String.format("{0}={1}",b.cacheString,Ext.Date.now()))}return a},getUrl:function(a){return a.url||this.api[a.action]||this.url},doRequest:function(a,c,b){Ext.Error.raise("The doRequest function has not been implemented on your Ext.data.proxy.Server subclass. See src/data/ServerProxy.js for details")},afterRequest:Ext.emptyFn,onDestroy:function(){Ext.destroy(this.reader,this.writer)}});Ext.define("Ext.data.proxy.Ajax",{requires:["Ext.util.MixedCollection","Ext.Ajax"],extend:"Ext.data.proxy.Server",alias:"proxy.ajax",alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},doRequest:function(a,f,b){var e=this.getWriter(),c=this.buildRequest(a,f,b);if(a.allowWrite()){c=e.write(c)}Ext.apply(c,{headers:this.headers,timeout:this.timeout,scope:this,callback:this.createRequestCallback(c,a,f,b),method:this.getMethod(c),disableCaching:false});Ext.Ajax.request(c);return c},getMethod:function(a){return this.actionMethods[a.action]},createRequestCallback:function(e,a,f,b){var c=this;return function(h,i,g){c.processResponse(i,a,e,g,f,b)}}},function(){Ext.data.HttpProxy=this});Ext.define("Ext.data.Model",{alternateClassName:"Ext.data.Record",mixins:{observable:"Ext.util.Observable"},requires:["Ext.ModelManager","Ext.data.IdGenerator","Ext.data.Field","Ext.data.Errors","Ext.data.Operation","Ext.data.validations","Ext.data.proxy.Ajax","Ext.util.MixedCollection"],onClassExtended:function(a,b){var c=b.onBeforeClassCreated;b.onBeforeClassCreated=function(e,A){var z=this,B=Ext.getClassName(e),n=e.prototype,t=e.prototype.superclass,f=A.validations||[],q=A.fields||[],v=A.associations||[],u=A.belongsTo,p=A.hasMany,r=A.idgen,x=new Ext.util.MixedCollection(false,function(i){return i.name}),w=new Ext.util.MixedCollection(false,function(i){return i.name}),m=t.validations,y=t.fields,h=t.associations,g,s,k,l=[];e.modelName=B;n.modelName=B;if(m){f=m.concat(f)}A.validations=f;if(y){q=y.items.concat(q)}for(s=0,k=q.length;s<k;++s){x.add(new Ext.data.Field(q[s]))}A.fields=x;if(r){A.idgen=Ext.data.IdGenerator.get(r)}if(u){u=Ext.Array.from(u);for(s=0,k=u.length;s<k;++s){g=u[s];if(!Ext.isObject(g)){g={model:g}}g.type="belongsTo";v.push(g)}delete A.belongsTo}if(p){p=Ext.Array.from(p);for(s=0,k=p.length;s<k;++s){g=p[s];if(!Ext.isObject(g)){g={model:g}}g.type="hasMany";v.push(g)}delete A.hasMany}if(h){v=h.items.concat(v)}for(s=0,k=v.length;s<k;++s){l.push("association."+v[s].type.toLowerCase())}if(A.proxy){if(typeof A.proxy==="string"){l.push("proxy."+A.proxy)}else{if(typeof A.proxy.type==="string"){l.push("proxy."+A.proxy.type)}}}Ext.require(l,function(){Ext.ModelManager.registerType(B,e);for(s=0,k=v.length;s<k;++s){g=v[s];Ext.apply(g,{ownerModel:B,associatedModel:g.model});if(Ext.ModelManager.getModel(g.model)===undefined){Ext.ModelManager.registerDeferredAssociation(g)}else{w.add(Ext.data.Association.create(g))}}A.associations=w;c.call(z,e,A);e.setProxy(e.prototype.proxy||e.prototype.defaultProxyType);Ext.ModelManager.onModelDefined(e)})}},inheritableStatics:{setProxy:function(a){if(!a.isProxy){if(typeof a=="string"){a={type:a}}a=Ext.createByAlias("proxy."+a.type,a)}a.setModel(this);this.proxy=this.prototype.proxy=a;return a},getProxy:function(){return this.proxy},load:function(g,c){c=Ext.apply({},c);c=Ext.applyIf(c,{action:"read",id:g});var b=Ext.create("Ext.data.Operation",c),e=c.scope||this,a=null,f;f=function(h){if(h.wasSuccessful()){a=h.getRecords()[0];Ext.callback(c.success,e,[a,h])}else{Ext.callback(c.failure,e,[a,h])}Ext.callback(c.callback,e,[a,h])};this.proxy.read(b,f,this)}},statics:{PREFIX:"ext-record",AUTO_ID:1,EDIT:"edit",REJECT:"reject",COMMIT:"commit",id:function(a){var b=[this.PREFIX,"-",this.AUTO_ID++].join("");a.phantom=true;a.internalId=b;return b}},idgen:{isGenerator:true,type:"default",generate:function(){return null},getRecId:function(a){return a.modelName+"-"+a.internalId}},editing:false,dirty:false,persistenceProperty:"data",evented:false,isModel:true,phantom:false,idProperty:"id",defaultProxyType:"ajax",constructor:function(g,b,n){g=g||{};var l=this,k,c,m,a,f,e,h=Ext.isArray(g),p=h?{}:null;l.internalId=(b||b===0)?b:Ext.data.Model.id(l);l.raw=n;Ext.applyIf(l,{data:{}});l.modified={};if(l.persistanceProperty){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.data.Model: persistanceProperty has been deprecated. Use persistenceProperty instead.")}l.persistenceProperty=l.persistanceProperty}l[l.persistenceProperty]={};l.mixins.observable.constructor.call(l);k=l.fields.items;c=k.length;for(f=0;f<c;f++){m=k[f];a=m.name;if(h){p[a]=g[f]}else{if(g[a]===undefined){g[a]=m.defaultValue}}}l.set(p||g);if(l.getId()){l.phantom=false}else{if(l.phantom){e=l.idgen.generate();if(e!==null){l.setId(e)}}}l.dirty=false;l.modified={};if(typeof l.init=="function"){l.init()}l.id=l.idgen.getRecId(l)},get:function(a){return this[this.persistenceProperty][a]},set:function(q,l){var h=this,f=h.fields,p=h.modified,e=[],k,n,c,m,b,g,a;if(arguments.length==1&&Ext.isObject(q)){b=!h.editing;g=0;for(n in q){if(q.hasOwnProperty(n)){k=f.get(n);if(k&&k.convert!==k.type.convert){e.push(n);continue}if(!g&&b){h.beginEdit()}++g;h.set(n,q[n])}}a=e.length;if(a){if(!g&&b){h.beginEdit()}g+=a;for(c=0;c<a;c++){k=e[c];h.set(k,q[k])}}if(b&&g){h.endEdit()}}else{if(f){k=f.get(q);if(k&&k.convert){l=k.convert(l,h)}}m=h.get(q);h[h.persistenceProperty][q]=l;if(k&&k.persist&&!h.isEqual(m,l)){if(h.isModified(q)){if(h.isEqual(p[q],l)){delete p[q];h.dirty=false;for(n in p){if(p.hasOwnProperty(n)){h.dirty=true;break}}}}else{h.dirty=true;p[q]=m}}if(!h.editing){h.afterEdit()}}},isEqual:function(e,c){if(Ext.isDate(e)&&Ext.isDate(c)){return e.getTime()===c.getTime()}return e===c},beginEdit:function(){var a=this;if(!a.editing){a.editing=true;a.dirtySave=a.dirty;a.dataSave=Ext.apply({},a[a.persistenceProperty]);a.modifiedSave=Ext.apply({},a.modified)}},cancelEdit:function(){var a=this;if(a.editing){a.editing=false;a.modified=a.modifiedSave;a[a.persistenceProperty]=a.dataSave;a.dirty=a.dirtySave;delete a.modifiedSave;delete a.dataSave;delete a.dirtySave}},endEdit:function(a){var b=this,c;if(b.editing){b.editing=false;c=b.dirty||b.changedWhileEditing();delete b.modifiedSave;delete b.dataSave;delete b.dirtySave;if(a!==true&&c){b.afterEdit()}}},changedWhileEditing:function(){var c=this,b=c.dataSave,e=c[c.persistenceProperty],a;for(a in e){if(e.hasOwnProperty(a)){if(!c.isEqual(e[a],b[a])){return true}}}return false},getChanges:function(){var a=this.modified,b={},c;for(c in a){if(a.hasOwnProperty(c)){b[c]=this.get(c)}}return b},isModified:function(a){return this.modified.hasOwnProperty(a)},setDirty:function(){var b=this,a;b.dirty=true;b.fields.each(function(c){if(c.persist){a=c.name;b.modified[a]=b.get(a)}},b)},markDirty:function(){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.data.Model: markDirty has been deprecated. Use setDirty instead.")}return this.setDirty.apply(this,arguments)},reject:function(a){var c=this,b=c.modified,e;for(e in b){if(b.hasOwnProperty(e)){if(typeof b[e]!="function"){c[c.persistenceProperty][e]=b[e]}}}c.dirty=false;c.editing=false;c.modified={};if(a!==true){c.afterReject()}},commit:function(a){var b=this;b.phantom=b.dirty=b.editing=false;b.modified={};if(a!==true){b.afterCommit()}},copy:function(a){var b=this;return new b.self(Ext.apply({},b[b.persistenceProperty]),a||b.internalId)},setProxy:function(a){if(!a.isProxy){if(typeof a==="string"){a={type:a}}a=Ext.createByAlias("proxy."+a.type,a)}a.setModel(this.self);this.proxy=a;return a},getProxy:function(){return this.proxy},validate:function(){var l=Ext.create("Ext.data.Errors"),c=this.validations,f=Ext.data.validations,b,e,k,a,h,g;if(c){b=c.length;for(g=0;g<b;g++){e=c[g];k=e.field||e.name;h=e.type;a=f[h](e,this.get(k));if(!a){l.add({field:k,message:e.message||f[h+"Message"]})}}}return l},isValid:function(){return this.validate().isValid()},save:function(c){c=Ext.apply({},c);var f=this,g=f.phantom?"create":"update",a=null,e=c.scope||f,b,h;Ext.apply(c,{records:[f],action:g});b=Ext.create("Ext.data.Operation",c);h=function(i){if(i.wasSuccessful()){a=i.getRecords()[0];f.set(a.data);a.dirty=false;Ext.callback(c.success,e,[a,i])}else{Ext.callback(c.failure,e,[a,i])}Ext.callback(c.callback,e,[a,i])};f.getProxy()[g](b,h,f);return f},destroy:function(c){c=Ext.apply({},c);var f=this,a=null,e=c.scope||f,b,g;Ext.apply(c,{records:[f],action:"destroy"});b=Ext.create("Ext.data.Operation",c);g=function(h){if(h.wasSuccessful()){Ext.callback(c.success,e,[a,h])}else{Ext.callback(c.failure,e,[a,h])}Ext.callback(c.callback,e,[a,h])};f.getProxy().destroy(b,g,f);return f},getId:function(){return this.get(this.idProperty)},setId:function(a){this.set(this.idProperty,a)},join:function(a){this.store=a},unjoin:function(a){delete this.store},afterEdit:function(){this.callStore("afterEdit")},afterReject:function(){this.callStore("afterReject")},afterCommit:function(){this.callStore("afterCommit")},callStore:function(b){var a=this.store;if(a!==undefined&&typeof a[b]=="function"){a[b](this)}},getAssociatedData:function(){return this.prepareAssociatedData(this,[],null)},prepareAssociatedData:function(r,b,q){var l=r.associations.items,n=l.length,g={},h,a,k,t,u,f,e,p,m,s,c;for(p=0;p<n;p++){f=l[p];s=f.type;c=true;if(q){c=s==q}if(c&&s=="hasMany"){h=r[f.storeName];g[f.name]=[];if(h&&h.data.length>0){k=h.data.items;u=k.length;for(m=0;m<u;m++){t=k[m];e=t.id;if(Ext.Array.indexOf(b,e)==-1){b.push(e);g[f.name][m]=t.data;Ext.apply(g[f.name][m],this.prepareAssociatedData(t,b,s))}}}}else{if(c&&s=="belongsTo"){t=r[f.instanceName];if(t!==undefined){e=t.id;if(Ext.Array.indexOf(b,e)==-1){b.push(e);g[f.name]=t.data;Ext.apply(g[f.name],this.prepareAssociatedData(t,b,s))}}}}}return g}});Ext.define("Ext.layout.container.AbstractContainer",{extend:"Ext.layout.Layout",type:"container",bindToOwnerCtComponent:false,bindToOwnerCtContainer:false,setItemSize:function(c,b,a){if(Ext.isObject(b)){a=b.height;b=b.width}c.setCalculatedSize(b,a,this.owner)},getLayoutItems:function(){return this.owner&&this.owner.items&&this.owner.items.items||[]},beforeLayout:function(){return !this.owner.collapsed&&this.callParent(arguments)},afterLayout:function(){this.owner.afterLayout(this)},getTarget:function(){return this.owner.getTargetEl()},getRenderTarget:function(){return this.owner.getTargetEl()}});Ext.define("Ext.layout.container.Container",{extend:"Ext.layout.container.AbstractContainer",alternateClassName:"Ext.layout.ContainerLayout",layoutItem:function(b,a){if(a){b.doComponentLayout(a.width,a.height)}else{b.doComponentLayout()}},getLayoutTargetSize:function(){var b=this.getTarget(),a;if(b){a=b.getViewSize();if(Ext.isIE&&a.width==0){a=b.getStyleSize()}a.width-=b.getPadding("lr");a.height-=b.getPadding("tb")}return a},beforeLayout:function(){if(this.owner.beforeLayout(arguments)!==false){return this.callParent(arguments)}else{return false}},getRenderedItems:function(){var f=this,h=f.getTarget(),a=f.getLayoutItems(),e=a.length,g=[],b,c;for(b=0;b<e;b++){c=a[b];if(c.rendered&&f.isValidParent(c,h,b)){g.push(c)}}return g},getVisibleItems:function(){var g=this.getTarget(),b=this.getLayoutItems(),f=b.length,a=[],c,e;for(c=0;c<f;c++){e=b[c];if(e.rendered&&this.isValidParent(e,g,c)&&e.hidden!==true){a.push(e)}}return a}});Ext.define("Ext.layout.container.Anchor",{alias:"layout.anchor",extend:"Ext.layout.container.Container",alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,onLayout:function(){this.callParent(arguments);var u=this,n=u.getLayoutTargetSize(),a=u.owner,w=u.getTarget(),v=n.width,l=n.height,p=w.getStyle("overflow"),m=u.getVisibleItems(a),s=m.length,f=[],h,q,k,g,c,e,r,b,t;if(v<20&&l<20){return}if(!u.clearEl){u.clearEl=w.createChild({cls:Ext.baseCSSPrefix+"clear",role:"presentation"})}if(!Ext.supports.RightMargin){t=Ext.Element.getRightMarginFixCleaner(w);w.addCls(Ext.baseCSSPrefix+"inline-children")}for(r=0;r<s;r++){k=m[r];b=k.el;g=k.anchorSpec;if(g){if(g.right){c=u.adjustWidthAnchor(g.right(v)-b.getMargin("lr"),k)}else{c=undefined}if(g.bottom){e=u.adjustHeightAnchor(g.bottom(l)-b.getMargin("tb"),k)}else{e=undefined}f.push({component:k,anchor:true,width:c||undefined,height:e||undefined})}else{f.push({component:k,anchor:false})}}if(!Ext.supports.RightMargin){w.removeCls(Ext.baseCSSPrefix+"inline-children");t()}for(r=0;r<s;r++){h=f[r];u.setItemSize(h.component,h.width,h.height)}if(p&&p!="hidden"&&!u.adjustmentPass){q=u.getLayoutTargetSize();if(q.width!=n.width||q.height!=n.height){u.adjustmentPass=true;u.onLayout()}}delete u.adjustmentPass},parseAnchor:function(c,g,b){if(c&&c!="none"){var e;if(this.parseAnchorRE.test(c)){var f=b-g;return function(a){return a-f}}else{if(c.indexOf("%")!=-1){e=parseFloat(c.replace("%",""))*0.01;return function(a){return Math.floor(a*e)}}else{c=parseInt(c,10);if(!isNaN(c)){return function(a){return a+c}}}}}return null},adjustWidthAnchor:function(b,a){return b},adjustHeightAnchor:function(b,a){return b},configureItem:function(g){var f=this,a=f.owner,e=g.anchor,b,i,c,h;if(!g.anchor&&g.items&&!Ext.isNumber(g.width)&&!(Ext.isIE6&&Ext.isStrict)){g.anchor=e=f.defaultAnchor}if(a.anchorSize){if(typeof a.anchorSize=="number"){c=a.anchorSize}else{c=a.anchorSize.width;h=a.anchorSize.height}}else{c=a.initialConfig.width;h=a.initialConfig.height}if(e){b=e.split(" ");g.anchorSpec=i={right:f.parseAnchor(b[0],g.initialConfig.width,c),bottom:f.parseAnchor(b[1],g.initialConfig.height,h)};if(i.right){g.layoutManagedWidth=1}else{g.layoutManagedWidth=2}if(i.bottom){g.layoutManagedHeight=1}else{g.layoutManagedHeight=2}}else{g.layoutManagedWidth=2;g.layoutManagedHeight=2}this.callParent(arguments)}});Ext.define("Ext.layout.container.Auto",{alias:["layout.auto","layout.autocontainer"],extend:"Ext.layout.container.Container",type:"autocontainer",bindToOwnerCtComponent:true,onLayout:function(a,g){var f=this,b=f.getLayoutItems(),e=b.length,c;if(e){if(!f.clearEl){f.clearEl=f.getRenderTarget().createChild({cls:Ext.baseCSSPrefix+"clear",role:"presentation"})}for(c=0;c<e;c++){f.setItemSize(b[c])}}},configureItem:function(a){this.callParent(arguments);a.layoutManagedHeight=2;a.layoutManagedWidth=2}});Ext.define("Ext.container.AbstractContainer",{extend:"Ext.Component",requires:["Ext.util.MixedCollection","Ext.layout.container.Auto","Ext.ZIndexManager"],suspendLayout:false,autoDestroy:true,defaultType:"panel",isContainer:true,layoutCounter:0,baseCls:Ext.baseCSSPrefix+"container",bubbleEvents:["add","remove"],initComponent:function(){var a=this;a.addEvents("afterlayout","beforeadd","beforeremove","add","remove");a.layoutOnShow=Ext.create("Ext.util.MixedCollection");a.callParent();a.initItems()},initItems:function(){var b=this,a=b.items;b.items=Ext.create("Ext.util.MixedCollection",false,b.getComponentId);if(a){if(!Ext.isArray(a)){a=[a]}b.add(a)}},afterRender:function(){this.getLayout();this.callParent()},renderChildren:function(){var b=this,a=b.getLayout();b.callParent();if(a){b.suspendLayout=true;a.renderChildren();delete b.suspendLayout}},setLayout:function(b){var a=this.layout;if(a&&a.isLayout&&a!=b){a.setOwner(null)}this.layout=b;b.setOwner(this)},getLayout:function(){var a=this;if(!a.layout||!a.layout.isLayout){a.setLayout(Ext.layout.Layout.create(a.layout,"autocontainer"))}return a.layout},doLayout:function(){var b=this,a=b.getLayout();if(b.rendered&&a&&!b.suspendLayout){if(!b.isFixedWidth()||!b.isFixedHeight()){if(b.componentLayout.layoutBusy!==true){b.doComponentLayout();if(b.componentLayout.layoutCancelled===true){a.layout()}}}else{if(a.layoutBusy!==true){a.layout()}}}return b},afterLayout:function(a){++this.layoutCounter;this.fireEvent("afterlayout",this,a)},prepareItems:function(b,e){if(!Ext.isArray(b)){b=[b]}var c=0,a=b.length,f;for(;c<a;c++){f=b[c];if(e){f=this.applyDefaults(f)}b[c]=this.lookupComponent(f)}return b},applyDefaults:function(a){var b=this.defaults;if(b){if(Ext.isFunction(b)){b=b.call(this,a)}if(Ext.isString(a)){a=Ext.ComponentManager.get(a)}Ext.applyIf(a,b)}return a},lookupComponent:function(a){return Ext.isString(a)?Ext.ComponentManager.get(a):this.createComponent(a)},createComponent:function(a,b){return Ext.ComponentManager.create(a,b||this.defaultType)},getComponentId:function(a){return a.getItemId()},add:function(){var k=this,g=Array.prototype.slice.call(arguments),a,h,b=[],c,f,m,e=-1,l;if(typeof g[0]=="number"){e=g.shift()}a=g.length>1;if(a||Ext.isArray(g[0])){h=a?g:g[0];k.suspendLayout=true;for(c=0,f=h.length;c<f;c++){m=h[c];if(!m){Ext.Error.raise("Trying to add a null item as a child of Container with itemId/id: "+k.getItemId())}if(e!=-1){m=k.add(e+c,m)}else{m=k.add(m)}b.push(m)}k.suspendLayout=false;k.doLayout();return b}l=k.prepareItems(g[0],true)[0];if(l.floating){l.onAdded(k,e)}else{e=(e!==-1)?e:k.items.length;if(k.fireEvent("beforeadd",k,l,e)!==false&&k.onBeforeAdd(l)!==false){k.items.insert(e,l);l.onAdded(k,e);k.onAdd(l,e);k.fireEvent("add",k,l,e)}k.doLayout()}return l},onAdd:Ext.emptyFn,onRemove:Ext.emptyFn,insert:function(b,a){return this.add(b,a)},move:function(b,e){var a=this.items,c;c=a.removeAt(b);if(c===false){return false}a.insert(e,c);this.doLayout();return c},onBeforeAdd:function(b){var a=this;if(b.ownerCt){b.ownerCt.remove(b,false)}if(a.border===false||a.border===0){b.border=(b.border===true)}},remove:function(a,b){var e=this,f=e.getComponent(a);if(Ext.isDefined(Ext.global.console)&&!f){console.warn("Attempted to remove a component that does not exist. Ext.container.Container: remove takes an argument of the component to remove. cmp.remove() is incorrect usage.")}if(f&&e.fireEvent("beforeremove",e,f)!==false){e.doRemove(f,b);e.fireEvent("remove",e,f)}return f},doRemove:function(c,b){var f=this,e=f.layout,a=e&&f.rendered;f.items.remove(c);c.onRemoved();if(a){e.onRemove(c)}f.onRemove(c,b);if(b===true||(b!==false&&f.autoDestroy)){c.destroy()}if(a&&!b){e.afterRemove(c)}if(!f.destroying){f.doLayout()}},removeAll:function(c){var h=this,f=h.items.items.slice(),b=[],e=0,a=f.length,g;h.suspendLayout=true;for(;e<a;e++){g=f[e];h.remove(g,c);if(g.ownerCt!==h){b.push(g)}}h.suspendLayout=false;if(a){h.doLayout()}return b},getRefItems:function(c){var h=this,e=h.items.items,b=e.length,f=0,g,a=[];for(;f<b;f++){g=e[f];a.push(g);if(c&&g.getRefItems){a.push.apply(a,g.getRefItems(true))}}if(h.floatingItems&&h.floatingItems.accessList){a.push.apply(a,h.floatingItems.accessList)}return a},cascade:function(m,n,a){var l=this,f=l.items?l.items.items:[],g=f.length,e=0,k,h=a?a.concat(l):[l],b=h.length-1;if(m.apply(n||l,h)!==false){for(;e<g;e++){k=f[e];if(k.cascade){k.cascade(m,n,a)}else{h[b]=k;m.apply(n||f,h)}}}return this},getComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}return this.items.get(a)},query:function(a){a=a||"*";return Ext.ComponentQuery.query(a,this)},child:function(a){a=a||"";return this.query("> "+a)[0]||null},down:function(a){return this.query(a)[0]||null},show:function(){this.callParent(arguments);this.performDeferredLayouts();return this},performDeferredLayouts:function(){var f=this.layoutOnShow,e=f.getCount(),b=0,a,c;for(;b<e;b++){c=f.get(b);a=c.needsLayout;if(Ext.isObject(a)){c.doComponentLayout(a.width,a.height,a.isSetSize,a.ownerCt)}}f.clear()},onEnable:function(){Ext.Array.each(this.query("[isFormField]"),function(a){if(a.resetDisable){a.enable();delete a.resetDisable}});this.callParent()},onDisable:function(){Ext.Array.each(this.query("[isFormField]"),function(a){if(a.resetDisable!==false&&!a.disabled){a.disable();a.resetDisable=true}});this.callParent()},beforeLayout:function(){return true},beforeDestroy:function(){var b=this,a=b.items,e;if(a){while((e=a.first())){b.doRemove(e,true)}}Ext.destroy(b.layout);b.callParent()}});Ext.define("Ext.container.Container",{extend:"Ext.container.AbstractContainer",alias:"widget.container",alternateClassName:"Ext.Container",getChildByElement:function(e){var g,b,a=0,c=this.items.items,f=c.length;e=Ext.getDom(e);for(;a<f;a++){g=c[a];b=g.getEl();if((b.dom===e)||b.contains(e)){return g}}return null}});Ext.define("Ext.panel.Header",{extend:"Ext.container.Container",uses:["Ext.panel.Tool","Ext.draw.Component","Ext.util.CSS"],alias:"widget.header",isHeader:true,defaultType:"tool",indicateDrag:false,weight:-1,renderTpl:['<div id="{id}-body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>','<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>></div>'],initComponent:function(){var c=this,g,f,b,a,e;c.indicateDragCls=c.baseCls+"-draggable";c.title=c.title||"&#160;";c.tools=c.tools||[];c.items=c.items||[];c.orientation=c.orientation||"horizontal";c.dock=(c.dock)?c.dock:(c.orientation=="horizontal")?"top":"left";c.addClsWithUI(c.orientation);c.addClsWithUI(c.dock);c.addChildEls("body");if(!Ext.isEmpty(c.iconCls)){c.initIconCmp();c.items.push(c.iconCmp)}if(c.orientation=="vertical"){if(Ext.isIE6||Ext.isIE7){c.width=this.width||24}else{if(Ext.isIEQuirks){c.width=this.width||25}}c.layout={type:"vbox",align:"center",clearInnerCtOnLayout:true,bindToOwnerCtContainer:false};c.textConfig={cls:c.baseCls+"-text",type:"text",text:c.title,rotate:{degrees:90}};e=c.ui;if(Ext.isArray(e)){e=e[0]}g="."+c.baseCls+"-text-"+e;if(Ext.scopeResetCSS){g="."+Ext.baseCSSPrefix+"reset "+g}f=Ext.util.CSS.getRule(g);if(f){b=f.style}if(b){Ext.apply(c.textConfig,{"font-family":b.fontFamily,"font-weight":b.fontWeight,"font-size":b.fontSize,fill:b.color})}c.titleCmp=Ext.create("Ext.draw.Component",{ariaRole:"heading",focusable:false,viewBox:false,flex:1,autoSize:true,margins:"5 0 0 0",items:[c.textConfig],renderSelectors:{textEl:"."+c.baseCls+"-text"}})}else{c.layout={type:"hbox",align:"middle",clearInnerCtOnLayout:true,bindToOwnerCtContainer:false};c.titleCmp=Ext.create("Ext.Component",{xtype:"component",ariaRole:"heading",focusable:false,flex:1,cls:c.baseCls+"-text-container",renderTpl:['<span id="{id}-textEl" class="{cls}-text {cls}-text-{ui}">{title}</span>'],renderData:{title:c.title,cls:c.baseCls,ui:c.ui},childEls:["textEl"]})}c.items.push(c.titleCmp);c.items=c.items.concat(c.tools);this.callParent()},initIconCmp:function(){this.iconCmp=Ext.create("Ext.Component",{focusable:false,renderTpl:['<img id="{id}-iconEl" alt="" src="{blank}" class="{cls}-icon {iconCls}"/>'],renderData:{blank:Ext.BLANK_IMAGE_URL,cls:this.baseCls,iconCls:this.iconCls,orientation:this.orientation},childEls:["iconEl"],iconCls:this.iconCls})},afterRender:function(){var a=this;a.el.unselectable();if(a.indicateDrag){a.el.addCls(a.indicateDragCls)}a.mon(a.el,{click:a.onClick,scope:a});a.callParent()},afterLayout:function(){var a=this;a.callParent(arguments);if(Ext.isIE7){a.el.repaint()}},addUIClsToElement:function(b,g){var f=this,a=f.callParent(arguments),e=[f.baseCls+"-body-"+b,f.baseCls+"-body-"+f.ui+"-"+b],h,c;if(!g&&f.rendered){if(f.bodyCls){f.body.addCls(f.bodyCls)}else{f.body.addCls(e)}}else{if(f.bodyCls){h=f.bodyCls.split(" ");for(c=0;c<e.length;c++){if(!Ext.Array.contains(h,e[c])){h.push(e[c])}}f.bodyCls=h.join(" ")}else{f.bodyCls=e.join(" ")}}return a},removeUIClsFromElement:function(b,g){var f=this,a=f.callParent(arguments),e=[f.baseCls+"-body-"+b,f.baseCls+"-body-"+f.ui+"-"+b],h,c;if(!g&&f.rendered){if(f.bodyCls){f.body.removeCls(f.bodyCls)}else{f.body.removeCls(e)}}else{if(f.bodyCls){h=f.bodyCls.split(" ");for(c=0;c<e.length;c++){Ext.Array.remove(h,e[c])}f.bodyCls=h.join(" ")}}return a},addUIToElement:function(c){var b=this,e,a;b.callParent(arguments);a=b.baseCls+"-body-"+b.ui;if(!c&&b.rendered){if(b.bodyCls){b.body.addCls(b.bodyCls)}else{b.body.addCls(a)}}else{if(b.bodyCls){e=b.bodyCls.split(" ");if(!Ext.Array.contains(e,a)){e.push(a)}b.bodyCls=e.join(" ")}else{b.bodyCls=a}}if(!c&&b.titleCmp&&b.titleCmp.rendered&&b.titleCmp.textEl){b.titleCmp.textEl.addCls(b.baseCls+"-text-"+b.ui)}},removeUIFromElement:function(){var b=this,c,a;b.callParent(arguments);a=b.baseCls+"-body-"+b.ui;if(b.rendered){if(b.bodyCls){b.body.removeCls(b.bodyCls)}else{b.body.removeCls(a)}}else{if(b.bodyCls){c=b.bodyCls.split(" ");Ext.Array.remove(c,a);b.bodyCls=c.join(" ")}else{b.bodyCls=a}}if(b.titleCmp&&b.titleCmp.rendered&&b.titleCmp.textEl){b.titleCmp.textEl.removeCls(b.baseCls+"-text-"+b.ui)}},onClick:function(a){if(!a.getTarget(Ext.baseCSSPrefix+"tool")){this.fireEvent("click",a)}},getTargetEl:function(){return this.body||this.frameBody||this.el},setTitle:function(e){var c=this;if(c.rendered){if(c.titleCmp.rendered){if(c.titleCmp.surface){c.title=e||"";var b=c.titleCmp.surface.items.items[0],a=c.titleCmp.surface;a.remove(b);c.textConfig.type="text";c.textConfig.text=e;b=a.add(c.textConfig);b.setAttributes({rotate:{degrees:90}},true);c.titleCmp.autoSizeSurface()}else{c.title=e||"&#160;";c.titleCmp.textEl.update(c.title)}}else{c.titleCmp.on({render:function(){c.setTitle(e)},single:true})}}else{c.on({render:function(){c.layout.layout();c.setTitle(e)},single:true})}},setIconCls:function(a){var c=this,f=!a||!a.length,e=c.iconCmp,b;c.iconCls=a;if(!c.iconCmp&&!f){c.initIconCmp();c.insert(0,c.iconCmp)}else{if(e){if(f){c.iconCmp.destroy()}else{b=e.iconEl;b.removeCls(e.iconCls);b.addCls(a);e.iconCls=a}}}},addTool:function(a){this.tools.push(this.add(a))},onAdd:function(b,a){this.callParent([arguments]);if(b instanceof Ext.panel.Tool){b.bindTo(this.ownerCt);this.tools[b.type]=b}}});Ext.define("Ext.layout.component.AbstractDock",{extend:"Ext.layout.component.Component",type:"dock",autoSizing:true,beforeLayout:function(){var a=this.callParent(arguments);if(a!==false&&(!this.initializedBorders||this.childrenChanged)&&(!this.owner.border||this.owner.manageBodyBorders)){this.handleItemBorders();this.initializedBorders=true}return a},handleItemBorders:function(){var a=this.owner,f=a.body,n=this.getLayoutItems(),h={top:[],right:[],bottom:[],left:[]},b=this.borders,e={top:"bottom",right:"left",bottom:"top",left:"right"},c,k,m,l,g;for(c=0,k=n.length;c<k;c++){m=n[c];l=m.dock;if(m.ignoreBorderManagement){continue}if(!h[l].satisfied){h[l].push(m);h[l].satisfied=true}if(!h.top.satisfied&&e[l]!=="top"){h.top.push(m)}if(!h.right.satisfied&&e[l]!=="right"){h.right.push(m)}if(!h.bottom.satisfied&&e[l]!=="bottom"){h.bottom.push(m)}if(!h.left.satisfied&&e[l]!=="left"){h.left.push(m)}}if(b){for(g in b){if(b.hasOwnProperty(g)){k=b[g].length;if(!a.manageBodyBorders){for(c=0;c<k;c++){b[g][c].removeCls(Ext.baseCSSPrefix+"docked-noborder-"+g)}if(!b[g].satisfied&&!a.bodyBorder){f.removeCls(Ext.baseCSSPrefix+"docked-noborder-"+g)}}else{if(b[g].satisfied){f.setStyle("border-"+g+"-width","")}}}}}for(g in h){if(h.hasOwnProperty(g)){k=h[g].length;if(!a.manageBodyBorders){for(c=0;c<k;c++){h[g][c].addCls(Ext.baseCSSPrefix+"docked-noborder-"+g)}if((!h[g].satisfied&&!a.bodyBorder)||a.bodyBorder===false){f.addCls(Ext.baseCSSPrefix+"docked-noborder-"+g)}}else{if(h[g].satisfied){f.setStyle("border-"+g+"-width","1px")}}}}this.borders=h},onLayout:function(a,p){if(this.onLayout_running){return}this.onLayout_running=true;var k=this,b=k.owner,h=b.body,g=b.layout,i=k.getTarget(),m=false,n=false,l,f,e;var c=k.info={boxes:[],size:{width:a,height:p},bodyBox:{}};delete g.isAutoDock;Ext.applyIf(c,k.getTargetInfo());if(b&&b.ownerCt&&b.ownerCt.layout&&b.ownerCt.layout.isLayout){if(!Ext.isNumber(b.height)||!Ext.isNumber(b.width)){b.ownerCt.layout.bindToOwnerCtComponent=true}else{b.ownerCt.layout.bindToOwnerCtComponent=false}}if(p==null||a==null){l=c.padding;f=c.border;e=k.frameSize;if((p==null)&&(a==null)){n=true;m=true;k.setTargetSize(null);k.setBodyBox({width:null,height:null})}else{if(p==null){n=true;k.setTargetSize(a);k.setBodyBox({width:a-l.left-f.left-l.right-f.right-e.left-e.right,height:null})}else{m=true;k.setTargetSize(null,p);k.setBodyBox({width:null,height:p-l.top-l.bottom-f.top-f.bottom-e.top-e.bottom})}}if(g&&g.isLayout){g.bindToOwnerCtComponent=true;g.isAutoDock=g.autoSize!==true;g.layout();c.autoSizedCtLayout=g.autoSize===true;c.autoHeight=n;c.autoWidth=m}k.dockItems();k.setTargetSize(c.size.width,c.size.height)}else{k.setTargetSize(a,p);k.dockItems()}k.callParent(arguments);this.onLayout_running=false},dockItems:function(){this.calculateDockBoxes();var h=this.info,k=h.autoWidth,a=h.autoHeight,c=h.boxes,g=c.length,f,b,e;for(b=0;b<g;b++){f=c[b];e=f.item;e.setPosition(f.x,f.y);if((k||a)&&e.layout&&e.layout.isLayout){e.layout.bindToOwnerCtComponent=true}}if(!h.autoSizedCtLayout){if(k){h.bodyBox.width=null}if(a){h.bodyBox.height=null}}this.setBodyBox(h.bodyBox)},calculateDockBoxes:function(){if(this.calculateDockBoxes_running){return}this.calculateDockBoxes_running=true;var m=this,h=m.getTarget(),l=m.getLayoutItems(),a=m.owner,t=a.body,b=m.info,q=b.autoWidth,r=b.autoHeight,u=b.size,k=l.length,p=b.padding,e=b.border,c=m.frameSize,s,f,g,n;if(r){u.height=t.getHeight()+p.top+e.top+p.bottom+e.bottom+c.top+c.bottom}else{u.height=h.getHeight()}if(q){u.width=t.getWidth()+p.left+e.left+p.right+e.right+c.left+c.right}else{u.width=h.getWidth()}b.bodyBox={x:p.left+c.left,y:p.top+c.top,width:u.width-p.left-e.left-p.right-e.right-c.left-c.right,height:u.height-e.top-p.top-e.bottom-p.bottom-c.top-c.bottom};for(f=0;f<k;f++){s=l[f];g=m.initBox(s);if(r===true){g=m.adjustAutoBox(g,f)}else{g=m.adjustSizedBox(g,f)}b.boxes.push(g)}this.calculateDockBoxes_running=false},adjustSizedBox:function(f,e){var a=this.info.bodyBox,b=this.frameSize,h=this.info,g=h.padding,i=f.type,c=h.border;switch(i){case"top":f.y=a.y;break;case"left":f.x=a.x;break;case"bottom":f.y=(a.y+a.height)-f.height;break;case"right":f.x=(a.x+a.width)-f.width;break}if(f.ignoreFrame){if(i=="bottom"){f.y+=(b.bottom+g.bottom+c.bottom)}else{f.y-=(b.top+g.top+c.top)}if(i=="right"){f.x+=(b.right+g.right+c.right)}else{f.x-=(b.left+g.left+c.left)}}if(!f.overlay){switch(i){case"top":a.y+=f.height;a.height-=f.height;break;case"left":a.x+=f.width;a.width-=f.width;break;case"bottom":a.height-=f.height;break;case"right":a.width-=f.width;break}}return f},adjustAutoBox:function(k,n){var b=this.info,a=this.owner,p=b.bodyBox,t=b.size,l=b.boxes,g=l.length,r=k.type,f=this.frameSize,s=b.padding,e=b.border,c=b.autoSizedCtLayout,q=(g<n)?g:n,h,m;if(r=="top"||r=="bottom"){for(h=0;h<q;h++){m=l[h];if(m.stretched&&m.type=="left"||m.type=="right"){m.height+=k.height}else{if(m.type=="bottom"){m.y+=k.height}}}}switch(r){case"top":k.y=p.y;if(!k.overlay){p.y+=k.height;if(b.autoHeight){t.height+=k.height}else{p.height-=k.height}}break;case"bottom":if(!k.overlay){if(b.autoHeight){t.height+=k.height}else{p.height-=k.height}}k.y=(p.y+p.height);break;case"left":k.x=p.x;if(!k.overlay){p.x+=k.width;if(b.autoWidth){t.width+=k.width}else{p.width-=k.width}}break;case"right":if(!k.overlay){if(b.autoWidth){t.width+=k.width}else{p.width-=k.width}}k.x=(p.x+p.width);break}if(k.ignoreFrame){if(r=="bottom"){k.y+=(f.bottom+s.bottom+e.bottom)}else{k.y-=(f.top+s.top+e.top)}if(r=="right"){k.x+=(f.right+s.right+e.right)}else{k.x-=(f.left+s.left+e.left)}}return k},initBox:function(l){var i=this,h=i.info.bodyBox,a=(l.dock=="top"||l.dock=="bottom"),b=i.owner,f=i.frameSize,c=i.info,k=c.padding,e=c.border,g={item:l,overlay:l.overlay,type:l.dock,offsets:Ext.Element.parseBox(l.offsets||{}),ignoreFrame:l.ignoreParentFrame};if(l.stretch!==false){g.stretched=true;if(a){g.x=h.x+g.offsets.left;g.width=h.width-(g.offsets.left+g.offsets.right);if(g.ignoreFrame){g.width+=(f.left+f.right+e.left+e.right+k.left+k.right)}l.setCalculatedSize(g.width-l.el.getMargin("lr"),undefined,b)}else{g.y=h.y+g.offsets.top;g.height=h.height-(g.offsets.bottom+g.offsets.top);if(g.ignoreFrame){g.height+=(f.top+f.bottom+e.top+e.bottom+k.top+k.bottom)}l.setCalculatedSize(undefined,g.height-l.el.getMargin("tb"),b);if(!Ext.supports.ComputedStyle){l.el.repaint()}}}else{l.doComponentLayout();g.width=l.getWidth()-(g.offsets.left+g.offsets.right);g.height=l.getHeight()-(g.offsets.bottom+g.offsets.top);g.y+=g.offsets.top;if(a){g.x=(l.align=="right")?h.width-g.width:h.x;g.x+=g.offsets.left}}if(g.width===undefined){g.width=l.getWidth()+l.el.getMargin("lr")}if(g.height===undefined){g.height=l.getHeight()+l.el.getMargin("tb")}return g},getLayoutItems:function(){var c=this.owner.getDockedItems(),e=c.length,b=0,a=[];for(;b<e;b++){if(c[b].isVisible(true)){a.push(c[b])}}return a},renderItems:function(h,f){var a=f.dom.childNodes,e=a.length,g=h.length,l=0,c,b,k,m;for(c=0;c<e;c++){k=Ext.get(a[c]);for(b=0;b<g;b++){m=h[b];if(m.rendered&&(k.id==m.el.id||k.contains(m.el.id))){break}}if(b===g){l++}}for(c=0,b=0;c<g;c++,b++){m=h[c];if(c===b&&(m.dock==="right"||m.dock==="bottom")){b+=l}if(m&&!m.rendered){this.renderItem(m,f,b)}else{if(!this.isValidParent(m,f,b)){this.moveItem(m,f,b)}}}},setBodyBox:function(g){var i=this,a=i.owner,h=a.body,b=i.info,f=b.bodyMargin,k=b.padding,e=b.border,c=i.frameSize;if(a.collapsed){return}if(Ext.isNumber(g.width)){g.width-=f.left+f.right}if(Ext.isNumber(g.height)){g.height-=f.top+f.bottom}i.setElementSize(h,g.width,g.height);if(Ext.isNumber(g.x)){h.setLeft(g.x-k.left-c.left)}if(Ext.isNumber(g.y)){h.setTop(g.y-k.top-c.top)}},configureItem:function(a,b){this.callParent(arguments);if(a.dock=="top"||a.dock=="bottom"){a.layoutManagedWidth=1;a.layoutManagedHeight=2}else{a.layoutManagedWidth=2;a.layoutManagedHeight=1}a.addCls(Ext.baseCSSPrefix+"docked");a.addClsWithUI("docked-"+a.dock)},afterRemove:function(a){this.callParent(arguments);if(this.itemCls){a.el.removeCls(this.itemCls+"-"+a.dock)}var b=a.el.dom;if(!a.destroying&&b){b.parentNode.removeChild(b)}this.childrenChanged=true}});Ext.define("Ext.layout.component.Dock",{alias:["layout.dock"],extend:"Ext.layout.component.AbstractDock"});Ext.define("Ext.layout.component.Tip",{alias:["layout.tip"],extend:"Ext.layout.component.Dock",type:"tip",onLayout:function(b,k){var h=this,c=h.owner,e=c.el,a,i,g,f,l=e.getXY();e.setXY([-9999,-9999]);this.callParent(arguments);if(!Ext.isNumber(b)){a=c.minWidth;i=c.maxWidth;if(Ext.isStrict&&(Ext.isIE6||Ext.isIE7)){f=h.doAutoWidth()}else{g=e.getWidth()}if(g<a){f=a}else{if(g>i){f=i}}if(f){this.callParent([f,k])}}e.setXY(l)},doAutoWidth:function(){var e=this,b=e.owner,a=b.body,c=a.getTextWidth();if(b.header){c=Math.max(c,b.header.getWidth())}if(!Ext.isDefined(e.frameWidth)){e.frameWidth=b.el.getWidth()-a.getWidth()}c+=e.frameWidth+a.getPadding("lr");return c}});Ext.define("Ext.fx.target.Element",{extend:"Ext.fx.target.Target",type:"element",getElVal:function(b,a,c){if(c==undefined){if(a==="x"){c=b.getX()}else{if(a==="y"){c=b.getY()}else{if(a==="scrollTop"){c=b.getScroll().top}else{if(a==="scrollLeft"){c=b.getScroll().left}else{if(a==="height"){c=b.getHeight()}else{if(a==="width"){c=b.getWidth()}else{c=b.getStyle(a)}}}}}}}return c},getAttr:function(a,c){var b=this.target;return[[b,this.getElVal(b,a,c)]]},setAttr:function(l){var g=this.target,k=l.length,n,h,b,f,c,a,e,m;for(f=0;f<k;f++){n=l[f].attrs;for(h in n){if(n.hasOwnProperty(h)){a=n[h].length;for(c=0;c<a;c++){b=n[h][c];e=b[0];m=b[1];if(h==="x"){e.setX(m)}else{if(h==="y"){e.setY(m)}else{if(h==="scrollTop"){e.scrollTo("top",m)}else{if(h==="scrollLeft"){e.scrollTo("left",m)}else{e.setStyle(h,m)}}}}}}}}}});Ext.define("Ext.fx.target.Sprite",{extend:"Ext.fx.target.Target",type:"draw",getFromPrim:function(b,a){var c;if(a=="translate"){c={x:b.attr.translation.x||0,y:b.attr.translation.y||0}}else{if(a=="rotate"){c={degrees:b.attr.rotation.degrees||0,x:b.attr.rotation.x,y:b.attr.rotation.y}}else{c=b.attr[a]}}return c},getAttr:function(a,b){return[[this.target,b!=undefined?b:this.getFromPrim(this.target,a)]]},setAttr:function(n){var h=n.length,l=[],s,g,r,f,b,q,p,e,c,m,k,a;for(e=0;e<h;e++){s=n[e].attrs;for(g in s){r=s[g];a=r.length;for(c=0;c<a;c++){b=r[c][0];f=r[c][1];if(g==="translate"){p={x:f.x,y:f.y}}else{if(g==="rotate"){m=f.x;if(isNaN(m)){m=null}k=f.y;if(isNaN(k)){k=null}p={degrees:f.degrees,x:m,y:k}}else{if(g==="width"||g==="height"||g==="x"||g==="y"){p=parseFloat(f)}else{p=f}}}q=Ext.Array.indexOf(l,b);if(q==-1){l.push([b,{}]);q=l.length-1}l[q][1][g]=p}}}h=l.length;for(e=0;e<h;e++){b=l[e];b[0].setAttributes(b[1])}this.target.redraw()}});Ext.define("Ext.fx.target.CompositeSprite",{extend:"Ext.fx.target.Sprite",getAttr:function(a,e){var b=[],c=this.target;c.each(function(f){b.push([f,e!=undefined?e:this.getFromPrim(f,a)])},this);return b}});Ext.define("Ext.fx.target.CompositeElement",{extend:"Ext.fx.target.Element",isComposite:true,constructor:function(a){a.id=a.id||Ext.id(null,"ext-composite-");this.callParent([a])},getAttr:function(a,e){var b=[],c=this.target;c.each(function(f){b.push([f,this.getElVal(f,a,e)])},this);return b}});Ext.define("Ext.fx.target.Component",{extend:"Ext.fx.target.Target",type:"component",getPropMethod:{top:function(){return this.getPosition(true)[1]},left:function(){return this.getPosition(true)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},compMethod:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(a,b){return[[this.target,b!==undefined?b:this.getPropMethod[a].call(this.target)]]},setAttr:function(t,f,b){var r=this,m=r.target,q=t.length,v,n,a,g,e,p,l,c,s,u,k;for(g=0;g<q;g++){v=t[g].attrs;for(n in v){l=v[n].length;p={setPosition:{},setPagePosition:{},setSize:{},setOpacity:{}};for(e=0;e<l;e++){a=v[n][e];p[r.compMethod[n]].target=a[0];p[r.compMethod[n]][n]=a[1]}if(p.setPosition.target){a=p.setPosition;c=(a.left===undefined)?undefined:parseInt(a.left,10);s=(a.top===undefined)?undefined:parseInt(a.top,10);a.target.setPosition(c,s)}if(p.setPagePosition.target){a=p.setPagePosition;a.target.setPagePosition(a.x,a.y)}if(p.setSize.target&&p.setSize.target.el){a=p.setSize;u=(a.width===undefined)?a.target.getWidth():parseInt(a.width,10);k=(a.height===undefined)?a.target.getHeight():parseInt(a.height,10);if(b||r.dynamic){a.target.componentLayout.childrenChanged=true;if(r.layoutAnimation){a.target.setCalculatedSize(u,k)}else{a.target.setSize(u,k)}}else{a.target.el.setSize(u,k)}}if(p.setOpacity.target){a=p.setOpacity;a.target.el.setStyle("opacity",a.opacity)}}}}});Ext.define("Ext.fx.Manager",{singleton:true,requires:["Ext.util.MixedCollection","Ext.fx.target.Element","Ext.fx.target.CompositeElement","Ext.fx.target.Sprite","Ext.fx.target.CompositeSprite","Ext.fx.target.Component"],mixins:{queue:"Ext.fx.Queue"},constructor:function(){this.items=Ext.create("Ext.util.MixedCollection");this.mixins.queue.constructor.call(this)},interval:16,forceJS:true,createTarget:function(e){var b=this,c=!b.forceJS&&Ext.supports.Transitions,a;b.useCSS3=c;if(Ext.isString(e)){e=Ext.get(e)}if(e&&e.tagName){e=Ext.get(e);a=Ext.create("Ext.fx.target.Element"+(c?"CSS":""),e);b.targets.add(a);return a}if(Ext.isObject(e)){if(e.dom){a=Ext.create("Ext.fx.target.Element"+(c?"CSS":""),e)}else{if(e.isComposite){a=Ext.create("Ext.fx.target.CompositeElement"+(c?"CSS":""),e)}else{if(e.isSprite){a=Ext.create("Ext.fx.target.Sprite",e)}else{if(e.isCompositeSprite){a=Ext.create("Ext.fx.target.CompositeSprite",e)}else{if(e.isComponent){a=Ext.create("Ext.fx.target.Component",e)}else{if(e.isAnimTarget){return e}else{return null}}}}}}b.targets.add(a);return a}else{return null}},addAnim:function(c){var b=this.items,a=this.task;b.add(c);if(!a&&b.length){a=this.task={run:this.runner,interval:this.interval,scope:this};Ext.TaskManager.start(a)}},removeAnim:function(c){var b=this.items,a=this.task;b.remove(c);if(a&&!b.length){Ext.TaskManager.stop(a);delete this.task}},startingFilter:function(a){return a.paused===false&&a.running===false&&a.iterations>0},runningFilter:function(a){return a.paused===false&&a.running===true&&a.isAnimator!==true},runner:function(){var b=this,a=b.items;b.targetData={};b.targetArr={};b.timestamp=new Date();a.filterBy(b.startingFilter).each(b.startAnim,b);a.filterBy(b.runningFilter).each(b.runAnim,b);b.applyPendingAttrs()},startAnim:function(a){a.start(this.timestamp)},runAnim:function(e){if(!e){return}var c=this,b=e.target.getId(),g=c.useCSS3&&e.target.type=="element",a=c.timestamp-e.startTime,f,h;this.collectTargetData(e,a,g);if(g){e.target.setAttr(c.targetData[b],true);c.targetData[b]=[];c.collectTargetData(e,e.duration,g);e.paused=true;f=e.target.target;if(e.target.isComposite){f=e.target.target.last()}h={};h[Ext.supports.CSS3TransitionEnd]=e.lastFrame;h.scope=e;h.single=true;f.on(h)}else{if(a>=e.duration){c.applyPendingAttrs(true);delete c.targetData[b];delete c.targetArr[b];e.lastFrame()}}},collectTargetData:function(e,a,f){var b=e.target.getId(),g=this.targetData[b],c;if(!g){g=this.targetData[b]=[];this.targetArr[b]=e.target}c={duration:e.duration,easing:(f&&e.reverse)?e.easingFn.reverse().toCSS3():e.easing,attrs:{}};Ext.apply(c.attrs,e.runAnim(a));g.push(c)},applyPendingAttrs:function(e){var c=this.targetData,b=this.targetArr,a;for(a in c){if(c.hasOwnProperty(a)){b[a].setAttr(c[a],false,e)}}}});Ext.define("Ext.fx.Animator",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.fx.Manager"],isAnimator:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",running:false,paused:false,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(a){var b=this;a=Ext.apply(b,a||{});b.config=a;b.id=Ext.id(null,"ext-animator-");b.addEvents("beforeanimate","keyframe","afteranimate");b.mixins.observable.constructor.call(b,a);b.timeline=[];b.createTimeline(b.keyframes);if(b.target){b.applyAnimator(b.target);Ext.fx.Manager.addAnim(b)}},sorter:function(e,c){return e.pct-c.pct},createTimeline:function(g){var l=this,p=[],m=l.to||{},c=l.duration,q,a,f,k,n,b,e,h;for(n in g){if(g.hasOwnProperty(n)&&l.animKeyFramesRE.test(n)){h={attrs:Ext.apply(g[n],m)};if(n=="from"){n=0}else{if(n=="to"){n=100}}h.pct=parseInt(n,10);p.push(h)}}Ext.Array.sort(p,l.sorter);k=p.length;for(f=0;f<k;f++){q=(p[f-1])?c*(p[f-1].pct/100):0;a=c*(p[f].pct/100);l.timeline.push({duration:a-q,attrs:p[f].attrs})}},applyAnimator:function(f){var l=this,m=[],q=l.timeline,g=l.reverse,k=q.length,b,h,a,e,p,n,c;if(l.fireEvent("beforeanimate",l)!==false){for(c=0;c<k;c++){b=q[c];p=b.attrs;h=p.easing||l.easing;a=p.damper||l.damper;delete p.easing;delete p.damper;b=Ext.create("Ext.fx.Anim",{target:f,easing:h,damper:a,duration:b.duration,paused:true,to:p});m.push(b)}l.animations=m;l.target=b.target;for(c=0;c<k-1;c++){b=m[c];b.nextAnim=m[c+1];b.on("afteranimate",function(){this.nextAnim.paused=false});b.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},l)}m[k-1].on("afteranimate",function(){this.lastFrame()},l)}},start:function(e){var f=this,c=f.delay,b=f.delayStart,a;if(c){if(!b){f.delayStart=e;return}else{a=e-b;if(a<c){return}else{e=new Date(b.getTime()+c)}}}if(f.fireEvent("beforeanimate",f)!==false){f.startTime=e;f.running=true;f.animations[f.keyframeStep].paused=false}},lastFrame:function(){var c=this,a=c.iterations,b=c.currentIteration;b++;if(b<a){c.startTime=new Date();c.currentIteration=b;c.keyframeStep=0;c.applyAnimator(c.target);c.animations[c.keyframeStep].paused=false}else{c.currentIteration=0;c.end()}},end:function(){var a=this;a.fireEvent("afteranimate",a,a.startTime,new Date()-a.startTime)}});Ext.define("Ext.draw.Draw",{singleton:true,requires:["Ext.draw.Color"],pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,availableAnimAttrs:{along:"along",blur:null,"clip-rect":"csv",cx:null,cy:null,fill:"color","fill-opacity":null,"font-size":null,height:null,opacity:null,path:"path",r:null,rotation:"csv",rx:null,ry:null,scale:"csv",stroke:"color","stroke-opacity":null,"stroke-width":null,translation:"csv",width:null,x:null,y:null},is:function(b,a){a=String(a).toLowerCase();return(a=="object"&&b===Object(b))||(a=="undefined"&&typeof b==a)||(a=="null"&&b===null)||(a=="array"&&Array.isArray&&Array.isArray(b))||(Object.prototype.toString.call(b).toLowerCase().slice(8,-1))==a},ellipsePath:function(b){var a=b.attr;return Ext.String.format("M{0},{1}A{2},{3},0,1,1,{0},{4}A{2},{3},0,1,1,{0},{1}z",a.x,a.y-a.ry,a.rx,a.ry,a.y+a.ry)},rectPath:function(b){var a=b.attr;if(a.radius){return Ext.String.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",a.x+a.radius,a.y,a.width-a.radius*2,a.radius,-a.radius,a.height-a.radius*2,a.radius*2-a.width,a.radius*2-a.height)}else{return Ext.String.format("M{0},{1}l{2},0,0,{3},{4},0z",a.x,a.y,a.width,a.height,-a.width)}},path2string:function(){return this.join(",").replace(Ext.draw.Draw.pathToStringRE,"$1")},pathToString:function(a){return a.join(",").replace(Ext.draw.Draw.pathToStringRE,"$1")},parsePathString:function(a){if(!a){return null}var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[],b=this;if(b.is(a,"array")&&b.is(a[0],"array")){c=b.pathClone(a)}if(!c.length){String(a).replace(b.pathCommandRE,function(g,f,k){var i=[],h=f.toLowerCase();k.replace(b.pathValuesRE,function(m,l){l&&i.push(+l)});if(h=="m"&&i.length>2){c.push([f].concat(Ext.Array.splice(i,0,2)));h="l";f=(f=="m")?"l":"L"}while(i.length>=e[h]){c.push([f].concat(Ext.Array.splice(i,0,e[h])));if(!e[h]){break}}})}c.toString=b.path2string;return c},mapPath:function(l,g){if(!g){return l}var h,f,c,k,a,e,b;l=this.path2curve(l);for(c=0,k=l.length;c<k;c++){b=l[c];for(a=1,e=b.length;a<e-1;a+=2){h=g.x(b[a],b[a+1]);f=g.y(b[a],b[a+1]);b[a]=h;b[a+1]=f}}return l},pathClone:function(g){var c=[],a,f,b,e;if(!this.is(g,"array")||!this.is(g&&g[0],"array")){g=this.parsePathString(g)}for(b=0,e=g.length;b<e;b++){c[b]=[];for(a=0,f=g[b].length;a<f;a++){c[b][a]=g[b][a]}}c.toString=this.path2string;return c},pathToAbsolute:function(c){if(!this.is(c,"array")||!this.is(c&&c[0],"array")){c=this.parsePathString(c)}var k=[],m=0,l=0,p=0,n=0,g=0,h=c.length,b,e,f,a;if(h&&c[0][0]=="M"){m=+c[0][1];l=+c[0][2];p=m;n=l;g++;k[0]=["M",m,l]}for(;g<h;g++){b=k[g]=[];e=c[g];if(e[0]!=e[0].toUpperCase()){b[0]=e[0].toUpperCase();switch(b[0]){case"A":b[1]=e[1];b[2]=e[2];b[3]=e[3];b[4]=e[4];b[5]=e[5];b[6]=+(e[6]+m);b[7]=+(e[7]+l);break;case"V":b[1]=+e[1]+l;break;case"H":b[1]=+e[1]+m;break;case"M":p=+e[1]+m;n=+e[2]+l;default:f=1;a=e.length;for(;f<a;f++){b[f]=+e[f]+((f%2)?m:l)}}}else{f=0;a=e.length;for(;f<a;f++){k[g][f]=e[f]}}switch(b[0]){case"Z":m=p;l=n;break;case"H":m=b[1];break;case"V":l=b[1];break;case"M":e=k[g];a=e.length;p=e[a-2];n=e[a-1];default:e=k[g];a=e.length;m=e[a-2];l=e[a-1]}}k.toString=this.path2string;return k},pathToRelative:function(e){if(!this.is(e,"array")||!this.is(e&&e[0],"array")){e=this.parsePathString(e)}var n=[],q=0,p=0,u=0,t=0,c=0;if(e[0][0]=="M"){q=e[0][1];p=e[0][2];u=q;t=p;c++;n.push(["M",q,p])}for(var h=c,v=e.length;h<v;h++){var a=n[h]=[],s=e[h];if(s[0]!=s[0].toLowerCase()){a[0]=s[0].toLowerCase();switch(a[0]){case"a":a[1]=s[1];a[2]=s[2];a[3]=s[3];a[4]=s[4];a[5]=s[5];a[6]=+(s[6]-q).toFixed(3);a[7]=+(s[7]-p).toFixed(3);break;case"v":a[1]=+(s[1]-p).toFixed(3);break;case"m":u=s[1];t=s[2];default:for(var g=1,l=s.length;g<l;g++){a[g]=+(s[g]-((g%2)?q:p)).toFixed(3)}}}else{a=n[h]=[];if(s[0]=="m"){u=s[1]+q;t=s[2]+p}for(var f=0,b=s.length;f<b;f++){n[h][f]=s[f]}}var m=n[h].length;switch(n[h][0]){case"z":q=u;p=t;break;case"h":q+=+n[h][m-1];break;case"v":p+=+n[h][m-1];break;default:q+=+n[h][m-2];p+=+n[h][m-1]}}n.toString=this.path2string;return n},path2curve:function(l){var e=this,h=e.pathToAbsolute(l),c=h.length,k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b,a,g,f;for(b=0;b<c;b++){h[b]=e.command2curve(h[b],k);if(h[b].length>7){h[b].shift();f=h[b];while(f.length){Ext.Array.splice(h,b++,0,["C"].concat(Ext.Array.splice(f,0,6)))}Ext.Array.erase(h,b,1);c=h.length}a=h[b];g=a.length;k.x=a[g-2];k.y=a[g-1];k.bx=parseFloat(a[g-4])||k.x;k.by=parseFloat(a[g-3])||k.y}return h},interpolatePaths:function(t,m){var k=this,e=k.pathToAbsolute(t),n=k.pathToAbsolute(m),q={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b=function(p,u){if(p[u].length>7){p[u].shift();var v=p[u];while(v.length){Ext.Array.splice(p,u++,0,["C"].concat(Ext.Array.splice(v,0,6)))}Ext.Array.erase(p,u,1);r=Math.max(e.length,n.length||0)}},c=function(x,w,u,p,v){if(x&&w&&x[v][0]=="M"&&w[v][0]!="M"){Ext.Array.splice(w,v,0,["M",p.x,p.y]);u.bx=0;u.by=0;u.x=x[v][1];u.y=x[v][2];r=Math.max(e.length,n.length||0)}};for(var h=0,r=Math.max(e.length,n.length||0);h<r;h++){e[h]=k.command2curve(e[h],q);b(e,h);(n[h]=k.command2curve(n[h],a));b(n,h);c(e,n,q,a,h);c(n,e,a,q,h);var g=e[h],s=n[h],f=g.length,l=s.length;q.x=g[f-2];q.y=g[f-1];q.bx=parseFloat(g[f-4])||q.x;q.by=parseFloat(g[f-3])||q.y;a.bx=(parseFloat(s[l-4])||a.x);a.by=(parseFloat(s[l-3])||a.y);a.x=s[l-2];a.y=s[l-1]}return[e,n]},command2curve:function(c,b){var a=this;if(!c){return["C",b.x,b.y,b.x,b.y,b.x,b.y]}if(c[0]!="T"&&c[0]!="Q"){b.qx=b.qy=null}switch(c[0]){case"M":b.X=c[1];b.Y=c[2];break;case"A":c=["C"].concat(a.arc2curve.apply(a,[b.x,b.y].concat(c.slice(1))));break;case"S":c=["C",b.x+(b.x-(b.bx||b.x)),b.y+(b.y-(b.by||b.y))].concat(c.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x));b.qy=b.y+(b.y-(b.qy||b.y));c=["C"].concat(a.quadratic2curve(b.x,b.y,b.qx,b.qy,c[1],c[2]));break;case"Q":b.qx=c[1];b.qy=c[2];c=["C"].concat(a.quadratic2curve(b.x,b.y,c[1],c[2],c[3],c[4]));break;case"L":c=["C"].concat(b.x,b.y,c[1],c[2],c[1],c[2]);break;case"H":c=["C"].concat(b.x,b.y,c[1],b.y,c[1],b.y);break;case"V":c=["C"].concat(b.x,b.y,b.x,c[1],b.x,c[1]);break;case"Z":c=["C"].concat(b.x,b.y,b.X,b.Y,b.X,b.Y);break}return c},quadratic2curve:function(b,e,h,f,a,c){var g=1/3,i=2/3;return[g*b+i*h,g*e+i*f,g*a+i*h,g*c+i*f,a,c]},rotate:function(b,h,a){var e=Math.cos(a),c=Math.sin(a),g=b*e-h*c,f=b*c+h*e;return{x:g,y:f}},arc2curve:function(z,ak,L,J,D,q,l,w,aj,E){var B=this,f=Math.PI,C=B.radian,I=f*120/180,b=C*(+D||0),R=[],O=Math,Y=O.cos,a=O.sin,aa=O.sqrt,A=O.abs,r=O.asin,N,c,u,T,S,af,e,W,Z,G,F,p,n,v,m,ai,g,ah,U,X,V,ag,ae,ad,ab,Q,ac,P,H,K,s;if(!E){N=B.rotate(z,ak,-b);z=N.x;ak=N.y;N=B.rotate(w,aj,-b);w=N.x;aj=N.y;c=Y(C*D);u=a(C*D);T=(z-w)/2;S=(ak-aj)/2;af=(T*T)/(L*L)+(S*S)/(J*J);if(af>1){af=aa(af);L=af*L;J=af*J}e=L*L;W=J*J;Z=(q==l?-1:1)*aa(A((e*W-e*S*S-W*T*T)/(e*S*S+W*T*T)));G=Z*L*S/J+(z+w)/2;F=Z*-J*T/L+(ak+aj)/2;p=r(((ak-F)/J).toFixed(7));n=r(((aj-F)/J).toFixed(7));p=z<G?f-p:p;n=w<G?f-n:n;if(p<0){p=f*2+p}if(n<0){n=f*2+n}if(l&&p>n){p=p-f*2}if(!l&&n>p){n=n-f*2}}else{p=E[0];n=E[1];G=E[2];F=E[3]}v=n-p;if(A(v)>I){H=n;K=w;s=aj;n=p+I*(l&&n>p?1:-1);w=G+L*Y(n);aj=F+J*a(n);R=B.arc2curve(w,aj,L,J,D,0,l,K,s,[n,H,G,F])}v=n-p;m=Y(p);ai=a(p);g=Y(n);ah=a(n);U=O.tan(v/4);X=4/3*L*U;V=4/3*J*U;ag=[z,ak];ae=[z+X*ai,ak-V*m];ad=[w+X*ah,aj-V*g];ab=[w,aj];ae[0]=2*ag[0]-ae[0];ae[1]=2*ag[1]-ae[1];if(E){return[ae,ad,ab].concat(R)}else{R=[ae,ad,ab].concat(R).join().split(",");Q=[];P=R.length;for(ac=0;ac<P;ac++){Q[ac]=ac%2?B.rotate(R[ac-1],R[ac],b).y:B.rotate(R[ac],R[ac+1],b).x}return Q}},rotateAndTranslatePath:function(k){var c=k.rotation.degrees,e=k.rotation.x,b=k.rotation.y,q=k.translation.x,l=k.translation.y,n,g,a,m,f,h=[];if(!c&&!q&&!l){return this.pathToAbsolute(k.attr.path)}q=q||0;l=l||0;n=this.pathToAbsolute(k.attr.path);for(g=n.length;g--;){a=h[g]=n[g].slice();if(a[0]=="A"){m=this.rotatePoint(a[6],a[7],c,e,b);a[6]=m.x+q;a[7]=m.y+l}else{f=1;while(a[f+1]!=null){m=this.rotatePoint(a[f],a[f+1],c,e,b);a[f]=m.x+q;a[f+1]=m.y+l;f+=2}}}return h},rotatePoint:function(b,h,f,a,g){if(!f){return{x:b,y:h}}a=a||0;g=g||0;b=b-a;h=h-g;f=f*this.radian;var e=Math.cos(f),c=Math.sin(f);return{x:b*e-h*c+a,y:b*c+h*e+g}},pathDimensions:function(n){if(!n||!(n+"")){return{x:0,y:0,width:0,height:0}}n=this.path2curve(n);var l=0,k=0,e=[],b=[],f=0,h=n.length,c,a,m,g;for(;f<h;f++){c=n[f];if(c[0]=="M"){l=c[1];k=c[2];e.push(l);b.push(k)}else{g=this.curveDim(l,k,c[1],c[2],c[3],c[4],c[5],c[6]);e=e.concat(g.min.x,g.max.x);b=b.concat(g.min.y,g.max.y);l=c[5];k=c[6]}}a=Math.min.apply(0,e);m=Math.min.apply(0,b);return{x:a,y:m,path:n,width:Math.max.apply(0,e)-a,height:Math.max.apply(0,b)-m}},intersectInside:function(b,c,a){return(a[0]-c[0])*(b[1]-c[1])>(a[1]-c[1])*(b[0]-c[0])},intersectIntersection:function(q,n,g,f){var c=[],b=g[0]-f[0],a=g[1]-f[1],l=q[0]-n[0],i=q[1]-n[1],m=g[0]*f[1]-g[1]*f[0],k=q[0]*n[1]-q[1]*n[0],h=1/(b*i-a*l);c[0]=(m*l-k*b)*h;c[1]=(m*i-k*a)*h;return c},intersect:function(p,c){var n=this,k=0,m=c.length,h=c[m-1],r=p,g,t,l,q,a,b,f;for(;k<m;++k){g=c[k];b=r;r=[];t=b[b.length-1];f=0;a=b.length;for(;f<a;f++){l=b[f];if(n.intersectInside(l,h,g)){if(!n.intersectInside(t,h,g)){r.push(n.intersectIntersection(t,l,h,g))}r.push(l)}else{if(n.intersectInside(t,h,g)){r.push(n.intersectIntersection(t,l,h,g))}}t=l}h=g}return r},curveDim:function(g,e,i,h,v,u,r,n){var t=(v-2*i+g)-(r-2*v+i),q=2*(i-g)-2*(v-i),m=g-i,l=(-q+Math.sqrt(q*q-4*t*m))/2/t,k=(-q-Math.sqrt(q*q-4*t*m))/2/t,p=[e,n],s=[g,r],f;if(Math.abs(l)>1000000000000){l=0.5}if(Math.abs(k)>1000000000000){k=0.5}if(l>0&&l<1){f=this.findDotAtSegment(g,e,i,h,v,u,r,n,l);s.push(f.x);p.push(f.y)}if(k>0&&k<1){f=this.findDotAtSegment(g,e,i,h,v,u,r,n,k);s.push(f.x);p.push(f.y)}t=(u-2*h+e)-(n-2*u+h);q=2*(h-e)-2*(u-h);m=e-h;l=(-q+Math.sqrt(q*q-4*t*m))/2/t;k=(-q-Math.sqrt(q*q-4*t*m))/2/t;if(Math.abs(l)>1000000000000){l=0.5}if(Math.abs(k)>1000000000000){k=0.5}if(l>0&&l<1){f=this.findDotAtSegment(g,e,i,h,v,u,r,n,l);s.push(f.x);p.push(f.y)}if(k>0&&k<1){f=this.findDotAtSegment(g,e,i,h,v,u,r,n,k);s.push(f.x);p.push(f.y)}return{min:{x:Math.min.apply(0,s),y:Math.min.apply(0,p)},max:{x:Math.max.apply(0,s),y:Math.max.apply(0,p)}}},getAnchors:function(f,e,l,k,x,w,s){s=s||4;var i=Math,r=i.PI,t=r/2,n=i.abs,a=i.sin,b=i.cos,g=i.atan,v,u,h,m,q,p,z,y,c;v=(l-f)/s;u=(x-l)/s;if((k>=e&&k>=w)||(k<=e&&k<=w)){h=m=t}else{h=g((l-f)/n(k-e));if(e<k){h=r-h}m=g((x-l)/n(k-w));if(w<k){m=r-m}}c=t-((h+m)%(r*2))/2;if(c>t){c-=r}h+=c;m+=c;q=l-v*a(h);p=k+v*b(h);z=l+u*a(m);y=k+u*b(m);if((k>e&&p<e)||(k<e&&p>e)){q+=n(e-p)*(q-l)/(p-k);p=e}if((k>w&&y<w)||(k<w&&y>w)){z-=n(w-y)*(z-l)/(y-k);y=w}return{x1:q,y1:p,x2:z,y2:y}},smooth:function(a,s){var r=this.path2curve(a),f=[r[0]],k=r[0][1],h=r[0][2],t,v,w=1,l=r.length,g=1,n=k,m=h,c=0,b=0;for(;w<l;w++){var B=r[w],A=B.length,z=r[w-1],p=z.length,u=r[w+1],q=u&&u.length;if(B[0]=="M"){n=B[1];m=B[2];t=w+1;while(r[t][0]!="C"){t++}c=r[t][5];b=r[t][6];f.push(["M",n,m]);g=f.length;k=n;h=m;continue}if(B[A-2]==n&&B[A-1]==m&&(!u||u[0]=="M")){var e=f[g].length;v=this.getAnchors(z[p-2],z[p-1],n,m,f[g][e-2],f[g][e-1],s);f[g][1]=v.x2;f[g][2]=v.y2}else{if(!u||u[0]=="M"){v={x1:B[A-2],y1:B[A-1]}}else{v=this.getAnchors(z[p-2],z[p-1],B[A-2],B[A-1],u[q-2],u[q-1],s)}}f.push(["C",k,h,v.x1,v.y1,B[A-2],B[A-1]]);k=v.x2;h=v.y2}return f},findDotAtSegment:function(b,a,e,c,k,i,h,g,l){var f=1-l;return{x:Math.pow(f,3)*b+Math.pow(f,2)*3*l*e+f*3*l*l*k+Math.pow(l,3)*h,y:Math.pow(f,3)*a+Math.pow(f,2)*3*l*c+f*3*l*l*i+Math.pow(l,3)*g}},snapEnds:function(s,t,e){if(Ext.isDate(s)){return this.snapEndsByDate(s,t,e)}var c=(t-s)/e,a=Math.floor(Math.log(c)/Math.LN10)+1,f=Math.pow(10,a),u,q=Math.round((c%f)*Math.pow(10,2-a)),b=[[0,15],[20,4],[30,2],[40,4],[50,9],[60,4],[70,2],[80,4],[100,15]],h=0,r,l,k,g,n=1000000000,p=b.length;u=s=Math.floor(s/f)*f;for(k=0;k<p;k++){r=b[k][0];l=(r-q)<0?1000000:(r-q)/b[k][1];if(l<n){g=r;n=l}}c=Math.floor(c*Math.pow(10,-a))*Math.pow(10,a)+g*Math.pow(10,a-2);while(u<t){u+=c;h++}t=+u.toFixed(10);return{from:s,to:t,power:a,step:c,steps:h}},snapEndsByDate:function(i,h,b,a){var e=false,g=[[Ext.Date.MILLI,[1,2,3,5,10,20,30,50,100,200,300,500]],[Ext.Date.SECOND,[1,2,3,5,10,15,30]],[Ext.Date.MINUTE,[1,2,3,5,10,20,30]],[Ext.Date.HOUR,[1,2,3,4,6,12]],[Ext.Date.DAY,[1,2,3,7,14]],[Ext.Date.MONTH,[1,2,3,4,6]]],c,f;Ext.each(g,function(l,k){for(c=0;c<l[1].length;c++){if(h<Ext.Date.add(i,l[0],l[1][c]*b)){e=[l[0],l[1][c]];return false}}});if(!e){f=this.snapEnds(i.getFullYear(),h.getFullYear()+1,b,a);e=[Date.YEAR,Math.round(f.step)]}return this.snapEndsByDateAndStep(i,h,e,a)},snapEndsByDateAndStep:function(i,h,f,a){var e=[i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()],b=0,g,c;if(a){g=i}else{switch(f[0]){case Ext.Date.MILLI:g=new Date(e[0],e[1],e[2],e[3],e[4],e[5],Math.floor(e[6]/f[1])*f[1]);break;case Ext.Date.SECOND:g=new Date(e[0],e[1],e[2],e[3],e[4],Math.floor(e[5]/f[1])*f[1],0);break;case Ext.Date.MINUTE:g=new Date(e[0],e[1],e[2],e[3],Math.floor(e[4]/f[1])*f[1],0,0);break;case Ext.Date.HOUR:g=new Date(e[0],e[1],e[2],Math.floor(e[3]/f[1])*f[1],0,0,0);break;case Ext.Date.DAY:g=new Date(e[0],e[1],Math.floor(e[2]-1/f[1])*f[1]+1,0,0,0,0);break;case Ext.Date.MONTH:g=new Date(e[0],Math.floor(e[1]/f[1])*f[1],1,0,0,0,0);break;default:g=new Date(Math.floor(e[0]/f[1])*f[1],0,1,0,0,0,0);break}}c=g;while(c<h){c=Ext.Date.add(c,f[0],f[1]);b++}if(a){c=h}return{from:+g,to:+c,step:(c-g)/b,steps:b}},sorter:function(e,c){return e.offset-c.offset},rad:function(a){return a%360*Math.PI/180},degrees:function(a){return a*180/Math.PI%360},withinBox:function(a,c,b){b=b||{};return(a>=b.x&&a<=(b.x+b.width)&&c>=b.y&&c<=(b.y+b.height))},parseGradient:function(l){var f=this,g=l.type||"linear",c=l.angle||0,i=f.radian,m=l.stops,a=[],k,b,h,e;if(g=="linear"){b=[0,0,Math.cos(c*i),Math.sin(c*i)];h=1/(Math.max(Math.abs(b[2]),Math.abs(b[3]))||1);b[2]*=h;b[3]*=h;if(b[2]<0){b[0]=-b[2];b[2]=0}if(b[3]<0){b[1]=-b[3];b[3]=0}}for(k in m){if(m.hasOwnProperty(k)&&f.stopsRE.test(k)){e={offset:parseInt(k,10),color:Ext.draw.Color.toHex(m[k].color)||"#ffffff",opacity:m[k].opacity||1};a.push(e)}}Ext.Array.sort(a,f.sorter);if(g=="linear"){return{id:l.id,type:g,vector:b,stops:a}}else{return{id:l.id,type:g,centerX:l.centerX,centerY:l.centerY,focalX:l.focalX,focalY:l.focalY,radius:l.radius,vector:b,stops:a}}}});Ext.define("Ext.fx.PropertyHandler",{requires:["Ext.draw.Draw"],statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(k,c,a,g,i){a=(typeof a=="number")?a:1;var h=this.unitRE,e=h.exec(k),b,f;if(e){k=e[1];f=e[2];if(!this.scrollRE.test(i)&&!f&&this.pixelDefaultsRE.test(i)){f="px"}}k=+k||0;e=h.exec(c);if(e){c=e[1];f=e[2]||f}c=+c||0;b=(g!=null)?g:k;return{from:k,delta:(c-b)*a,units:f}},get:function(p,b,a,n,k){var m=p.length,e=[],f,h,l,c,g;for(f=0;f<m;f++){if(n){h=n[f][1].from}if(Ext.isArray(p[f][1])&&Ext.isArray(b)){l=[];c=0;g=p[f][1].length;for(;c<g;c++){l.push(this.computeDelta(p[f][1][c],b[c],a,h,k))}e.push([p[f][0],l])}else{e.push([p[f][0],this.computeDelta(p[f][1],b,a,h,k)])}}return e},set:function(l,g){var h=l.length,c=[],e,a,k,f,b;for(e=0;e<h;e++){a=l[e][1];if(Ext.isArray(a)){k=[];b=0;f=a.length;for(;b<f;b++){k.push(a[b].from+(a[b].delta*g)+(a[b].units||0))}c.push([l[e][0],k])}else{c.push([l[e][0],a.from+(a.delta*g)+(a.units||0)])}}return c}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(a,e){e=(typeof e=="number")?e:1;var f,c=false,b;Ext.each([this.hexRE,this.rgbRE,this.hex3RE],function(h,g){f=(g%2==0)?16:10;b=h.exec(a);if(b&&b.length==4){if(g==2){b[1]+=b[1];b[2]+=b[2];b[3]+=b[3]}c={red:parseInt(b[1],f),green:parseInt(b[2],f),blue:parseInt(b[3],f)};return false}});return c||a},computeDelta:function(h,a,f,c){h=this.parseColor(h);a=this.parseColor(a,f);var g=c?c:h,b=typeof g,e=typeof a;if(b=="string"||b=="undefined"||e=="string"||e=="undefined"){return a||g}return{from:h,delta:{red:Math.round((a.red-g.red)*f),green:Math.round((a.green-g.green)*f),blue:Math.round((a.blue-g.blue)*f)}}},get:function(k,a,g,e){var h=k.length,c=[],f,b;for(f=0;f<h;f++){if(e){b=e[f][1].from}c.push([k[f][0],this.computeDelta(k[f][1],a,g,b)])}return c},set:function(l,f){var g=l.length,c=[],e,b,a,h,k;for(e=0;e<g;e++){b=l[e][1];if(b){h=b.from;k=b.delta;b=(typeof b=="object"&&"red" in b)?"rgb("+b.red+", "+b.green+", "+b.blue+")":b;b=(typeof b=="object"&&b.length)?b[0]:b;if(typeof b=="undefined"){return[]}a=typeof b=="string"?b:"rgb("+[(h.red+Math.round(k.red*f))%256,(h.green+Math.round(k.green*f))%256,(h.blue+Math.round(k.blue*f))%256].join(",")+")";c.push([l[e][0],a])}}return c}},object:{interpolate:function(e,b){b=(typeof b=="number")?b:1;var a={},c;for(c in e){a[c]=parseInt(e[c],10)*b}return a},computeDelta:function(h,a,c,b){h=this.interpolate(h);a=this.interpolate(a,c);var g=b?b:h,f={},e;for(e in a){f[e]=a[e]-g[e]}return{from:h,delta:f}},get:function(k,a,g,e){var h=k.length,c=[],f,b;for(f=0;f<h;f++){if(e){b=e[f][1].from}c.push([k[f][0],this.computeDelta(k[f][1],a,g,b)])}return c},set:function(m,g){var h=m.length,c=[],f={},e,k,l,b,a;for(e=0;e<h;e++){b=m[e][1];k=b.from;l=b.delta;for(a in k){f[a]=Math.round(k[a]+l[a]*g)}c.push([m[e][0],f])}return c}},path:{computeDelta:function(f,a,c,b){c=(typeof c=="number")?c:1;var e;f=+f||0;a=+a||0;e=(b!=null)?b:f;return{from:f,delta:(a-e)*c}},forcePath:function(a){if(!Ext.isArray(a)&&!Ext.isArray(a[0])){a=Ext.draw.Draw.parsePathString(a)}return a},get:function(b,l,a,r){var c=this.forcePath(l),n=[],t=b.length,e,h,p,g,q,m,f,u,s;for(p=0;p<t;p++){s=this.forcePath(b[p][1]);g=Ext.draw.Draw.interpolatePaths(s,c);s=g[0];c=g[1];e=s.length;u=[];for(m=0;m<e;m++){g=[s[m][0]];h=s[m].length;for(f=1;f<h;f++){q=r&&r[0][1][m][f].from;g.push(this.computeDelta(s[m][f],c[m][f],a,q))}u.push(g)}n.push([b[p][0],u])}return n},set:function(q,n){var p=q.length,f=[],h,g,e,l,m,c,a,b;for(h=0;h<p;h++){c=q[h][1];l=[];a=c.length;for(g=0;g<a;g++){m=[c[g][0]];b=c[g].length;for(e=1;e<b;e++){m.push(c[g][e].from+c[g][e].delta*n)}l.push(m.join(","))}f.push([q[h][0],l.join(",")])}return f}}}},function(){Ext.each(["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],function(a){this[a]=this.color},this)});Ext.define("Ext.fx.Anim",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.fx.Manager","Ext.fx.Animator","Ext.fx.Easing","Ext.fx.CubicBezier","Ext.fx.PropertyHandler"],isAnimation:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:false,running:false,paused:false,iterations:1,alternate:false,currentIteration:0,startTime:0,constructor:function(a){var b=this,c;a=a||{};if(a.keyframes){return Ext.create("Ext.fx.Animator",a)}a=Ext.apply(b,a);if(b.from===undefined){b.from={}}b.propHandlers={};b.config=a;b.target=Ext.fx.Manager.createTarget(b.target);b.easingFn=Ext.fx.Easing[b.easing];b.target.dynamic=b.dynamic;if(!b.easingFn){b.easingFn=String(b.easing).match(b.bezierRE);if(b.easingFn&&b.easingFn.length==5){c=b.easingFn;b.easingFn=Ext.fx.CubicBezier.cubicBezier(+c[1],+c[2],+c[3],+c[4])}}b.id=Ext.id(null,"ext-anim-");Ext.fx.Manager.addAnim(b);b.addEvents("beforeanimate","afteranimate","lastframe");b.mixins.observable.constructor.call(b,a);if(a.callback){b.on("afteranimate",a.callback,a.scope)}return b},setAttr:function(a,b){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,a,b)},initAttrs:function(){var f=this,h=f.from,i=f.to,g=f.initialFrom||{},c={},a,b,k,e;for(e in i){if(i.hasOwnProperty(e)){a=f.target.getAttr(e,h[e]);b=i[e];if(!Ext.fx.PropertyHandler[e]){if(Ext.isObject(b)){k=f.propHandlers[e]=Ext.fx.PropertyHandler.object}else{k=f.propHandlers[e]=Ext.fx.PropertyHandler.defaultHandler}}else{k=f.propHandlers[e]=Ext.fx.PropertyHandler[e]}c[e]=k.get(a,b,f.damper,g[e],e)}}f.currentAttrs=c},start:function(e){var f=this,c=f.delay,b=f.delayStart,a;if(c){if(!b){f.delayStart=e;return}else{a=e-b;if(a<c){return}else{e=new Date(b.getTime()+c)}}}if(f.fireEvent("beforeanimate",f)!==false){f.startTime=e;if(!f.paused&&!f.currentAttrs){f.initAttrs()}f.running=true}},runAnim:function(m){var i=this,l=i.currentAttrs,e=i.duration,c=i.easingFn,b=i.propHandlers,g={},h,k,f,a;if(m>=e){m=e;a=true}if(i.reverse){m=e-m}for(f in l){if(l.hasOwnProperty(f)){k=l[f];h=a?1:c(m/e);g[f]=b[f].set(k,h)}}return g},lastFrame:function(){var c=this,a=c.iterations,b=c.currentIteration;b++;if(b<a){if(c.alternate){c.reverse=!c.reverse}c.startTime=new Date();c.currentIteration=b;c.paused=false}else{c.currentIteration=0;c.end();c.fireEvent("lastframe",c,c.startTime)}},end:function(){var a=this;a.startTime=0;a.paused=false;a.running=false;Ext.fx.Manager.removeAnim(a);a.fireEvent("afteranimate",a,a.startTime)}});Ext.enableFx=true;Ext.define("Ext.toolbar.Item",{extend:"Ext.Component",alias:"widget.tbitem",alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.define("Ext.toolbar.Separator",{extend:"Ext.toolbar.Item",alias:"widget.tbseparator",alternateClassName:"Ext.Toolbar.Separator",baseCls:Ext.baseCSSPrefix+"toolbar-separator",focusable:false});Ext.define("Ext.layout.container.boxOverflow.Menu",{extend:"Ext.layout.container.boxOverflow.None",requires:["Ext.toolbar.Separator","Ext.button.Button"],alternateClassName:"Ext.layout.boxOverflow.Menu",noItemsMenuText:'<div class="'+Ext.baseCSSPrefix+'toolbar-no-items">(None)</div>',constructor:function(b){var a=this;a.callParent(arguments);b.beforeLayout=Ext.Function.createInterceptor(b.beforeLayout,this.clearOverflow,this);a.afterCtCls=a.afterCtCls||Ext.baseCSSPrefix+"box-menu-"+b.parallelAfter;a.menuItems=[]},onRemove:function(a){Ext.Array.remove(this.menuItems,a)},handleOverflow:function(a,h){var g=this,f=g.layout,c="get"+f.parallelPrefixCap,b={},e=[null,null];g.callParent(arguments);this.createMenu(a,h);b[f.perpendicularPrefix]=h[f.perpendicularPrefix];b[f.parallelPrefix]=h[f.parallelPrefix]-g.afterCt[c]();e[f.perpendicularSizeIndex]=(a.meta.maxSize-g.menuTrigger["get"+f.perpendicularPrefixCap]())/2;g.menuTrigger.setPosition.apply(g.menuTrigger,e);return{targetSize:b}},clearOverflow:function(a,k){var h=this,g=k?k.width+(h.afterCt?h.afterCt.getWidth():0):0,b=h.menuItems,c=0,f=b.length,e;h.hideTrigger();for(;c<f;c++){b[c].show()}b.length=0;return k?{targetSize:{height:k.height,width:g}}:null},showTrigger:function(){this.menuTrigger.show()},hideTrigger:function(){if(this.menuTrigger!==undefined){this.menuTrigger.hide()}},beforeMenuShow:function(k){var h=this,b=h.menuItems,e=0,a=b.length,g,f;var c=function(l,i){return l.isXType("buttongroup")&&!(i instanceof Ext.toolbar.Separator)};h.clearMenu();k.removeAll();for(;e<a;e++){g=b[e];if(!e&&(g instanceof Ext.toolbar.Separator)){continue}if(f&&(c(g,f)||c(f,g))){k.add("-")}h.addComponentToMenu(k,g);f=g}if(k.items.length<1){k.add(h.noItemsMenuText)}},createMenuConfig:function(c,a){var b=Ext.apply({},c.initialConfig),e=c.toggleGroup;Ext.copyTo(b,c,["iconCls","icon","itemId","disabled","handler","scope","menu"]);Ext.apply(b,{text:c.overflowText||c.text,hideOnClick:a,destroyMenu:false});if(e||c.enableToggle){Ext.apply(b,{group:e,checked:c.pressed,listeners:{checkchange:function(g,f){c.toggle(f)}}})}delete b.ownerCt;delete b.xtype;delete b.id;return b},addComponentToMenu:function(c,a){var b=this;if(a instanceof Ext.toolbar.Separator){c.add("-")}else{if(a.isComponent){if(a.isXType("splitbutton")){c.add(b.createMenuConfig(a,true))}else{if(a.isXType("button")){c.add(b.createMenuConfig(a,!a.menu))}else{if(a.isXType("buttongroup")){a.items.each(function(e){b.addComponentToMenu(c,e)})}else{c.add(Ext.create(Ext.getClassName(a),b.createMenuConfig(a)))}}}}}},clearMenu:function(){var a=this.moreMenu;if(a&&a.items){a.items.each(function(b){if(b.menu){delete b.menu}})}},createMenu:function(a,c){var m=this,k=m.layout,n=k.parallelBefore,f=k.parallelPrefix,b=c[f],h=a.boxes,e=0,l=h.length,g;if(!m.menuTrigger){m.createInnerElements();m.menu=Ext.create("Ext.menu.Menu",{listeners:{scope:m,beforeshow:m.beforeMenuShow}});m.menuTrigger=Ext.create("Ext.button.Button",{ownerCt:m.layout.owner,iconCls:m.layout.owner.menuTriggerCls,ui:k.owner instanceof Ext.toolbar.Toolbar?"default-toolbar":"default",menu:m.menu,getSplitCls:function(){return""},renderTo:m.afterCt})}m.showTrigger();b-=m.afterCt.getWidth();m.menuItems.length=0;for(;e<l;e++){g=h[e];if(g[n]+g[f]>b){m.menuItems.push(g.component);g.component.hide()}}},createInnerElements:function(){var a=this,b=a.layout.getRenderTarget();if(!this.afterCt){b.addCls(Ext.baseCSSPrefix+a.layout.direction+"-box-overflow-body");this.afterCt=b.insertSibling({cls:Ext.layout.container.Box.prototype.innerCls+" "+this.afterCtCls},"before")}},destroy:function(){Ext.destroy(this.menu,this.menuTrigger)}});Ext.define("Ext.layout.container.Box",{alias:["layout.box"],extend:"Ext.layout.container.Container",alternateClassName:"Ext.layout.BoxLayout",requires:["Ext.layout.container.boxOverflow.None","Ext.layout.container.boxOverflow.Menu","Ext.layout.container.boxOverflow.Scroller","Ext.util.Format","Ext.dd.DragDropManager"],defaultMargins:{top:0,right:0,bottom:0,left:0},padding:"0",pack:"start",type:"box",scrollOffset:0,itemCls:Ext.baseCSSPrefix+"box-item",targetCls:Ext.baseCSSPrefix+"box-layout-ct",innerCls:Ext.baseCSSPrefix+"box-inner",bindToOwnerCtContainer:true,availableSpaceOffset:0,reserveOffset:true,shrinkToFit:true,clearInnerCtOnLayout:false,flexSortFn:function(e,c){var f="max"+this.parallelPrefixCap,g=Infinity;e=e.component[f]||g;c=c.component[f]||g;if(!isFinite(e)&&!isFinite(c)){return false}return e-c},minSizeSortFn:function(e,c){return c.available-e.available},constructor:function(a){var b=this;b.callParent(arguments);b.flexSortFn=Ext.Function.bind(b.flexSortFn,b);b.initOverflowHandler()},getChildBox:function(b){b=b.el||this.owner.getComponent(b).el;var a=b.getBox(false,true);return{left:a.left,top:a.top,width:a.width,height:a.height}},calculateChildBox:function(f){var e=this,b=e.calculateChildBoxes(e.getVisibleItems(),e.getLayoutTargetSize()).boxes,c=b.length,a=0;f=e.owner.getComponent(f);for(;a<c;a++){if(b[a].component===f){return b[a]}}},calculateChildBoxes:function(s,b){var A=this,N=Math,n=N.max,r=Infinity,y,v=A.parallelPrefix,q=A.parallelPrefixCap,Q=A.perpendicularPrefix,w=A.perpendicularPrefixCap,F="min"+q,I="min"+w,ao="max"+w,c=b[v]-A.scrollOffset,ad=b[Q],ai=A.padding,u=ai[A.parallelBefore],x=u+ai[A.parallelAfter],T=ai[A.perpendicularLeftTop],O=T+ai[A.perpendicularRightBottom],al=n(0,ad-O),an=A.innerCt.getBorderWidth(A.perpendicularLT+A.perpendicularRB),af=A.pack=="start",ar=A.pack=="center",H=A.pack=="end",ah=Ext.Number.constrain,R=s.length,e=0,am=0,ap=0,z=0,J=0,U=[],P=[],ak,aj,k,ae,D,E,aq,ac,aa,ab,p,f,C,L,B,S,l,V,ag,g,G,X,a,t,m,K,W,Z,h,Y;for(aj=0;aj<R;aj++){k=s[aj];D=k[Q];if(!k.flex||!(A.align=="stretch"||A.align=="stretchmax")){if(k.componentLayout.initialized!==true){A.layoutItem(k)}}E=k.margins;K=E[A.parallelBefore]+E[A.parallelAfter];aa={component:k,margins:E};if(k.flex){am+=k.flex;ae=y}else{if(!(k[v]&&D)){aq=k.getSize()}ae=k[v]||aq[v];D=D||aq[Q]}e+=K+(ae||0);ap+=K+(k.flex?k[F]||0:ae);z+=K+(k[F]||ae||0);if(typeof D!="number"){D=k["get"+w]()}J=n(J,n(D,k[I]||0)+E[A.perpendicularLeftTop]+E[A.perpendicularRightBottom]);aa[v]=ae||y;aa.dirtySize=k.componentLayout.lastComponentSize?(aa[v]!==k.componentLayout.lastComponentSize[v]):false;aa[Q]=D||y;U.push(aa)}if(!A.autoSize){ab=ap-c;p=z>c}f=n(0,c-e-x-(A.reserveOffset?A.availableSpaceOffset:0));if(p){for(aj=0;aj<R;aj++){l=U[aj];C=s[aj][F]||s[aj][v]||l[v];l.dirtySize=l.dirtySize||l[v]!=C;l[v]=C}}else{if(ab>0){for(aj=0;aj<R;aj++){L=s[aj];C=L[F]||0;if(L.flex){l=U[aj];l.dirtySize=l.dirtySize||l[v]!=C;l[v]=C}else{if(A.shrinkToFit){P.push({minSize:C,available:U[aj][v]-C,index:aj})}}}Ext.Array.sort(P,A.minSizeSortFn);for(aj=0,B=P.length;aj<B;aj++){S=P[aj].index;if(S==y){continue}L=s[S];C=P[aj].minSize;l=U[S];V=l[v];ag=n(C,V-N.ceil(ab/(B-aj)));g=V-ag;l.dirtySize=l.dirtySize||l[v]!=ag;l[v]=ag;ab-=g}p=(ab>0)}else{a=f;t=am;X=[];for(aj=0;aj<R;aj++){k=s[aj];if(af&&k.flex){X.push(U[Ext.Array.indexOf(s,k)])}}Ext.Array.sort(X,A.flexSortFn);for(aj=0;aj<X.length;aj++){W=X[aj];k=W.component;E=W.margins;m=N.ceil((k.flex/t)*a);m=Math.max(k["min"+q]||0,N.min(k["max"+q]||r,m));a-=m;t-=k.flex;W.dirtySize=W.dirtySize||W[v]!=m;W[v]=m}}}if(ar){u+=f/2}else{if(H){u+=f}}if(A.owner.dock&&(Ext.isIE6||Ext.isIE7||Ext.isIEQuirks)&&!A.owner.width&&A.direction=="vertical"){ak=J+A.owner.el.getPadding("lr")+A.owner.el.getBorderWidth("lr");if(A.owner.frameSize){ak+=A.owner.frameSize.left+A.owner.frameSize.right}al=Math.min(al,b.width=J+ai.left+ai.right)}for(aj=0;aj<R;aj++){k=s[aj];W=U[aj];E=W.margins;h=E[A.perpendicularLeftTop]+E[A.perpendicularRightBottom];u+=E[A.parallelBefore];W[A.parallelBefore]=u;W[A.perpendicularLeftTop]=T+E[A.perpendicularLeftTop];if(A.align=="stretch"){Y=ah(al-h,k[I]||0,k[ao]||r);W.dirtySize=W.dirtySize||W[Q]!=Y;W[Q]=Y}else{if(A.align=="stretchmax"){Y=ah(J-h,k[I]||0,k[ao]||r);W.dirtySize=W.dirtySize||W[Q]!=Y;W[Q]=Y}else{if(A.align==A.alignCenteringString){G=n(al,J)-an-W[Q];if(G>0){W[A.perpendicularLeftTop]=T+Math.round(G/2)}}}}u+=(W[v]||0)+E[A.parallelAfter]}return{boxes:U,meta:{calculatedWidth:ak,maxSize:J,nonFlexSize:e,desiredSize:ap,minimumSize:z,shortfall:ab,tooNarrow:p}}},onRemove:function(a){this.callParent(arguments);if(this.overflowHandler){this.overflowHandler.onRemove(a)}},initOverflowHandler:function(){var c=this.overflowHandler;if(typeof c=="string"){c={type:c}}var b="None";if(c&&c.type!==undefined){b=c.type}var a=Ext.layout.container.boxOverflow[b];if(a[this.type]){a=a[this.type]}this.overflowHandler=Ext.create("Ext.layout.container.boxOverflow."+b,this,c)},onLayout:function(){this.callParent();if(this.clearInnerCtOnLayout===true&&this.adjustmentPass!==true){this.innerCt.setSize(null,null)}var h=this,c=h.getLayoutTargetSize(),g=h.getVisibleItems(),b=h.calculateChildBoxes(g,c),f=b.boxes,i=b.meta,k,a,e;if(h.autoSize&&b.meta.desiredSize){c[h.parallelPrefix]=b.meta.desiredSize}if(i.shortfall>0){k=h.overflowHandler;a=i.tooNarrow?"handleOverflow":"clearOverflow";e=k[a](b,c);if(e){if(e.targetSize){c=e.targetSize}if(e.recalculate){g=h.getVisibleItems();b=h.calculateChildBoxes(g,c);f=b.boxes}}}else{h.overflowHandler.clearOverflow()}h.layoutTargetLastSize=c;h.childBoxCache=b;h.updateInnerCtSize(c,b);h.updateChildBoxes(f);h.handleTargetOverflow(c)},animCallback:Ext.emptyFn,updateChildBoxes:function(h){var n=this,f=0,c=h.length,r=[],q=Ext.dd.DDM.getDDById(n.innerCt.id),a,g,e,k,l,b;for(;f<c;f++){g=h[f];k=g.component;if(q&&(q.getDragEl()===k.el.dom)){continue}e=false;a=n.getChildBox(k);if(n.animate){b=n.animate.callback||n.animate;l={layoutAnimation:true,target:k,from:{},to:{},listeners:{}};if(!isNaN(g.width)&&(g.width!=a.width)){e=true;l.to.width=g.width}if(!isNaN(g.height)&&(g.height!=a.height)){e=true;l.to.height=g.height}if(!isNaN(g.left)&&(g.left!=a.left)){e=true;l.to.left=g.left}if(!isNaN(g.top)&&(g.top!=a.top)){e=true;l.to.top=g.top}if(e){r.push(l)}}else{if(g.dirtySize){if(g.width!==a.width||g.height!==a.height){n.setItemSize(k,g.width,g.height)}}if(isNaN(g.left)||isNaN(g.top)){continue}k.setPosition(g.left,g.top)}}c=r.length;if(c){var p=function(i){c-=1;if(!c){n.animCallback(i);n.layoutBusy=false;if(Ext.isFunction(b)){b()}}};var m=function(){n.layoutBusy=true};for(f=0,c=r.length;f<c;f++){l=r[f];l.listeners.afteranimate=p;if(!f){l.listeners.beforeanimate=m}if(n.animate.duration){l.duration=n.animate.duration}k=l.target;delete l.target;k.stopAnimation();k.animate(l)}}},updateInnerCtSize:function(c,a){var h=this,f=Math.max,g=h.align,i=h.padding,b=c.width,l=c.height,m=a.meta,e,k;if(h.direction=="horizontal"){e=b;k=m.maxSize+i.top+i.bottom+h.innerCt.getBorderWidth("tb");if(g=="stretch"){k=l}else{if(g=="middle"){k=f(l,k)}}}else{k=l;e=m.maxSize+i.left+i.right+h.innerCt.getBorderWidth("lr");if(g=="stretch"){e=b}else{if(g=="center"){e=f(b,e)}}}h.getRenderTarget().setSize(e||undefined,k||undefined);if(m.calculatedWidth&&h.owner.el.getWidth()>m.calculatedWidth){h.owner.el.setWidth(m.calculatedWidth)}if(h.innerCt.dom.scrollTop){h.innerCt.dom.scrollTop=0}},handleTargetOverflow:function(c){var b=this.getTarget(),e=b.getStyle("overflow"),a;if(e&&e!="hidden"&&!this.adjustmentPass){a=this.getLayoutTargetSize();if(a.width!=c.width||a.height!=c.height){this.adjustmentPass=true;this.onLayout();return true}}delete this.adjustmentPass},isValidParent:function(c,e,a){var b=c.el?c.el.dom:Ext.getDom(c);return(b&&this.innerCt&&b.parentNode===this.innerCt.dom)||false},getRenderTarget:function(){if(!this.innerCt){this.innerCt=this.getTarget().createChild({cls:this.innerCls,role:"presentation"});this.padding=Ext.util.Format.parseBox(this.padding)}return this.innerCt},renderItem:function(e,g){this.callParent(arguments);var c=this,a=e.getEl(),b=a.dom.style,f=e.margins||e.margin;if(f){if(Ext.isString(f)||Ext.isNumber(f)){f=Ext.util.Format.parseBox(f)}else{Ext.applyIf(f,{top:0,right:0,bottom:0,left:0})}}else{f=Ext.apply({},c.defaultMargins)}f.top+=a.getMargin("t");f.right+=a.getMargin("r");f.bottom+=a.getMargin("b");f.left+=a.getMargin("l");f.height=f.top+f.bottom;f.width=f.left+f.right;b.marginTop=b.marginRight=b.marginBottom=b.marginLeft="0";e.margins=f},destroy:function(){Ext.destroy(this.innerCt,this.overflowHandler);this.callParent(arguments)}});Ext.define("Ext.layout.container.HBox",{alias:["layout.hbox"],extend:"Ext.layout.container.Box",alternateClassName:"Ext.layout.HBoxLayout",align:"top",alignCenteringString:"middle",type:"hbox",direction:"horizontal",parallelSizeIndex:0,perpendicularSizeIndex:1,parallelPrefix:"width",parallelPrefixCap:"Width",parallelLT:"l",parallelRB:"r",parallelBefore:"left",parallelBeforeCap:"Left",parallelAfter:"right",parallelPosition:"x",perpendicularPrefix:"height",perpendicularPrefixCap:"Height",perpendicularLT:"t",perpendicularRB:"b",perpendicularLeftTop:"top",perpendicularRightBottom:"bottom",perpendicularPosition:"y",configureItem:function(a){if(a.flex){a.layoutManagedWidth=1}else{a.layoutManagedWidth=2}if(this.align==="stretch"||this.align==="stretchmax"){a.layoutManagedHeight=1}else{a.layoutManagedHeight=2}this.callParent(arguments)}});Ext.define("Ext.layout.container.VBox",{alias:["layout.vbox"],extend:"Ext.layout.container.Box",alternateClassName:"Ext.layout.VBoxLayout",align:"left",alignCenteringString:"center",type:"vbox",direction:"vertical",parallelSizeIndex:1,perpendicularSizeIndex:0,parallelPrefix:"height",parallelPrefixCap:"Height",parallelLT:"t",parallelRB:"b",parallelBefore:"top",parallelBeforeCap:"Top",parallelAfter:"bottom",parallelPosition:"y",perpendicularPrefix:"width",perpendicularPrefixCap:"Width",perpendicularLT:"l",perpendicularRB:"r",perpendicularLeftTop:"left",perpendicularRightBottom:"right",perpendicularPosition:"x",configureItem:function(a){if(a.flex){a.layoutManagedHeight=1}else{a.layoutManagedHeight=2}if(this.align==="stretch"||this.align==="stretchmax"){a.layoutManagedWidth=1}else{a.layoutManagedWidth=2}this.callParent(arguments)}});Ext.define("Ext.toolbar.Toolbar",{extend:"Ext.container.Container",requires:["Ext.toolbar.Fill","Ext.layout.container.HBox","Ext.layout.container.VBox","Ext.FocusManager"],uses:["Ext.toolbar.Separator"],alias:"widget.toolbar",alternateClassName:"Ext.Toolbar",isToolbar:true,baseCls:Ext.baseCSSPrefix+"toolbar",ariaRole:"toolbar",defaultType:"button",vertical:false,enableOverflow:false,menuTriggerCls:Ext.baseCSSPrefix+"toolbar-more-icon",trackMenus:true,itemCls:Ext.baseCSSPrefix+"toolbar-item",initComponent:function(){var b=this,a;if(!b.layout&&b.enableOverflow){b.layout={overflowHandler:"Menu"}}if(b.dock==="right"||b.dock==="left"){b.vertical=true}b.layout=Ext.applyIf(Ext.isString(b.layout)?{type:b.layout}:b.layout||{},{type:b.vertical?"vbox":"hbox",align:b.vertical?"stretchmax":"middle",clearInnerCtOnLayout:true});if(b.vertical){b.addClsWithUI("vertical")}if(b.ui==="footer"){b.ignoreBorderManagement=true}b.callParent();b.addEvents("overflowchange");a=b.vertical?["up","down"]:["left","right"];Ext.FocusManager.subscribe(b,{keys:a})},getRefItems:function(a){var f=this,b=f.callParent(arguments),e=f.layout,c;if(a&&f.enableOverflow){c=e.overflowHandler;if(c&&c.menu){b=b.concat(c.menu.getRefItems(a))}}return b},lookupComponent:function(b){if(Ext.isString(b)){var a=Ext.toolbar.Toolbar.shortcuts[b];if(a){b={xtype:a}}else{b={xtype:"tbtext",text:b}}this.applyDefaults(b)}return this.callParent(arguments)},applyDefaults:function(b){if(!Ext.isString(b)){b=this.callParent(arguments);var a=this.internalDefaults;if(b.events){Ext.applyIf(b.initialConfig,a);Ext.apply(b,a)}else{Ext.applyIf(b,a)}}return b},trackMenu:function(c,a){if(this.trackMenus&&c.menu){var e=a?"mun":"mon",b=this;b[e](c,"mouseover",b.onButtonOver,b);b[e](c,"menushow",b.onButtonMenuShow,b);b[e](c,"menuhide",b.onButtonMenuHide,b)}},constructButton:function(a){return a.events?a:this.createComponent(a,a.split?"splitbutton":this.defaultType)},onBeforeAdd:function(a){if(a.is("field")||(a.is("button")&&this.ui!="footer")){a.ui=a.ui+"-toolbar"}if(a instanceof Ext.toolbar.Separator){a.setUI((this.vertical)?"vertical":"horizontal")}this.callParent(arguments)},onAdd:function(a){this.callParent(arguments);this.trackMenu(a);if(this.disabled){a.disable()}},onRemove:function(a){this.callParent(arguments);this.trackMenu(a,true)},onButtonOver:function(a){if(this.activeMenuBtn&&this.activeMenuBtn!=a){this.activeMenuBtn.hideMenu();a.showMenu();this.activeMenuBtn=a}},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(a){delete this.activeMenuBtn}},function(){this.shortcuts={"-":"tbseparator"," ":"tbspacer","->":"tbfill"}});Ext.define("Ext.panel.AbstractPanel",{extend:"Ext.container.Container",requires:["Ext.util.MixedCollection","Ext.Element","Ext.toolbar.Toolbar"],baseCls:Ext.baseCSSPrefix+"panel",isPanel:true,componentLayout:"dock",defaultDockWeights:{top:1,left:3,right:5,bottom:7},renderTpl:['<div id="{id}-body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"</div>"],border:true,initComponent:function(){var a=this;a.addEvents("bodyresize");a.addChildEls("body");if(a.frame&&a.border&&a.bodyBorder===undefined){a.bodyBorder=false}if(a.frame&&a.border&&(a.bodyBorder===false||a.bodyBorder===0)){a.manageBodyBorders=true}a.callParent()},initItems:function(){var b=this,a=b.dockedItems;b.callParent();b.dockedItems=Ext.create("Ext.util.MixedCollection",false,b.getComponentId);if(a){b.addDocked(a)}},getDockedComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}return this.dockedItems.get(a)},getComponent:function(a){var b=this.callParent(arguments);if(b===undefined&&!Ext.isNumber(a)){b=this.getDockedComponent(a)}return b},initBodyStyles:function(){var e=this,a=e.bodyStyle,c=[],b=Ext.Element,f;if(Ext.isFunction(a)){a=a()}if(Ext.isString(a)){c=a.split(";")}else{for(f in a){if(a.hasOwnProperty(f)){c.push(f+":"+a[f])}}}if(e.bodyPadding!==undefined){c.push("padding: "+b.unitizeBox((e.bodyPadding===true)?5:e.bodyPadding))}if(e.frame&&e.bodyBorder){if(!Ext.isNumber(e.bodyBorder)){e.bodyBorder=1}c.push("border-width: "+b.unitizeBox(e.bodyBorder))}delete e.bodyStyle;return c.length?c.join(";"):undefined},initBodyCls:function(){var b=this,a="",c=b.bodyCls;if(c){Ext.each(c,function(e){a+=" "+e});delete b.bodyCls}return a.length>0?a:undefined},initRenderData:function(){return Ext.applyIf(this.callParent(),{bodyStyle:this.initBodyStyles(),bodyCls:this.initBodyCls()})},addDocked:function(a,g){var f=this,b=0,e,c;a=f.prepareItems(a);c=a.length;for(;b<c;b++){e=a[b];e.dock=e.dock||"top";if(f.border===false){}if(g!==undefined){f.dockedItems.insert(g+b,e)}else{f.dockedItems.add(e)}e.onAdded(f,b);f.onDockedAdd(e)}f.componentLayout.childrenChanged=true;if(f.rendered&&!f.suspendLayout){f.doComponentLayout()}return a},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,insertDocked:function(b,a){this.addDocked(a,b)},removeDocked:function(f,b){var e=this,c,a;if(!e.dockedItems.contains(f)){return f}c=e.componentLayout;a=c&&e.rendered;if(a){c.onRemove(f)}e.dockedItems.remove(f);f.onRemoved();e.onDockedRemove(f);if(b===true||(b!==false&&e.autoDestroy)){f.destroy()}else{if(a){c.afterRemove(f)}}e.componentLayout.childrenChanged=true;if(!e.destroying&&!e.suspendLayout){e.doComponentLayout()}return f},getDockedItems:function(c){var e=this,b=e.defaultDockWeights,a;if(e.dockedItems&&e.dockedItems.items.length){if(c){a=Ext.ComponentQuery.query(c,e.dockedItems.items)}else{a=e.dockedItems.items.slice()}Ext.Array.sort(a,function(g,f){var h=g.weight||b[g.dock],i=f.weight||b[f.dock];if(Ext.isNumber(h)&&Ext.isNumber(i)){return h-i}return 0});return a}return[]},addUIClsToElement:function(b,g){var f=this,a=f.callParent(arguments),e=[Ext.baseCSSPrefix+b,f.baseCls+"-body-"+b,f.baseCls+"-body-"+f.ui+"-"+b],h,c;if(!g&&f.rendered){if(f.bodyCls){f.body.addCls(f.bodyCls)}else{f.body.addCls(e)}}else{if(f.bodyCls){h=f.bodyCls.split(" ");for(c=0;c<e.length;c++){if(!Ext.Array.contains(h,e[c])){h.push(e[c])}}f.bodyCls=h.join(" ")}else{f.bodyCls=e.join(" ")}}return a},removeUIClsFromElement:function(b,g){var f=this,a=f.callParent(arguments),e=[Ext.baseCSSPrefix+b,f.baseCls+"-body-"+b,f.baseCls+"-body-"+f.ui+"-"+b],h,c;if(!g&&f.rendered){if(f.bodyCls){f.body.removeCls(f.bodyCls)}else{f.body.removeCls(e)}}else{if(f.bodyCls){h=f.bodyCls.split(" ");for(c=0;c<e.length;c++){Ext.Array.remove(h,e[c])}f.bodyCls=h.join(" ")}}return a},addUIToElement:function(c){var b=this,a=b.baseCls+"-body-"+b.ui,e;b.callParent(arguments);if(!c&&b.rendered){if(b.bodyCls){b.body.addCls(b.bodyCls)}else{b.body.addCls(a)}}else{if(b.bodyCls){e=b.bodyCls.split(" ");if(!Ext.Array.contains(e,a)){e.push(a)}b.bodyCls=e.join(" ")}else{b.bodyCls=a}}},removeUIFromElement:function(){var b=this,a=b.baseCls+"-body-"+b.ui,c;b.callParent(arguments);if(b.rendered){if(b.bodyCls){b.body.removeCls(b.bodyCls)}else{b.body.removeCls(a)}}else{if(b.bodyCls){c=b.bodyCls.split(" ");Ext.Array.remove(c,a);b.bodyCls=c.join(" ")}else{b.bodyCls=a}}},getTargetEl:function(){return this.body},getRefItems:function(a){var b=this.callParent(arguments),e=this.getDockedItems(a?"*,* *":undefined),g=e.length,c=0,f;for(;c<g;c++){f=e[c];if(f.dock==="right"||f.dock==="bottom"){break}}return Ext.Array.splice(e,0,c).concat(b).concat(e)},beforeDestroy:function(){var b=this.dockedItems,a;if(b){while((a=b.first())){this.removeDocked(a,true)}}this.callParent()},setBorder:function(a){var b=this;b.border=(a!==undefined)?a:true;if(b.rendered){b.doComponentLayout()}}});Ext.define("Ext.dd.DragDrop",{requires:["Ext.dd.DragDropManager"],constructor:function(c,a,b){if(c){this.init(c,a,b)}},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,b4StartDrag:function(a,b){},startDrag:function(a,b){},b4Drag:function(a){},onDrag:function(a){},onDragEnter:function(a,b){},b4DragOver:function(a){},onDragOver:function(a,b){},b4DragOut:function(a){},onDragOut:function(a,b){},b4DragDrop:function(a){},onDragDrop:function(a,b){},onInvalidDrop:function(a){},b4EndDrag:function(a){},endDrag:function(a){},b4MouseDown:function(a){},onMouseDown:function(a){},onMouseUp:function(a){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(i,g,p){if(Ext.isNumber(g)){g={left:g,right:g,top:g,bottom:g}}g=g||this.defaultPadding;var l=Ext.get(this.getEl()).getBox(),a=Ext.get(i),n=a.getScroll(),k,e=a.dom;if(e==document.body){k={x:n.left,y:n.top,width:Ext.Element.getViewWidth(),height:Ext.Element.getViewHeight()}}else{var m=a.getXY();k={x:m[0],y:m[1],width:e.clientWidth,height:e.clientHeight}}var h=l.y-k.y,f=l.x-k.x;this.resetConstraints();this.setXConstraint(f-(g.left||0),k.width-f-l.width-(g.right||0),this.xTickSize);this.setYConstraint(h-(g.top||0),k.height-h-l.height-(g.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(c,a,b){this.initTarget(c,a,b);Ext.EventManager.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(c,a,b){this.config=b||{};this.DDMInstance=Ext.dd.DragDropManager;this.groups={};if(typeof c!=="string"){c=Ext.id(c)}this.id=c;this.addToGroup((a)?a:"default");this.handleElId=c;this.setDragElId(c);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(c,a,e,b){if(!a&&0!==a){this.padding=[c,c,c,c]}else{if(!e&&0!==e){this.padding=[c,a,c,a]}else{this.padding=[c,a,e,b]}}},setInitPosition:function(e,c){var f=this.getEl();if(!this.DDMInstance.verifyEl(f)){return}var b=e||0;var a=c||0;var g=Ext.Element.getXY(f);this.initPageX=g[0]-b;this.initPageY=g[1]-a;this.lastPageX=g[0];this.lastPageY=g[1];this.setStartPosition(g)},setStartPosition:function(b){var a=b||Ext.Element.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=a[0];this.startPageY=a[1]},addToGroup:function(a){this.groups[a]=true;this.DDMInstance.regDragDrop(this,a)},removeFromGroup:function(a){if(this.groups[a]){delete this.groups[a]}this.DDMInstance.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.handleElId=a;this.DDMInstance.regHandle(this.id,a)},setOuterHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}Ext.EventManager.on(a,"mousedown",this.handleMouseDown,this);this.setHandleElId(a);this.hasOuterHandles=true},unreg:function(){Ext.EventManager.un(this.id,"mousedown",this.handleMouseDown,this);this._domRef=null;this.DDMInstance._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return(this.DDMInstance.isLocked()||this.locked)},handleMouseDown:function(c,b){if(this.primaryButtonOnly&&c.button!=0){return}if(this.isLocked()){return}this.DDMInstance.refreshCache(this.groups);var a=c.getPoint();if(!this.hasOuterHandles&&!this.DDMInstance.isOverTarget(a,this)){}else{if(this.clickValidator(c)){this.setStartPosition();this.b4MouseDown(c);this.onMouseDown(c);this.DDMInstance.handleMouseDown(c,this);this.DDMInstance.stopEvent(c)}else{}}},clickValidator:function(b){var a=b.getTarget();return(this.isValidHandleChild(a)&&(this.id==this.handleElId||this.DDMInstance.handleWasClicked(a,this.id)))},addInvalidHandleType:function(a){var b=a.toUpperCase();this.invalidHandleTypes[b]=b},addInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(a){var b=a.toUpperCase();delete this.invalidHandleTypes[b]},removeInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(b){for(var c=0,a=this.invalidHandleClasses.length;c<a;++c){if(this.invalidHandleClasses[c]==b){delete this.invalidHandleClasses[c]}}},isValidHandleChild:function(f){var c=true;var h;try{h=f.nodeName.toUpperCase()}catch(g){h=f.nodeName}c=c&&!this.invalidHandleTypes[h];c=c&&!this.invalidHandleIds[f.id];for(var b=0,a=this.invalidHandleClasses.length;c&&b<a;++b){c=!Ext.fly(f).hasCls(this.invalidHandleClasses[b])}return c},setXTicks:function(e,a){this.xTicks=[];this.xTickSize=a;var c={};for(var b=this.initPageX;b>=this.minX;b=b-a){if(!c[b]){this.xTicks[this.xTicks.length]=b;c[b]=true}}for(b=this.initPageX;b<=this.maxX;b=b+a){if(!c[b]){this.xTicks[this.xTicks.length]=b;c[b]=true}}Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(e,a){this.yTicks=[];this.yTickSize=a;var c={};for(var b=this.initPageY;b>=this.minY;b=b-a){if(!c[b]){this.yTicks[this.yTicks.length]=b;c[b]=true}}for(b=this.initPageY;b<=this.maxY;b=b+a){if(!c[b]){this.yTicks[this.yTicks.length]=b;c[b]=true}}Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(c,b,a){this.leftConstraint=c;this.rightConstraint=b;this.minX=this.initPageX-c;this.maxX=this.initPageX+b;if(a){this.setXTicks(this.initPageX,a)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(a,c,b){this.topConstraint=a;this.bottomConstraint=c;this.minY=this.initPageY-a;this.maxY=this.initPageY+c;if(b){this.setYTicks(this.initPageY,b)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var b=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var a=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(b,a)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(h,e){if(!e){return h}else{if(e[0]>=h){return e[0]}else{for(var b=0,a=e.length;b<a;++b){var c=b+1;if(e[c]&&e[c]>=h){var g=h-e[b];var f=e[c]-h;return(f>g)?e[b]:e[c]}}return e[e.length-1]}}},toString:function(){return("DragDrop "+this.id)}});Ext.define("Ext.dd.DD",{extend:"Ext.dd.DragDrop",requires:["Ext.dd.DragDropManager"],constructor:function(c,a,b){if(c){this.init(c,a,b)}},scroll:true,autoOffset:function(c,b){var a=c-this.startPageX;var e=b-this.startPageY;this.setDelta(a,e)},setDelta:function(b,a){this.deltaX=b;this.deltaY=a},setDragElPos:function(c,b){var a=this.getDragEl();this.alignElWithMouse(a,c,b)},alignElWithMouse:function(b,f,c){var g=this.getTargetCoord(f,c),e=b.dom?b:Ext.fly(b,"_dd"),m=e.getSize(),i=Ext.Element,k;if(!this.deltaSetXY){k=this.cachedViewportSize={width:i.getDocumentWidth(),height:i.getDocumentHeight()};var a=[Math.max(0,Math.min(g.x,k.width-m.width)),Math.max(0,Math.min(g.y,k.height-m.height))];e.setXY(a);var l=e.getLeft(true);var h=e.getTop(true);this.deltaSetXY=[l-g.x,h-g.y]}else{k=this.cachedViewportSize;e.setLeftTop(Math.max(0,Math.min(g.x+this.deltaSetXY[0],k.width-m.width)),Math.max(0,Math.min(g.y+this.deltaSetXY[1],k.height-m.height)))}this.cachePosition(g.x,g.y);this.autoScroll(g.x,g.y,b.offsetHeight,b.offsetWidth);return g},cachePosition:function(b,a){if(b){this.lastPageX=b;this.lastPageY=a}else{var c=Ext.Element.getXY(this.getEl());this.lastPageX=c[0];this.lastPageY=c[1]}},autoScroll:function(m,l,f,n){if(this.scroll){var p=Ext.Element.getViewHeight();var b=Ext.Element.getViewWidth();var r=this.DDMInstance.getScrollTop();var e=this.DDMInstance.getScrollLeft();var k=f+l;var q=n+m;var i=(p+r-l-this.deltaY);var g=(b+e-m-this.deltaX);var c=40;var a=(document.all)?80:30;if(k>p&&i<c){window.scrollTo(e,r+a)}if(l<r&&r>0&&l-r<c){window.scrollTo(e,r-a)}if(q>b&&g<c){window.scrollTo(e+a,r)}if(m<e&&e>0&&m-e<c){window.scrollTo(e-a,r)}}},getTargetCoord:function(c,b){var a=c-this.deltaX;var e=b-this.deltaY;if(this.constrainX){if(a<this.minX){a=this.minX}if(a>this.maxX){a=this.maxX}}if(this.constrainY){if(e<this.minY){e=this.minY}if(e>this.maxY){e=this.maxY}}a=this.getTick(a,this.xTicks);e=this.getTick(e,this.yTicks);return{x:a,y:e}},applyConfig:function(){this.callParent();this.scroll=(this.config.scroll!==false)},b4MouseDown:function(a){this.autoOffset(a.getPageX(),a.getPageY())},b4Drag:function(a){this.setDragElPos(a.getPageX(),a.getPageY())},toString:function(){return("DD "+this.id)}});Ext.define("Ext.dd.DDProxy",{extend:"Ext.dd.DD",statics:{dragElId:"ygddfdiv"},constructor:function(c,a,b){if(c){this.init(c,a,b);this.initFrame()}},resizeFrame:true,centerFrame:false,createFrame:function(){var b=this;var a=document.body;if(!a||!a.firstChild){setTimeout(function(){b.createFrame()},50);return}var e=this.getDragEl();if(!e){e=document.createElement("div");e.id=this.dragElId;var c=e.style;c.position="absolute";c.visibility="hidden";c.cursor="move";c.border="2px solid #aaa";c.zIndex=999;a.insertBefore(e,a.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){this.callParent();this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(f,e){var c=this.getEl();var a=this.getDragEl();var b=a.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(b.width,10)/2),Math.round(parseInt(b.height,10)/2))}this.setDragElPos(f,e);Ext.fly(a).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(b){var a=b.getPageX();var c=b.getPageY();this.autoOffset(a,c);this.setDragElPos(a,c)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(c){var b=this.getEl();var a=this.getDragEl();a.style.visibility="";this.beforeMove();b.style.visibility="hidden";Ext.dd.DDM.moveToEl(b,a);a.style.visibility="hidden";b.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}});Ext.define("Ext.dd.DragSource",{extend:"Ext.dd.DDProxy",requires:["Ext.dd.StatusProxy","Ext.dd.DragDropManager"],dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",animRepair:true,repairHighlightColor:"c3daf9",constructor:function(b,a){this.el=Ext.get(b);if(!this.dragData){this.dragData={}}Ext.apply(this,a);if(!this.proxy){this.proxy=Ext.create("Ext.dd.StatusProxy",{animRepair:this.animRepair})}this.callParent([this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true}]);this.dragging=false},getDragData:function(a){return this.dragData},onDragEnter:function(c,f){var b=Ext.dd.DragDropManager.getDDById(f);this.cachedTarget=b;if(this.beforeDragEnter(b,c,f)!==false){if(b.isNotifyTarget){var a=b.notifyEnter(this,c,this.dragData);this.proxy.setStatus(a)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(b,c,f)}}},beforeDragEnter:function(b,a,c){return true},alignElWithMouse:function(){this.callParent(arguments);this.proxy.sync()},onDragOver:function(c,f){var b=this.cachedTarget||Ext.dd.DragDropManager.getDDById(f);if(this.beforeDragOver(b,c,f)!==false){if(b.isNotifyTarget){var a=b.notifyOver(this,c,this.dragData);this.proxy.setStatus(a)}if(this.afterDragOver){this.afterDragOver(b,c,f)}}},beforeDragOver:function(b,a,c){return true},onDragOut:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(c);if(this.beforeDragOut(a,b,c)!==false){if(a.isNotifyTarget){a.notifyOut(this,b,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(a,b,c)}}this.cachedTarget=null},beforeDragOut:function(b,a,c){return true},onDragDrop:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(c);if(this.beforeDragDrop(a,b,c)!==false){if(a.isNotifyTarget){if(a.notifyDrop(this,b,this.dragData)!==false){this.onValidDrop(a,b,c)}else{this.onInvalidDrop(a,b,c)}}else{this.onValidDrop(a,b,c)}if(this.afterDragDrop){this.afterDragDrop(a,b,c)}}delete this.cachedTarget},beforeDragDrop:function(b,a,c){return true},onValidDrop:function(b,a,c){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(b,a,c)}},getRepairXY:function(b,a){return this.el.getXY()},onInvalidDrop:function(b,a,c){this.beforeInvalidDrop(b,a,c);if(this.cachedTarget){if(this.cachedTarget.isNotifyTarget){this.cachedTarget.notifyOut(this,a,this.dragData)}this.cacheTarget=null}this.proxy.repair(this.getRepairXY(a,this.dragData),this.afterRepair,this);if(this.afterInvalidDrop){this.afterInvalidDrop(a,c)}},afterRepair:function(){var a=this;if(Ext.enableFx){a.el.highlight(a.repairHighlightColor)}a.dragging=false},beforeInvalidDrop:function(b,a,c){return true},handleMouseDown:function(b){if(this.dragging){return}var a=this.getDragData(b);if(a&&this.onBeforeDrag(a,b)!==false){this.dragData=a;this.proxy.stop();this.callParent(arguments)}},onBeforeDrag:function(a,b){return true},onStartDrag:Ext.emptyFn,startDrag:function(a,b){this.proxy.reset();this.dragging=true;this.proxy.update("");this.onInitDrag(a,b);this.proxy.show()},onInitDrag:function(a,c){var b=this.el.dom.cloneNode(true);b.id=Ext.id();this.proxy.update(b);this.onStartDrag(a,c);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){this.callParent();Ext.destroy(this.proxy)}});Ext.define("Ext.panel.DD",{extend:"Ext.dd.DragSource",requires:["Ext.panel.Proxy"],constructor:function(b,a){this.panel=b;this.dragData={panel:b};this.proxy=Ext.create("Ext.panel.Proxy",b,a);this.callParent([b.el,a]);Ext.defer(function(){var e=b.header,c=b.body;if(e){this.setHandleElId(e.id);c=e.el}c.setStyle("cursor","move");this.scroll=false},200,this)},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.proxy.show()},b4MouseDown:function(b){var a=b.getPageX(),c=b.getPageY();this.autoOffset(a,c)},onInitDrag:function(a,b){this.onStartDrag(a,b);return true},createFrame:Ext.emptyFn,getDragEl:function(a){return this.proxy.ghost.el.dom},endDrag:function(a){this.proxy.hide();this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX;b-=this.startPageY;this.setDelta(a,b)}});Ext.define("Ext.panel.Panel",{extend:"Ext.panel.AbstractPanel",requires:["Ext.panel.Header","Ext.fx.Anim","Ext.util.KeyMap","Ext.panel.DD","Ext.XTemplate","Ext.layout.component.Dock","Ext.util.Memento"],alias:"widget.panel",alternateClassName:"Ext.Panel",collapsedCls:"collapsed",animCollapse:Ext.enableFx,minButtonWidth:75,collapsed:false,collapseFirst:true,hideCollapseTool:false,titleCollapse:false,floatable:true,collapsible:false,closable:false,closeAction:"destroy",preventHeader:false,headerPosition:"top",frame:false,frameHeader:true,initComponent:function(){var b=this,a;b.addEvents("beforeclose","beforeexpand","beforecollapse","expand","collapse","titlechange","iconchange");this.addStateEvents("expand","collapse");if(b.unstyled){b.setUI("plain")}if(b.frame){b.setUI(b.ui+"-framed")}b.bridgeToolbars();b.callParent();b.collapseDirection=b.collapseDirection||b.headerPosition||Ext.Component.DIRECTION_TOP},setBorder:function(a){this.callParent(arguments)},beforeDestroy:function(){Ext.destroy(this.ghostPanel,this.dd);this.callParent()},initAria:function(){this.callParent();this.initHeaderAria()},initHeaderAria:function(){var b=this,a=b.el,c=b.header;if(a&&c){a.dom.setAttribute("aria-labelledby",c.titleCmp.id)}},getHeader:function(){return this.header},setTitle:function(c){var b=this,a=this.title;b.title=c;if(b.header){b.header.setTitle(c)}else{b.updateHeader()}if(b.reExpander){b.reExpander.setTitle(c)}b.fireEvent("titlechange",b,c,a)},setIconCls:function(a){var c=this,b=c.iconCls;c.iconCls=a;var e=c.header;if(e){e.setIconCls(a)}c.fireEvent("iconchange",c,a,b)},bridgeToolbars:function(){var a=this,g=[],c,b,f=a.minButtonWidth;function e(h,k,i){if(Ext.isArray(h)){h={xtype:"toolbar",items:h}}else{if(!h.xtype){h.xtype="toolbar"}}h.dock=k;if(k=="left"||k=="right"){h.vertical=true}if(i){h.layout=Ext.applyIf(h.layout||{},{pack:{left:"start",center:"center"}[a.buttonAlign]||"end"})}return h}if(a.tbar){g.push(e(a.tbar,"top"));a.tbar=null}if(a.bbar){g.push(e(a.bbar,"bottom"));a.bbar=null}if(a.buttons){a.fbar=a.buttons;a.buttons=null}if(a.fbar){c=e(a.fbar,"bottom",true);c.ui="footer";if(f){b=c.defaults;c.defaults=function(h){var i=b||{};if((!h.xtype||h.xtype==="button"||(h.isComponent&&h.isXType("button")))&&!("minWidth" in i)){i=Ext.apply({minWidth:f},i)}return i}}g.push(c);a.fbar=null}if(a.lbar){g.push(e(a.lbar,"left"));a.lbar=null}if(a.rbar){g.push(e(a.rbar,"right"));a.rbar=null}if(a.dockedItems){if(!Ext.isArray(a.dockedItems)){a.dockedItems=[a.dockedItems]}a.dockedItems=a.dockedItems.concat(g)}else{a.dockedItems=g}},initTools:function(){var a=this;a.tools=a.tools?Ext.Array.clone(a.tools):[];if(a.collapsible&&!(a.hideCollapseTool||a.header===false)){a.collapseDirection=a.collapseDirection||a.headerPosition||"top";a.collapseTool=a.expandTool=a.createComponent({xtype:"tool",type:"collapse-"+a.collapseDirection,expandType:a.getOppositeDirection(a.collapseDirection),handler:a.toggleCollapse,scope:a});if(a.collapseFirst){a.tools.unshift(a.collapseTool)}}a.addTools();if(a.closable){a.addClsWithUI("closable");a.addTool({type:"close",handler:Ext.Function.bind(a.close,this,[])})}if(a.collapseTool&&!a.collapseFirst){a.tools.push(a.collapseTool)}},addTools:Ext.emptyFn,close:function(){if(this.fireEvent("beforeclose",this)!==false){this.doClose()}},doClose:function(){this.fireEvent("close",this);this[this.closeAction]()},onRender:function(b,a){var e=this,c;e.initTools();e.updateHeader();e.callParent(arguments)},afterRender:function(){var a=this;a.callParent(arguments);if(a.collapsed){a.collapsed=false;a.collapse(null,false,true)}},updateHeader:function(b){var a=this,f=a.header,e=a.title,c=a.tools;if(!a.preventHeader&&(b||e||(c&&c.length))){if(!f){f=a.header=Ext.create("Ext.panel.Header",{title:e,orientation:(a.headerPosition=="left"||a.headerPosition=="right")?"vertical":"horizontal",dock:a.headerPosition||"top",textCls:a.headerTextCls,iconCls:a.iconCls,baseCls:a.baseCls+"-header",tools:c,ui:a.ui,indicateDrag:a.draggable,border:a.border,frame:a.frame&&a.frameHeader,ignoreParentFrame:a.frame||a.overlapHeader,ignoreBorderManagement:a.frame||a.ignoreHeaderBorderManagement,listeners:a.collapsible&&a.titleCollapse?{click:a.toggleCollapse,scope:a}:null});a.addDocked(f,0);a.tools=f.tools}f.show();a.initHeaderAria()}else{if(f){f.hide()}}},setUI:function(b){var a=this;a.callParent(arguments);if(a.header){a.header.setUI(b)}},getContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},isVisible:function(a){var b=this;if(b.collapsed&&b.placeholder){return b.placeholder.isVisible(a)}return b.callParent(arguments)},onHide:function(){var a=this;if(a.collapsed&&a.placeholder){a.placeholder.hide()}else{a.callParent(arguments)}},onShow:function(){var a=this;if(a.collapsed&&a.placeholder){a.hidden=true;a.placeholder.show()}else{a.callParent(arguments)}},addTool:function(a){var b=this,c=b.header;if(Ext.isArray(a)){Ext.each(a,b.addTool,b);return}b.tools.push(a);if(c){c.addTool(a)}b.updateHeader()},getOppositeDirection:function(a){var b=Ext.Component;switch(a){case b.DIRECTION_TOP:return b.DIRECTION_BOTTOM;case b.DIRECTION_RIGHT:return b.DIRECTION_LEFT;case b.DIRECTION_BOTTOM:return b.DIRECTION_TOP;case b.DIRECTION_LEFT:return b.DIRECTION_RIGHT}},collapse:function(w,g,k){var x=this,v=Ext.Component,l=x.getHeight(),m=x.getWidth(),y,a=0,s=x.dockedItems.items,t=s.length,r=0,u,h,q={from:{height:l,width:m},to:{height:l,width:m},listeners:{afteranimate:x.afterCollapse,scope:x},duration:Ext.Number.from(g,Ext.fx.Anim.prototype.duration)},f,e,n,b,p;if(!w){w=x.collapseDirection}if(k){g=false}else{if(x.collapsed||x.fireEvent("beforecollapse",x,w,g)===false){return false}}n=w;x.expandDirection=x.getOppositeDirection(w);x.hiddenDocked=[];switch(w){case v.DIRECTION_TOP:case v.DIRECTION_BOTTOM:e="horizontal";p="height";b="getHeight";for(;r<t;r++){u=s[r];if(u.isVisible()){if(u.isXType("header",true)&&(!u.dock||u.dock=="top"||u.dock=="bottom")){f=u}else{x.hiddenDocked.push(u)}}else{if(u===x.reExpander){f=u}}}if(w==Ext.Component.DIRECTION_BOTTOM){h=x.getPosition()[1]-Ext.fly(x.el.dom.offsetParent).getRegion().top;q.from.top=h}break;case v.DIRECTION_LEFT:case v.DIRECTION_RIGHT:e="vertical";p="width";b="getWidth";for(;r<t;r++){u=s[r];if(u.isVisible()){if(u.isHeader&&(u.dock=="left"||u.dock=="right")){f=u}else{x.hiddenDocked.push(u)}}else{if(u===x.reExpander){f=u}}}if(w==Ext.Component.DIRECTION_RIGHT){h=x.getPosition()[0]-Ext.fly(x.el.dom.offsetParent).getRegion().left;q.from.left=h}break;default:throw ("Panel collapse must be passed a valid Component collapse direction")}if(g&&x.collapseTool){x.collapseTool.disable()}x.addClsWithUI(x.collapsedCls);if(f&&f.rendered){f.addClsWithUI(x.collapsedCls);f.addClsWithUI(x.collapsedCls+"-"+f.dock);if(x.border&&(!x.frame||(x.frame&&Ext.supports.CSS3BorderRadius))){f.addClsWithUI(x.collapsedCls+"-border-"+f.dock)}y=f.getFrameInfo();a=f[b]()+(y?y[w]:0);f.removeClsWithUI(x.collapsedCls);f.removeClsWithUI(x.collapsedCls+"-"+f.dock);if(x.border&&(!x.frame||(x.frame&&Ext.supports.CSS3BorderRadius))){f.removeClsWithUI(x.collapsedCls+"-border-"+f.dock)}}else{f={hideMode:"offsets",temporary:true,title:x.title,orientation:e,dock:n,textCls:x.headerTextCls,iconCls:x.iconCls,baseCls:x.baseCls+"-header",ui:x.ui,frame:x.frame&&x.frameHeader,ignoreParentFrame:x.frame||x.overlapHeader,indicateDrag:x.draggable,cls:x.baseCls+"-collapsed-placeholder  "+Ext.baseCSSPrefix+"docked "+x.baseCls+"-"+x.ui+"-collapsed",renderTo:x.el};if(!x.hideCollapseTool){f[(f.orientation=="horizontal")?"tools":"items"]=[{xtype:"tool",type:"expand-"+x.expandDirection,handler:x.toggleCollapse,scope:x}]}f=x.reExpander=Ext.create("Ext.panel.Header",f);a=f[b]()+((f.frame)?f.frameSize[w]:0);f.hide();x.insertDocked(0,f)}x.reExpander=f;x.reExpander.addClsWithUI(x.collapsedCls);x.reExpander.addClsWithUI(x.collapsedCls+"-"+f.dock);if(x.border&&(!x.frame||(x.frame&&Ext.supports.CSS3BorderRadius))){x.reExpander.addClsWithUI(x.collapsedCls+"-border-"+x.reExpander.dock)}if(w==Ext.Component.DIRECTION_RIGHT){q.to.left=h+(m-a)}else{if(w==Ext.Component.DIRECTION_BOTTOM){q.to.top=h+(l-a)}}q.to[p]=a;if(!x.collapseMemento){x.collapseMemento=new Ext.util.Memento(x)}x.collapseMemento.capture(["width","height","minWidth","minHeight","layoutManagedHeight","layoutManagedWidth"]);x.savedFlex=x.flex;x.minWidth=0;x.minHeight=0;delete x.flex;x.suspendLayout=true;if(g){x.animate(q)}else{x.setSize(q.to.width,q.to.height);if(Ext.isDefined(q.to.left)||Ext.isDefined(q.to.top)){x.setPosition(q.to.left,q.to.top)}x.afterCollapse(false,k)}return x},afterCollapse:function(f,b){var e=this,c=0,a=e.hiddenDocked.length;e.collapseMemento.restore(["minWidth","minHeight"]);if(Ext.Component.VERTICAL_DIRECTION_Re.test(e.expandDirection)){e.layoutManagedHeight=2;e.collapseMemento.restore("width",false)}else{e.layoutManagedWidth=2;e.collapseMemento.restore("height",false)}e.saveScrollTop=e.body.dom.scrollTop;e.body.setStyle("display","none");for(;c<a;c++){e.hiddenDocked[c].hide()}if(e.reExpander){e.reExpander.updateFrame();e.reExpander.show()}e.collapsed=true;e.suspendLayout=false;if(!b){if(e.ownerCt){if(f){e.ownerCt.layout.layout()}}else{if(e.reExpander.temporary){e.doComponentLayout()}}}if(e.resizer){e.resizer.disable()}if(e.collapseTool){e.collapseTool.setType("expand-"+e.expandDirection)}if(!b){e.fireEvent("collapse",e)}if(f&&e.collapseTool){e.collapseTool.enable()}},expand:function(b){var g=this;if(!g.collapsed||g.fireEvent("beforeexpand",g,b)===false){return false}var f=0,c=g.hiddenDocked.length,k=g.expandDirection,m=g.getHeight(),a=g.getWidth(),h,e;if(b&&g.collapseTool){g.collapseTool.disable()}for(;f<c;f++){g.hiddenDocked[f].hidden=false;g.hiddenDocked[f].el.show()}if(g.reExpander){if(g.reExpander.temporary){g.reExpander.hide()}else{g.reExpander.removeClsWithUI(g.collapsedCls);g.reExpander.removeClsWithUI(g.collapsedCls+"-"+g.reExpander.dock);if(g.border&&(!g.frame||(g.frame&&Ext.supports.CSS3BorderRadius))){g.reExpander.removeClsWithUI(g.collapsedCls+"-border-"+g.reExpander.dock)}g.reExpander.updateFrame()}}if(g.collapseTool){g.collapseTool.setType("collapse-"+g.collapseDirection)}g.body.setStyle("display","");g.body.dom.scrollTop=g.saveScrollTop;g.collapsed=false;g.removeClsWithUI(g.collapsedCls);e={to:{},from:{height:m,width:a},listeners:{afteranimate:g.afterExpand,scope:g}};if((k==Ext.Component.DIRECTION_TOP)||(k==Ext.Component.DIRECTION_BOTTOM)){g.collapseMemento.restore("height",false);if(g.height===undefined){g.setCalculatedSize(g.width,null);e.to.height=g.getHeight();g.setCalculatedSize(g.width,e.from.height)}else{if(g.savedFlex){g.flex=g.savedFlex;e.to.height=g.ownerCt.layout.calculateChildBox(g).height;delete g.flex}else{e.to.height=g.height}}if(k==Ext.Component.DIRECTION_TOP){h=g.getPosition()[1]-Ext.fly(g.el.dom.offsetParent).getRegion().top;e.from.top=h;e.to.top=h-(e.to.height-m)}}else{if((k==Ext.Component.DIRECTION_LEFT)||(k==Ext.Component.DIRECTION_RIGHT)){g.collapseMemento.restore("width",false);if(g.width===undefined){g.setCalculatedSize(null,g.height);e.to.width=g.getWidth();g.setCalculatedSize(e.from.width,g.height)}else{if(g.savedFlex){g.flex=g.savedFlex;e.to.width=g.ownerCt.layout.calculateChildBox(g).width;delete g.flex}else{e.to.width=g.width}}if(k==Ext.Component.DIRECTION_LEFT){h=g.getPosition()[0]-Ext.fly(g.el.dom.offsetParent).getRegion().left;e.from.left=h;e.to.left=h-(e.to.width-a)}}}if(b){g.animate(e)}else{g.setCalculatedSize(e.to.width,e.to.height);if(e.to.x){g.setLeft(e.to.x)}if(e.to.y){g.setTop(e.to.y)}g.afterExpand(false)}return g},afterExpand:function(b){var a=this;if(a.savedFlex){a.flex=a.savedFlex;delete a.savedFlex;delete a.width;delete a.height}if(a.collapseMemento){a.collapseMemento.restoreAll()}if(b&&a.ownerCt){Ext.defer(a.ownerCt.doLayout,Ext.isIE6?1:0,a)}if(a.resizer){a.resizer.enable()}a.fireEvent("expand",a);if(b&&a.collapseTool){a.collapseTool.enable()}},toggleCollapse:function(){if(this.collapsed){this.expand(this.animCollapse)}else{this.collapse(this.collapseDirection,this.animCollapse)}return this},getKeyMap:function(){if(!this.keyMap){this.keyMap=Ext.create("Ext.util.KeyMap",this.el,this.keys)}return this.keyMap},initDraggable:function(){this.dd=Ext.create("Ext.panel.DD",this,Ext.isBoolean(this.draggable)?null:this.draggable)},ghostTools:function(){var b=[],a=this.header.query("tool[hidden=false]");if(a.length){Ext.each(a,function(c){b.push({type:c.type})})}else{b=[{type:"placeholder"}]}return b},ghost:function(a){var e=this,b=e.ghostPanel,c=e.getBox(),f;if(!b){b=Ext.create("Ext.panel.Panel",{renderTo:e.floating?e.el.dom.parentNode:document.body,floating:{shadow:false},frame:Ext.supports.CSS3BorderRadius?e.frame:false,overlapHeader:e.overlapHeader,headerPosition:e.headerPosition,baseCls:e.baseCls,cls:e.baseCls+"-ghost "+(a||"")});e.ghostPanel=b}b.floatParent=e.floatParent;if(e.floating){b.setZIndex(Ext.Number.from(e.el.getStyle("zIndex"),0))}else{b.toFront()}f=b.header;if(f){f.suspendLayout=true;Ext.Array.forEach(f.query("tool"),function(g){f.remove(g)});f.suspendLayout=false}b.addTool(e.ghostTools());b.setTitle(e.title);b.setIconCls(e.iconCls);b.el.show();b.setPosition(c.x,c.y);b.setSize(c.width,c.height);e.el.hide();if(e.floatingItems){e.floatingItems.hide()}return b},unghost:function(b,a){var c=this;if(!c.ghostPanel){return}if(b!==false){c.el.show();if(a!==false){c.setPosition(c.ghostPanel.getPosition())}if(c.floatingItems){c.floatingItems.show()}Ext.defer(c.focus,10,c)}c.ghostPanel.el.hide()},initResizable:function(a){if(this.collapsed){a.disabled=true}this.callParent([a])}},function(){this.prototype.animCollapse=Ext.enableFx});Ext.define("Ext.window.Window",{extend:"Ext.panel.Panel",alternateClassName:"Ext.Window",requires:["Ext.util.ComponentDragger","Ext.util.Region","Ext.EventManager"],alias:"widget.window",baseCls:Ext.baseCSSPrefix+"window",resizable:true,draggable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:100,minWidth:200,expandOnShow:true,collapsible:false,closable:true,hidden:true,autoRender:true,hideMode:"visibility",floating:true,ariaRole:"alertdialog",itemCls:"x-window-item",overlapHeader:true,ignoreHeaderBorderManagement:true,initComponent:function(){var a=this;a.callParent();a.addEvents("resize","maximize","minimize","restore");if(a.plain){a.addClsWithUI("plain")}if(a.modal){a.ariaRole="dialog"}},initStateEvents:function(){var a=this.stateEvents;Ext.each(["maximize","restore","resize","dragend"],function(b){if(Ext.Array.indexOf(a,b)){a.push(b)}});this.callParent()},getState:function(){var b=this,c=b.callParent()||{},a=!!b.maximized;c.maximized=a;Ext.apply(c,{size:a?b.restoreSize:b.getSize(),pos:a?b.restorePos:b.getPosition()});return c},applyState:function(b){var a=this;if(b){a.maximized=b.maximized;if(a.maximized){a.hasSavedRestore=true;a.restoreSize=b.size;a.restorePos=b.pos}else{Ext.apply(a,{width:b.size.width,height:b.size.height,x:b.pos[0],y:b.pos[1]})}}},onMouseDown:function(b){var a;if(this.floating){if(Ext.fly(b.getTarget()).focusable()){a=true}this.toFront(a)}},onRender:function(b,a){var c=this;c.callParent(arguments);c.focusEl=c.el;if(c.maximizable){c.header.on({dblclick:{fn:c.toggleMaximize,element:"el",scope:c}})}},afterRender:function(){var a=this,b=a.hidden,c;a.hidden=false;a.callParent();a.hidden=b;a.proxy=a.getProxy();a.mon(a.el,"mousedown",a.onMouseDown,a);a.el.set({tabIndex:-1});if(a.maximized){a.maximized=false;a.maximize()}if(a.closable){c=a.getKeyMap();c.on(27,a.onEsc,a);c.disable()}if(!b){a.syncMonitorWindowResize();a.doConstrain()}},initDraggable:function(){var b=this,a;if(!b.header){b.updateHeader(true)}if(b.header){a=Ext.applyIf({el:b.el,delegate:"#"+b.header.id},b.draggable);if(b.constrain||b.constrainHeader){a.constrain=b.constrain;a.constrainDelegate=b.constrainHeader;a.constrainTo=b.constrainTo||b.container}b.dd=Ext.create("Ext.util.ComponentDragger",this,a);b.relayEvents(b.dd,["dragstart","drag","dragend"])}},onEsc:function(a,b){b.stopEvent();this[this.closeAction]()},beforeDestroy:function(){var a=this;if(a.rendered){delete this.animateTarget;a.hide();Ext.destroy(a.keyMap)}a.callParent()},addTools:function(){var a=this;a.callParent();if(a.minimizable){a.addTool({type:"minimize",handler:Ext.Function.bind(a.minimize,a,[])})}if(a.maximizable){a.addTool({type:"maximize",handler:Ext.Function.bind(a.maximize,a,[])});a.addTool({type:"restore",handler:Ext.Function.bind(a.restore,a,[]),hidden:true})}},getFocusEl:function(){var e=this,h=e.focusEl,g=e.defaultButton||e.defaultFocus,b=typeof db,c,a;if(Ext.isDefined(g)){if(Ext.isNumber(g)){h=e.query("button")[g]}else{if(Ext.isString(g)){h=e.down("#"+g)}else{h=g}}}return h||e.focusEl},beforeShow:function(){this.callParent();if(this.expandOnShow){this.expand(false)}},afterShow:function(c){var b=this,a=c||b.animateTarget;b.callParent(arguments);if(b.maximized){b.fitContainer()}b.syncMonitorWindowResize();if(!a){b.doConstrain()}if(b.keyMap){b.keyMap.enable()}},doClose:function(){var a=this;if(a.hidden){a.fireEvent("close",a);if(a.closeAction=="destroy"){this.destroy()}}else{a.hide(a.animateTarget,a.doClose,a)}},afterHide:function(){var a=this;a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.disable()}a.callParent(arguments)},onWindowResize:function(){if(this.maximized){this.fitContainer()}this.doConstrain()},minimize:function(){this.fireEvent("minimize",this);return this},afterCollapse:function(){var a=this;if(a.maximizable){a.tools.maximize.hide();a.tools.restore.hide()}if(a.resizer){a.resizer.disable()}a.callParent(arguments)},afterExpand:function(){var a=this;if(a.maximized){a.tools.restore.show()}else{if(a.maximizable){a.tools.maximize.show()}}if(a.resizer){a.resizer.enable()}a.callParent(arguments)},maximize:function(){var a=this;if(!a.maximized){a.expand(false);if(!a.hasSavedRestore){a.restoreSize=a.getSize();a.restorePos=a.getPosition(true)}if(a.maximizable){a.tools.maximize.hide();a.tools.restore.show()}a.maximized=true;a.el.disableShadow();if(a.dd){a.dd.disable()}if(a.collapseTool){a.collapseTool.hide()}a.el.addCls(Ext.baseCSSPrefix+"window-maximized");a.container.addCls(Ext.baseCSSPrefix+"window-maximized-ct");a.syncMonitorWindowResize();a.setPosition(0,0);a.fitContainer();a.fireEvent("maximize",a)}return a},restore:function(){var a=this,b=a.tools;if(a.maximized){delete a.hasSavedRestore;a.removeCls(Ext.baseCSSPrefix+"window-maximized");if(b.restore){b.restore.hide()}if(b.maximize){b.maximize.show()}if(a.collapseTool){a.collapseTool.show()}a.setPosition(a.restorePos);a.setSize(a.restoreSize);delete a.restorePos;delete a.restoreSize;a.maximized=false;a.el.enableShadow(true);if(a.dd){a.dd.enable()}a.container.removeCls(Ext.baseCSSPrefix+"window-maximized-ct");a.syncMonitorWindowResize();a.doConstrain();a.fireEvent("restore",a)}return a},syncMonitorWindowResize:function(){var b=this,c=b._monitoringResize,e=b.monitorResize||b.constrain||b.constrainHeader||b.maximized,a=b.hidden||b.destroying||b.isDestroyed;if(e&&!a){if(!c){Ext.EventManager.onWindowResize(b.onWindowResize,b);b._monitoringResize=true}}else{if(c){Ext.EventManager.removeResizeListener(b.onWindowResize,b);b._monitoringResize=false}}},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()}});Ext.define("Ext.window.MessageBox",{extend:"Ext.window.Window",requires:["Ext.toolbar.Toolbar","Ext.form.field.Text","Ext.form.field.TextArea","Ext.button.Button","Ext.layout.container.Anchor","Ext.layout.container.HBox","Ext.ProgressBar"],alias:"widget.messagebox",OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",hideMode:"offsets",closeAction:"hide",resizable:false,title:"&#160;",width:600,height:500,minWidth:250,maxWidth:600,minHeight:110,maxHeight:500,constrain:true,cls:Ext.baseCSSPrefix+"message-box",layout:{type:"anchor"},defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},iconHeight:35,makeButton:function(a){var b=this.buttonIds[a];return Ext.create("Ext.button.Button",{handler:this.btnCallback,itemId:b,scope:this,text:this.buttonText[b],minWidth:75})},btnCallback:function(a){var b=this,c,e;if(b.cfg.prompt||b.cfg.multiline){if(b.cfg.multiline){e=b.textArea}else{e=b.textField}c=e.getValue();e.reset()}a.blur();b.hide();b.userCallback(a.itemId,c,b.cfg)},hide:function(){var a=this;a.dd.endDrag();a.progressBar.reset();a.removeCls(a.cfg.cls);a.callParent()},initComponent:function(){var c=this,b,a;c.title="&#160;";c.topContainer=Ext.create("Ext.container.Container",{anchor:"100%",style:{padding:"10px",overflow:"hidden"},items:[c.iconComponent=Ext.create("Ext.Component",{cls:"ext-mb-icon",width:50,height:c.iconHeight,style:{"float":"left"}}),c.promptContainer=Ext.create("Ext.container.Container",{layout:{type:"anchor"},items:[c.msg=Ext.create("Ext.Component",{autoEl:{tag:"span"},cls:"ext-mb-text"}),c.textField=Ext.create("Ext.form.field.Text",{anchor:"100%",enableKeyEvents:true,listeners:{keydown:c.onPromptKey,scope:c}}),c.textArea=Ext.create("Ext.form.field.TextArea",{anchor:"100%",height:75})]})]});c.progressBar=Ext.create("Ext.ProgressBar",{anchor:"-10",style:"margin-left:10px"});c.items=[c.topContainer,c.progressBar];c.msgButtons=[];for(b=0;b<4;b++){a=c.makeButton(b);c.msgButtons[a.itemId]=a;c.msgButtons.push(a)}c.bottomTb=Ext.create("Ext.toolbar.Toolbar",{ui:"footer",dock:"bottom",layout:{pack:"center"},items:[c.msgButtons[0],c.msgButtons[1],c.msgButtons[2],c.msgButtons[3]]});c.dockedItems=[c.bottomTb];c.callParent()},onPromptKey:function(a,c){var b=this,f;if(c.keyCode===Ext.EventObject.RETURN||c.keyCode===10){if(b.msgButtons.ok.isVisible()){f=true;b.msgButtons.ok.handler.call(b,b.msgButtons.ok)}else{if(b.msgButtons.yes.isVisible()){b.msgButtons.yes.handler.call(b,b.msgButtons.yes);f=true}}if(f){b.textField.blur()}}},reconfigure:function(a){var e=this,c=a.buttons||0,g=true,f=e.maxWidth,b;a=a||{};e.cfg=a;if(a.width){f=a.width}delete e.defaultFocus;e.animateTarget=a.animateTarget||undefined;e.modal=a.modal!==false;if(a.title){e.setTitle(a.title||"&#160;")}if(!e.rendered){e.width=f;e.render(Ext.getBody())}else{e.setSize(f,e.maxHeight)}e.setPosition(-10000,-10000);e.closable=a.closable&&!a.wait;e.header.child("[type=close]").setVisible(a.closable!==false);if(!a.title&&!e.closable){e.header.hide()}else{e.header.show()}e.liveDrag=!a.proxyDrag;e.userCallback=Ext.Function.bind(a.callback||a.fn||Ext.emptyFn,a.scope||Ext.global);e.setIcon(a.icon);if(a.msg){e.msg.update(a.msg);e.msg.show()}else{e.msg.hide()}if(a.prompt||a.multiline){e.multiline=a.multiline;if(a.multiline){e.textArea.setValue(a.value);e.textArea.setHeight(a.defaultTextHeight||e.defaultTextHeight);e.textArea.show();e.textField.hide();e.defaultFocus=e.textArea}else{e.textField.setValue(a.value);e.textArea.hide();e.textField.show();e.defaultFocus=e.textField}}else{e.textArea.hide();e.textField.hide()}if(a.progress||a.wait){e.progressBar.show();e.updateProgress(0,a.progressText);if(a.wait===true){e.progressBar.wait(a.waitConfig)}}else{e.progressBar.hide()}for(b=0;b<4;b++){if(c&Math.pow(2,b)){if(!e.defaultFocus){e.defaultFocus=e.msgButtons[b]}e.msgButtons[b].show();g=false}else{e.msgButtons[b].hide()}}if(g){e.bottomTb.hide()}else{e.bottomTb.show()}},show:function(a){var b=this;b.reconfigure(a);b.addCls(a.cls);if(a.animateTarget){b.doAutoSize(true);b.callParent()}else{b.callParent();b.doAutoSize(true)}return b},afterShow:function(){if(this.animateTarget){this.center()}this.callParent(arguments)},doAutoSize:function(b){var f=this,e=f.iconComponent,g=f.iconHeight;if(!Ext.isDefined(f.frameWidth)){f.frameWidth=f.el.getWidth()-f.body.getWidth()}e.setHeight(g);f.minWidth=f.cfg.minWidth||Ext.getClass(this).prototype.minWidth;f.topContainer.doLayout();if(Ext.isIE6||Ext.isIEQuirks){f.textField.setCalculatedSize(9);f.textArea.setCalculatedSize(9)}var c=f.cfg.width||f.msg.getWidth()+e.getWidth()+25,a=(f.header.rendered?f.header.getHeight():0)+Math.max(f.promptContainer.getHeight(),e.getHeight())+f.progressBar.getHeight()+(f.bottomTb.rendered?f.bottomTb.getHeight():0)+20;e.setHeight(Math.max(g,f.msg.getHeight()));f.setSize(c+f.frameWidth,a+f.frameWidth);if(b){f.center()}return f},updateText:function(a){this.msg.update(a);return this.doAutoSize(true)},setIcon:function(a){var b=this;b.iconComponent.removeCls(b.iconCls);if(a){b.iconComponent.show();b.iconComponent.addCls(Ext.baseCSSPrefix+"dlg-icon");b.iconComponent.addCls(b.iconCls=a)}else{b.iconComponent.removeCls(Ext.baseCSSPrefix+"dlg-icon");b.iconComponent.hide()}return b},updateProgress:function(b,a,c){this.progressBar.updateProgress(b,a);if(c){this.updateText(c)}return this},onEsc:function(){if(this.closable!==false){this.callParent(arguments)}},confirm:function(a,e,c,b){if(Ext.isString(a)){a={title:a,icon:"ext-mb-question",msg:e,buttons:this.YESNO,callback:c,scope:b}}return this.show(a)},prompt:function(b,g,e,c,a,f){if(Ext.isString(b)){b={prompt:true,title:b,minWidth:this.minPromptWidth,msg:g,buttons:this.OKCANCEL,callback:e,scope:c,multiline:a,value:f}}return this.show(b)},wait:function(a,c,b){if(Ext.isString(a)){a={title:c,msg:a,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:b}}return this.show(a)},alert:function(a,e,c,b){if(Ext.isString(a)){a={title:a,msg:e,buttons:this.OK,fn:c,scope:b,minWidth:this.minWidth}}return this.show(a)},progress:function(a,c,b){if(Ext.isString(a)){a={title:a,msg:c,progress:true,progressText:b}}return this.show(a)}},function(){Ext.MessageBox=Ext.Msg=new this()});Ext.define("Ext.form.Basic",{extend:"Ext.util.Observable",alternateClassName:"Ext.form.BasicForm",requires:["Ext.util.MixedCollection","Ext.form.action.Load","Ext.form.action.Submit","Ext.window.MessageBox","Ext.data.Errors","Ext.util.DelayedTask"],constructor:function(a,b){var c=this,e=c.onItemAddOrRemove;c.owner=a;c.mon(a,{add:e,remove:e,scope:c});Ext.apply(c,b);if(Ext.isString(c.paramOrder)){c.paramOrder=c.paramOrder.split(/[\s,|]/)}c.checkValidityTask=Ext.create("Ext.util.DelayedTask",c.checkValidity,c);c.addEvents("beforeaction","actionfailed","actioncomplete","validitychange","dirtychange");c.callParent()},initialize:function(){this.initialized=true;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:false,waitTitle:"Please Wait...",trackResetOnLoad:false,wasDirty:false,destroy:function(){this.clearListeners();this.checkValidityTask.cancel()},onItemAddOrRemove:function(c,g){var e=this,f=!!g.ownerCt,b=g.isContainer;function a(h){e[f?"mon":"mun"](h,{validitychange:e.checkValidity,dirtychange:e.checkDirty,scope:e,buffer:100});delete e._fields}if(g.isFormField){a(g)}else{if(b){if(g.isDestroyed){delete e._fields}else{Ext.Array.forEach(g.query("[isFormField]"),a)}}}delete this._boundItems;if(e.initialized){e.checkValidityTask.delay(10)}},getFields:function(){var a=this._fields;if(!a){a=this._fields=Ext.create("Ext.util.MixedCollection");a.addAll(this.owner.query("[isFormField]"))}return a},getBoundItems:function(){var a=this._boundItems;if(!a||a.getCount()===0){a=this._boundItems=Ext.create("Ext.util.MixedCollection");a.addAll(this.owner.query("[formBind]"))}return a},hasInvalidField:function(){return !!this.getFields().findBy(function(c){var a=c.preventMark,b;c.preventMark=true;b=c.isValid();c.preventMark=a;return !b})},isValid:function(){var a=this,b;a.batchLayouts(function(){b=a.getFields().filterBy(function(c){return !c.validate()})});return b.length<1},checkValidity:function(){var b=this,a=!b.hasInvalidField();if(a!==b.wasValid){b.onValidityChange(a);b.fireEvent("validitychange",b,a);b.wasValid=a}},onValidityChange:function(b){var a=this.getBoundItems();if(a){a.each(function(c){if(c.disabled===b){c.setDisabled(!b)}})}},isDirty:function(){return !!this.getFields().findBy(function(a){return a.isDirty()})},checkDirty:function(){var a=this.isDirty();if(a!==this.wasDirty){this.fireEvent("dirtychange",this,a);this.wasDirty=a}},hasUpload:function(){return !!this.getFields().findBy(function(a){return a.isFileUpload()})},doAction:function(b,a){if(Ext.isString(b)){b=Ext.ClassManager.instantiateByAlias("formaction."+b,Ext.apply({},a,{form:this}))}if(this.fireEvent("beforeaction",this,b)!==false){this.beforeAction(b);Ext.defer(b.run,100,b)}return this},submit:function(a){return this.doAction(this.standardSubmit?"standardsubmit":this.api?"directsubmit":"submit",a)},load:function(a){return this.doAction(this.api?"directload":"load",a)},updateRecord:function(b){var a=b.fields,c=this.getFieldValues(),e,f={};a.each(function(g){e=g.name;if(e in c){f[e]=c[e]}});b.beginEdit();b.set(f);b.endEdit();return this},loadRecord:function(a){this._record=a;return this.setValues(a.data)},getRecord:function(){return this._record},beforeAction:function(c){var a=c.waitMsg,b=Ext.baseCSSPrefix+"mask-loading",e;this.getFields().each(function(g){if(g.isFormField&&g.syncValue){g.syncValue()}});if(a){e=this.waitMsgTarget;if(e===true){this.owner.el.mask(a,b)}else{if(e){e=this.waitMsgTarget=Ext.get(e);e.mask(a,b)}else{Ext.MessageBox.wait(a,c.waitTitle||this.waitTitle)}}}},afterAction:function(b,e){if(b.waitMsg){var a=Ext.MessageBox,c=this.waitMsgTarget;if(c===true){this.owner.el.unmask()}else{if(c){c.unmask()}else{a.updateProgress(1);a.hide()}}}if(e){if(b.reset){this.reset()}Ext.callback(b.success,b.scope||b,[this,b]);this.fireEvent("actioncomplete",this,b)}else{Ext.callback(b.failure,b.scope||b,[this,b]);this.fireEvent("actionfailed",this,b)}},findField:function(a){return this.getFields().findBy(function(b){return b.id===a||b.getName()===a})},markInvalid:function(c){var a=this;function b(e,g){var f=a.findField(e);if(f){f.markInvalid(g)}}if(Ext.isArray(c)){Ext.each(c,function(e){b(e.id,e.msg)})}else{if(c instanceof Ext.data.Errors){c.each(function(e){b(e.field,e.message)})}else{Ext.iterate(c,b)}}return this},setValues:function(a){var b=this;function c(e,g){var f=b.findField(e);if(f){f.setValue(g);if(b.trackResetOnLoad){f.resetOriginalValue()}}}if(Ext.isArray(a)){Ext.each(a,function(e){c(e.id,e.value)})}else{Ext.iterate(a,c)}return this},getValues:function(f,b,e,a){var c={};this.getFields().each(function(h){if(!b||h.isDirty()){var g=h[a?"getModelData":"getSubmitData"](e);if(Ext.isObject(g)){Ext.iterate(g,function(k,l){if(e&&l===""){l=h.emptyText||""}if(k in c){var m=c[k],i=Ext.isArray;if(!i(m)){m=c[k]=[m]}if(i(l)){c[k]=m.concat(l)}else{m.push(l)}}else{c[k]=l}})}}});if(f){c=Ext.Object.toQueryString(c)}return c},getFieldValues:function(a){return this.getValues(false,a,false,true)},clearInvalid:function(){var a=this;a.batchLayouts(function(){a.getFields().each(function(b){b.clearInvalid()})});return a},reset:function(){var a=this;a.batchLayouts(function(){a.getFields().each(function(b){b.reset()})});return a},applyToFields:function(a){this.getFields().each(function(b){Ext.apply(b,a)});return this},applyIfToFields:function(a){this.getFields().each(function(b){Ext.applyIf(b,a)});return this},batchLayouts:function(b){var c=this,a=new Ext.util.HashMap();c.getFields().each(function(f){var e=f.ownerCt;if(!a.contains(e)){a.add(e);e.oldSuspendLayout=e.suspendLayout;e.suspendLayout=true}});b();a.each(function(f,e){e.suspendLayout=e.oldSuspendLayout;delete e.oldSuspendLayout});c.owner.doComponentLayout()}});Ext.define("Ext.tip.Tip",{extend:"Ext.panel.Panel",requires:["Ext.layout.component.Tip"],alternateClassName:"Ext.Tip",minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:true,frame:false,autoRender:true,hidden:true,baseCls:Ext.baseCSSPrefix+"tip",floating:{shadow:true,shim:true,constrain:true},focusOnToFront:false,componentLayout:"tip",closeAction:"hide",ariaRole:"tooltip",initComponent:function(){var a=this;a.floating=Ext.apply({},{shadow:a.shadow},a.self.prototype.floating);a.callParent(arguments);a.constrain=a.constrain||a.constrainPosition},showAt:function(b){var a=this;this.callParent(arguments);if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true)}},showBy:function(a,b){this.showAt(this.el.getAlignToXY(a,b||this.defaultAlign))},initDraggable:function(){var a=this;a.draggable={el:a.getDragEl(),delegate:a.header.el,constrain:a,constrainTo:a.el.getScopeParent()};Ext.Component.prototype.initDraggable.call(a)},ghost:undefined,unghost:undefined});Ext.define("Ext.tip.ToolTip",{extend:"Ext.tip.Tip",alias:"widget.tooltip",alternateClassName:"Ext.ToolTip",showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,quickShowInterval:250,initComponent:function(){var a=this;a.callParent(arguments);a.lastActive=new Date();a.setTarget(a.target);a.origAnchor=a.anchor},onRender:function(b,a){var c=this;c.callParent(arguments);c.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+c.getAnchorPosition();c.anchorEl=c.el.createChild({cls:Ext.baseCSSPrefix+"tip-anchor "+c.anchorCls})},afterRender:function(){var a=this,b;a.callParent(arguments);b=parseInt(a.el.getZIndex(),10)||0;a.anchorEl.setStyle("z-index",b+1).setVisibilityMode(Ext.Element.DISPLAY)},setTarget:function(e){var b=this,a=Ext.get(e),c;if(b.target){c=Ext.get(b.target);b.mun(c,"mouseover",b.onTargetOver,b);b.mun(c,"mouseout",b.onTargetOut,b);b.mun(c,"mousemove",b.onMouseMove,b)}b.target=a;if(a){b.mon(a,{freezeEvent:true,mouseover:b.onTargetOver,mouseout:b.onTargetOut,mousemove:b.onMouseMove,scope:b})}if(b.anchor){b.anchorTarget=b.target}},onMouseMove:function(f){var b=this,a=b.delegate?f.getTarget(b.delegate):b.triggerElement=true,c;if(a){b.targetXY=f.getXY();if(a===b.triggerElement){if(!b.hidden&&b.trackMouse){c=b.getTargetXY();if(b.constrainPosition){c=b.el.adjustForConstraints(c,b.el.getScopeParent())}b.setPagePosition(c)}}else{b.hide();b.lastActive=new Date(0);b.onTargetOver(f)}}else{if((!b.closable&&b.isVisible())&&b.autoHide!==false){b.hide()}}},getTargetXY:function(){var k=this,e;if(k.delegate){k.anchorTarget=k.triggerElement}if(k.anchor){k.targetCounter++;var c=k.getOffsets(),p=(k.anchorToTarget&&!k.trackMouse)?k.el.getAlignToXY(k.anchorTarget,k.getAnchorAlign()):k.targetXY,a=Ext.Element.getViewWidth()-5,i=Ext.Element.getViewHeight()-5,m=document.documentElement,f=document.body,n=(m.scrollLeft||f.scrollLeft||0)+5,l=(m.scrollTop||f.scrollTop||0)+5,b=[p[0]+c[0],p[1]+c[1]],h=k.getSize(),g=k.constrainPosition;k.anchorEl.removeCls(k.anchorCls);if(k.targetCounter<2&&g){if(b[0]<n){if(k.anchorToTarget){k.defaultAlign="l-r";if(k.mouseOffset){k.mouseOffset[0]*=-1}}k.anchor="left";return k.getTargetXY()}if(b[0]+h.width>a){if(k.anchorToTarget){k.defaultAlign="r-l";if(k.mouseOffset){k.mouseOffset[0]*=-1}}k.anchor="right";return k.getTargetXY()}if(b[1]<l){if(k.anchorToTarget){k.defaultAlign="t-b";if(k.mouseOffset){k.mouseOffset[1]*=-1}}k.anchor="top";return k.getTargetXY()}if(b[1]+h.height>i){if(k.anchorToTarget){k.defaultAlign="b-t";if(k.mouseOffset){k.mouseOffset[1]*=-1}}k.anchor="bottom";return k.getTargetXY()}}k.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+k.getAnchorPosition();k.anchorEl.addCls(k.anchorCls);k.targetCounter=0;return b}else{e=k.getMouseOffset();return(k.targetXY)?[k.targetXY[0]+e[0],k.targetXY[1]+e[1]]:e}},getMouseOffset:function(){var a=this,b=a.anchor?[0,0]:[15,18];if(a.mouseOffset){b[0]+=a.mouseOffset[0];b[1]+=a.mouseOffset[1]}return b},getAnchorPosition:function(){var b=this,a;if(b.anchor){b.tipAnchor=b.anchor.charAt(0)}else{a=b.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!a){Ext.Error.raise('The AnchorTip.defaultAlign value "'+b.defaultAlign+'" is invalid.')}b.tipAnchor=a[1].charAt(0)}switch(b.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var c=this,e,b,a=c.getAnchorPosition().charAt(0);if(c.anchorToTarget&&!c.trackMouse){switch(a){case"t":b=[0,9];break;case"b":b=[0,-13];break;case"r":b=[-13,0];break;default:b=[9,0];break}}else{switch(a){case"t":b=[-15-c.anchorOffset,30];break;case"b":b=[-19-c.anchorOffset,-13-c.el.dom.offsetHeight];break;case"r":b=[-15-c.el.dom.offsetWidth,-13-c.anchorOffset];break;default:b=[25,-13-c.anchorOffset];break}}e=c.getMouseOffset();b[0]+=e[0];b[1]+=e[1];return b},onTargetOver:function(c){var b=this,a;if(b.disabled||c.within(b.target.dom,true)){return}a=c.getTarget(b.delegate);if(a){b.triggerElement=a;b.clearTimer("hide");b.targetXY=c.getXY();b.delayShow()}},delayShow:function(){var a=this;if(a.hidden&&!a.showTimer){if(Ext.Date.getElapsed(a.lastActive)<a.quickShowInterval){a.show()}else{a.showTimer=Ext.defer(a.show,a.showDelay,a)}}else{if(!a.hidden&&a.autoHide!==false){a.show()}}},onTargetOut:function(b){var a=this;if(a.disabled||b.within(a.target.dom,true)){return}a.clearTimer("show");if(a.autoHide!==false){a.delayHide()}},delayHide:function(){var a=this;if(!a.hidden&&!a.hideTimer){a.hideTimer=Ext.defer(a.hide,a.hideDelay,a)}},hide:function(){var a=this;a.clearTimer("dismiss");a.lastActive=new Date();if(a.anchorEl){a.anchorEl.hide()}a.callParent(arguments);delete a.triggerElement},show:function(){var a=this;this.callParent();if(this.hidden===false){a.setPagePosition(-10000,-10000);if(a.anchor){a.anchor=a.origAnchor}a.showAt(a.getTargetXY());if(a.anchor){a.syncAnchor();a.anchorEl.show()}else{a.anchorEl.hide()}}},showAt:function(b){var a=this;a.lastActive=new Date();a.clearTimers();if(!a.isVisible()){this.callParent(arguments)}if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true)}if(a.dismissDelay&&a.autoHide!==false){a.dismissTimer=Ext.defer(a.hide,a.dismissDelay,a)}if(a.anchor){a.syncAnchor();if(!a.anchorEl.isVisible()){a.anchorEl.show()}}else{a.anchorEl.hide()}},syncAnchor:function(){var c=this,a,b,e;switch(c.tipAnchor.charAt(0)){case"t":a="b";b="tl";e=[20+c.anchorOffset,1];break;case"r":a="l";b="tr";e=[-1,12+c.anchorOffset];break;case"b":a="t";b="bl";e=[20+c.anchorOffset,-1];break;default:a="r";b="tl";e=[1,12+c.anchorOffset];break}c.anchorEl.alignTo(c.el,a+"-"+b,e)},setPagePosition:function(a,c){var b=this;b.callParent(arguments);if(b.anchor){b.syncAnchor()}},clearTimer:function(a){a=a+"Timer";clearTimeout(this[a]);delete this[a]},clearTimers:function(){var a=this;a.clearTimer("show");a.clearTimer("dismiss");a.clearTimer("hide")},onShow:function(){var a=this;a.callParent();a.mon(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onHide:function(){var a=this;a.callParent();a.mun(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onDocMouseDown:function(b){var a=this;if(a.autoHide!==true&&!a.closable&&!b.within(a.el.dom)){a.disable();Ext.defer(a.doEnable,100,a)}},doEnable:function(){if(!this.isDestroyed){this.enable()}},onDisable:function(){this.callParent();this.clearTimers();this.hide()},beforeDestroy:function(){var a=this;a.clearTimers();Ext.destroy(a.anchorEl);delete a.anchorEl;delete a.target;delete a.anchorTarget;delete a.triggerElement;a.callParent()},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);this.callParent()}});Ext.define("Ext.tip.QuickTip",{extend:"Ext.tip.ToolTip",alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor"},initComponent:function(){var a=this;a.target=a.target||Ext.getDoc();a.targets=a.targets||{};a.callParent()},register:function(c){var h=Ext.isArray(c)?c:arguments,e=0,a=h.length,g,b,f;for(;e<a;e++){c=h[e];g=c.target;if(g){if(Ext.isArray(g)){for(b=0,f=g.length;b<f;b++){this.targets[Ext.id(g[b])]=c}}else{this.targets[Ext.id(g)]=c}}}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(a){var b=this,c=b.activeTarget;a=Ext.get(a).dom;if(b.isVisible()){if(c&&c.el==a){b.hide()}}else{if(c&&c.el==a){b.clearTimer("show")}}},getTipCfg:function(f){var c=f.getTarget(),b=c.title,a;if(this.interceptTitles&&b&&Ext.isString(b)){c.qtip=b;c.removeAttribute("title");f.preventDefault();return{text:b}}else{a=this.tagConfig;c=f.getTarget("["+a.namespace+a.attribute+"]");if(c){return{target:c,text:c.getAttribute(a.namespace+a.attribute)}}}},onTargetOver:function(i){var g=this,h=i.getTarget(),k,c,f,b,a;if(g.disabled){return}g.targetXY=i.getXY();if(!h||h.nodeType!==1||h==document||h==document.body){return}if(g.activeTarget&&((h==g.activeTarget.el)||Ext.fly(g.activeTarget.el).contains(h))){g.clearTimer("hide");g.show();return}if(h){Ext.Object.each(g.targets,function(e,l){var m=Ext.fly(l.target);if(m&&(m.dom===h||m.contains(h))){k=m.dom;return false}});if(k){g.activeTarget=g.targets[k.id];g.activeTarget.el=h;g.anchor=g.activeTarget.anchor;if(g.anchor){g.anchorTarget=h}g.delayShow();return}}k=Ext.get(h);c=g.tagConfig;f=c.namespace;b=g.getTipCfg(i);if(b){if(b.target){h=b.target;k=Ext.get(h)}a=k.getAttribute(f+c.hide);g.activeTarget={el:h,text:b.text,width:+k.getAttribute(f+c.width)||null,autoHide:a!="user"&&a!=="false",title:k.getAttribute(f+c.title),cls:k.getAttribute(f+c.cls),align:k.getAttribute(f+c.align)};g.anchor=k.getAttribute(f+c.anchor);if(g.anchor){g.anchorTarget=h}g.delayShow()}},onTargetOut:function(b){var a=this;if(a.activeTarget&&b.within(a.activeTarget.el)&&!a.getTipCfg(b)){return}a.clearTimer("show");if(a.autoHide!==false){a.delayHide()}},showAt:function(c){var a=this,b=a.activeTarget;if(b){if(!a.rendered){a.render(Ext.getBody());a.activeTarget=b}if(b.title){a.setTitle(b.title||"");a.header.show()}else{a.header.hide()}a.body.update(b.text);a.autoHide=b.autoHide;a.dismissDelay=b.dismissDelay||a.dismissDelay;if(a.lastCls){a.el.removeCls(a.lastCls);delete a.lastCls}if(b.cls){a.el.addCls(b.cls);a.lastCls=b.cls}a.setWidth(b.width);if(a.anchor){a.constrainPosition=false}else{if(b.align){c=a.el.getAlignToXY(b.el,b.align);a.constrainPosition=false}else{a.constrainPosition=true}}}a.callParent([c])},hide:function(){delete this.activeTarget;this.callParent()}});Ext.define("Ext.tip.QuickTipManager",function(){var b,a=false;return{requires:["Ext.tip.QuickTip"],singleton:true,alternateClassName:"Ext.QuickTips",init:function(g,e){if(!b){if(!Ext.isReady){Ext.onReady(function(){Ext.tip.QuickTipManager.init(g)});return}var c=Ext.apply({disabled:a},e),f=c.className,h=c.xtype;if(f){delete c.className}else{if(h){f="widget."+h;delete c.xtype}}if(g!==false){c.renderTo=document.body;if(c.renderTo.tagName!="BODY"){Ext.Error.raise({sourceClass:"Ext.tip.QuickTipManager",sourceMethod:"init",msg:"Cannot init QuickTipManager: no document body"})}}b=Ext.create(f||"Ext.tip.QuickTip",c)}},destroy:function(){if(b){var c;b.destroy();b=c}},ddDisable:function(){if(b&&!a){b.disable()}},ddEnable:function(){if(b&&!a){b.enable()}},enable:function(){if(b){b.enable()}a=false},disable:function(){if(b){b.disable()}a=true},isEnabled:function(){return b!==undefined&&!b.disabled},getQuickTip:function(){return b},register:function(){b.register.apply(b,arguments)},unregister:function(){b.unregister.apply(b,arguments)},tips:function(){b.register.apply(b,arguments)}}}());Ext.define("Ext.app.Application",{extend:"Ext.app.Controller",requires:["Ext.ModelManager","Ext.data.Model","Ext.data.StoreManager","Ext.tip.QuickTipManager","Ext.ComponentManager","Ext.app.EventBus"],scope:undefined,enableQuickTips:true,appFolder:"app",autoCreateViewport:false,constructor:function(b){b=b||{};Ext.apply(this,b);var e=b.requires||[];Ext.Loader.setPath(this.name,this.appFolder);if(this.paths){Ext.Object.each(this.paths,function(h,i){Ext.Loader.setPath(h,i)})}this.callParent(arguments);this.eventbus=Ext.create("Ext.app.EventBus");var g=Ext.Array.from(this.controllers),f=g&&g.length,c,a;this.controllers=Ext.create("Ext.util.MixedCollection");if(this.autoCreateViewport){e.push(this.getModuleClassName("Viewport","view"))}for(c=0;c<f;c++){e.push(this.getModuleClassName(g[c],"controller"))}Ext.require(e);Ext.onReady(function(){for(c=0;c<f;c++){a=this.getController(g[c]);a.init(this)}this.onBeforeLaunch.call(this)},this)},control:function(b,c,a){this.eventbus.control(b,c,a)},launch:Ext.emptyFn,onBeforeLaunch:function(){if(this.enableQuickTips){Ext.tip.QuickTipManager.init()}if(this.autoCreateViewport){this.getView("Viewport").create()}this.launch.call(this.scope||this);this.launched=true;this.fireEvent("launch",this);this.controllers.each(function(a){a.onLaunch(this)},this)},getModuleClassName:function(a,c){var b=Ext.Loader.getPrefix(a);if(b.length>0&&b!==a){return a}return this.name+"."+c+"."+a},getController:function(b){var a=this.controllers.get(b);if(!a){a=Ext.create(this.getModuleClassName(b,"controller"),{application:this,id:b});this.controllers.add(a)}return a},getStore:function(b){var a=Ext.StoreManager.get(b);if(!a){a=Ext.create(this.getModuleClassName(b,"store"),{storeId:b})}return a},getModel:function(a){a=this.getModuleClassName(a,"model");return Ext.ModelManager.getModel(a)},getView:function(a){a=this.getModuleClassName(a,"view");return Ext.ClassManager.get(a)}});Ext.define("Ext.util.Point",{extend:"Ext.util.Region",statics:{fromEvent:function(a){a=(a.changedTouches&&a.changedTouches.length>0)?a.changedTouches[0]:a;return new this(a.pageX,a.pageY)}},constructor:function(a,b){this.callParent([b,a,b,a])},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(a){return(this.x==a.x&&this.y==a.y)},isWithin:function(b,a){if(!Ext.isObject(a)){a={x:a,y:a}}return(this.x<=b.x+a.x&&this.x>=b.x-a.x&&this.y<=b.y+a.y&&this.y>=b.y-a.y)},roundedEquals:function(a){return(Math.round(this.x)==Math.round(a.x)&&Math.round(this.y)==Math.round(a.y))}},function(){this.prototype.translate=Ext.util.Region.prototype.translateBy});Ext.define("Ext.Layer",{uses:["Ext.Shadow"],statics:{shims:[]},extend:"Ext.Element",constructor:function(b,a){b=b||{};var c=this,e=Ext.DomHelper,g=b.parentEl,f=g?Ext.getDom(g):document.body,h=b.hideMode;if(a){c.dom=Ext.getDom(a)}if(!c.dom){c.dom=e.append(f,b.dh||{tag:"div",cls:Ext.baseCSSPrefix+"layer"})}else{c.addCls(Ext.baseCSSPrefix+"layer");if(!c.dom.parentNode){f.appendChild(c.dom)}}if(b.cls){c.addCls(b.cls)}c.constrain=b.constrain!==false;if(h){c.setVisibilityMode(Ext.Element[h.toUpperCase()]);if(c.visibilityMode==Ext.Element.ASCLASS){c.visibilityCls=b.visibilityCls}}else{if(b.useDisplay){c.setVisibilityMode(Ext.Element.DISPLAY)}else{c.setVisibilityMode(Ext.Element.VISIBILITY)}}if(b.id){c.id=c.dom.id=b.id}else{c.id=Ext.id(c.dom)}c.position("absolute");if(b.shadow){c.shadowOffset=b.shadowOffset||4;c.shadow=Ext.create("Ext.Shadow",{offset:c.shadowOffset,mode:b.shadow});c.disableShadow()}else{c.shadowOffset=0}c.useShim=b.shim!==false&&Ext.useShims;if(b.hidden===true){c.hide()}else{c.show()}},getZIndex:function(){return parseInt((this.getShim()||this).getStyle("z-index"),10)},getShim:function(){var b=this,c,a;if(!b.useShim){return null}if(!b.shim){c=b.self.shims.shift();if(!c){c=b.createShim();c.enableDisplayMode("block");c.hide()}a=b.dom.parentNode;if(c.dom.parentNode!=a){a.insertBefore(c.dom,b.dom)}b.shim=c}return b.shim},hideShim:function(){var a=this;if(a.shim){a.shim.setDisplayed(false);a.self.shims.push(a.shim);delete a.shim}},disableShadow:function(){var a=this;if(a.shadow&&!a.shadowDisabled){a.shadowDisabled=true;a.shadow.hide();a.lastShadowOffset=a.shadowOffset;a.shadowOffset=0}},enableShadow:function(a){var b=this;if(b.shadow&&b.shadowDisabled){b.shadowDisabled=false;b.shadowOffset=b.lastShadowOffset;delete b.lastShadowOffset;if(a){b.sync(true)}}},sync:function(b){var k=this,p=k.shadow,i,f,a;if(!k.updating&&k.isVisible()&&(p||k.useShim)){var e=k.getShim(),c=k.getLeft(true),q=k.getTop(true),n=k.dom.offsetWidth,g=k.dom.offsetHeight,m;if(p&&!k.shadowDisabled){if(b&&!p.isVisible()){p.show(k)}else{p.realign(c,q,n,g)}if(e){m=e.getStyle("z-index");if(m>k.zindex){k.shim.setStyle("z-index",k.zindex-2)}e.show();if(p.isVisible()){i=p.el.getXY();f=e.dom.style;a=p.el.getSize();if(Ext.supports.CSS3BoxShadow){a.height+=6;a.width+=4;i[0]-=2;i[1]-=4}f.left=(i[0])+"px";f.top=(i[1])+"px";f.width=(a.width)+"px";f.height=(a.height)+"px"}else{e.setSize(n,g);e.setLeftTop(c,q)}}}else{if(e){m=e.getStyle("z-index");if(m>k.zindex){k.shim.setStyle("z-index",k.zindex-2)}e.show();e.setSize(n,g);e.setLeftTop(c,q)}}}return k},remove:function(){this.hideUnders();this.callParent()},beginUpdate:function(){this.updating=true},endUpdate:function(){this.updating=false;this.sync(true)},hideUnders:function(){if(this.shadow){this.shadow.hide()}this.hideShim()},constrainXY:function(){if(this.constrain){var g=Ext.Element.getViewWidth(),b=Ext.Element.getViewHeight(),m=Ext.getDoc().getScroll(),l=this.getXY(),i=l[0],f=l[1],a=this.shadowOffset,k=this.dom.offsetWidth+a,c=this.dom.offsetHeight+a,e=false;if((i+k)>g+m.left){i=g-k-a;e=true}if((f+c)>b+m.top){f=b-c-a;e=true}if(i<m.left){i=m.left;e=true}if(f<m.top){f=m.top;e=true}if(e){Ext.Layer.superclass.setXY.call(this,[i,f]);this.sync()}}return this},getConstrainOffset:function(){return this.shadowOffset},setVisible:function(f,b,e,h,g){var c=this,a;a=function(){if(f){c.sync(true)}if(h){h()}};if(!f){c.hideUnders(true)}c.callParent([f,b,e,h,g]);if(!b){a()}return c},beforeFx:function(){this.beforeAction();return this.callParent(arguments)},afterFx:function(){this.callParent(arguments);this.sync(this.isVisible())},beforeAction:function(){if(!this.updating&&this.shadow){this.shadow.hide()}},setLeft:function(a){this.callParent(arguments);return this.sync()},setTop:function(a){this.callParent(arguments);return this.sync()},setLeftTop:function(b,a){this.callParent(arguments);return this.sync()},setXY:function(e,a,c,g,f){var b=this;g=b.createCB(g);b.fixDisplay();b.beforeAction();b.callParent([e,a,c,g,f]);if(!a){g()}return b},createCB:function(c){var a=this,b=a.shadow&&a.shadow.isVisible();return function(){a.constrainXY();a.sync(b);if(c){c()}}},setX:function(a,b,c,f,e){this.setXY([a,this.getY()],b,c,f,e);return this},setY:function(f,a,b,e,c){this.setXY([this.getX(),f],a,b,e,c);return this},setSize:function(a,c,b,f,i,g){var e=this;i=e.createCB(i);e.beforeAction();e.callParent([a,c,b,f,i,g]);if(!b){i()}return e},setWidth:function(a,b,e,g,f){var c=this;g=c.createCB(g);c.beforeAction();c.callParent([a,b,e,g,f]);if(!b){g()}return c},setHeight:function(b,a,e,g,f){var c=this;g=c.createCB(g);c.beforeAction();c.callParent([b,a,e,g,f]);if(!a){g()}return c},setBounds:function(h,g,a,k,b,c,i,e){var f=this;i=f.createCB(i);f.beforeAction();if(!b){Ext.Layer.superclass.setXY.call(f,[h,g]);Ext.Layer.superclass.setSize.call(f,a,k);i()}else{f.callParent([h,g,a,k,b,c,i,e])}return f},setZIndex:function(a){var b=this;b.zindex=a;if(b.getShim()){b.shim.setStyle("z-index",a++)}if(b.shadow){b.shadow.setZIndex(a++)}return b.setStyle("z-index",a)},setOpacity:function(a){if(this.shadow){this.shadow.setOpacity(a)}return this.callParent(arguments)}});Ext.define("Ext.PluginManager",{extend:"Ext.AbstractManager",alternateClassName:"Ext.PluginMgr",singleton:true,typeName:"ptype",create:function(a,b){if(a.init){return a}else{return Ext.createByAlias("plugin."+(a.ptype||b),a)}},findByType:function(c,g){var f=[],b=this.types;for(var a in b){if(!b.hasOwnProperty(a)){continue}var e=b[a];if(e.type==c&&(!g||(g===true&&e.isDefault))){f.push(e)}}return f}},function(){Ext.preg=function(){return Ext.PluginManager.registerType.apply(Ext.PluginManager,arguments)}});Ext.define("Ext.layout.component.Auto",{alias:"layout.autocomponent",extend:"Ext.layout.component.Component",type:"autocomponent",onLayout:function(b,a){this.setTargetSize(b,a)}});Ext.define("Ext.data.Request",{action:undefined,params:undefined,method:"GET",url:undefined,constructor:function(a){Ext.apply(this,a)}});Ext.define("Ext.data.Batch",{mixins:{observable:"Ext.util.Observable"},autoStart:false,current:-1,total:0,isRunning:false,isComplete:false,hasException:false,pauseOnException:true,constructor:function(a){var b=this;b.addEvents("complete","exception","operationcomplete");b.mixins.observable.constructor.call(b,a);b.operations=[]},add:function(a){this.total++;a.setBatch(this);this.operations.push(a)},start:function(){this.hasException=false;this.isRunning=true;this.runNextOperation()},runNextOperation:function(){this.runOperation(this.current+1)},pause:function(){this.isRunning=false},runOperation:function(e){var f=this,c=f.operations,b=c[e],a;if(b===undefined){f.isRunning=false;f.isComplete=true;f.fireEvent("complete",f,c[c.length-1])}else{f.current=e;a=function(g){var h=g.hasException();if(h){f.hasException=true;f.fireEvent("exception",f,g)}else{f.fireEvent("operationcomplete",f,g)}if(h&&f.pauseOnException){f.pause()}else{g.setCompleted();f.runNextOperation()}};b.setStarted();f.proxy[b.action](b,a,f)}}});Ext.define("Ext.LoadMask",{extend:"Ext.Component",alias:"widget.loadmask",mixins:{floating:"Ext.util.Floating"},uses:["Ext.data.StoreManager"],msg:"Loading...",msgCls:Ext.baseCSSPrefix+"mask-loading",useMsg:true,disabled:false,baseCls:Ext.baseCSSPrefix+"mask-msg",renderTpl:'<div style="position:relative" class="{msgCls}"></div>',modal:true,floating:{shadow:"frame"},focusOnToFront:false,constructor:function(b,a){var c=this;if(b.isComponent){c.ownerCt=b;c.bindComponent(b)}else{c.ownerCt=new Ext.Component({el:Ext.get(b),rendered:true,componentLayoutCounter:1});c.container=b}c.callParent([a]);if(c.store){c.bindStore(c.store,true)}c.renderData={msgCls:c.msgCls};c.renderSelectors={msgEl:"div"}},bindComponent:function(a){this.mon(a,{resize:this.onComponentResize,scope:this})},afterRender:function(){this.callParent(arguments);this.container=this.floatParent.getContentTarget()},onComponentResize:function(){var a=this;if(a.rendered&&a.isVisible()){a.toFront();a.center()}},bindStore:function(a,b){var c=this;if(!b&&c.store){c.mun(c.store,{scope:c,beforeload:c.onBeforeLoad,load:c.onLoad,exception:c.onLoad});if(!a){c.store=null}}if(a){a=Ext.data.StoreManager.lookup(a);c.mon(a,{scope:c,beforeload:c.onBeforeLoad,load:c.onLoad,exception:c.onLoad})}c.store=a;if(a&&a.isLoading()){c.onBeforeLoad()}},onDisable:function(){this.callParent(arguments);if(this.loading){this.onLoad()}},onBeforeLoad:function(){var c=this,a=c.ownerCt||c.floatParent,b;if(!this.disabled){if(a.componentLayoutCounter){Ext.Component.prototype.show.call(c)}else{b=a.afterComponentLayout;a.afterComponentLayout=function(){a.afterComponentLayout=b;b.apply(a,arguments);if(c.loading){Ext.Component.prototype.show.call(c)}}}}},onHide:function(){var a=this;a.callParent(arguments);a.showOnParentShow=true},onShow:function(){var b=this,a=b.msgEl;b.callParent(arguments);b.loading=true;if(b.useMsg){a.show().update(b.msg)}else{a.parent().hide()}},afterShow:function(){this.callParent(arguments);this.center()},onLoad:function(){this.loading=false;Ext.Component.prototype.hide.call(this)}});Ext.define("Ext.panel.Tool",{extend:"Ext.Component",requires:["Ext.tip.QuickTipManager"],alias:"widget.tool",baseCls:Ext.baseCSSPrefix+"tool",disabledCls:Ext.baseCSSPrefix+"tool-disabled",toolPressedCls:Ext.baseCSSPrefix+"tool-pressed",toolOverCls:Ext.baseCSSPrefix+"tool-over",ariaRole:"button",renderTpl:['<img id="{id}-toolEl" src="{blank}" class="{baseCls}-{type}" role="presentation"/>'],tooltipType:"qtip",stopEvent:true,initComponent:function(){var b=this;b.addEvents("click");var a=["close","collapse","down","expand","gear","help","left","maximize","minimize","minus","move","next","pin","plus","prev","print","refresh","resize","restore","right","save","search","toggle","unpin","up"];if(b.id&&Ext.Array.indexOf(a,b.id)>-1&&Ext.global.console){Ext.global.console.warn("When specifying a tool you should use the type option, the id can conflict now that tool is a Component")}b.type=b.type||b.id;Ext.applyIf(b.renderData,{baseCls:b.baseCls,blank:Ext.BLANK_IMAGE_URL,type:b.type});b.addChildEls("toolEl");b.tooltip=b.tooltip||b.qtip;b.callParent()},afterRender:function(){var b=this,a;b.callParent(arguments);if(b.tooltip){if(Ext.isObject(b.tooltip)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.id},b.tooltip))}else{a=b.tooltipType=="qtip"?"data-qtip":"title";b.toolEl.dom.setAttribute(a,b.tooltip)}}b.mon(b.toolEl,{click:b.onClick,mousedown:b.onMouseDown,mouseover:b.onMouseOver,mouseout:b.onMouseOut,scope:b})},setType:function(a){var b=this;b.type=a;if(b.rendered){b.toolEl.dom.className=b.baseCls+"-"+a}return b},bindTo:function(a){this.owner=a},onClick:function(f,c){var b=this,a;if(b.disabled){return false}a=b.owner||b.ownerCt;b.el.removeCls(b.toolPressedCls);b.el.removeCls(b.toolOverCls);if(b.stopEvent!==false){f.stopEvent()}Ext.callback(b.handler,b.scope||b,[f,c,a,b]);b.fireEvent("click",b,f);return true},onDestroy:function(){if(Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.id)}this.callParent()},onMouseDown:function(){if(this.disabled){return false}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled){return false}this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}});Ext.define("Ext.util.CSS",function(){var e=null;var c=document;var b=/(-[a-z])/gi;var a=function(f,g){return g.charAt(1).toUpperCase()};return{singleton:true,constructor:function(){this.rules={};this.initialized=false},createStyleSheet:function(h,l){var g,f=c.getElementsByTagName("head")[0],k=c.createElement("style");k.setAttribute("type","text/css");if(l){k.setAttribute("id",l)}if(Ext.isIE){f.appendChild(k);g=k.styleSheet;g.cssText=h}else{try{k.appendChild(c.createTextNode(h))}catch(i){k.cssText=h}f.appendChild(k);g=k.styleSheet?k.styleSheet:(k.sheet||c.styleSheets[c.styleSheets.length-1])}this.cacheStyleSheet(g);return g},removeStyleSheet:function(g){var f=document.getElementById(g);if(f){f.parentNode.removeChild(f)}},swapStyleSheet:function(i,f){var h=document;this.removeStyleSheet(i);var g=h.createElement("link");g.setAttribute("rel","stylesheet");g.setAttribute("type","text/css");g.setAttribute("id",i);g.setAttribute("href",f);h.getElementsByTagName("head")[0].appendChild(g)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(k){if(!e){e={}}try{var n=k.cssRules||k.rules,l,h=n.length-1,f,g;for(;h>=0;--h){l=n[h].selectorText;if(l){l=l.split(",");g=l.length;for(f=0;f<g;f++){e[Ext.String.trim(l[f]).toLowerCase()]=n[h]}}}}catch(m){}},getRules:function(g){if(e===null||g){e={};var k=c.styleSheets,h=0,f=k.length;for(;h<f;h++){try{if(!k[h].disabled){this.cacheStyleSheet(k[h])}}catch(l){}}}return e},getRule:function(f,h){var g=this.getRules(h);if(!Ext.isArray(f)){return g[f.toLowerCase()]}for(var k=0;k<f.length;k++){if(g[f[k]]){return g[f[k].toLowerCase()]}}return null},updateRule:function(f,k,h){if(!Ext.isArray(f)){var l=this.getRule(f);if(l){l.style[k.replace(b,a)]=h;return true}}else{for(var g=0;g<f.length;g++){if(this.updateRule(f[g],k,h)){return true}}}return false}}}());Ext.define("Ext.resizer.Resizer",{mixins:{observable:"Ext.util.Observable"},uses:["Ext.resizer.ResizeTracker","Ext.Component"],alternateClassName:"Ext.Resizable",handleCls:Ext.baseCSSPrefix+"resizable-handle",pinnedCls:Ext.baseCSSPrefix+"resizable-pinned",overCls:Ext.baseCSSPrefix+"resizable-over",wrapCls:Ext.baseCSSPrefix+"resizable-wrap",dynamic:true,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:10000,maxWidth:10000,pinned:false,preserveRatio:false,transparent:false,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},constructor:function(a){var h=this,g,n,m=h.handles,b,l,f,c=0,k;this.addEvents("beforeresize","resizedrag","resize");if(Ext.isString(a)||Ext.isElement(a)||a.dom){g=a;a=arguments[1]||{};a.target=g}h.mixins.observable.constructor.call(h,a);g=h.target;if(g){if(g.isComponent){h.el=g.getEl();if(g.minWidth){h.minWidth=g.minWidth}if(g.minHeight){h.minHeight=g.minHeight}if(g.maxWidth){h.maxWidth=g.maxWidth}if(g.maxHeight){h.maxHeight=g.maxHeight}if(g.floating){if(!this.hasOwnProperty("handles")){this.handles="n ne e se s sw w nw"}}}else{h.el=h.target=Ext.get(g)}}else{h.target=h.el=Ext.get(h.el)}n=h.el.dom.tagName;if(n=="TEXTAREA"||n=="IMG"){h.originalTarget=h.target;h.target=h.el=h.el.wrap({cls:h.wrapCls,id:h.el.id+"-rzwrap"});h.el.setPositioning(h.originalTarget.getPositioning());h.originalTarget.clearPositioning();var e=h.originalTarget.getBox();h.el.setBox(e)}h.el.position();if(h.pinned){h.el.addCls(h.pinnedCls)}h.resizeTracker=Ext.create("Ext.resizer.ResizeTracker",{disabled:h.disabled,target:h.target,constrainTo:h.constrainTo,overCls:h.overCls,throttle:h.throttle,originalTarget:h.originalTarget,delegate:"."+h.handleCls,dynamic:h.dynamic,preserveRatio:h.preserveRatio,heightIncrement:h.heightIncrement,widthIncrement:h.widthIncrement,minHeight:h.minHeight,maxHeight:h.maxHeight,minWidth:h.minWidth,maxWidth:h.maxWidth});h.resizeTracker.on("mousedown",h.onBeforeResize,h);h.resizeTracker.on("drag",h.onResize,h);h.resizeTracker.on("dragend",h.onResizeEnd,h);if(h.handles=="all"){h.handles="n s e w ne nw se sw"}m=h.handles=h.handles.split(/ |\s*?[,;]\s*?/);l=h.possiblePositions;f=m.length;b=h.handleCls+" "+(this.target.isComponent?(h.target.baseCls+"-handle "):"")+h.handleCls+"-";for(;c<f;c++){if(m[c]&&l[m[c]]){k=l[m[c]];h[k]=Ext.create("Ext.Component",{owner:this,region:k,cls:b+k,renderTo:h.el});h[k].el.unselectable();if(h.transparent){h[k].el.setOpacity(0)}}}if(Ext.isNumber(h.width)){h.width=Ext.Number.constrain(h.width,h.minWidth,h.maxWidth)}if(Ext.isNumber(h.height)){h.height=Ext.Number.constrain(h.height,h.minHeight,h.maxHeight)}if(h.width!=null||h.height!=null){if(h.originalTarget){h.originalTarget.setWidth(h.width);h.originalTarget.setHeight(h.height)}h.resizeTo(h.width,h.height)}h.forceHandlesHeight()},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(c,f){var a=this.target.getBox();return this.fireEvent("beforeresize",this,a.width,a.height,f)},onResize:function(f,g){var c=this,a=c.target.getBox();c.forceHandlesHeight();return c.fireEvent("resizedrag",c,a.width,a.height,g)},onResizeEnd:function(f,g){var c=this,a=c.target.getBox();c.forceHandlesHeight();return c.fireEvent("resize",c,a.width,a.height,g)},resizeTo:function(b,a){this.target.setSize(b,a);this.fireEvent("resize",this,b,a,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var c;for(var b=0,a=this.handles.length;b<a;b++){c=this[this.possiblePositions[this.handles[b]]];delete c.owner;Ext.destroy(c)}},forceHandlesHeight:function(){var a=this,b;if(Ext.isIE6){b=a.east;if(b){b.setHeight(a.el.getHeight())}b=a.west;if(b){b.setHeight(a.el.getHeight())}a.el.repaint()}}});Ext.define("Ext.menu.KeyNav",{extend:"Ext.util.KeyNav",requires:["Ext.FocusManager"],constructor:function(b){var a=this;a.menu=b;a.callParent([b.el,{down:a.down,enter:a.enter,esc:a.escape,left:a.left,right:a.right,space:a.enter,tab:a.tab,up:a.up}])},down:function(b){var a=this,c=a.menu.focusedItem;if(c&&b.getKey()==Ext.EventObject.DOWN&&a.isWhitelisted(c)){return true}a.focusNextItem(1)},enter:function(b){var c=this.menu,a=c.focusedItem;if(c.activeItem){c.onClick(b)}else{if(a&&a.isFormField){return true}}},escape:function(a){Ext.menu.Manager.hideAll()},focusNextItem:function(g){var h=this.menu,b=h.items,e=h.focusedItem,c=e?b.indexOf(e):-1,a=c+g;while(a!=c){if(a<0){a=b.length-1}else{if(a>=b.length){a=0}}var f=b.getAt(a);if(h.canActivateItem(f)){h.setActiveItem(f);break}a+=g}},isWhitelisted:function(a){return Ext.FocusManager.isWhitelisted(a)},left:function(b){var c=this.menu,f=c.focusedItem,a=c.activeItem;if(f&&this.isWhitelisted(f)){return true}c.hide();if(c.parentMenu){c.parentMenu.focus()}},right:function(c){var f=this.menu,g=f.focusedItem,a=f.activeItem,b;if(g&&this.isWhitelisted(g)){return true}if(a){b=f.activeItem.menu;if(b){a.expandMenu(0);Ext.defer(function(){b.setActiveItem(b.items.getAt(0))},25)}}},tab:function(b){var a=this;if(b.shiftKey){a.up(b)}else{a.down(b)}},up:function(b){var a=this,c=a.menu.focusedItem;if(c&&b.getKey()==Ext.EventObject.UP&&a.isWhitelisted(c)){return true}a.focusNextItem(-1)}});Ext.define("Ext.menu.Item",{extend:"Ext.Component",alias:"widget.menuitem",alternateClassName:"Ext.menu.TextItem",activeCls:Ext.baseCSSPrefix+"menu-item-active",ariaRole:"menuitem",canActivate:true,clickHideDelay:1,destroyMenu:true,disabledCls:Ext.baseCSSPrefix+"menu-item-disabled",hideOnClick:true,isMenuItem:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,renderTpl:['<tpl if="plain">',"{text}","</tpl>",'<tpl if="!plain">','<a id="{id}-itemEl" class="'+Ext.baseCSSPrefix+'menu-item-link" href="{href}" <tpl if="hrefTarget">target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on">','<img id="{id}-iconEl" src="{icon}" class="'+Ext.baseCSSPrefix+'menu-item-icon {iconCls}" />','<span id="{id}-textEl" class="'+Ext.baseCSSPrefix+'menu-item-text" <tpl if="menu">style="margin-right: 17px;"</tpl> >{text}</span>','<tpl if="menu">','<img id="{id}-arrowEl" src="{blank}" class="'+Ext.baseCSSPrefix+'menu-item-arrow" />',"</tpl>","</a>","</tpl>"],maskOnDisable:false,activate:function(){var a=this;if(!a.activated&&a.canActivate&&a.rendered&&!a.isDisabled()&&a.isVisible()){a.el.addCls(a.activeCls);a.focus();a.activated=true;a.fireEvent("activate",a)}},blur:function(){this.$focused=false;this.callParent(arguments)},deactivate:function(){var a=this;if(a.activated){a.el.removeCls(a.activeCls);a.blur();a.hideMenu();a.activated=false;a.fireEvent("deactivate",a)}},deferExpandMenu:function(){var a=this;if(!a.menu.rendered||!a.menu.isVisible()){a.parentMenu.activeChild=a.menu;a.menu.parentItem=a;a.menu.parentMenu=a.menu.ownerCt=a.parentMenu;a.menu.showBy(a,a.menuAlign)}},deferHideMenu:function(){if(this.menu.isVisible()){this.menu.hide()}},deferHideParentMenus:function(){Ext.menu.Manager.hideAll()},expandMenu:function(a){var b=this;if(b.menu){clearTimeout(b.hideMenuTimer);if(a===0){b.deferExpandMenu()}else{b.expandMenuTimer=Ext.defer(b.deferExpandMenu,Ext.isNumber(a)?a:b.menuExpandDelay,b)}}},focus:function(){this.$focused=true;this.callParent(arguments)},getRefItems:function(a){var c=this.menu,b;if(c){b=c.getRefItems(a);b.unshift(c)}return b||[]},hideMenu:function(a){var b=this;if(b.menu){clearTimeout(b.expandMenuTimer);b.hideMenuTimer=Ext.defer(b.deferHideMenu,Ext.isNumber(a)?a:b.menuHideDelay,b)}},initComponent:function(){var b=this,c=Ext.baseCSSPrefix,a=[c+"menu-item"];b.addEvents("activate","click","deactivate");if(b.plain){a.push(c+"menu-item-plain")}if(b.cls){a.push(b.cls)}b.cls=a.join(" ");if(b.menu){b.menu=Ext.menu.Manager.get(b.menu)}b.callParent(arguments)},onClick:function(b){var a=this;if(!a.href){b.stopEvent()}if(a.disabled){return}if(a.hideOnClick){a.deferHideParentMenusTimer=Ext.defer(a.deferHideParentMenus,a.clickHideDelay,a)}Ext.callback(a.handler,a.scope||a,[a,b]);a.fireEvent("click",a,b);if(!a.hideOnClick){a.focus()}},onDestroy:function(){var a=this;clearTimeout(a.expandMenuTimer);clearTimeout(a.hideMenuTimer);clearTimeout(a.deferHideParentMenusTimer);if(a.menu){delete a.menu.parentItem;delete a.menu.parentMenu;delete a.menu.ownerCt;if(a.destroyMenu!==false){a.menu.destroy()}}a.callParent(arguments)},onRender:function(a,e){var b=this,c=Ext.BLANK_IMAGE_URL;Ext.applyIf(b.renderData,{href:b.href||"#",hrefTarget:b.hrefTarget,icon:b.icon||c,iconCls:b.iconCls+(b.checkChangeDisabled?" "+b.disabledCls:""),menu:Ext.isDefined(b.menu),plain:b.plain,text:b.text,blank:c});b.addChildEls("itemEl","iconEl","textEl","arrowEl");b.callParent(arguments)},setHandler:function(b,a){this.handler=b||null;this.scope=a},setIconCls:function(a){var b=this;if(b.iconEl){if(b.iconCls){b.iconEl.removeCls(b.iconCls)}if(a){b.iconEl.addCls(a)}}b.iconCls=a},setText:function(c){var b=this,a=b.textEl||b.el;b.text=c;if(b.rendered){a.update(c||"");b.ownerCt.redoComponentLayout()}}});Ext.define("Ext.ElementLoader",{mixins:{observable:"Ext.util.Observable"},uses:["Ext.data.Connection","Ext.Ajax"],statics:{Renderer:{Html:function(a,b,c){a.getTarget().update(b.responseText,c.scripts===true);return true}}},url:null,params:null,baseParams:null,autoLoad:false,target:null,loadMask:false,ajaxOptions:null,scripts:false,isLoader:true,constructor:function(b){var c=this,a;b=b||{};Ext.apply(c,b);c.setTarget(c.target);c.addEvents("beforeload","exception","load");c.mixins.observable.constructor.call(c);if(c.autoLoad){a=c.autoLoad;if(a===true){a={}}c.load(a)}},setTarget:function(b){var a=this;b=Ext.get(b);if(a.target&&a.target!=b){a.abort()}a.target=b},getTarget:function(){return this.target||null},abort:function(){var a=this.active;if(a!==undefined){Ext.Ajax.abort(a.request);if(a.mask){this.removeMask()}delete this.active}},removeMask:function(){this.target.unmask()},addMask:function(a){this.target.mask(a===true?null:a)},load:function(i){if(!this.target){Ext.Error.raise("A valid target is required when loading content")}i=Ext.apply({},i);var f=this,e=f.target,k=Ext.isDefined(i.loadMask)?i.loadMask:f.loadMask,b=Ext.apply({},i.params),a=Ext.apply({},i.ajaxOptions),g=i.callback||f.callback,h=i.scope||f.scope||f,c;Ext.applyIf(a,f.ajaxOptions);Ext.applyIf(i,a);Ext.applyIf(b,f.params);Ext.apply(b,f.baseParams);Ext.applyIf(i,{url:f.url});if(!i.url){Ext.Error.raise("You must specify the URL from which content should be loaded")}Ext.apply(i,{scope:f,params:b,callback:f.onComplete});if(f.fireEvent("beforeload",f,i)===false){return}if(k){f.addMask(k)}c=Ext.Ajax.request(i);f.active={request:c,options:i,mask:k,scope:h,callback:g,success:i.success||f.success,failure:i.failure||f.failure,renderer:i.renderer||f.renderer,scripts:Ext.isDefined(i.scripts)?i.scripts:f.scripts};f.setOptions(f.active,i)},setOptions:Ext.emptyFn,onComplete:function(b,h,a){var e=this,g=e.active,c=g.scope,f=e.getRenderer(g.renderer);if(h){h=f.call(e,e,a,g)}if(h){Ext.callback(g.success,c,[e,a,b]);e.fireEvent("load",e,a,b)}else{Ext.callback(g.failure,c,[e,a,b]);e.fireEvent("exception",e,a,b)}Ext.callback(g.callback,c,[e,h,a,b]);if(g.mask){e.removeMask()}delete e.active},getRenderer:function(a){if(Ext.isFunction(a)){return a}return this.statics().Renderer.Html},startAutoRefresh:function(a,b){var c=this;c.stopAutoRefresh();c.autoRefresh=setInterval(function(){c.load(b)},a)},stopAutoRefresh:function(){clearInterval(this.autoRefresh);delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var a=this;a.stopAutoRefresh();delete a.target;a.abort();a.clearListeners()}});Ext.define("Ext.layout.component.Draw",{alias:"layout.draw",extend:"Ext.layout.component.Auto",type:"draw",onLayout:function(b,a){this.owner.surface.setSize(b,a);this.callParent(arguments)}});Ext.define("Ext.layout.container.AbstractFit",{extend:"Ext.layout.container.Container",itemCls:Ext.baseCSSPrefix+"fit-item",targetCls:Ext.baseCSSPrefix+"layout-fit",type:"fit"});Ext.define("Ext.data.AbstractStore",{requires:["Ext.util.MixedCollection","Ext.data.Operation","Ext.util.Filter"],mixins:{observable:"Ext.util.Observable",sortable:"Ext.util.Sortable"},statics:{create:function(a){if(!a.isStore){if(!a.type){a.type="store"}a=Ext.createByAlias("store."+a.type,a)}return a}},remoteSort:false,remoteFilter:false,autoLoad:false,autoSync:false,batchUpdateMode:"operation",filterOnLoad:true,sortOnLoad:true,implicitModel:false,defaultProxyType:"memory",isDestroyed:false,isStore:true,sortRoot:"data",constructor:function(a){var c=this,b;c.addEvents("add","remove","update","datachanged","beforeload","load","write","beforesync","clear");Ext.apply(c,a);c.removed=[];c.mixins.observable.constructor.apply(c,arguments);c.model=Ext.ModelManager.getModel(c.model);Ext.applyIf(c,{modelDefaults:{}});if(!c.model&&c.fields){c.model=Ext.define("Ext.data.Store.ImplicitModel-"+(c.storeId||Ext.id()),{extend:"Ext.data.Model",fields:c.fields,proxy:c.proxy||c.defaultProxyType});delete c.fields;c.implicitModel=true}if(!c.model){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Store defined with no model. You may have mistyped the model name.")}}c.setProxy(c.proxy||c.model.getProxy());if(c.id&&!c.storeId){c.storeId=c.id;delete c.id}if(c.storeId){Ext.data.StoreManager.register(c)}c.mixins.sortable.initSortable.call(c);b=c.decodeFilters(c.filters);c.filters=Ext.create("Ext.util.MixedCollection");c.filters.addAll(b)},setProxy:function(a){var b=this;if(a instanceof Ext.data.proxy.Proxy){a.setModel(b.model)}else{if(Ext.isString(a)){a={type:a}}Ext.applyIf(a,{model:b.model});a=Ext.createByAlias("proxy."+a.type,a)}b.proxy=a;return b.proxy},getProxy:function(){return this.proxy},create:function(f,c){var e=this,a=Ext.ModelManager.create(Ext.applyIf(f,e.modelDefaults),e.model.modelName),b;c=c||{};Ext.applyIf(c,{action:"create",records:[a]});b=Ext.create("Ext.data.Operation",c);e.proxy.create(b,e.onProxyWrite,e);return a},read:function(){return this.load.apply(this,arguments)},onProxyRead:Ext.emptyFn,update:function(b){var c=this,a;b=b||{};Ext.applyIf(b,{action:"update",records:c.getUpdatedRecords()});a=Ext.create("Ext.data.Operation",b);return c.proxy.update(a,c.onProxyWrite,c)},onProxyWrite:function(b){var c=this,e=b.wasSuccessful(),a=b.getRecords();switch(b.action){case"create":c.onCreateRecords(a,b,e);break;case"update":c.onUpdateRecords(a,b,e);break;case"destroy":c.onDestroyRecords(a,b,e);break}if(e){c.fireEvent("write",c,b);c.fireEvent("datachanged",c)}Ext.callback(b.callback,b.scope||c,[a,b,e])},destroy:function(b){var c=this,a;b=b||{};Ext.applyIf(b,{action:"destroy",records:c.getRemovedRecords()});a=Ext.create("Ext.data.Operation",b);return c.proxy.destroy(a,c.onProxyWrite,c)},onBatchOperationComplete:function(b,a){return this.onProxyWrite(a)},onBatchComplete:function(c,a){var g=this,b=c.operations,f=b.length,e;g.suspendEvents();for(e=0;e<f;e++){g.onProxyWrite(b[e])}g.resumeEvents();g.fireEvent("datachanged",g)},onBatchException:function(b,a){},filterNew:function(a){return a.phantom===true&&a.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},filterUpdated:function(a){return a.dirty===true&&a.phantom!==true&&a.isValid()},getRemovedRecords:function(){return this.removed},filter:function(a,b){},decodeFilters:function(f){if(!Ext.isArray(f)){if(f===undefined){f=[]}else{f=[f]}}var e=f.length,a=Ext.util.Filter,b,c;for(c=0;c<e;c++){b=f[c];if(!(b instanceof a)){Ext.apply(b,{root:"data"});if(b.fn){b.filterFn=b.fn}if(typeof b=="function"){b={filterFn:b}}f[c]=new a(b)}}return f},clearFilter:function(a){},isFiltered:function(){},filterBy:function(b,a){},sync:function(){var e=this,b={},f=e.getNewRecords(),c=e.getUpdatedRecords(),a=e.getRemovedRecords(),g=false;if(f.length>0){b.create=f;g=true}if(c.length>0){b.update=c;g=true}if(a.length>0){b.destroy=a;g=true}if(g&&e.fireEvent("beforesync",b)!==false){e.proxy.batch(b,e.getBatchListeners())}},getBatchListeners:function(){var b=this,a={scope:b,exception:b.onBatchException};if(b.batchUpdateMode=="operation"){a.operationcomplete=b.onBatchOperationComplete}else{a.complete=b.onBatchComplete}return a},save:function(){return this.sync.apply(this,arguments)},load:function(b){var c=this,a;b=b||{};Ext.applyIf(b,{action:"read",filters:c.filters.items,sorters:c.getSorters()});a=Ext.create("Ext.data.Operation",b);if(c.fireEvent("beforeload",c,a)!==false){c.loading=true;c.proxy.read(a,c.onProxyLoad,c)}return c},afterEdit:function(a){var b=this;if(b.autoSync){b.sync()}b.fireEvent("update",b,a,Ext.data.Model.EDIT)},afterReject:function(a){this.fireEvent("update",this,a,Ext.data.Model.REJECT)},afterCommit:function(a){this.fireEvent("update",this,a,Ext.data.Model.COMMIT)},clearData:Ext.emptyFn,destroyStore:function(){var a=this;if(!a.isDestroyed){if(a.storeId){Ext.data.StoreManager.unregister(a)}a.clearData();a.data=null;a.tree=null;a.reader=a.writer=null;a.clearListeners();a.isDestroyed=true;if(a.implicitModel){Ext.destroy(a.model)}}},doSort:function(a){var b=this;if(b.remoteSort){b.load()}else{b.data.sortBy(a);b.fireEvent("datachanged",b)}},getCount:Ext.emptyFn,getById:Ext.emptyFn,removeAll:Ext.emptyFn,isLoading:function(){return !!this.loading}});Ext.define("Ext.draw.CompositeSprite",{extend:"Ext.util.MixedCollection",mixins:{animate:"Ext.util.Animate"},isCompositeSprite:true,constructor:function(a){var b=this;a=a||{};Ext.apply(b,a);b.addEvents("mousedown","mouseup","mouseover","mouseout","click");b.id=Ext.id(null,"ext-sprite-group-");b.callParent()},onClick:function(a){this.fireEvent("click",a)},onMouseUp:function(a){this.fireEvent("mouseup",a)},onMouseDown:function(a){this.fireEvent("mousedown",a)},onMouseOver:function(a){this.fireEvent("mouseover",a)},onMouseOut:function(a){this.fireEvent("mouseout",a)},attachEvents:function(b){var a=this;b.on({scope:a,mousedown:a.onMouseDown,mouseup:a.onMouseUp,mouseover:a.onMouseOver,mouseout:a.onMouseOut,click:a.onClick})},add:function(b,c){var a=this.callParent(arguments);this.attachEvents(a);return a},insert:function(a,b,c){return this.callParent(arguments)},remove:function(b){var a=this;b.un({scope:a,mousedown:a.onMouseDown,mouseup:a.onMouseUp,mouseover:a.onMouseOver,mouseout:a.onMouseOut,click:a.onClick});return a.callParent(arguments)},getBBox:function(){var f=0,p,k,l=this.items,g=this.length,h=Infinity,c=h,n=-h,b=h,m=-h,e,a;for(;f<g;f++){p=l[f];if(p.el){k=p.getBBox();c=Math.min(c,k.x);b=Math.min(b,k.y);n=Math.max(n,k.height+k.y);m=Math.max(m,k.width+k.x)}}return{x:c,y:b,height:n-b,width:m-c}},setAttributes:function(c,f){var e=0,b=this.items,a=this.length;for(;e<a;e++){b[e].setAttributes(c,f)}return this},hide:function(e){var c=0,b=this.items,a=this.length;for(;c<a;c++){b[c].hide(e)}return this},show:function(e){var c=0,b=this.items,a=this.length;for(;c<a;c++){b[c].show(e)}return this},redraw:function(){var f=this,e=0,c=f.items,b=f.getSurface(),a=f.length;if(b){for(;e<a;e++){b.renderItem(c[e])}}return f},setStyle:function(g){var c=0,b=this.items,a=this.length,f,e;for(;c<a;c++){f=b[c];e=f.el;if(e){e.setStyle(g)}}},addCls:function(f){var e=0,c=this.items,b=this.getSurface(),a=this.length;if(b){for(;e<a;e++){b.addCls(c[e],f)}}},removeCls:function(f){var e=0,c=this.items,b=this.getSurface(),a=this.length;if(b){for(;e<a;e++){b.removeCls(c[e],f)}}},getSurface:function(){var a=this.first();if(a){return a.surface}return null},destroy:function(){var c=this,a=c.getSurface(),b;if(a){while(c.getCount()>0){b=c.first();c.remove(b);a.remove(b)}}c.clearListeners()}});Ext.define("Ext.util.Grouper",{extend:"Ext.util.Sorter",getGroupString:function(a){return a.get(this.property)}});Ext.define("Ext.ComponentLoader",{extend:"Ext.ElementLoader",statics:{Renderer:{Data:function(a,b,f){var g=true;try{a.getTarget().update(Ext.decode(b.responseText))}catch(c){g=false}return g},Component:function(a,c,h){var i=true,g=a.getTarget(),b=[];if(!g.isContainer){Ext.Error.raise({target:g,msg:"Components can only be loaded into a container"})}try{b=Ext.decode(c.responseText)}catch(f){i=false}if(i){if(h.removeAll){g.removeAll()}g.add(b)}return i}}},target:null,loadMask:false,renderer:"html",setTarget:function(b){var a=this;if(Ext.isString(b)){b=Ext.getCmp(b)}if(a.target&&a.target!=b){a.abort()}a.target=b},removeMask:function(){this.target.setLoading(false)},addMask:function(a){this.target.setLoading(a)},setOptions:function(b,a){b.removeAll=Ext.isDefined(a.removeAll)?a.removeAll:this.removeAll},getRenderer:function(b){if(Ext.isFunction(b)){return b}var a=this.statics().Renderer;switch(b){case"component":return a.Component;case"data":return a.Data;default:return Ext.ElementLoader.Renderer.Html}}});Ext.define("Ext.layout.container.Fit",{extend:"Ext.layout.container.AbstractFit",alias:"layout.fit",alternateClassName:"Ext.layout.FitLayout",requires:["Ext.layout.container.Box"],defaultMargins:{top:0,right:0,bottom:0,left:0},onLayout:function(){var c=this,a,b,e;c.callParent();if(c.owner.items.length){b=c.owner.items.get(0);e=b.margins||c.defaultMargins;a=c.getLayoutTargetSize();a.width-=e.width;a.height-=e.height;c.setItemBox(b,a);if(e.left||e.top){b.setPosition(e.left,e.top)}}},getTargetBox:function(){return this.getLayoutTargetSize()},setItemBox:function(c,b){var a=this;if(c&&b.height>0){if(!a.owner.isFixedWidth()){b.width=undefined}if(!a.owner.isFixedHeight()){b.height=undefined}a.setItemSize(c,b.width,b.height)}},configureItem:function(a){a.layoutManagedHeight=0;a.layoutManagedWidth=0;this.callParent(arguments)}},function(){this.prototype.renderItem=Ext.layout.container.Box.prototype.renderItem});Ext.define("Ext.menu.CheckItem",{extend:"Ext.menu.Item",alias:"widget.menucheckitem",checkedCls:Ext.baseCSSPrefix+"menu-item-checked",uncheckedCls:Ext.baseCSSPrefix+"menu-item-unchecked",groupCls:Ext.baseCSSPrefix+"menu-group-icon",hideOnClick:false,afterRender:function(){var a=this;this.callParent();a.checked=!a.checked;a.setChecked(!a.checked,true)},initComponent:function(){var a=this;a.addEvents("beforecheckchange","checkchange");a.callParent(arguments);Ext.menu.Manager.registerCheckable(a);if(a.group){if(!a.iconCls){a.iconCls=a.groupCls}if(a.initialConfig.hideOnClick!==false){a.hideOnClick=true}}},disableCheckChange:function(){var a=this;if(a.iconEl){a.iconEl.addCls(a.disabledCls)}a.checkChangeDisabled=true},enableCheckChange:function(){var a=this;a.iconEl.removeCls(a.disabledCls);a.checkChangeDisabled=false},onClick:function(b){var a=this;if(!a.disabled&&!a.checkChangeDisabled&&!(a.checked&&a.group)){a.setChecked(!a.checked)}this.callParent([b])},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this);this.callParent(arguments)},setChecked:function(c,a){var b=this;if(b.checked!==c&&(a||b.fireEvent("beforecheckchange",b,c)!==false)){if(b.el){b.el[c?"addCls":"removeCls"](b.checkedCls)[!c?"addCls":"removeCls"](b.uncheckedCls)}b.checked=c;Ext.menu.Manager.onCheckChange(b,c);if(!a){Ext.callback(b.checkHandler,b.scope,[b,c]);b.fireEvent("checkchange",b,c)}}}});Ext.define("Ext.menu.Separator",{extend:"Ext.menu.Item",alias:"widget.menuseparator",canActivate:false,focusable:false,hideOnClick:false,plain:true,separatorCls:Ext.baseCSSPrefix+"menu-item-separator",text:"&#160;",onRender:function(b,e){var c=this,a=c.separatorCls;c.cls+=" "+a;c.callParent(arguments)}});Ext.define("Ext.menu.Menu",{extend:"Ext.panel.Panel",alias:"widget.menu",requires:["Ext.layout.container.Fit","Ext.layout.container.VBox","Ext.menu.CheckItem","Ext.menu.Item","Ext.menu.KeyNav","Ext.menu.Manager","Ext.menu.Separator"],allowOtherMenus:false,ariaRole:"menu",defaultAlign:"tl-bl?",floating:true,constrain:true,hidden:true,hideMode:"visibility",ignoreParentClicks:false,isMenu:true,showSeparator:true,minWidth:120,initComponent:function(){var b=this,e=Ext.baseCSSPrefix,a=[e+"menu"],c=b.bodyCls?[b.bodyCls]:[];b.addEvents("click","mouseenter","mouseleave","mouseover");Ext.menu.Manager.register(b);if(b.plain){a.push(e+"menu-plain")}b.cls=a.join(" ");c.unshift(e+"menu-body");b.bodyCls=c.join(" ");b.layout={type:"vbox",align:"stretchmax",autoSize:true,clearInnerCtOnLayout:true,overflowHandler:"Scroller"};if(b.floating===false&&b.initialConfig.hidden!==true){b.hidden=false}b.callParent(arguments);b.on("beforeshow",function(){var f=!!b.items.length;if(f&&b.rendered){b.el.setStyle("visibility",null)}return f})},afterRender:function(a){var b=this,e=Ext.baseCSSPrefix,c="&#160;";b.callParent(arguments);if(b.showSeparator){b.iconSepEl=b.layout.getRenderTarget().insertFirst({cls:e+"menu-icon-separator",html:c})}b.focusEl=b.el.createChild({cls:e+"menu-focus",tabIndex:"-1",html:c});b.mon(b.el,{click:b.onClick,mouseover:b.onMouseOver,scope:b});b.mouseMonitor=b.el.monitorMouseLeave(100,b.onMouseLeave,b);if(b.showSeparator&&((!Ext.isStrict&&Ext.isIE)||Ext.isIE6)){b.iconSepEl.setHeight(b.el.getHeight())}b.keyNav=Ext.create("Ext.menu.KeyNav",b)},afterLayout:function(){var m=this;m.callParent(arguments);if((!Ext.isStrict&&Ext.isIE)||Ext.isIE6){var a=m.layout.getRenderTarget(),c=0,b=m.dockedItems,e=b.length,g=0,h,k,f;c=a.getWidth();f=c+m.body.getBorderWidth("lr")+m.body.getPadding("lr");m.body.setWidth(f);for(;g<e,h=b.getAt(g);g++){if(h.dock=="left"||h.dock=="right"){f+=h.getWidth()}}m.el.setWidth(f)}},getBubbleTarget:function(){return this.parentMenu||this.callParent()},canActivateItem:function(a){return a&&!a.isDisabled()&&a.isVisible()&&(a.canActivate||a.getXTypes().indexOf("menuitem")<0)},deactivateActiveItem:function(){var a=this;if(a.activeItem){a.activeItem.deactivate();if(!a.activeItem.activated){delete a.activeItem}}if(a.focusedItem&&!a.filtered){a.focusedItem.blur();if(!a.focusedItem.$focused){delete a.focusedItem}}},clearStretch:function(){if(this.rendered){this.items.each(function(a){if(a.componentLayout){delete a.componentLayout.lastComponentSize}if(a.el){a.el.setWidth(null)}})}},onAdd:function(){var a=this;a.clearStretch();a.callParent(arguments);if(Ext.isIE6||Ext.isIE7){Ext.Function.defer(a.doComponentLayout,10,a)}},onRemove:function(){this.clearStretch();this.callParent(arguments)},redoComponentLayout:function(){if(this.rendered){this.clearStretch();this.doComponentLayout()}},getFocusEl:function(){return this.focusEl},hide:function(){this.deactivateActiveItem();this.callParent(arguments)},getItemFromEvent:function(a){return this.getChildByElement(a.getTarget())},lookupComponent:function(b){var a=this;if(Ext.isString(b)){b=a.lookupItemFromString(b)}else{if(Ext.isObject(b)){b=a.lookupItemFromObject(b)}}b.minWidth=b.minWidth||a.minWidth;return b},lookupItemFromObject:function(c){var b=this,e=Ext.baseCSSPrefix,a,f;if(!c.isComponent){if(!c.xtype){c=Ext.create("Ext.menu."+(Ext.isBoolean(c.checked)?"Check":"")+"Item",c)}else{c=Ext.ComponentManager.create(c,c.xtype)}}if(c.isMenuItem){c.parentMenu=b}if(!c.isMenuItem&&!c.dock){a=[e+"menu-item",e+"menu-item-cmp"];f=Ext.Function.createInterceptor;c.focus=f(c.focus,function(){this.$focused=true},c);c.blur=f(c.blur,function(){this.$focused=false},c);if(!b.plain&&(c.indent===true||c.iconCls==="no-icon")){a.push(e+"menu-item-indent")}if(c.rendered){c.el.addCls(a)}else{c.cls=(c.cls?c.cls:"")+" "+a.join(" ")}c.isMenuItem=true}return c},lookupItemFromString:function(a){return(a=="separator"||a=="-")?Ext.createWidget("menuseparator"):Ext.createWidget("menuitem",{canActivate:false,hideOnClick:false,plain:true,text:a})},onClick:function(c){var b=this,a;if(b.disabled){c.stopEvent();return}if((c.getTarget()==b.focusEl.dom)||c.within(b.layout.getRenderTarget())){a=b.getItemFromEvent(c)||b.activeItem;if(a){if(a.getXTypes().indexOf("menuitem")>=0){if(!a.menu||!b.ignoreParentClicks){a.onClick(c)}else{c.stopEvent()}}}b.fireEvent("click",b,a,c)}},onDestroy:function(){var a=this;Ext.menu.Manager.unregister(a);if(a.rendered){a.el.un(a.mouseMonitor);a.keyNav.destroy();delete a.keyNav}a.callParent(arguments)},onMouseLeave:function(b){var a=this;a.deactivateActiveItem();if(a.disabled){return}a.fireEvent("mouseleave",a,b)},onMouseOver:function(f){var c=this,g=f.getRelatedTarget(),a=!c.el.contains(g),b=c.getItemFromEvent(f);if(a&&c.parentMenu){c.parentMenu.setActiveItem(c.parentItem);c.parentMenu.mouseMonitor.mouseenter()}if(c.disabled){return}if(b){c.setActiveItem(b);if(b.activated&&b.expandMenu){b.expandMenu()}}if(a){c.fireEvent("mouseenter",c,f)}c.fireEvent("mouseover",c,b,f)},setActiveItem:function(b){var a=this;if(b&&(b!=a.activeItem&&b!=a.focusedItem)){a.deactivateActiveItem();if(a.canActivateItem(b)){if(b.activate){b.activate();if(b.activated){a.activeItem=b;a.focusedItem=b;a.focus()}}else{b.focus();a.focusedItem=b}}b.el.scrollIntoView(a.layout.getRenderTarget())}},showBy:function(b,g,f){var a=this,e,c;if(a.floating&&b){a.layout.autoSize=true;a.doAutoRender();delete a.needsLayout;b=b.el||b;e=a.el.getAlignToXY(b,g||a.defaultAlign,f);if(a.floatParent){c=a.floatParent.getTargetEl().getViewRegion();e[0]-=c.x;e[1]-=c.y}a.showAt(e)}return a},doConstrain:function(){var g=this,h=g.el.getY(),i,f,b,k=h,l,e,a,c;delete g.height;g.setSize();f=g.getHeight();if(g.floating){e=Ext.fly(g.el.getScopeParent());a=e.getScroll().top;c=e.getViewSize().height;l=h-a;i=g.maxHeight?g.maxHeight:c-l;if(f>c){i=c;k=h-l}else{if(i<f){k=h-(f-i);i=f}}}else{i=g.getHeight()}if(g.maxHeight){i=Math.min(g.maxHeight,i)}if(f>i&&i>0){g.layout.autoSize=false;g.setHeight(i);if(g.showSeparator){g.iconSepEl.setHeight(g.layout.getRenderTarget().dom.scrollHeight)}}b=g.getConstrainVector(g.el.getScopeParent());if(b){g.setPosition(g.getPosition()[0]+b[0])}g.el.setY(k)}});Ext.define("Ext.data.Store",{extend:"Ext.data.AbstractStore",alias:"store.store",requires:["Ext.data.StoreManager","Ext.ModelManager","Ext.data.Model","Ext.util.Grouper"],uses:["Ext.data.proxy.Memory"],remoteSort:false,remoteFilter:false,remoteGroup:false,groupField:undefined,groupDir:"ASC",pageSize:25,currentPage:1,clearOnPageLoad:true,loading:false,sortOnFilter:true,buffered:false,purgePageCount:5,isStore:true,onClassExtended:function(a,c){var b=c.model;if(typeof b=="string"){var e=c.onBeforeClassCreated;c.onBeforeClassCreated=function(f,h){var g=this;Ext.require(b,function(){e.call(g,f,h)})}}},constructor:function(b){b=Ext.Object.merge({},b);var e=this,g=b.groupers||e.groupers,a=b.groupField||e.groupField,c,f;if(b.buffered||e.buffered){e.prefetchData=Ext.create("Ext.util.MixedCollection",false,function(h){return h.index});e.pendingRequests=[];e.pagesRequested=[];e.sortOnLoad=false;e.filterOnLoad=false}e.addEvents("beforeprefetch","groupchange","prefetch");f=b.data||e.data;e.data=Ext.create("Ext.util.MixedCollection",false,function(h){return h.internalId});if(f){e.inlineData=f;delete b.data}if(!g&&a){g=[{property:a,direction:b.groupDir||e.groupDir}]}delete b.groupers;e.groupers=Ext.create("Ext.util.MixedCollection");e.groupers.addAll(e.decodeGroupers(g));this.callParent([b]);if(e.groupers.items.length){e.sort(e.groupers.items,"prepend",false)}c=e.proxy;f=e.inlineData;if(f){if(c instanceof Ext.data.proxy.Memory){c.data=f;e.read()}else{e.add.apply(e,f)}e.sort();delete e.inlineData}else{if(e.autoLoad){Ext.defer(e.load,10,e,[typeof e.autoLoad==="object"?e.autoLoad:undefined])}}},onBeforeSort:function(){var a=this.groupers;if(a.getCount()>0){this.sort(a.items,"prepend",false)}},decodeGroupers:function(e){if(!Ext.isArray(e)){if(e===undefined){e=[]}else{e=[e]}}var c=e.length,f=Ext.util.Grouper,a,b;for(b=0;b<c;b++){a=e[b];if(!(a instanceof f)){if(Ext.isString(a)){a={property:a}}Ext.applyIf(a,{root:"data",direction:"ASC"});if(a.fn){a.sorterFn=a.fn}if(typeof a=="function"){a={sorterFn:a}}e[b]=new f(a)}}return e},group:function(f,g){var e=this,c=false,b,a;if(Ext.isArray(f)){a=f}else{if(Ext.isObject(f)){a=[f]}else{if(Ext.isString(f)){b=e.groupers.get(f);if(!b){b={property:f,direction:g};a=[b]}else{if(g===undefined){b.toggle()}else{b.setDirection(g)}}}}}if(a&&a.length){c=true;a=e.decodeGroupers(a);e.groupers.clear();e.groupers.addAll(a)}if(e.remoteGroup){e.load({scope:e,callback:e.fireGroupChange})}else{e.sort(null,null,null,c);e.fireGroupChange()}},clearGrouping:function(){var a=this;a.groupers.each(function(b){a.sorters.remove(b)});a.groupers.clear();if(a.remoteGroup){a.load({scope:a,callback:a.fireGroupChange})}else{a.sort();a.fireEvent("groupchange",a,a.groupers)}},isGrouped:function(){return this.groupers.getCount()>0},fireGroupChange:function(){this.fireEvent("groupchange",this,this.groupers)},getGroups:function(b){var e=this.data.items,a=e.length,c=[],l={},g,h,k,f;for(f=0;f<a;f++){g=e[f];h=this.getGroupString(g);k=l[h];if(k===undefined){k={name:h,children:[]};c.push(k);l[h]=k}k.children.push(g)}return b?l[b]:c},getGroupsForGrouper:function(g,b){var e=g.length,f=[],a,c,k,l,h;for(h=0;h<e;h++){k=g[h];c=b.getGroupString(k);if(c!==a){l={name:c,grouper:b,records:[]};f.push(l)}l.records.push(k);a=c}return f},getGroupsForGrouperIndex:function(c,k){var g=this,h=g.groupers,b=h.getAt(k),a=g.getGroupsForGrouper(c,b),f=a.length,e;if(k+1<h.length){for(e=0;e<f;e++){a[e].children=g.getGroupsForGrouperIndex(a[e].records,k+1)}}for(e=0;e<f;e++){a[e].depth=k}return a},getGroupData:function(a){var b=this;if(a!==false){b.sort()}return b.getGroupsForGrouperIndex(b.data.items,0)},getGroupString:function(a){var b=this.groupers.first();if(b){return a.get(b.property)}return""},insert:function(e,c){var h=this,g=false,f,b,a;c=[].concat(c);for(f=0,a=c.length;f<a;f++){b=h.createModel(c[f]);b.set(h.modelDefaults);c[f]=b;h.data.insert(e+f,b);b.join(h);g=g||b.phantom===true}if(h.snapshot){h.snapshot.addAll(c)}h.fireEvent("add",h,c,e);h.fireEvent("datachanged",h);if(h.autoSync&&g){h.sync()}},add:function(b){if(!Ext.isArray(b)){b=Array.prototype.slice.apply(arguments)}var f=this,c=0,e=b.length,a;for(;c<e;c++){a=f.createModel(b[c]);b[c]=a}f.insert(f.data.length,b);return b},createModel:function(a){if(!a.isModel){a=Ext.ModelManager.create(a,this.model)}return a},each:function(b,a){this.data.each(b,a)},remove:function(b,l){if(!Ext.isArray(b)){b=[b]}l=l===true;var g=this,h=false,c=0,a=b.length,k,f,e;for(;c<a;c++){e=b[c];f=g.data.indexOf(e);if(g.snapshot){g.snapshot.remove(e)}if(f>-1){k=e.phantom===true;if(!l&&!k){g.removed.push(e)}e.unjoin(g);g.data.remove(e);h=h||!k;g.fireEvent("remove",g,e,f)}}g.fireEvent("datachanged",g);if(!l&&g.autoSync&&h){g.sync()}},removeAt:function(b){var a=this.getAt(b);if(a){this.remove(a)}},load:function(a){var b=this;a=a||{};if(Ext.isFunction(a)){a={callback:a}}Ext.applyIf(a,{groupers:b.groupers.items,page:b.currentPage,start:(b.currentPage-1)*b.pageSize,limit:b.pageSize,addRecords:false});return b.callParent([a])},onProxyLoad:function(b){var e=this,c=b.getResultSet(),a=b.getRecords(),f=b.wasSuccessful();if(c){e.totalCount=c.total}if(f){e.loadRecords(a,b)}e.loading=false;e.fireEvent("load",e,a,f);e.fireEvent("read",e,a,b.wasSuccessful());Ext.callback(b.callback,b.scope||e,[a,b,f])},onCreateRecords:function(e,f,n){if(n){var h=0,g=this.data,a=this.snapshot,b=e.length,m=f.records,k,c,l;for(;h<b;++h){k=e[h];c=m[h];if(c){l=g.indexOf(c);if(l>-1){g.removeAt(l);g.insert(l,k)}if(a){l=a.indexOf(c);if(l>-1){a.removeAt(l);a.insert(l,k)}}k.phantom=false;k.join(this)}}}},onUpdateRecords:function(e,c,k){if(k){var f=0,g=e.length,h=this.data,b=this.snapshot,a;for(;f<g;++f){a=e[f];h.replace(a);if(b){b.replace(a)}a.join(this)}}},onDestroyRecords:function(c,e,l){if(l){var k=this,g=0,b=c.length,f=k.data,a=k.snapshot,h;for(;g<b;++g){h=c[g];h.unjoin(k);f.remove(h);if(a){a.remove(h)}}k.removed=[]}},getNewRecords:function(){return this.data.filterBy(this.filterNew).items},getUpdatedRecords:function(){return this.data.filterBy(this.filterUpdated).items},filter:function(f,g){if(Ext.isString(f)){f={property:f,value:g}}var e=this,a=e.decodeFilters(f),b=0,h=e.sortOnFilter&&!e.remoteSort,c=a.length;for(;b<c;b++){e.filters.replace(a[b])}if(e.remoteFilter){e.load()}else{if(e.filters.getCount()){e.snapshot=e.snapshot||e.data.clone();e.data=e.data.filter(e.filters.items);if(h){e.sort()}if(!h||e.sorters.length<1){e.fireEvent("datachanged",e)}}}},clearFilter:function(a){var b=this;b.filters.clear();if(b.remoteFilter){b.load()}else{if(b.isFiltered()){b.data=b.snapshot.clone();delete b.snapshot;if(a!==true){b.fireEvent("datachanged",b)}}}},isFiltered:function(){var a=this.snapshot;return !!a&&a!==this.data},filterBy:function(b,a){var c=this;c.snapshot=c.snapshot||c.data.clone();c.data=c.queryBy(b,a||c);c.fireEvent("datachanged",c)},queryBy:function(b,a){var c=this,e=c.snapshot||c.data;return e.filterBy(b,a||c)},loadData:function(h,a){var c=this.model,g=h.length,f=[],e,b;for(e=0;e<g;e++){b=h[e];if(!(b instanceof Ext.data.Model)){b=Ext.ModelManager.create(b,c)}f.push(b)}this.loadRecords(f,{addRecords:a})},loadRawData:function(f,b){var e=this,a=e.proxy.reader.read(f),c=a.records;if(a.success){e.loadRecords(c,{addRecords:b});e.fireEvent("load",e,c,true)}},loadRecords:function(a,b){var f=this,c=0,e=a.length;b=b||{};if(!b.addRecords){delete f.snapshot;f.clearData()}f.data.addAll(a);for(;c<e;c++){if(b.start!==undefined){a[c].index=b.start+c}a[c].join(f)}f.suspendEvents();if(f.filterOnLoad&&!f.remoteFilter){f.filter()}if(f.sortOnLoad&&!f.remoteSort){f.sort()}f.resumeEvents();f.fireEvent("datachanged",f,a)},loadPage:function(c,a){var b=this;a=Ext.apply({},a);b.currentPage=c;b.read(Ext.applyIf(a,{page:c,start:(c-1)*b.pageSize,limit:b.pageSize,addRecords:!b.clearOnPageLoad}))},nextPage:function(a){this.loadPage(this.currentPage+1,a)},previousPage:function(a){this.loadPage(this.currentPage-1,a)},clearData:function(){var a=this;a.data.each(function(b){b.unjoin(a)});a.data.clear()},prefetch:function(b){var c=this,a,e=c.getRequestId();b=b||{};Ext.applyIf(b,{action:"read",filters:c.filters.items,sorters:c.sorters.items,requestId:e});c.pendingRequests.push(e);a=Ext.create("Ext.data.Operation",b);if(c.fireEvent("beforeprefetch",c,a)!==false){c.loading=true;c.proxy.read(a,c.onProxyPrefetch,c)}return c},prefetchPage:function(f,c){var e=this,b=e.pageSize,g=(f-1)*e.pageSize,a=g+b;if(Ext.Array.indexOf(e.pagesRequested,f)===-1&&!e.rangeSatisfied(g,a)){c=c||{};e.pagesRequested.push(f);Ext.applyIf(c,{page:f,start:g,limit:b,callback:e.onWaitForGuarantee,scope:e});e.prefetch(c)}},getRequestId:function(){this.requestSeed=this.requestSeed||1;return this.requestSeed++},onProxyPrefetch:function(b){var e=this,c=b.getResultSet(),a=b.getRecords(),f=b.wasSuccessful();if(c){e.totalCount=c.total;e.fireEvent("totalcountchange",e.totalCount)}if(f){e.cacheRecords(a,b)}Ext.Array.remove(e.pendingRequests,b.requestId);if(b.page){Ext.Array.remove(e.pagesRequested,b.page)}e.loading=false;e.fireEvent("prefetch",e,a,f,b);if(b.blocking){e.fireEvent("load",e,a,f)}Ext.callback(b.callback,b.scope||e,[a,b,f])},cacheRecords:function(b,a){var f=this,c=0,e=b.length,g=a?a.start:0;if(!Ext.isDefined(f.totalCount)){f.totalCount=b.length;f.fireEvent("totalcountchange",f.totalCount)}for(;c<e;c++){b[c].index=g+c}f.prefetchData.addAll(b);if(f.purgePageCount){f.purgeRecords()}},purgeRecords:function(){var c=this,b=c.prefetchData.getCount(),e=c.purgePageCount*c.pageSize,f=b-e-1,a=0;for(;a<=f;a++){c.prefetchData.removeAt(0)}},rangeSatisfied:function(f,a){var c=this,b=f,e=true;for(;b<a;b++){if(!c.prefetchData.getByKey(b)){e=false;if(a-b>c.pageSize){Ext.Error.raise("A single page prefetch could never satisfy this request.")}break}}return e},getPageFromRecordIndex:function(a){return Math.floor(a/this.pageSize)+1},onGuaranteedRange:function(){var g=this,c=g.getTotalCount(),h=g.requestStart,b=((c-1)<g.requestEnd)?c-1:g.requestEnd,e=[],a,f=h;b=Math.max(0,b);if(h>b){Ext.log({level:"warn",msg:"Start ("+h+") was greater than end ("+b+") for the range of records requested ("+g.requestStart+"-"+g.requestEnd+")"+(this.storeId?' from store "'+this.storeId+'"':"")})}if(h!==g.guaranteedStart&&b!==g.guaranteedEnd){g.guaranteedStart=h;g.guaranteedEnd=b;for(;f<=b;f++){a=g.prefetchData.getByKey(f);if(a){e.push(a)}}g.fireEvent("guaranteedrange",e,h,b);if(g.cb){g.cb.call(g.scope||g,e)}}g.unmask()},mask:function(){this.masked=true;this.fireEvent("beforeload")},unmask:function(){if(this.masked){this.fireEvent("load")}},hasPendingRequests:function(){return this.pendingRequests.length},onWaitForGuarantee:function(){if(!this.hasPendingRequests()){this.onGuaranteedRange()}},guaranteeRange:function(a,c,b,p){if(a&&c){if(c-a>this.pageSize){Ext.Error.raise({start:a,end:c,pageSize:this.pageSize,msg:"Requested a bigger range than the specified pageSize"})}}c=(c>this.totalCount)?this.totalCount-1:c;var k=this,e=a,m=k.prefetchData,f=[],h=!!m.getByKey(a),l=!!m.getByKey(c),g=k.getPageFromRecordIndex(a),n=k.getPageFromRecordIndex(c);k.cb=b;k.scope=p;k.requestStart=a;k.requestEnd=c;if(!h||!l){if(g===n){k.mask();k.prefetchPage(g,{callback:k.onWaitForGuarantee,scope:k})}else{k.mask();k.prefetchPage(g,{callback:k.onWaitForGuarantee,scope:k});k.prefetchPage(n,{callback:k.onWaitForGuarantee,scope:k})}}else{k.onGuaranteedRange()}},sort:function(){var e=this,c=e.prefetchData,f,g,a,b;if(e.buffered){if(e.remoteSort){c.clear();e.callParent(arguments)}else{f=e.getSorters();g=e.guaranteedStart;a=e.guaranteedEnd;if(f.length){c.sort(f);b=c.getRange();c.clear();e.cacheRecords(b);delete e.guaranteedStart;delete e.guaranteedEnd;e.guaranteeRange(g,a)}e.callParent(arguments)}}else{e.callParent(arguments)}},doSort:function(b){var f=this;if(f.remoteSort){f.load()}else{f.data.sortBy(b);if(!f.buffered){var a=f.getRange(),e=a.length,c=0;for(;c<e;c++){a[c].index=c}}f.fireEvent("datachanged",f)}},find:function(f,e,h,g,a,c){var b=this.createFilterFn(f,e,g,a,c);return b?this.data.findIndexBy(b,null,h):-1},findRecord:function(){var b=this,a=b.find.apply(b,arguments);return a!==-1?b.getAt(a):null},createFilterFn:function(e,c,f,a,b){if(Ext.isEmpty(c)){return false}c=this.data.createValueMatcher(c,f,a,b);return function(g){return c.test(g.data[e])}},findExact:function(b,a,c){return this.data.findIndexBy(function(e){return e.get(b)==a},this,c)},findBy:function(b,a,c){return this.data.findIndexBy(b,a,c)},collect:function(b,a,c){var e=this,f=(c===true&&e.snapshot)?e.snapshot:e.data;return f.collect(b,"data",a)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalCount},getAt:function(a){return this.data.getAt(a)},getRange:function(b,a){return this.data.getRange(b,a)},getById:function(a){return(this.snapshot||this.data).findBy(function(b){return b.getId()===a})},indexOf:function(a){return this.data.indexOf(a)},indexOfTotal:function(a){var b=a.index;if(b||b===0){return b}return this.indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},removeAll:function(a){var b=this;b.clearData();if(b.snapshot){b.snapshot.clear()}if(a!==true){b.fireEvent("clear",b)}},first:function(a){var b=this;if(a&&b.isGrouped()){return b.aggregate(function(c){return c.length?c[0]:undefined},b,true)}else{return b.data.first()}},last:function(a){var b=this;if(a&&b.isGrouped()){return b.aggregate(function(e){var c=e.length;return c?e[c-1]:undefined},b,true)}else{return b.data.last()}},sum:function(c,a){var b=this;if(a&&b.isGrouped()){return b.aggregate(b.getSum,b,true,[c])}else{return b.getSum(b.data.items,c)}},getSum:function(b,f){var e=0,c=0,a=b.length;for(;c<a;++c){e+=b[c].get(f)}return e},count:function(a){var b=this;if(a&&b.isGrouped()){return b.aggregate(function(c){return c.length},b,true)}else{return b.getCount()}},min:function(c,a){var b=this;if(a&&b.isGrouped()){return b.aggregate(b.getMin,b,true,[c])}else{return b.getMin(b.data.items,c)}},getMin:function(b,g){var e=1,a=b.length,f,c;if(a>0){c=b[0].get(g)}for(;e<a;++e){f=b[e].get(g);if(f<c){c=f}}return c},max:function(c,a){var b=this;if(a&&b.isGrouped()){return b.aggregate(b.getMax,b,true,[c])}else{return b.getMax(b.data.items,c)}},getMax:function(c,g){var e=1,b=c.length,f,a;if(b>0){a=c[0].get(g)}for(;e<b;++e){f=c[e].get(g);if(f>a){a=f}}return a},average:function(c,a){var b=this;if(a&&b.isGrouped()){return b.aggregate(b.getAverage,b,true,[c])}else{return b.getAverage(b.data.items,c)}},getAverage:function(b,f){var c=0,a=b.length,e=0;if(b.length>0){for(;c<a;++c){e+=b[c].get(f)}return e/a}return 0},aggregate:function(h,l,f,g){g=g||[];if(f&&this.isGrouped()){var a=this.getGroups(),c=0,e=a.length,b={},k;for(;c<e;++c){k=a[c];b[k.name]=h.apply(l||this,[k.children].concat(g))}return b}else{return h.apply(l||this,[this.data.items].concat(g))}}},function(){Ext.regStore("ext-empty-store",{fields:[],proxy:"proxy"})});Ext.define("Ext.data.ArrayStore",{extend:"Ext.data.Store",alias:"store.array",uses:["Ext.data.reader.Array"],constructor:function(a){a=a||{};Ext.applyIf(a,{proxy:{type:"memory",reader:"array"}});this.callParent([a])},loadData:function(f,a){if(this.expandData===true){var e=[],b=0,c=f.length;for(;b<c;b++){e[e.length]=[f[b]]}f=e}this.callParent([f,a])}},function(){Ext.data.SimpleStore=Ext.data.ArrayStore});Ext.define("Ext.draw.Surface",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.draw.CompositeSprite"],uses:["Ext.draw.engine.Svg","Ext.draw.engine.Vml"],separatorRe:/[, ]+/,statics:{create:function(b,e){e=e||["Svg","Vml"];var c=0,a=e.length,f;for(;c<a;c++){if(Ext.supports[e[c]]){return Ext.create("Ext.draw.engine."+e[c],b)}}return false}},availableAttrs:{blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,"dominant-baseline":"auto",fill:"none","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:"",height:0,hidden:false,href:"http://sencha.com/",opacity:1,path:"M0,0",radius:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank",text:"","text-anchor":"middle",title:"Ext Draw",width:0,x:0,y:0,zIndex:0},container:undefined,height:352,width:512,x:0,y:0,orderSpritesByZIndex:true,constructor:function(a){var b=this;a=a||{};Ext.apply(b,a);b.domRef=Ext.getDoc().dom;b.customAttributes={};b.addEvents("mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","click");b.mixins.observable.constructor.call(b);b.getId();b.initGradients();b.initItems();if(b.renderTo){b.render(b.renderTo);delete b.renderTo}b.initBackground(a.background)},initSurface:Ext.emptyFn,renderItem:Ext.emptyFn,renderItems:Ext.emptyFn,setViewBox:function(b,e,c,a){if(isFinite(b)&&isFinite(e)&&isFinite(c)&&isFinite(a)){this.viewBox={x:b,y:e,width:c,height:a};this.applyViewBox()}},addCls:Ext.emptyFn,removeCls:Ext.emptyFn,setStyle:Ext.emptyFn,initGradients:function(){var a=this.gradients;if(a){Ext.each(a,this.addGradient,this)}},initItems:function(){var a=this.items;this.items=Ext.create("Ext.draw.CompositeSprite");this.groups=Ext.create("Ext.draw.CompositeSprite");if(a){this.add(a)}},initBackground:function(b){var f=this,e=f.width,a=f.height,g,h,c;if(b){if(b.gradient){h=b.gradient;g=h.id;f.addGradient(h);f.background=f.add({type:"rect",x:0,y:0,width:e,height:a,fill:"url(#"+g+")"})}else{if(b.fill){f.background=f.add({type:"rect",x:0,y:0,width:e,height:a,fill:b.fill})}else{if(b.image){f.background=f.add({type:"image",x:0,y:0,width:e,height:a,src:b.image})}}}}},setSize:function(a,b){if(this.background){this.background.setAttributes({width:a,height:b,hidden:false},true)}this.applyViewBox()},scrubAttrs:function(e){var c,b={},a={},f=e.attr;for(c in f){if(this.translateAttrs.hasOwnProperty(c)){b[this.translateAttrs[c]]=f[c];a[this.translateAttrs[c]]=true}else{if(this.availableAttrs.hasOwnProperty(c)&&!a[c]){b[c]=f[c]}}}return b},onClick:function(a){this.processEvent("click",a)},onMouseUp:function(a){this.processEvent("mouseup",a)},onMouseDown:function(a){this.processEvent("mousedown",a)},onMouseOver:function(a){this.processEvent("mouseover",a)},onMouseOut:function(a){this.processEvent("mouseout",a)},onMouseMove:function(a){this.fireEvent("mousemove",a)},onMouseEnter:Ext.emptyFn,onMouseLeave:Ext.emptyFn,addGradient:Ext.emptyFn,add:function(){var g=Array.prototype.slice.call(arguments),k,e;var a=g.length>1;if(a||Ext.isArray(g[0])){var h=a?g:g[0],b=[],c,f,l;for(c=0,f=h.length;c<f;c++){l=h[c];l=this.add(l);b.push(l)}return b}k=this.prepareItems(g[0],true)[0];this.insertByZIndex(k);this.onAdd(k);return k},insertByZIndex:function(k){var g=this,e=g.items.items,c=e.length,l=Math.ceil,h=k.attr.zIndex,i=c,b=i-1,f=0,a;if(g.orderSpritesByZIndex&&c&&h<e[b].attr.zIndex){while(f<=b){i=l((f+b)/2);a=e[i].attr.zIndex;if(a>h){b=i-1}else{if(a<h){f=i+1}else{break}}}while(i<c&&e[i].attr.zIndex<=h){i++}}g.items.insert(i,k);return i},onAdd:function(e){var g=e.group,b=e.draggable,a,f,c;if(g){a=[].concat(g);f=a.length;for(c=0;c<f;c++){g=a[c];this.getGroup(g).add(e)}delete e.group}if(b){e.initDraggable()}},remove:function(a,b){if(a){this.items.remove(a);this.groups.each(function(c){c.remove(a)});a.onRemove();if(b===true){a.destroy()}}},removeAll:function(e){var a=this.items.items,c=a.length,b;for(b=c-1;b>-1;b--){this.remove(a[b],e)}},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,applyViewBox:function(){var e=this,m=e.viewBox,a=e.width,h=e.height,g,f,k,b,i,c,l;if(m&&(a||h)){g=m.x;f=m.y;k=m.width;b=m.height;i=h/b;c=a/k;if(k*i<a){g-=(a-k*i)/2/i}if(b*c<h){f-=(h-b*c)/2/c}l=1/Math.min(k,i);e.viewBoxShift={dx:-g,dy:-f,scale:l}}},transformToViewBox:function(a,e){if(this.viewBoxShift){var c=this,b=c.viewBoxShift;return[a*b.scale-b.dx,e*b.scale-b.dy]}else{return[a,e]}},applyTransformations:function(b){b.bbox.transform=0;this.transform(b);var e=this,c=false,a=b.attr;if(a.translation.x!=null||a.translation.y!=null){e.translate(b);c=true}if(a.scaling.x!=null||a.scaling.y!=null){e.scale(b);c=true}if(a.rotation.degrees!=null){e.rotate(b);c=true}if(c){b.bbox.transform=0;this.transform(b);b.transformations=[]}},rotate:function(a){var f,b=a.attr.rotation.degrees,e=a.attr.rotation.x,c=a.attr.rotation.y;if(!Ext.isNumber(e)||!Ext.isNumber(c)){f=this.getBBox(a);e=!Ext.isNumber(e)?f.x+f.width/2:e;c=!Ext.isNumber(c)?f.y+f.height/2:c}a.transformations.push({type:"rotate",degrees:b,x:e,y:c})},translate:function(b){var a=b.attr.translation.x||0,c=b.attr.translation.y||0;b.transformations.push({type:"translate",x:a,y:c})},scale:function(b){var f,a=b.attr.scaling.x||1,g=b.attr.scaling.y||1,e=b.attr.scaling.centerX,c=b.attr.scaling.centerY;if(!Ext.isNumber(e)||!Ext.isNumber(c)){f=this.getBBox(b);e=!Ext.isNumber(e)?f.x+f.width/2:e;c=!Ext.isNumber(c)?f.y+f.height/2:c}b.transformations.push({type:"scale",x:a,y:g,centerX:e,centerY:c})},rectPath:function(a,f,b,c,e){if(e){return[["M",a+e,f],["l",b-e*2,0],["a",e,e,0,0,1,e,e],["l",0,c-e*2],["a",e,e,0,0,1,-e,e],["l",e*2-b,0],["a",e,e,0,0,1,-e,-e],["l",0,e*2-c],["a",e,e,0,0,1,e,-e],["z"]]}return[["M",a,f],["l",b,0],["l",0,c],["l",-b,0],["z"]]},ellipsePath:function(a,e,c,b){if(b==null){b=c}return[["M",a,e],["m",0,-b],["a",c,b,0,1,1,0,2*b],["a",c,b,0,1,1,0,-2*b],["z"]]},getPathpath:function(a){return a.attr.path},getPathcircle:function(c){var b=c.attr;return this.ellipsePath(b.x,b.y,b.radius,b.radius)},getPathellipse:function(c){var b=c.attr;return this.ellipsePath(b.x,b.y,b.radiusX||(b.width/2)||0,b.radiusY||(b.height/2)||0)},getPathrect:function(c){var b=c.attr;return this.rectPath(b.x,b.y,b.width,b.height,b.r)},getPathimage:function(c){var b=c.attr;return this.rectPath(b.x||0,b.y||0,b.width,b.height)},getPathtext:function(a){var b=this.getBBoxText(a);return this.rectPath(b.x,b.y,b.width,b.height)},createGroup:function(b){var a=this.groups.get(b);if(!a){a=Ext.create("Ext.draw.CompositeSprite",{surface:this});a.id=b||Ext.id(null,"ext-surface-group-");this.groups.add(a)}return a},getGroup:function(b){if(typeof b=="string"){var a=this.groups.get(b);if(!a){a=this.createGroup(b)}}else{a=b}return a},prepareItems:function(a,c){a=[].concat(a);var f,b,e;for(b=0,e=a.length;b<e;b++){f=a[b];if(!(f instanceof Ext.draw.Sprite)){f.surface=this;a[b]=this.createItem(f)}else{f.surface=this}}return a},setText:Ext.emptyFn,createItem:Ext.emptyFn,getId:function(){return this.id||(this.id=Ext.id(null,"ext-surface-"))},destroy:function(){delete this.domRef;this.removeAll()}});Ext.define("Ext.draw.Component",{alias:"widget.draw",extend:"Ext.Component",requires:["Ext.draw.Surface","Ext.layout.component.Draw"],enginePriority:["Svg","Vml"],baseCls:Ext.baseCSSPrefix+"surface",componentLayout:"draw",viewBox:true,autoSize:false,initComponent:function(){this.callParent(arguments);this.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave","click")},onRender:function(){var e=this,k=e.viewBox,b=e.autoSize,h,c,a,i,g,f;e.callParent(arguments);if(e.createSurface()!==false){c=e.surface.items;if(k||b){h=c.getBBox();a=h.width;i=h.height;g=h.x;f=h.y;if(e.viewBox){e.surface.setViewBox(g,f,a,i)}else{e.autoSizeSurface()}}}},autoSizeSurface:function(){var e=this,b=e.surface.items,f=b.getBBox(),c=f.width,a=f.height;b.setAttributes({translate:{x:-f.x,y:-f.y+(+Ext.isOpera)}},true);if(e.rendered){e.setSize(c,a);e.surface.setSize(c,a)}else{e.surface.setSize(c,a)}e.el.setSize(c,a)},createSurface:function(){var a=Ext.draw.Surface.create(Ext.apply({},{width:this.width,height:this.height,renderTo:this.el},this.initialConfig));if(!a){return false}this.surface=a;function b(c){return function(f){this.fireEvent(c,f)}}a.on({scope:this,mouseup:b("mouseup"),mousedown:b("mousedown"),mousemove:b("mousemove"),mouseenter:b("mouseenter"),mouseleave:b("mouseleave"),click:b("click")})},onDestroy:function(){var a=this.surface;if(a){a.destroy()}this.callParent(arguments)}});Ext.define("Ext.resizer.ResizeTracker",{extend:"Ext.dd.DragTracker",dynamic:true,preserveRatio:false,constrainTo:null,proxyCls:Ext.baseCSSPrefix+"resizable-proxy",constructor:function(b){var e=this;if(!b.el){if(b.target.isComponent){e.el=b.target.getEl()}else{e.el=b.target}}this.callParent(arguments);if(e.preserveRatio&&e.minWidth&&e.minHeight){var c=e.minWidth/e.el.getWidth(),a=e.minHeight/e.el.getHeight();if(a>c){e.minWidth=e.el.getWidth()*a}else{e.minHeight=e.el.getHeight()*c}}if(e.throttle){var f=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(e,arguments)},e.throttle);e.resize=function(h,i,g){if(g){Ext.resizer.ResizeTracker.prototype.resize.apply(e,arguments)}else{f.apply(null,arguments)}}}},onBeforeStart:function(a){this.startBox=this.el.getBox()},getDynamicTarget:function(){var a=this,b=a.target;if(a.dynamic){return b}else{if(!a.proxy){a.proxy=a.createProxy(b)}}a.proxy.show();return a.proxy},createProxy:function(c){var b,a=this.proxyCls,e;if(c.isComponent){b=c.getProxy().addCls(a)}else{e=Ext.getBody();if(Ext.scopeResetCSS){e=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"reset"})}b=c.createProxy({tag:"div",cls:a,id:c.id+"-rzproxy"},e)}b.removeCls(Ext.baseCSSPrefix+"proxy-el");return b},onStart:function(a){this.activeResizeHandle=Ext.getCmp(this.getDragTarget().id);if(!this.dynamic){this.resize(this.startBox,{horizontal:"none",vertical:"none"})}},onDrag:function(a){if(this.dynamic||this.proxy){this.updateDimensions(a)}},updateDimensions:function(u,n){var v=this,c=v.activeResizeHandle.region,g=v.getOffset(v.constrainTo?"dragTarget":null),l=v.startBox,h,r=0,w=0,k,s,a=0,y=0,x,p=g[0]<0?"right":"left",t=g[1]<0?"down":"up",i,b;switch(c){case"south":w=g[1];b=2;break;case"north":w=-g[1];y=-w;b=2;break;case"east":r=g[0];b=1;break;case"west":r=-g[0];a=-r;b=1;break;case"northeast":w=-g[1];y=-w;r=g[0];i=[l.x,l.y+l.height];b=3;break;case"southeast":w=g[1];r=g[0];i=[l.x,l.y];b=3;break;case"southwest":r=-g[0];a=-r;w=g[1];i=[l.x+l.width,l.y];b=3;break;case"northwest":w=-g[1];y=-w;r=-g[0];a=-r;i=[l.x+l.width,l.y+l.height];b=3;break}var f={width:l.width+r,height:l.height+w,x:l.x+a,y:l.y+y};k=Ext.Number.snap(f.width,v.widthIncrement);s=Ext.Number.snap(f.height,v.heightIncrement);if(k!=f.width||s!=f.height){switch(c){case"northeast":f.y-=s-f.height;break;case"north":f.y-=s-f.height;break;case"southwest":f.x-=k-f.width;break;case"west":f.x-=k-f.width;break;case"northwest":f.x-=k-f.width;f.y-=s-f.height}f.width=k;f.height=s}if(f.width<v.minWidth||f.width>v.maxWidth){f.width=Ext.Number.constrain(f.width,v.minWidth,v.maxWidth);if(a){f.x=l.x+(l.width-f.width)}}else{v.lastX=f.x}if(f.height<v.minHeight||f.height>v.maxHeight){f.height=Ext.Number.constrain(f.height,v.minHeight,v.maxHeight);if(y){f.y=l.y+(l.height-f.height)}}else{v.lastY=f.y}if(v.preserveRatio||u.shiftKey){var q,m;h=v.startBox.width/v.startBox.height;q=Math.min(Math.max(v.minHeight,f.width/h),v.maxHeight);m=Math.min(Math.max(v.minWidth,f.height*h),v.maxWidth);if(b==1){f.height=q}else{if(b==2){f.width=m}else{x=Math.abs(i[0]-this.lastXY[0])/Math.abs(i[1]-this.lastXY[1]);if(x>h){f.height=q}else{f.width=m}if(c=="northeast"){f.y=l.y-(f.height-l.height)}else{if(c=="northwest"){f.y=l.y-(f.height-l.height);f.x=l.x-(f.width-l.width)}else{if(c=="southwest"){f.x=l.x-(f.width-l.width)}}}}}}if(w===0){t="none"}if(r===0){p="none"}v.resize(f,{horizontal:p,vertical:t},n)},getResizeTarget:function(a){return a?this.target:this.getDynamicTarget()},resize:function(b,e,a){var c=this.getResizeTarget(a);if(c.isComponent){if(c.floating){c.setPagePosition(b.x,b.y)}c.setSize(b.width,b.height)}else{c.setBox(b);if(this.originalTarget){this.originalTarget.setBox(b)}}},onEnd:function(a){this.updateDimensions(a,true);if(this.proxy){this.proxy.hide()}}});Ext.define("Ext.data.reader.Array",{extend:"Ext.data.reader.Json",alternateClassName:"Ext.data.ArrayReader",alias:"reader.array",buildExtractors:function(){this.callParent(arguments);var a=this.model.prototype.fields.items,b=0,c=a.length,f=[],e;for(;b<c;b++){e=a[b].mapping;f.push(function(g){return function(h){return h[g]}}(e!==null?e:b))}this.extractorFunctions=f}});Ext.define("Ext.ShadowPool",{singleton:true,requires:["Ext.DomHelper"],markup:function(){if(Ext.supports.CSS3BoxShadow){return'<div class="'+Ext.baseCSSPrefix+'css-shadow" role="presentation"></div>'}else{if(Ext.isIE){return'<div class="'+Ext.baseCSSPrefix+'ie-shadow" role="presentation"></div>'}else{return'<div class="'+Ext.baseCSSPrefix+'frame-shadow" role="presentation"><div class="xst" role="presentation"><div class="xstl" role="presentation"></div><div class="xstc" role="presentation"></div><div class="xstr" role="presentation"></div></div><div class="xsc" role="presentation"><div class="xsml" role="presentation"></div><div class="xsmc" role="presentation"></div><div class="xsmr" role="presentation"></div></div><div class="xsb" role="presentation"><div class="xsbl" role="presentation"></div><div class="xsbc" role="presentation"></div><div class="xsbr" role="presentation"></div></div></div>'}}}(),shadows:[],pull:function(){var a=this.shadows.shift();if(!a){a=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,this.markup));a.autoBoxAdjust=false}return a},push:function(a){this.shadows.push(a)},reset:function(){Ext.Array.each(this.shadows,function(a){a.remove()});this.shadows=[]}});Ext.define("Ext.draw.Matrix",{requires:["Ext.draw.Draw"],constructor:function(h,g,m,l,k,i){if(h!=null){this.matrix=[[h,m,k],[g,l,i],[0,0,1]]}else{this.matrix=[[1,0,0],[0,1,0],[0,0,1]]}},add:function(u,r,n,l,i,h){var p=this,g=[[],[],[]],t=[[u,n,i],[r,l,h],[0,0,1]],s,q,m,k;for(s=0;s<3;s++){for(q=0;q<3;q++){k=0;for(m=0;m<3;m++){k+=p.matrix[s][m]*t[m][q]}g[s][q]=k}}p.matrix=g},prepend:function(u,r,n,l,i,h){var p=this,g=[[],[],[]],t=[[u,n,i],[r,l,h],[0,0,1]],s,q,m,k;for(s=0;s<3;s++){for(q=0;q<3;q++){k=0;for(m=0;m<3;m++){k+=t[s][m]*p.matrix[m][q]}g[s][q]=k}}p.matrix=g},invert:function(){var k=this.matrix,i=k[0][0],h=k[1][0],p=k[0][1],n=k[1][1],m=k[0][2],l=k[1][2],g=i*n-h*p;return new Ext.draw.Matrix(n/g,-h/g,-p/g,i/g,(p*l-n*m)/g,(h*m-i*l)/g)},clone:function(){var i=this.matrix,h=i[0][0],g=i[1][0],n=i[0][1],m=i[1][1],l=i[0][2],k=i[1][2];return new Ext.draw.Matrix(h,g,n,m,l,k)},translate:function(a,b){this.prepend(1,0,0,1,a,b)},scale:function(b,f,a,e){var c=this;if(f==null){f=b}c.add(1,0,0,1,a,e);c.add(b,0,0,f,0,0);c.add(1,0,0,1,-a,-e)},rotate:function(c,b,h){c=Ext.draw.Draw.rad(c);var f=this,g=+Math.cos(c).toFixed(9),e=+Math.sin(c).toFixed(9);f.add(g,e,-e,g,b,h);f.add(1,0,0,1,-b,-h)},x:function(a,c){var b=this.matrix;return a*b[0][0]+c*b[0][1]+b[0][2]},y:function(a,c){var b=this.matrix;return a*b[1][0]+c*b[1][1]+b[1][2]},get:function(b,a){return +this.matrix[b][a].toFixed(4)},toString:function(){var a=this;return[a.get(0,0),a.get(0,1),a.get(1,0),a.get(1,1),0,0].join()},toSvg:function(){var a=this;return"matrix("+[a.get(0,0),a.get(1,0),a.get(0,1),a.get(1,1),a.get(0,2),a.get(1,2)].join()+")"},toFilter:function(){var a=this;return"progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',FilterType=bilinear,M11="+a.get(0,0)+", M12="+a.get(0,1)+", M21="+a.get(1,0)+", M22="+a.get(1,1)+", Dx="+a.get(0,2)+", Dy="+a.get(1,2)+")"},offset:function(){var a=this.matrix;return[(a[0][2]||0).toFixed(4),(a[1][2]||0).toFixed(4)]},split:function(){function e(g){return g[0]*g[0]+g[1]*g[1]}function b(g){var h=Math.sqrt(e(g));g[0]/=h;g[1]/=h}var a=this.matrix,c={translateX:a[0][2],translateY:a[1][2]},f;f=[[a[0][0],a[0][1]],[a[1][0],a[1][1]]];c.scaleX=Math.sqrt(e(f[0]));b(f[0]);c.shear=f[0][0]*f[1][0]+f[0][1]*f[1][1];f[1]=[f[1][0]-f[0][0]*c.shear,f[1][1]-f[0][1]*c.shear];c.scaleY=Math.sqrt(e(f[1]));b(f[1]);c.shear/=c.scaleY;c.rotate=Math.asin(-f[0][1]);c.isSimple=!+c.shear.toFixed(9)&&(c.scaleX.toFixed(9)==c.scaleY.toFixed(9)||!c.rotate);return c}});Ext.define("Ext.draw.SpriteDD",{extend:"Ext.dd.DragSource",constructor:function(b,a){var e=this,c=b.el;e.sprite=b;e.el=c;e.dragData={el:c,sprite:b};e.callParent([c,a]);e.sprite.setStyle("cursor","move")},showFrame:Ext.emptyFn,createFrame:Ext.emptyFn,getDragEl:function(a){return this.el},getRegion:function(){var k=this,g=k.el,n,f,c,q,p,v,a,m,h,u,s;s=k.sprite;u=s.getBBox();try{n=Ext.Element.getXY(g)}catch(i){}if(!n){return null}f=n[0];c=f+u.width;q=n[1];p=q+u.height;return Ext.create("Ext.util.Region",q,c,p,f)},startDrag:function(b,e){var c=this,a=c.sprite.attr;c.prev=c.sprite.surface.transformToViewBox(b,e)},onDrag:function(i){var h=i.getXY(),g=this,f=g.sprite,a=f.attr,c,b;h=g.sprite.surface.transformToViewBox(h[0],h[1]);c=h[0]-g.prev[0];b=h[1]-g.prev[1];f.setAttributes({translate:{x:a.translation.x+c,y:a.translation.y+b}},true);g.prev=h},setDragElPos:function(){return false}});Ext.define("Ext.Shadow",{requires:["Ext.ShadowPool"],constructor:function(b){var c=this,e={h:0},f,a;Ext.apply(c,b);if(!Ext.isString(c.mode)){c.mode=c.defaultMode}f=c.offset;a=Math.floor(f/2);c.opacity=50;switch(c.mode.toLowerCase()){case"drop":if(Ext.supports.CSS3BoxShadow){e.w=e.h=-f;e.l=e.t=f}else{e.w=0;e.l=e.t=f;e.t-=1;if(Ext.isIE){e.l-=f+a;e.t-=f+a;e.w-=a;e.h-=a;e.t+=1}}break;case"sides":if(Ext.supports.CSS3BoxShadow){e.h-=f;e.t=f;e.l=e.w=0}else{e.w=(f*2);e.l=-f;e.t=f-1;if(Ext.isIE){e.l-=(f-a);e.t-=f+a;e.l+=1;e.w-=(f-a)*2;e.w-=a+1;e.h-=1}}break;case"frame":if(Ext.supports.CSS3BoxShadow){e.l=e.w=e.t=0}else{e.w=e.h=(f*2);e.l=e.t=-f;e.t+=1;e.h-=2;if(Ext.isIE){e.l-=(f-a);e.t-=(f-a);e.l+=1;e.w-=(f+a+1);e.h-=(f+a);e.h+=1}break}}c.adjusts=e},offset:4,defaultMode:"drop",show:function(c){var b=this,a;c=Ext.get(c);if(!b.el){b.el=Ext.ShadowPool.pull();if(b.el.dom.nextSibling!=c.dom){b.el.insertBefore(c)}}a=(parseInt(c.getStyle("z-index"),10)-1)||0;b.el.setStyle("z-index",b.zIndex||a);if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){b.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+b.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+(b.offset)+")"}b.realign(c.getLeft(true),c.getTop(true),c.dom.offsetWidth,c.dom.offsetHeight);b.el.dom.style.display="block"},isVisible:function(){return this.el?true:false},realign:function(b,q,m,g){if(!this.el){return}var a=this.adjusts,i=this.el.dom,k=i.style,c,f,n,e,h,p;k.left=(b+a.l)+"px";k.top=(q+a.t)+"px";c=Math.max(m+a.w,0);f=Math.max(g+a.h,0);h=c+"px";p=f+"px";if(k.width!=h||k.height!=p){k.width=h;k.height=p;if(Ext.supports.CSS3BoxShadow){k.boxShadow="0 0 "+this.offset+"px 0 #888"}else{if(!Ext.isIE){n=i.childNodes;e=Math.max(0,(c-12))+"px";n[0].childNodes[1].style.width=e;n[1].childNodes[1].style.width=e;n[2].childNodes[1].style.width=e;n[1].style.height=Math.max(0,(f-12))+"px"}}}},hide:function(){var a=this;if(a.el){a.el.dom.style.display="none";Ext.ShadowPool.push(a.el);delete a.el}},setZIndex:function(a){this.zIndex=a;if(this.el){this.el.setStyle("z-index",a)}},setOpacity:function(a){if(this.el){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){a=Math.floor(a*100/2)/100}this.opacity=a;this.el.setOpacity(a)}}});Ext.define("Ext.draw.Sprite",{mixins:{observable:"Ext.util.Observable",animate:"Ext.util.Animate"},requires:["Ext.draw.SpriteDD"],dirty:false,dirtyHidden:false,dirtyTransform:false,dirtyPath:true,dirtyFont:true,zIndexDirty:true,isSprite:true,zIndex:0,fontProperties:["font","font-size","font-weight","font-style","font-family","text-anchor","text"],pathProperties:["x","y","d","path","height","width","radius","r","rx","ry","cx","cy"],constructor:function(a){var b=this;a=a||{};b.id=Ext.id(null,"ext-sprite-");b.transformations=[];Ext.copyTo(this,a,"surface,group,type,draggable");b.bbox={};b.attr={zIndex:0,translation:{x:null,y:null},rotation:{degrees:null,x:null,y:null},scaling:{x:null,y:null,cx:null,cy:null}};delete a.surface;delete a.group;delete a.type;delete a.draggable;b.setAttributes(a);b.addEvents("beforedestroy","destroy","render","mousedown","mouseup","mouseover","mouseout","mousemove","click");b.mixins.observable.constructor.apply(this,arguments)},initDraggable:function(){var a=this;a.draggable=true;if(!a.el){a.surface.createSpriteElement(a)}a.dd=Ext.create("Ext.draw.SpriteDD",a,Ext.isBoolean(a.draggable)?null:a.draggable);a.on("beforedestroy",a.dd.destroy,a.dd)},setAttributes:function(l,p){var u=this,k=u.fontProperties,s=k.length,g=u.pathProperties,f=g.length,t=!!u.surface,a=t&&u.surface.customAttributes||{},b=u.attr,m,q,h,c,r,n,v,e;l=Ext.apply({},l);for(m in a){if(l.hasOwnProperty(m)&&typeof a[m]=="function"){Ext.apply(l,a[m].apply(u,[].concat(l[m])))}}if(!!l.hidden!==!!b.hidden){u.dirtyHidden=true}for(q=0;q<f;q++){m=g[q];if(m in l&&l[m]!==b[m]){u.dirtyPath=true;break}}if("zIndex" in l){u.zIndexDirty=true}for(q=0;q<s;q++){m=k[q];if(m in l&&l[m]!==b[m]){u.dirtyFont=true;break}}h=l.translate;c=b.translation;if(h){if((h.x&&h.x!==c.x)||(h.y&&h.y!==c.y)){Ext.apply(c,h);u.dirtyTransform=true}delete l.translate}r=l.rotate;n=b.rotation;if(r){if((r.x&&r.x!==n.x)||(r.y&&r.y!==n.y)||(r.degrees&&r.degrees!==n.degrees)){Ext.apply(n,r);u.dirtyTransform=true}delete l.rotate}v=l.scale;e=b.scaling;if(v){if((v.x&&v.x!==e.x)||(v.y&&v.y!==e.y)||(v.cx&&v.cx!==e.cx)||(v.cy&&v.cy!==e.cy)){Ext.apply(e,v);u.dirtyTransform=true}delete l.scale}Ext.apply(b,l);u.dirty=true;if(p===true&&t){u.redraw()}return this},getBBox:function(){return this.surface.getBBox(this)},setText:function(a){return this.surface.setText(this,a)},hide:function(a){this.setAttributes({hidden:true},a);return this},show:function(a){this.setAttributes({hidden:false},a);return this},remove:function(){if(this.surface){this.surface.remove(this);return true}return false},onRemove:function(){this.surface.onRemove(this)},destroy:function(){var a=this;if(a.fireEvent("beforedestroy",a)!==false){a.remove();a.surface.onDestroy(a);a.clearListeners();a.fireEvent("destroy")}},redraw:function(){this.surface.renderItem(this);return this},setStyle:function(){this.el.setStyle.apply(this.el,arguments);return this},addCls:function(a){this.surface.addCls(this,a);return this},removeCls:function(a){this.surface.removeCls(this,a);return this}});Ext.define("Ext.draw.engine.Svg",{extend:"Ext.draw.Surface",requires:["Ext.draw.Draw","Ext.draw.Sprite","Ext.draw.Matrix","Ext.Element"],engine:"Svg",trimRe:/^\s+|\s+$/g,spacesRe:/\s+/,xlink:"http://www.w3.org/1999/xlink",translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",path:"d",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},parsers:{},minDefaults:{circle:{cx:0,cy:0,r:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start","font-family":null,"font-size":null,"font-weight":null,"font-style":null,fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},createSvgElement:function(e,a){var c=this.domRef.createElementNS("http://www.w3.org/2000/svg",e),b;if(a){for(b in a){c.setAttribute(b,String(a[b]))}}return c},createSpriteElement:function(a){var b=this.createSvgElement(a.type);b.id=a.id;if(b.style){b.style.webkitTapHighlightColor="rgba(0,0,0,0)"}a.el=Ext.get(b);this.applyZIndex(a);a.matrix=Ext.create("Ext.draw.Matrix");a.bbox={plain:0,transform:0};a.fireEvent("render",a);return b},getBBox:function(a,b){var c=this["getPath"+a.type](a);if(b){a.bbox.plain=a.bbox.plain||Ext.draw.Draw.pathDimensions(c);return a.bbox.plain}a.bbox.transform=a.bbox.transform||Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(c,a.matrix));return a.bbox.transform},getBBoxText:function(k){var l={},g,m,a,c,h,b;if(k&&k.el){b=k.el.dom;try{l=b.getBBox();return l}catch(f){}l={x:l.x,y:Infinity,width:0,height:0};h=b.getNumberOfChars();for(c=0;c<h;c++){g=b.getExtentOfChar(c);l.y=Math.min(g.y,l.y);m=g.y+g.height-l.y;l.height=Math.max(l.height,m);a=g.x+g.width-l.x;l.width=Math.max(l.width,a)}return l}},hide:function(){Ext.get(this.el).hide()},show:function(){Ext.get(this.el).show()},hidePrim:function(a){this.addCls(a,Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(a){this.removeCls(a,Ext.baseCSSPrefix+"hide-visibility")},getDefs:function(){return this._defs||(this._defs=this.createSvgElement("defs"))},transform:function(e){var h=this,a=Ext.create("Ext.draw.Matrix"),g=e.transformations,k=g.length,c=0,b,f;for(;c<k;c++){b=g[c];f=b.type;if(f=="translate"){a.translate(b.x,b.y)}else{if(f=="rotate"){a.rotate(b.degrees,b.x,b.y)}else{if(f=="scale"){a.scale(b.x,b.y,b.centerX,b.centerY)}}}}e.matrix=a;e.el.set({transform:a.toSvg()})},setSize:function(a,c){var e=this,b=e.el;a=+a||e.width;c=+c||e.height;e.width=a;e.height=c;b.setSize(a,c);b.set({width:a,height:c});e.callParent([a,c])},getRegion:function(){var f=this.el.getXY(),c=this.bgRect.getXY(),b=Math.max,a=b(f[0],c[0]),e=b(f[1],c[1]);return{left:a,top:e,right:a+this.width,bottom:e+this.height}},onRemove:function(a){if(a.el){a.el.remove();delete a.el}this.callParent(arguments)},setViewBox:function(b,e,c,a){if(isFinite(b)&&isFinite(e)&&isFinite(c)&&isFinite(a)){this.callParent(arguments);this.el.dom.setAttribute("viewBox",[b,e,c,a].join(" "))}},render:function(c){var g=this;if(!g.el){var f=g.width||10,b=g.height||10,e=g.createSvgElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:f,height:b}),a=g.getDefs(),h=g.createSvgElement("rect",{width:"100%",height:"100%",fill:"#000",stroke:"none",opacity:0}),i;if(Ext.isSafari3){i=g.createSvgElement("rect",{x:-10,y:-10,width:"110%",height:"110%",fill:"none",stroke:"#000"})}e.appendChild(a);if(Ext.isSafari3){e.appendChild(i)}e.appendChild(h);c.appendChild(e);g.el=Ext.get(e);g.bgRect=Ext.get(h);if(Ext.isSafari3){g.webkitRect=Ext.get(i);g.webkitRect.hide()}g.el.on({scope:g,mouseup:g.onMouseUp,mousedown:g.onMouseDown,mouseover:g.onMouseOver,mouseout:g.onMouseOut,mousemove:g.onMouseMove,mouseenter:g.onMouseEnter,mouseleave:g.onMouseLeave,click:g.onClick})}g.renderAll()},onMouseEnter:function(a){if(this.el.parent().getRegion().contains(a.getPoint())){this.fireEvent("mouseenter",a)}},onMouseLeave:function(a){if(!this.el.parent().getRegion().contains(a.getPoint())){this.fireEvent("mouseleave",a)}},processEvent:function(b,g){var f=g.getTarget(),a=this.surface,c;this.fireEvent(b,g);if(f.nodeName=="tspan"&&f.parentNode){f=f.parentNode}c=this.items.get(f.id);if(c){c.fireEvent(b,c,g)}},tuneText:function(k,l){var a=k.el.dom,b=[],n,h,m,e,f,c,g;if(l.hasOwnProperty("text")){b=this.setText(k,l.text)}if(b.length){n=this.getBBoxText(k).height;for(e=0,f=b.length;e<f;e++){g=(Ext.isFF3_0||Ext.isFF3_5)?2:4;b[e].setAttribute("dy",e?n*1.2:n/g)}k.dirty=true}},setText:function(m,e){var h=this,a=m.el.dom,l=a.getAttribute("x"),b=[],p,k,n,f,g,c;while(a.firstChild){a.removeChild(a.firstChild)}c=String(e).split("\n");for(f=0,g=c.length;f<g;f++){n=c[f];if(n){k=h.createSvgElement("tspan");k.appendChild(document.createTextNode(Ext.htmlDecode(n)));k.setAttribute("x",l);a.appendChild(k);b[f]=k}}return b},renderAll:function(){this.items.each(this.renderItem,this)},renderItem:function(a){if(!this.el){return}if(!a.el){this.createSpriteElement(a)}if(a.zIndexDirty){this.applyZIndex(a)}if(a.dirty){this.applyAttrs(a);this.applyTransformations(a)}},redraw:function(a){a.dirty=a.zIndexDirty=true;this.renderItem(a)},applyAttrs:function(t){var n=this,c=t.el,s=t.group,k=t.attr,u=n.parsers,g=n.gradientsMap||{},l=Ext.isSafari&&!Ext.isStrict,f,h,m,r,e,q,b,a,p;if(s){f=[].concat(s);m=f.length;for(h=0;h<m;h++){s=f[h];n.getGroup(s).add(t)}delete t.group}r=n.scrubAttrs(t)||{};t.bbox.plain=0;t.bbox.transform=0;if(t.type=="circle"||t.type=="ellipse"){r.cx=r.cx||r.x;r.cy=r.cy||r.y}else{if(t.type=="rect"){r.rx=r.ry=r.r}else{if(t.type=="path"&&r.d){r.d=Ext.draw.Draw.pathToString(Ext.draw.Draw.pathToAbsolute(r.d))}}}t.dirtyPath=false;if(r["clip-rect"]){n.setClip(t,r);delete r["clip-rect"]}if(t.type=="text"&&r.font&&t.dirtyFont){c.set({style:"font: "+r.font});t.dirtyFont=false}if(t.type=="image"){c.dom.setAttributeNS(n.xlink,"href",r.src)}Ext.applyIf(r,n.minDefaults[t.type]);if(t.dirtyHidden){(k.hidden)?n.hidePrim(t):n.showPrim(t);t.dirtyHidden=false}for(q in r){if(r.hasOwnProperty(q)&&r[q]!=null){if(l&&("color|stroke|fill".indexOf(q)>-1)&&(r[q] in g)){r[q]=g[r[q]]}if(q in u){c.dom.setAttribute(q,u[q](r[q],t,n))}else{c.dom.setAttribute(q,r[q])}}}if(t.type=="text"){n.tuneText(t,r)}b=k.style;if(b){c.setStyle(b)}t.dirty=false;if(Ext.isSafari3){n.webkitRect.show();setTimeout(function(){n.webkitRect.hide()})}},setClip:function(b,g){var f=this,e=g["clip-rect"],a,c;if(e){if(b.clip){b.clip.parentNode.parentNode.removeChild(b.clip.parentNode)}a=f.createSvgElement("clipPath");c=f.createSvgElement("rect");a.id=Ext.id(null,"ext-clip-");c.setAttribute("x",e.x);c.setAttribute("y",e.y);c.setAttribute("width",e.width);c.setAttribute("height",e.height);a.appendChild(c);f.getDefs().appendChild(a);b.el.dom.setAttribute("clip-path","url(#"+a.id+")");b.clip=c}},applyZIndex:function(e){var g=this,b=g.items,a=b.indexOf(e),f=e.el,c;if(g.el.dom.childNodes[a+2]!==f.dom){if(a>0){do{c=b.getAt(--a).el}while(!c&&a>0)}f.insertAfter(c||g.bgRect)}e.zIndexDirty=false},createItem:function(a){var b=Ext.create("Ext.draw.Sprite",a);b.surface=this;return b},addGradient:function(h){h=Ext.draw.Draw.parseGradient(h);var f=this,e=h.stops.length,a=h.vector,m=Ext.isSafari&&!Ext.isStrict,k,g,l,c,b;b=f.gradientsMap||{};if(!m){if(h.type=="linear"){k=f.createSvgElement("linearGradient");k.setAttribute("x1",a[0]);k.setAttribute("y1",a[1]);k.setAttribute("x2",a[2]);k.setAttribute("y2",a[3])}else{k=f.createSvgElement("radialGradient");k.setAttribute("cx",h.centerX);k.setAttribute("cy",h.centerY);k.setAttribute("r",h.radius);if(Ext.isNumber(h.focalX)&&Ext.isNumber(h.focalY)){k.setAttribute("fx",h.focalX);k.setAttribute("fy",h.focalY)}}k.id=h.id;f.getDefs().appendChild(k);for(c=0;c<e;c++){g=h.stops[c];l=f.createSvgElement("stop");l.setAttribute("offset",g.offset+"%");l.setAttribute("stop-color",g.color);l.setAttribute("stop-opacity",g.opacity);k.appendChild(l)}}else{b["url(#"+h.id+")"]=h.stops[0].color}f.gradientsMap=b},hasCls:function(a,b){return b&&(" "+(a.el.dom.getAttribute("class")||"")+" ").indexOf(" "+b+" ")!=-1},addCls:function(f,h){var g=f.el,e,a,c,b=[],k=g.getAttribute("class")||"";if(!Ext.isArray(h)){if(typeof h=="string"&&!this.hasCls(f,h)){g.set({"class":k+" "+h})}}else{for(e=0,a=h.length;e<a;e++){c=h[e];if(typeof c=="string"&&(" "+k+" ").indexOf(" "+c+" ")==-1){b.push(c)}}if(b.length){g.set({"class":" "+b.join(" ")})}}},removeCls:function(l,g){var h=this,b=l.el,e=b.getAttribute("class")||"",c,k,f,m,a;if(!Ext.isArray(g)){g=[g]}if(e){a=e.replace(h.trimRe," ").split(h.spacesRe);for(c=0,f=g.length;c<f;c++){m=g[c];if(typeof m=="string"){m=m.replace(h.trimRe,"");k=Ext.Array.indexOf(a,m);if(k!=-1){Ext.Array.erase(a,k,1)}}}b.set({"class":a.join(" ")})}},destroy:function(){var a=this;a.callParent();if(a.el){a.el.remove()}delete a.el}});Ext.define("Ext.draw.engine.Vml",{extend:"Ext.draw.Surface",requires:["Ext.draw.Draw","Ext.draw.Color","Ext.draw.Sprite","Ext.draw.Matrix","Ext.Element"],engine:"Vml",map:{M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bitesRe:/([clmz]),?([^clmz]*)/gi,valRe:/-?[^,\s-]+/g,fillUrlRe:/^url\(\s*['"]?([^\)]+?)['"]?\s*\)$/i,pathlike:/^(path|rect)$/,NonVmlPathRe:/[ahqstv]/ig,partialPathRe:/[clmz]/g,fontFamilyRe:/^['"]+|['"]+$/g,baseVmlCls:Ext.baseCSSPrefix+"vml-base",vmlGroupCls:Ext.baseCSSPrefix+"vml-group",spriteCls:Ext.baseCSSPrefix+"vml-sprite",measureSpanCls:Ext.baseCSSPrefix+"vml-measure-span",zoom:21600,coordsize:1000,coordorigin:"0 0",orderSpritesByZIndex:false,path2vml:function(u){var n=this,v=n.NonVmlPathRe,b=n.map,f=n.valRe,t=n.zoom,e=n.bitesRe,g=Ext.Function.bind(Ext.draw.Draw.pathToAbsolute,Ext.draw.Draw),m,q,c,a,k,s,h,l;if(String(u).match(v)){g=Ext.Function.bind(Ext.draw.Draw.path2curve,Ext.draw.Draw)}else{if(!String(u).match(n.partialPathRe)){m=String(u).replace(e,function(w,y,p){var x=[],i=y.toLowerCase()=="m",r=b[y];p.replace(f,function(z){if(i&&x[length]==2){r+=x+b[y=="m"?"l":"L"];x=[]}x.push(Math.round(z*t))});return r+x});return m}}q=g(u);m=[];for(k=0,s=q.length;k<s;k++){c=q[k];a=q[k][0].toLowerCase();if(a=="z"){a="x"}for(h=1,l=c.length;h<l;h++){a+=Math.round(c[h]*n.zoom)+(h!=l-1?",":"")}m.push(a)}return m.join(" ")},translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},minDefaults:{circle:{fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start",font:'10px "Arial"',fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},onMouseEnter:function(a){this.fireEvent("mouseenter",a)},onMouseLeave:function(a){this.fireEvent("mouseleave",a)},processEvent:function(b,g){var f=g.getTarget(),a=this.surface,c;this.fireEvent(b,g);c=this.items.get(f.id);if(c){c.fireEvent(b,c,g)}},createSpriteElement:function(h){var f=this,e=h.attr,g=h.type,k=f.zoom,b=h.vml||(h.vml={}),l=Math.round,c=f.createNode("shape"),m,i,a;c.coordsize=k+" "+k;c.coordorigin=e.coordorigin||"0 0";Ext.get(c).addCls(f.spriteCls);if(g=="text"){b.path=m=f.createNode("path");m.textpathok=true;b.textpath=a=f.createNode("textpath");a.on=true;c.appendChild(a);c.appendChild(m)}c.id=h.id;h.el=Ext.get(c);f.el.appendChild(c);if(g!=="image"){i=f.createNode("skew");i.on=true;c.appendChild(i);h.skew=i}h.matrix=Ext.create("Ext.draw.Matrix");h.bbox={plain:null,transform:null};h.fireEvent("render",h);return h.el},getBBox:function(a,b){var c=this["getPath"+a.type](a);if(b){a.bbox.plain=a.bbox.plain||Ext.draw.Draw.pathDimensions(c);return a.bbox.plain}a.bbox.transform=a.bbox.transform||Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(c,a.matrix));return a.bbox.transform},getBBoxText:function(b){var a=b.vml;return{x:a.X+(a.bbx||0)-a.W/2,y:a.Y-a.H/2,width:a.W,height:a.H}},applyAttrs:function(p){var v=this,e=p.vml,l=p.group,b=p.attr,c=p.el,r=c.dom,s,x,u,q,m,t,n,w,a;if(l){u=[].concat(l);m=u.length;for(q=0;q<m;q++){l=u[q];v.getGroup(l).add(p)}delete p.group}t=v.scrubAttrs(p)||{};if(p.zIndexDirty){v.setZIndex(p)}Ext.applyIf(t,v.minDefaults[p.type]);if(r.href){r.href=t.href}if(r.title){r.title=t.title}if(r.target){r.target=t.target}if(r.cursor){r.cursor=t.cursor}if(p.dirtyHidden){(t.hidden)?v.hidePrim(p):v.showPrim(p);p.dirtyHidden=false}if(p.dirtyPath){if(p.type=="circle"||p.type=="ellipse"){var g=t.x,f=t.y,k=t.rx||t.r||0,h=t.ry||t.r||0;r.path=Ext.String.format("ar{0},{1},{2},{3},{4},{1},{4},{1}",Math.round((g-k)*v.zoom),Math.round((f-h)*v.zoom),Math.round((g+k)*v.zoom),Math.round((f+h)*v.zoom),Math.round(g*v.zoom));p.dirtyPath=false}else{if(p.type!=="text"){p.attr.path=t.path=v.setPaths(p,t)||t.path;r.path=v.path2vml(t.path);p.dirtyPath=false}}}if("clip-rect" in t){v.setClip(p,t)}if(p.type=="text"){v.setTextAttributes(p,t)}if(p.type=="image"||t.opacity||t["fill-opacity"]||t.fill){v.setFill(p,t)}if(t.stroke||t["stroke-opacity"]||t.fill){v.setStroke(p,t)}s=b.style;if(s){c.setStyle(s)}p.dirty=false},setZIndex:function(a){if(a.el){if(a.attr.zIndex!=undefined){a.el.setStyle("zIndex",a.attr.zIndex)}a.zIndexDirty=false}},setPaths:function(b,c){var a=b.attr;b.bbox.plain=null;b.bbox.transform=null;if(b.type=="circle"){a.rx=a.ry=c.r;return Ext.draw.Draw.ellipsePath(b)}else{if(b.type=="ellipse"){a.rx=c.rx;a.ry=c.ry;return Ext.draw.Draw.ellipsePath(b)}else{if(b.type=="rect"||b.type=="image"){a.rx=a.ry=c.r;return Ext.draw.Draw.rectPath(b)}else{if(b.type=="path"&&a.path){return Ext.draw.Draw.pathToAbsolute(a.path)}}}}return false},setFill:function(l,e){var h=this,b=l.el,f=b.dom,k=f.getElementsByTagName("fill")[0],g,i,a,m,c;if(k){f.removeChild(k)}else{k=h.createNode("fill")}if(Ext.isArray(e.fill)){e.fill=e.fill[0]}if(l.type=="image"){k.on=true;k.src=e.src;k.type="tile";k.rotate=true}else{if(e.fill=="none"){k.on=false}else{if(typeof e.opacity=="number"){k.opacity=e.opacity}if(typeof e["fill-opacity"]=="number"){k.opacity=e["fill-opacity"]}k.on=true;if(typeof e.fill=="string"){a=e.fill.match(h.fillUrlRe);if(a){a=a[1];if(a.charAt(0)=="#"){i=h.gradientsColl.getByKey(a.substring(1))}if(i){m=e.rotation;c=-(i.angle+270+(m?m.degrees:0))%360;if(c===0){c=180}k.angle=c;k.type="gradient";k.method="sigma";k.colors=i.colors}else{k.src=a;k.type="tile";k.rotate=true}}else{k.color=Ext.draw.Color.toHex(e.fill)||e.fill;k.src="";k.type="solid"}}}}f.appendChild(k)},setStroke:function(b,h){var f=this,e=b.el.dom,i=b.strokeEl,g=false,c,a;if(!i){i=b.strokeEl=f.createNode("stroke");g=true}if(Ext.isArray(h.stroke)){h.stroke=h.stroke[0]}if(!h.stroke||h.stroke=="none"||h.stroke==0||h["stroke-width"]==0){i.on=false}else{i.on=true;if(h.stroke&&!h.stroke.match(f.fillUrlRe)){i.color=Ext.draw.Color.toHex(h.stroke)}i.joinstyle=h["stroke-linejoin"];i.endcap=h["stroke-linecap"]||"round";i.miterlimit=h["stroke-miterlimit"]||8;c=parseFloat(h["stroke-width"]||1)*0.75;a=h["stroke-opacity"]||1;if(Ext.isNumber(c)&&c<1){i.weight=1;i.opacity=a*c}else{i.weight=c;i.opacity=a}}if(g){e.appendChild(i)}},setClip:function(b,g){var f=this,c=b.el,a=b.clipEl,e=String(g["clip-rect"]).split(f.separatorRe);if(!a){a=b.clipEl=f.el.insertFirst(Ext.getDoc().dom.createElement("div"));a.addCls(Ext.baseCSSPrefix+"vml-sprite")}if(e.length==4){e[2]=+e[2]+(+e[0]);e[3]=+e[3]+(+e[1]);a.setStyle("clip",Ext.String.format("rect({1}px {2}px {3}px {0}px)",e[0],e[1],e[2],e[3]));a.setSize(f.el.width,f.el.height)}else{a.setStyle("clip","")}},setTextAttributes:function(i,c){var h=this,a=i.vml,f=a.textpath.style,g=h.span.style,k=h.zoom,l=Math.round,m={fontSize:"font-size",fontWeight:"font-weight",fontStyle:"font-style"},b,e;if(i.dirtyFont){if(c.font){f.font=g.font=c.font}if(c["font-family"]){f.fontFamily='"'+c["font-family"].split(",")[0].replace(h.fontFamilyRe,"")+'"';g.fontFamily=c["font-family"]}for(b in m){e=c[m[b]];if(e){f[b]=g[b]=e}}h.setText(i,c.text);if(a.textpath.string){h.span.innerHTML=String(a.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>")}a.W=h.span.offsetWidth;a.H=h.span.offsetHeight+2;if(c["text-anchor"]=="middle"){f["v-text-align"]="center"}else{if(c["text-anchor"]=="end"){f["v-text-align"]="right";a.bbx=-Math.round(a.W/2)}else{f["v-text-align"]="left";a.bbx=Math.round(a.W/2)}}}a.X=c.x;a.Y=c.y;a.path.v=Ext.String.format("m{0},{1}l{2},{1}",Math.round(a.X*k),Math.round(a.Y*k),Math.round(a.X*k)+1);i.bbox.plain=null;i.bbox.transform=null;i.dirtyFont=false},setText:function(a,b){a.vml.textpath.string=Ext.htmlDecode(b)},hide:function(){this.el.hide()},show:function(){this.el.show()},hidePrim:function(a){a.el.addCls(Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(a){a.el.removeCls(Ext.baseCSSPrefix+"hide-visibility")},setSize:function(b,a){var c=this;b=b||c.width;a=a||c.height;c.width=b;c.height=a;if(c.el){if(b!=undefined){c.el.setWidth(b)}if(a!=undefined){c.el.setHeight(a)}c.applyViewBox();c.callParent(arguments)}},setViewBox:function(b,e,c,a){this.callParent(arguments);this.viewBox={x:b,y:e,width:c,height:a};this.applyViewBox()},applyViewBox:function(){var e=this,m=e.viewBox,a=e.width,h=e.height,g,f,k,b,i,c,l;if(m&&(a||h)){g=m.x;f=m.y;k=m.width;b=m.height;i=h/b;c=a/k;if(k*i<a){g-=(a-k*i)/2/i}if(b*c<h){f-=(h-b*c)/2/c}l=1/Math.max(k/a,b/h);e.viewBoxShift={dx:-g,dy:-f,scale:l};e.items.each(function(n){e.transform(n)})}},onAdd:function(a){this.callParent(arguments);if(this.el){this.renderItem(a)}},onRemove:function(a){if(a.el){a.el.remove();delete a.el}this.callParent(arguments)},createNode:(function(){try{var b=Ext.getDoc().dom;if(!b.namespaces.rvml){b.namespaces.add("rvml","urn:schemas-microsoft-com:vml")}return function(c){return b.createElement("<rvml:"+c+' class="rvml">')}}catch(a){return function(c){return b.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}})(),render:function(a){var c=this,e=Ext.getDoc().dom;if(!c.el){var b=e.createElement("div");c.el=Ext.get(b);c.el.addCls(c.baseVmlCls);c.span=e.createElement("span");Ext.get(c.span).addCls(c.measureSpanCls);b.appendChild(c.span);c.el.setSize(c.width||10,c.height||10);a.appendChild(b);c.el.on({scope:c,mouseup:c.onMouseUp,mousedown:c.onMouseDown,mouseover:c.onMouseOver,mouseout:c.onMouseOut,mousemove:c.onMouseMove,mouseenter:c.onMouseEnter,mouseleave:c.onMouseLeave,click:c.onClick})}c.renderAll()},renderAll:function(){this.items.each(this.renderItem,this)},redraw:function(a){a.dirty=true;this.renderItem(a)},renderItem:function(a){if(!this.el){return}if(!a.el){this.createSpriteElement(a)}if(a.dirty){this.applyAttrs(a);if(a.dirtyTransform){this.applyTransformations(a)}}},rotationCompensation:function(e,c,a){var b=Ext.create("Ext.draw.Matrix");b.rotate(-e,0.5,0.5);return{x:b.x(c,a),y:b.y(c,a)}},extractTransform:function(l){var h=this,k=Ext.create("Ext.draw.Matrix"),f,c,a,e,g=0,b=h.viewBoxShift;for(c=l.transformations,a=c.length;g<a;g++){e=c[g];switch(e.type){case"translate":k.translate(e.x,e.y);break;case"rotate":k.rotate(e.degrees,e.x,e.y);break;case"scale":k.scale(e.x||e.scale,e.y||e.scale,e.centerX,e.centerY);break}}if(b){k.add(1,0,0,1,b.dx,b.dy);k.prepend(b.scale,0,0,b.scale,0,0)}return l.matrix=k},setSimpleCoords:function(p,m,l,s,r,f){var k=this,n=p.matrix,e=p.el.dom,a=e.style,c=1,g="",q=e.getElementsByTagName("fill")[0],i=k.zoom/m,h=k.zoom/l,b;if(!m||!l){return}e.coordsize=Math.abs(i)+" "+Math.abs(h);a.rotation=f*(m*l<0?-1:1);if(f){b=k.rotationCompensation(f,s,r);s=b.x;r=b.y}if(m<0){g+="x"}if(l<0){g+=" y";c=-1}a.flip=g;e.coordorigin=(s*-i)+" "+(r*-h);if(q){e.removeChild(q);b=k.rotationCompensation(f,n.x(p.x,p.y),n.y(p.x,p.y));q.position=b.x*c+" "+b.y*c;q.size=p.width*Math.abs(m)+" "+p.height*Math.abs(l);e.appendChild(q)}},transform:function(n){var k=this,b=n.el,s=n.skew,f=b.dom,g=f.style,m=k.extractTransform(n).clone(),l,r=k.zoom,q=f.getElementsByTagName("fill")[0],a=!String(n.fill).indexOf("url("),e,i;if(n.type!="image"&&s&&!a){s.matrix=m.toString();e=m.offset();if(e[0]>32767){e[0]=32767}else{if(e[0]<-32768){e[0]=-32768}}if(e[1]>32767){e[1]=32767}else{if(e[1]<-32768){e[1]=-32768}}s.offset=e}else{if(s){s.matrix="1 0 0 1";s.offset="0 0"}l=m.split();if(l.isSimple){g.filter="";k.setSimpleCoords(n,l.scaleX,l.scaleY,l.translateX,l.translateY,l.rotate/Math.PI*180)}else{g.filter=m.toFilter();var h=k.getBBox(n),t=h.x-n.x,p=h.y-n.y;f.coordorigin=(t*-r)+" "+(p*-r);if(q){f.removeChild(q);q.position=t+" "+p;q.size=n.width*n.scale.x+" "+n.height*1.1;f.appendChild(q)}}}},createItem:function(a){return Ext.create("Ext.draw.Sprite",a)},getRegion:function(){return this.el.getRegion()},addCls:function(a,b){if(a&&a.el){a.el.addCls(b)}},removeCls:function(a,b){if(a&&a.el){a.el.removeCls(b)}},addGradient:function(e){var a=this.gradientsColl||(this.gradientsColl=Ext.create("Ext.util.MixedCollection")),b=[],c=Ext.create("Ext.util.MixedCollection");c.addAll(e.stops);c.sortByKey("ASC",function(g,f){g=parseInt(g,10);f=parseInt(f,10);return g>f?1:(g<f?-1:0)});c.eachKey(function(g,f){b.push(g+"% "+f.color)});a.add(e.id,{colors:b.join(","),angle:e.angle})},destroy:function(){var a=this;a.callParent(arguments);if(a.el){a.el.remove()}delete a.el}});Ext.define("Ext.data.proxy.Rest",{extend:"Ext.data.proxy.Ajax",alternateClassName:"Ext.data.RestProxy",alias:"proxy.rest",appendId:true,batchActions:false,buildUrl:function(g){var f=this,c=g.operation,b=c.records||[],a=b[0],h=f.format,e=f.getUrl(g),i=a?a.getId():c.id;if(f.appendId&&i){if(!e.match(/\/$/)){e+="/"}e+=i}if(h){if(!e.match(/\.$/)){e+="."}e+=h}g.url=e;return f.callParent(arguments)}},function(){Ext.apply(this.prototype,{actionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"}})});Ext.define("Ext.ux.window.Notification",{extend:"Ext.window.Window",alias:"widget.uxNotification",cls:"ux-notification-light",autoHide:true,autoHeight:true,plain:false,draggable:false,shadow:false,focus:Ext.emptyFn,manager:null,useXAxis:false,position:"tr",spacing:6,paddingX:30,paddingY:10,slideInAnimation:"easeIn",slideBackAnimation:"bounceOut",slideInDuration:1500,slideBackDuration:1000,hideDuration:500,autoCloseDelay:7000,stickOnClick:true,stickWhileHover:true,isHiding:false,readyToHide:false,xPos:0,yPos:0,statics:{defaultManager:{el:null}},getXposAlignedToManager:function(){var a=this;var b=0;if(a.manager&&a.manager.el&&a.manager.el.dom){if(!a.useXAxis){return a.el.getLeft()}else{if(a.position=="br"||a.position=="tr"||a.position=="r"){b+=a.manager.el.getAnchorXY("r")[0];b-=(a.el.getWidth()+a.paddingX)}else{b+=a.manager.el.getAnchorXY("l")[0];b+=a.paddingX}}}return b},getYposAlignedToManager:function(){var b=this;var a=0;if(b.manager&&b.manager.el&&b.manager.el.dom){if(b.useXAxis){return b.el.getTop()}else{if(b.position=="br"||b.position=="bl"||b.position=="b"){a+=b.manager.el.getAnchorXY("b")[1];a-=(b.el.getHeight()+b.paddingY)}else{a+=b.manager.el.getAnchorXY("t")[1];a+=b.paddingY}}}return a},getXposAlignedToSibling:function(a){var b=this;if(b.useXAxis){if(b.position=="tl"||b.position=="bl"||b.position=="l"){return(a.xPos+a.el.getWidth()+a.spacing)}else{return(a.xPos-b.el.getWidth()-b.spacing)}}else{return b.el.getLeft()}},getYposAlignedToSibling:function(a){var b=this;if(b.useXAxis){return b.el.getTop()}else{if(b.position=="tr"||b.position=="tl"||b.position=="t"){return(a.yPos+a.el.getHeight()+a.spacing)}else{return(a.yPos-b.el.getHeight()-a.spacing)}}},getNotifications:function(b){var a=this;if(!a.manager.notifications[b]){a.manager.notifications[b]=[]}return a.manager.notifications[b]},beforeShow:function(){var b=this;if(Ext.isDefined(b.corner)){b.position=b.corner}if(Ext.isDefined(b.slideDownAnimation)){b.slideBackAnimation=b.slideDownAnimation}if(Ext.isDefined(b.autoDestroyDelay)){b.autoCloseDelay=b.autoDestroyDelay}if(Ext.isDefined(b.slideInDelay)){b.slideInDuration=b.slideInDelay}if(Ext.isDefined(b.slideDownDelay)){b.slideBackDuration=b.slideDownDelay}if(Ext.isDefined(b.fadeDelay)){b.hideDuration=b.fadeDelay}b.position=b.position.replace(/c/,"");switch(b.position){case"br":b.paddingFactorX=-1;b.paddingFactorY=-1;b.siblingAlignment="br-br";if(b.useXAxis){b.managerAlignment="bl-br"}else{b.managerAlignment="tr-br"}break;case"bl":b.paddingFactorX=1;b.paddingFactorY=-1;b.siblingAlignment="bl-bl";if(b.useXAxis){b.managerAlignment="br-bl"}else{b.managerAlignment="tl-bl"}break;case"tr":b.paddingFactorX=-1;b.paddingFactorY=1;b.siblingAlignment="tr-tr";if(b.useXAxis){b.managerAlignment="tl-tr"}else{b.managerAlignment="br-tr"}break;case"tl":b.paddingFactorX=1;b.paddingFactorY=1;b.siblingAlignment="tl-tl";if(b.useXAxis){b.managerAlignment="tr-tl"}else{b.managerAlignment="bl-tl"}break;case"b":b.paddingFactorX=0;b.paddingFactorY=-1;b.siblingAlignment="b-b";b.useXAxis=0;b.managerAlignment="t-b";break;case"t":b.paddingFactorX=0;b.paddingFactorY=1;b.siblingAlignment="t-t";b.useXAxis=0;b.managerAlignment="b-t";break;case"l":b.paddingFactorX=1;b.paddingFactorY=0;b.siblingAlignment="l-l";b.useXAxis=1;b.managerAlignment="r-l";break;case"r":b.paddingFactorX=-1;b.paddingFactorY=0;b.siblingAlignment="r-r";b.useXAxis=1;b.managerAlignment="l-r";break}if(typeof b.manager=="string"){b.manager=Ext.getCmp(b.manager)}if(!b.manager){b.manager=b.statics().defaultManager;if(!b.manager.el){b.manager.el=Ext.getBody()}}if(typeof b.manager.notifications=="undefined"){b.manager.notifications={}}if(b.stickOnClick){if(b.body&&b.body.dom){Ext.fly(b.body.dom).on("click",function(){b.cancelAutoHide();b.addCls("notification-fixed")},b)}}b.el.hover(function(){b.mouseIsOver=true},function(){b.mouseIsOver=false},b);if(b.autoHide){b.task=new Ext.util.DelayedTask(b.doAutoHide,b);b.task.delay(b.autoCloseDelay)}var a=b.getNotifications(b.managerAlignment);if(a.length){b.el.alignTo(a[a.length-1].el,b.siblingAlignment,[0,0]);b.xPos=b.getXposAlignedToSibling(a[a.length-1]);b.yPos=b.getYposAlignedToSibling(a[a.length-1])}else{b.el.alignTo(b.manager.el,b.managerAlignment,[(b.paddingX*b.paddingFactorX),(b.paddingY*b.paddingFactorY)]);b.xPos=b.getXposAlignedToManager();b.yPos=b.getYposAlignedToManager()}Ext.Array.include(a,b);b.stopAnimation();b.el.animate({to:{x:b.xPos,y:b.yPos,opacity:1},easing:b.slideInAnimation,duration:b.slideInDuration,dynamic:true})},slideBack:function(){var c=this;var b=c.getNotifications(c.managerAlignment);var a=Ext.Array.indexOf(b,c);if(!c.isHiding&&c.el&&c.manager&&c.manager.el&&c.manager.el.dom&&c.manager.el.isVisible()){if(a){c.xPos=c.getXposAlignedToSibling(b[a-1]);c.yPos=c.getYposAlignedToSibling(b[a-1])}else{c.xPos=c.getXposAlignedToManager();c.yPos=c.getYposAlignedToManager()}c.stopAnimation();c.el.animate({to:{x:c.xPos,y:c.yPos},easing:c.slideBackAnimation,duration:c.slideBackDuration,dynamic:true})}},cancelAutoHide:function(){var a=this;if(a.autoHide){a.task.cancel();a.autoHide=false}},doAutoHide:function(){var a=this;a.el.hover(function(){},function(){a.hide()},a);if(!(a.stickWhileHover&&a.mouseIsOver)){a.hide()}},hide:function(){var a=this;if(!a.isHiding&&a.el){a.isHiding=true;a.cancelAutoHide();a.stopAnimation();a.el.animate({to:{opacity:0},easing:"easeIn",duration:a.hideDuration,dynamic:false,listeners:{afteranimate:function(){if(a.manager){var c=a.getNotifications(a.managerAlignment);var b=Ext.Array.indexOf(c,a);if(b!=-1){Ext.Array.erase(c,b,1);for(;b<c.length;b++){c[b].slideBack()}}}a.readyToHide=true;a.hide()}}})}if(a.readyToHide){a.isHiding=false;a.readyToHide=false;a.removeCls("notification-fixed");this.callParent(arguments)}}});Ext.define("Ext.grid.Scroller",{extend:"Ext.Component",alias:"widget.gridscroller",weight:110,baseCls:Ext.baseCSSPrefix+"scroller",focusable:false,reservedSpace:0,renderTpl:['<div class="'+Ext.baseCSSPrefix+'scroller-ct" id="{baseId}_ct">','<div class="'+Ext.baseCSSPrefix+'stretcher" id="{baseId}_stretch"></div>',"</div>"],initComponent:function(){var c=this,b=c.dock,a=Ext.baseCSSPrefix+"scroller-vertical";c.offsets={bottom:0};c.scrollProp="scrollTop";c.vertical=true;c.sizeProp="width";if(b==="top"||b==="bottom"){a=Ext.baseCSSPrefix+"scroller-horizontal";c.sizeProp="height";c.scrollProp="scrollLeft";c.vertical=false;c.weight+=5}c.cls+=(" "+a);Ext.applyIf(c.renderSelectors,{stretchEl:"."+Ext.baseCSSPrefix+"stretcher",scrollEl:"."+Ext.baseCSSPrefix+"scroller-ct"});c.callParent()},ensureDimension:function(){var a=this,b=a.sizeProp;a[b]=a.scrollerSize=Ext.getScrollbarSize()[b]},initRenderData:function(){var b=this,a=b.callParent(arguments)||{};a.baseId=b.id;return a},afterRender:function(){var a=this;a.callParent();a.mon(a.scrollEl,"scroll",a.onElScroll,a);Ext.cache[a.el.id].skipGarbageCollection=true},onAdded:function(a){this.ownerGrid=a;this.callParent(arguments)},getSizeCalculation:function(){var h=this,c=h.getPanel(),g=1,b=1,e,i;if(!h.vertical){var f=c.query("tableview"),a=f[1]||f[0];if(!a){return false}g=a.headerCt.getFullWidth();if(Ext.isIEQuirks){g--}}else{e=c.down("tableview:not([lockableInjected])");if(!e||!e.el){return false}i=e.el.child("table",true);if(!i){return false}b=i.offsetHeight}if(isNaN(g)){g=1}if(isNaN(b)){b=1}return{width:g,height:b}},invalidate:function(e){var g=this,f=g.stretchEl;if(!f||!g.ownerCt){return}var k=g.getSizeCalculation(),i=g.scrollEl,b=i.dom,c=g.reservedSpace,h,a=5;if(k){f.setSize(k);k=g.el.getSize(true);if(g.vertical){k.width+=a;k.height-=c;h="left"}else{k.width-=c;k.height+=a;h="top"}i.setSize(k);b.style[h]=(-a)+"px";b.scrollTop=b.scrollTop}},afterComponentLayout:function(){this.callParent(arguments);this.invalidate()},restoreScrollPos:function(){var c=this,b=this.scrollEl,a=b&&b.dom;if(c._scrollPos!==null&&a){a[c.scrollProp]=c._scrollPos;c._scrollPos=null}},setReservedSpace:function(b){var a=this;if(a.reservedSpace!==b){a.reservedSpace=b;a.invalidate()}},saveScrollPos:function(){var c=this,b=this.scrollEl,a=b&&b.dom;c._scrollPos=a?a[c.scrollProp]:null},setScrollTop:function(c){var b=this.scrollEl,a=b&&b.dom;if(a){return a.scrollTop=Ext.Number.constrain(c,0,a.scrollHeight-a.clientHeight)}},setScrollLeft:function(c){var b=this.scrollEl,a=b&&b.dom;if(a){return a.scrollLeft=Ext.Number.constrain(c,0,a.scrollWidth-a.clientWidth)}},scrollByDeltaY:function(c){var b=this.scrollEl,a=b&&b.dom;if(a){return this.setScrollTop(a.scrollTop+c)}},scrollByDeltaX:function(c){var b=this.scrollEl,a=b&&b.dom;if(a){return this.setScrollLeft(a.scrollLeft+c)}},scrollToTop:function(){this.setScrollTop(0)},onElScroll:function(a,b){this.fireEvent("bodyscroll",a,b)},getPanel:function(){var a=this;if(!a.panel){a.panel=this.up("[scrollerOwner]")}return a.panel}});Ext.define("Ext.form.RadioManager",{extend:"Ext.util.MixedCollection",singleton:true,getByName:function(a){return this.filterBy(function(b){return b.name==a})},getWithValue:function(a,b){return this.filterBy(function(c){return c.name==a&&c.inputValue==b})},getChecked:function(a){return this.findBy(function(b){return b.name==a&&b.checked})}});Ext.define("Ext.data.Tree",{alias:"data.tree",mixins:{observable:"Ext.util.Observable"},root:null,constructor:function(a){var b=this;b.mixins.observable.constructor.call(b);if(a){b.setRootNode(a)}},getRootNode:function(){return this.root},setRootNode:function(b){var a=this;a.root=b;Ext.data.NodeInterface.decorate(b);if(a.fireEvent("beforeappend",null,b)!==false){b.set("root",true);b.updateInfo();a.relayEvents(b,["append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert","expand","collapse","beforeexpand","beforecollapse","rootchange"]);b.on({scope:a,insert:a.onNodeInsert,append:a.onNodeAppend,remove:a.onNodeRemove});a.nodeHash={};a.registerNode(b);a.fireEvent("append",null,b);a.fireEvent("rootchange",b)}return b},flatten:function(){var a=[],c=this.nodeHash,b;for(b in c){if(c.hasOwnProperty(b)){a.push(c[b])}}return a},onNodeInsert:function(a,b){this.registerNode(b,true)},onNodeAppend:function(a,b){this.registerNode(b,true)},onNodeRemove:function(a,b){this.unregisterNode(b,true)},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(b,a){this.nodeHash[b.getId()||b.internalId]=b;if(a===true){b.eachChild(function(c){this.registerNode(c,true)},this)}},unregisterNode:function(b,a){delete this.nodeHash[b.getId()||b.internalId];if(a===true){b.eachChild(function(c){this.unregisterNode(c,true)},this)}},sort:function(b,a){this.getRootNode().sort(b,a)},filter:function(b,a){this.getRootNode().filter(b,a)}});Ext.define("Ext.data.NodeInterface",{requires:["Ext.data.Field"],statics:{decorate:function(c){if(!c.isNode){var k=Ext.ModelManager,f=c.modelName,h=k.getModel(f),l=h.prototype.idProperty,g=[],b,a,e;h.override(this.getPrototypeBody());g=this.applyFields(h,[{name:l,type:"string",defaultValue:null},{name:"parentId",type:"string",defaultValue:null},{name:"index",type:"int",defaultValue:null},{name:"depth",type:"int",defaultValue:0},{name:"expanded",type:"bool",defaultValue:false,persist:false},{name:"expandable",type:"bool",defaultValue:true,persist:false},{name:"checked",type:"auto",defaultValue:null},{name:"leaf",type:"bool",defaultValue:false,persist:false},{name:"cls",type:"string",defaultValue:null,persist:false},{name:"iconCls",type:"string",defaultValue:null,persist:false},{name:"icon",type:"string",defaultValue:null,persist:false},{name:"root",type:"boolean",defaultValue:false,persist:false},{name:"isLast",type:"boolean",defaultValue:false,persist:false},{name:"isFirst",type:"boolean",defaultValue:false,persist:false},{name:"allowDrop",type:"boolean",defaultValue:true,persist:false},{name:"allowDrag",type:"boolean",defaultValue:true,persist:false},{name:"loaded",type:"boolean",defaultValue:false,persist:false},{name:"loading",type:"boolean",defaultValue:false,persist:false},{name:"href",type:"string",defaultValue:null,persist:false},{name:"hrefTarget",type:"string",defaultValue:null,persist:false},{name:"qtip",type:"string",defaultValue:null,persist:false},{name:"qtitle",type:"string",defaultValue:null,persist:false}]);e=g.length;for(b=0;b<e;++b){a=g[b];if(c.get(a.name)===undefined){c.data[a.name]=a.defaultValue}}}Ext.applyIf(c,{firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,childNodes:[]});c.commit(true);c.enableBubble(["append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert","expand","collapse","beforeexpand","beforecollapse","sort"]);return c},applyFields:function(k,l){var c=k.prototype,f=c.fields,m=f.keys,h=l.length,b,e,a,g=[];for(e=0;e<h;e++){b=l[e];if(!Ext.Array.contains(m,b.name)){b=Ext.create("data.field",b);g.push(b);f.add(b)}}return g},getPrototypeBody:function(){return{isNode:true,createNode:function(a){if(Ext.isObject(a)&&!a.isModel){a=Ext.ModelManager.create(a,this.modelName)}return Ext.data.NodeInterface.decorate(a)},isLeaf:function(){return this.get("leaf")===true},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},updateInfo:function(l){var m=this,b=m.isRoot(),h=m.parentNode,c=(!h?true:h.firstChild==m),g=(!h?true:h.lastChild==m),f=0,n=m,a=m.childNodes,k=a.length,e=0;while(n.parentNode){++f;n=n.parentNode}m.beginEdit();m.set({isFirst:c,isLast:g,depth:f,index:h?h.indexOf(m):0,parentId:h?h.getId():null});m.endEdit(l);if(l){m.commit()}for(e=0;e<k;e++){a[e].updateInfo(l)}},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var a=this;if(a.get("expandable")){return !(a.isLeaf()||(a.isLoaded()&&!a.hasChildNodes()))}return false},appendChild:function(b,l,k){var g=this,c,f,e,h,a;if(Ext.isArray(b)){for(c=0,f=b.length;c<f;c++){g.appendChild(b[c])}}else{b=g.createNode(b);if(l!==true&&g.fireEvent("beforeappend",g,b)===false){return false}e=g.childNodes.length;h=b.parentNode;if(h){if(l!==true&&b.fireEvent("beforemove",b,h,g,e)===false){return false}h.removeChild(b,null,false,true)}e=g.childNodes.length;if(e===0){g.setFirstChild(b)}g.childNodes.push(b);b.parentNode=g;b.nextSibling=null;g.setLastChild(b);a=g.childNodes[e-1];if(a){b.previousSibling=a;a.nextSibling=b;a.updateInfo(k)}else{b.previousSibling=null}b.updateInfo(k);if(!g.isLoaded()){g.set("loaded",true)}else{if(g.childNodes.length===1){g.set("loaded",g.isLoaded())}}if(l!==true){g.fireEvent("append",g,b,e);if(h){b.fireEvent("move",b,h,g,e)}}return b}},getBubbleTarget:function(){return this.parentNode},removeChild:function(f,b,c,g){var e=this,a=e.indexOf(f);if(a==-1||(c!==true&&e.fireEvent("beforeremove",e,f)===false)){return false}Ext.Array.erase(e.childNodes,a,1);if(e.firstChild==f){e.setFirstChild(f.nextSibling)}if(e.lastChild==f){e.setLastChild(f.previousSibling)}if(f.previousSibling){f.previousSibling.nextSibling=f.nextSibling;f.previousSibling.updateInfo(g)}if(f.nextSibling){f.nextSibling.previousSibling=f.previousSibling;f.nextSibling.updateInfo(g)}if(c!==true){e.fireEvent("remove",e,f)}if(!e.childNodes.length){e.set("loaded",e.isLoaded())}if(b){f.destroy(true)}else{f.clear()}return f},copy:function(e,c){var g=this,b=g.callOverridden(arguments),a=g.childNodes?g.childNodes.length:0,f;if(c){for(f=0;f<a;f++){b.appendChild(g.childNodes[f].copy(true))}}return b},clear:function(a){var b=this;b.parentNode=b.previousSibling=b.nextSibling=null;if(a){b.firstChild=b.lastChild=null}},destroy:function(a){var c=this,b=c.destroyOptions;if(a===true){c.clear(true);Ext.each(c.childNodes,function(e){e.destroy(true)});c.childNodes=null;delete c.destroyOptions;c.callOverridden([b])}else{c.destroyOptions=a;c.remove(true)}},insertBefore:function(g,a,e){var f=this,b=f.indexOf(a),c=g.parentNode,h=b,i;if(!a){return f.appendChild(g)}if(g==a){return false}g=f.createNode(g);if(e!==true&&f.fireEvent("beforeinsert",f,g,a)===false){return false}if(c==f&&f.indexOf(g)<b){h--}if(c){if(e!==true&&g.fireEvent("beforemove",g,c,f,b,a)===false){return false}c.removeChild(g)}if(h===0){f.setFirstChild(g)}Ext.Array.splice(f.childNodes,h,0,g);g.parentNode=f;g.nextSibling=a;a.previousSibling=g;i=f.childNodes[h-1];if(i){g.previousSibling=i;i.nextSibling=g;i.updateInfo()}else{g.previousSibling=null}g.updateInfo();if(!f.isLoaded()){f.set("loaded",true)}else{if(f.childNodes.length===1){f.set("loaded",f.isLoaded())}}if(e!==true){f.fireEvent("insert",f,g,a);if(c){g.fireEvent("move",g,c,f,h,a)}}return g},insertChild:function(a,c){var b=this.childNodes[a];if(b){return this.insertBefore(c,b)}else{return this.appendChild(c)}},remove:function(b,c){var a=this.parentNode;if(a){a.removeChild(this,b,c,true)}return this},removeAll:function(a,b){var e=this.childNodes,c;while((c=e[0])){this.removeChild(c,a,b)}return this},getChildAt:function(a){return this.childNodes[a]},replaceChild:function(a,e,c){var b=e?e.nextSibling:null;this.removeChild(e,c);this.insertBefore(a,b,c);return e},indexOf:function(a){return Ext.Array.indexOf(this.childNodes,a)},getPath:function(e,c){e=e||this.idProperty;c=c||"/";var b=[this.get(e)],a=this.parentNode;while(a){b.unshift(a.get(e));a=a.parentNode}return c+b.join(c)},getDepth:function(){return this.get("depth")},bubble:function(c,b,a){var e=this;while(e){if(c.apply(b||e,a||[e])===false){break}e=e.parentNode}},cascade:function(){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.data.Node: cascade has been deprecated. Please use cascadeBy instead.")}return this.cascadeBy.apply(this,arguments)},cascadeBy:function(e,c,a){if(e.apply(c||this,a||[this])!==false){var g=this.childNodes,f=g.length,b;for(b=0;b<f;b++){g[b].cascadeBy(e,c,a)}}},eachChild:function(e,c,a){var g=this.childNodes,f=g.length,b;for(b=0;b<f;b++){if(e.apply(c||this,a||[g[b]])===false){break}}},findChild:function(b,c,a){return this.findChildBy(function(){return this.get(b)==c},null,a)},findChildBy:function(h,g,b){var f=this.childNodes,a=f.length,e=0,k,c;for(;e<a;e++){k=f[e];if(h.call(g||k,k)===true){return k}else{if(b){c=k.findChildBy(h,g,b);if(c!==null){return c}}}}return null},contains:function(a){return a.isAncestor(this)},isAncestor:function(a){var b=this.parentNode;while(b){if(b==a){return true}b=b.parentNode}return false},sort:function(g,b,a){var e=this.childNodes,f=e.length,c,h;if(f>0){Ext.Array.sort(e,g);for(c=0;c<f;c++){h=e[c];h.previousSibling=e[c-1];h.nextSibling=e[c+1];if(c===0){this.setFirstChild(h);h.updateInfo()}if(c==f-1){this.setLastChild(h);h.updateInfo()}if(b&&!h.isLeaf()){h.sort(g,true,true)}}if(a!==true){this.fireEvent("sort",this,e)}}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isLoading:function(){return this.get("loading")},isRoot:function(){return !this.parentNode},isVisible:function(){var a=this.parentNode;while(a){if(!a.isExpanded()){return false}a=a.parentNode}return true},expand:function(a,e,b){var c=this;if(!c.isLeaf()){if(c.isLoading()){c.on("expand",function(){c.expand(a,e,b)},c,{single:true})}else{if(!c.isExpanded()){c.fireEvent("beforeexpand",c,function(){c.set("expanded",true);c.fireEvent("expand",c,c.childNodes,false);if(a){c.expandChildren(true,e,b)}else{Ext.callback(e,b||c,[c.childNodes])}},c)}else{if(a){c.expandChildren(true,e,b)}else{Ext.callback(e,b||c,[c.childNodes])}}}}else{Ext.callback(e,b||c)}},expandChildren:function(e,k,l){var h=this,f=0,a=h.childNodes,g=a.length,c,b=0;for(;f<g;++f){c=a[f];if(!c.isLeaf()&&!c.isExpanded()){b++;a[f].expand(e,function(){b--;if(k&&!b){Ext.callback(k,l||h,[h.childNodes])}})}}if(!b&&k){Ext.callback(k,l||h,[h.childNodes])}},collapse:function(a,e,b){var c=this;if(!c.isLeaf()){if(!c.collapsing&&c.isExpanded()){c.fireEvent("beforecollapse",c,function(){c.set("expanded",false);c.fireEvent("collapse",c,c.childNodes,false);if(a){c.collapseChildren(true,e,b)}else{Ext.callback(e,b||c,[c.childNodes])}},c)}else{if(a){c.collapseChildren(true,e,b)}}}else{Ext.callback(e,b||c,[c.childNodes])}},collapseChildren:function(e,k,l){var h=this,f=0,b=h.childNodes,g=b.length,c,a=0;for(;f<g;++f){c=b[f];if(!c.isLeaf()&&c.isExpanded()){a++;b[f].collapse(e,function(){a--;if(k&&!a){Ext.callback(k,l||h,[h.childNodes])}})}}if(!a&&k){Ext.callback(k,l||h,[h.childNodes])}}}}}});Ext.define("Ext.data.NodeStore",{extend:"Ext.data.Store",alias:"store.node",requires:["Ext.data.NodeInterface"],node:null,recursive:false,rootVisible:false,constructor:function(a){var c=this,b;a=a||{};Ext.apply(c,a);if(Ext.isDefined(c.proxy)){Ext.Error.raise("A NodeStore cannot be bound to a proxy. Instead bind it to a record decorated with the NodeInterface by setting the node config.")}a.proxy={type:"proxy"};c.callParent([a]);c.addEvents("expand","collapse","beforeexpand","beforecollapse");b=c.node;if(b){c.node=null;c.setNode(b)}},setNode:function(b){var a=this;if(a.node&&a.node!=b){a.mun(a.node,{expand:a.onNodeExpand,collapse:a.onNodeCollapse,append:a.onNodeAppend,insert:a.onNodeInsert,remove:a.onNodeRemove,sort:a.onNodeSort,scope:a});a.node=null}if(b){Ext.data.NodeInterface.decorate(b);a.removeAll();if(a.rootVisible){a.add(b)}a.mon(b,{expand:a.onNodeExpand,collapse:a.onNodeCollapse,append:a.onNodeAppend,insert:a.onNodeInsert,remove:a.onNodeRemove,sort:a.onNodeSort,scope:a});a.node=b;if(b.isExpanded()&&b.isLoaded()){a.onNodeExpand(b,b.childNodes,true)}}},onNodeSort:function(b,c){var a=this;if((a.indexOf(b)!==-1||(b===a.node&&!a.rootVisible)&&b.isExpanded())){a.onNodeCollapse(b,c,true);a.onNodeExpand(b,c,true)}},onNodeExpand:function(g,e,c){var k=this,a=k.indexOf(g)+1,h=e?e.length:0,f,b;if(!k.recursive&&g!==k.node){return}if(!k.isVisible(g)){return}if(!c&&k.fireEvent("beforeexpand",g,e,a)===false){return}if(h){k.insert(a,e);for(f=0;f<h;f++){b=e[f];if(b.isExpanded()){if(b.isLoaded()){k.onNodeExpand(b,b.childNodes,true)}else{b.set("expanded",false);b.expand()}}}}if(!c){k.fireEvent("expand",g,e)}},onNodeCollapse:function(g,c,b){var k=this,h=c.length,f=k.indexOf(g)+1,e,a;if(!k.recursive&&g!==k.node){return}if(!b&&k.fireEvent("beforecollapse",g,c,f)===false){return}for(e=0;e<h;e++){a=c[e];k.remove(a);if(a.isExpanded()){k.onNodeCollapse(a,a.childNodes,true)}}if(!b){k.fireEvent("collapse",g,c,f)}},onNodeAppend:function(e,g,b){var f=this,a,c;if(f.isVisible(g)){if(b===0){a=e}else{c=g.previousSibling;while(c.isExpanded()&&c.lastChild){c=c.lastChild}a=c}f.insert(f.indexOf(a)+1,g);if(!g.isLeaf()&&g.isExpanded()){if(g.isLoaded()){f.onNodeExpand(g,g.childNodes,true)}else{g.set("expanded",false);g.expand()}}}},onNodeInsert:function(c,f,a){var e=this,b=this.indexOf(a);if(b!=-1&&e.isVisible(f)){e.insert(b,f);if(!f.isLeaf()&&f.isExpanded()){if(f.isLoaded()){e.onNodeExpand(f,f.childNodes,true)}else{f.set("expanded",false);f.expand()}}}},onNodeRemove:function(b,e,a){var c=this;if(c.indexOf(e)!=-1){if(!e.isLeaf()&&e.isExpanded()){c.onNodeCollapse(e,e.childNodes,true)}c.remove(e)}},isVisible:function(b){var a=b.parentNode;while(a){if(a===this.node&&!this.rootVisible&&a.isExpanded()){return true}if(this.indexOf(a)===-1||!a.isExpanded()){return false}a=a.parentNode}return true}});Ext.define("Ext.form.CheckboxManager",{extend:"Ext.util.MixedCollection",singleton:true,getByName:function(a){return this.filterBy(function(b){return b.name==a})},getWithValue:function(a,b){return this.filterBy(function(c){return c.name==a&&c.inputValue==b})},getChecked:function(a){return this.filterBy(function(b){return b.name==a&&b.checked})}});Ext.define("Ext.selection.Model",{extend:"Ext.util.Observable",alternateClassName:"Ext.AbstractSelectionModel",requires:["Ext.data.StoreManager"],allowDeselect:false,selected:null,pruneRemoved:true,constructor:function(a){var b=this;a=a||{};Ext.apply(b,a);b.addEvents("selectionchange");b.modes={SINGLE:true,SIMPLE:true,MULTI:true};b.setSelectionMode(a.mode||b.mode);b.selected=Ext.create("Ext.util.MixedCollection");b.callParent(arguments)},bind:function(a,b){var c=this;if(!b&&c.store){if(a!==c.store&&c.store.autoDestroy){c.store.destroyStore()}else{c.store.un("add",c.onStoreAdd,c);c.store.un("clear",c.onStoreClear,c);c.store.un("remove",c.onStoreRemove,c);c.store.un("update",c.onStoreUpdate,c)}}if(a){a=Ext.data.StoreManager.lookup(a);a.on({add:c.onStoreAdd,clear:c.onStoreClear,remove:c.onStoreRemove,update:c.onStoreUpdate,scope:c})}c.store=a;if(a&&!b){c.refresh()}},selectAll:function(b){var f=this,e=f.store.getRange(),c=0,a=e.length,g=f.getSelection().length;f.bulkChange=true;for(;c<a;c++){f.doSelect(e[c],true,b)}delete f.bulkChange;f.maybeFireSelectionChange(f.getSelection().length!==g)},deselectAll:function(b){var f=this,e=f.getSelection(),c=0,a=e.length,g=f.getSelection().length;f.bulkChange=true;for(;c<a;c++){f.doDeselect(e[c],b)}delete f.bulkChange;f.maybeFireSelectionChange(f.getSelection().length!==g)},selectWithEvent:function(a,f,c){var b=this;switch(b.selectionMode){case"MULTI":if(f.ctrlKey&&b.isSelected(a)){b.doDeselect(a,false)}else{if(f.shiftKey&&b.lastFocused){b.selectRange(b.lastFocused,a,f.ctrlKey)}else{if(f.ctrlKey){b.doSelect(a,true,false)}else{if(b.isSelected(a)&&!f.shiftKey&&!f.ctrlKey&&b.selected.getCount()>1){b.doSelect(a,c,false)}else{b.doSelect(a,false)}}}}break;case"SIMPLE":if(b.isSelected(a)){b.doDeselect(a)}else{b.doSelect(a,true)}break;case"SINGLE":if(b.allowDeselect&&b.isSelected(a)){b.doDeselect(a)}else{b.doSelect(a,false)}break}},selectRange:function(m,f,n,c){var k=this,l=k.store,e=0,h,g,a,b=[];if(k.isLocked()){return}if(!n){k.deselectAll(true)}if(!Ext.isNumber(m)){m=l.indexOf(m)}if(!Ext.isNumber(f)){f=l.indexOf(f)}if(m>f){g=f;f=m;m=g}for(h=m;h<=f;h++){if(k.isSelected(l.getAt(h))){e++}}if(!c){a=-1}else{a=(c=="up")?m:f}for(h=m;h<=f;h++){if(e==(f-m+1)){if(h!=a){k.doDeselect(h,true)}}else{b.push(l.getAt(h))}}k.doMultiSelect(b,true)},select:function(b,c,a){if(Ext.isDefined(b)){this.doSelect(b,c,a)}},deselect:function(b,a){this.doDeselect(b,a)},doSelect:function(c,f,b){var e=this,a;if(e.locked){return}if(typeof c==="number"){c=[e.store.getAt(c)]}if(e.selectionMode=="SINGLE"&&c){a=c.length?c[0]:c;e.doSingleSelect(a,b)}else{e.doMultiSelect(c,f,b)}},doMultiSelect:function(a,m,l){var h=this,b=h.selected,k=false,e=0,g,f;if(h.locked){return}a=!Ext.isArray(a)?[a]:a;g=a.length;if(!m&&b.getCount()>0){if(h.doDeselect(h.getSelection(),l)===false){return}}function c(){b.add(f);k=true}for(;e<g;e++){f=a[e];if(m&&h.isSelected(f)){continue}h.lastSelected=f;h.onSelectChange(f,true,l,c)}h.setLastFocused(f,l);h.maybeFireSelectionChange(k&&!l)},doDeselect:function(a,l){var k=this,b=k.selected,e=0,h,f,m=0,g=0;if(k.locked){return false}if(typeof a==="number"){a=[k.store.getAt(a)]}else{if(!Ext.isArray(a)){a=[a]}}function c(){++g;b.remove(f)}h=a.length;for(;e<h;e++){f=a[e];if(k.isSelected(f)){if(k.lastSelected==f){k.lastSelected=b.last()}++m;k.onSelectChange(f,false,l,c)}}k.maybeFireSelectionChange(g>0&&!l);return g===m},doSingleSelect:function(a,b){var e=this,g=false,c=e.selected;if(e.locked){return}if(e.isSelected(a)){return}function f(){e.bulkChange=true;if(c.getCount()>0&&e.doDeselect(e.lastSelected,b)===false){delete e.bulkChange;return false}delete e.bulkChange;c.add(a);e.lastSelected=a;g=true}e.onSelectChange(a,true,b,f);if(g){if(!b){e.setLastFocused(a)}e.maybeFireSelectionChange(!b)}},setLastFocused:function(c,b){var e=this,a=e.lastFocused;e.lastFocused=c;e.onLastFocusChanged(a,c,b)},isFocused:function(a){return a===this.getLastFocused()},maybeFireSelectionChange:function(a){var b=this;if(a&&!b.bulkChange){b.fireEvent("selectionchange",b,b.getSelection())}},getLastSelected:function(){return this.lastSelected},getLastFocused:function(){return this.lastFocused},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(a){a=a?a.toUpperCase():"SINGLE";this.selectionMode=this.modes[a]?a:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(a){this.locked=!!a},isSelected:function(a){a=Ext.isNumber(a)?this.store.getAt(a):a;return this.selected.indexOf(a)!==-1},hasSelection:function(){return this.selected.getCount()>0},refresh:function(){var h=this,b=[],g=h.getSelection(),a=g.length,f,k,e=0,c=this.getLastFocused();for(;e<a;e++){f=g[e];if(!this.pruneRemoved||h.store.indexOf(f)!==-1){b.push(f)}}if(h.selected.getCount()!=b.length){k=true}h.clearSelections();if(h.store.indexOf(c)!==-1){this.setLastFocused(c,true)}if(b.length){h.doSelect(b,false,true)}h.maybeFireSelectionChange(k)},clearSelections:function(){this.selected.clear();this.lastSelected=null;this.setLastFocused(null)},onStoreAdd:function(){},onStoreClear:function(){if(this.selected.getCount>0){this.clearSelections();this.maybeFireSelectionChange(true)}},onStoreRemove:function(b,a){var e=this,c=e.selected;if(e.locked||!e.pruneRemoved){return}if(c.remove(a)){if(e.lastSelected==a){e.lastSelected=null}if(e.getLastFocused()==a){e.setLastFocused(null)}e.maybeFireSelectionChange(true)}},getCount:function(){return this.selected.getCount()},destroy:function(){},onStoreUpdate:function(){},onSelectChange:function(a,c,b){},onLastFocusChanged:function(b,a){},onEditorKey:function(b,a){},bindComponent:function(a){}});Ext.define("Ext.layout.component.BoundList",{extend:"Ext.layout.component.Component",alias:"layout.boundlist",type:"component",beforeLayout:function(){return this.callParent(arguments)||this.owner.refreshed>0},onLayout:function(b,r){var l=this,c=l.owner,i=c.floating,e=c.el,t=e.getXY(),s=Ext.isNumber,a,p,q,n,h,m,g,k,f;if(i){e.setXY([-9999,-9999])}l.setTargetSize(b,r);if(!s(b)){a=c.minWidth;p=c.maxWidth;if(s(a)||s(p)){h=e.getWidth();if(h<a){g=a}else{if(h>p){g=p}}if(g){l.setTargetSize(g)}}}if(!s(r)){q=c.minHeight;n=c.maxHeight;if(s(q)||s(n)){m=e.getHeight();if(m<q){k=q}else{if(m>n){k=n}}if(k){l.setTargetSize(f,k)}}}if(i){e.setXY(t)}},afterLayout:function(){var b=this,a=b.owner.pagingToolbar;b.callParent();if(a){a.doComponentLayout()}},setTargetSize:function(e,b){var g=this,a=g.owner,c=null,f;if(Ext.isNumber(b)){c=b-a.el.getFrameWidth("tb");f=a.pagingToolbar;if(f){c-=f.getHeight()}}g.setElementSize(a.listEl,null,c);g.callParent(arguments)}});Ext.define("Ext.form.FieldAncestor",{initFieldAncestor:function(){var a=this,b=a.onFieldAncestorSubtreeChange;a.addEvents("fieldvaliditychange","fielderrorchange");a.on("add",b,a);a.on("remove",b,a);a.initFieldDefaults()},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},onFieldAncestorSubtreeChange:function(b,f){var c=this,e=!!f.ownerCt;function a(g){var h=g.isFieldLabelable,i=g.isFormField;if(h||i){if(h){c["onLabelable"+(e?"Added":"Removed")](g)}if(i){c["onField"+(e?"Added":"Removed")](g)}}else{if(g.isContainer){Ext.Array.forEach(g.getRefItems(),a)}}}a(f)},onLabelableAdded:function(a){var b=this;b.mon(a,"errorchange",b.handleFieldErrorChange,b,{buffer:10});a.setFieldDefaults(b.fieldDefaults)},onFieldAdded:function(b){var a=this;a.mon(b,"validitychange",a.handleFieldValidityChange,a)},onLabelableRemoved:function(a){var b=this;b.mun(a,"errorchange",b.handleFieldErrorChange,b)},onFieldRemoved:function(b){var a=this;a.mun(b,"validitychange",a.handleFieldValidityChange,a)},handleFieldValidityChange:function(c,b){var a=this;a.fireEvent("fieldvaliditychange",a,c,b);a.onFieldValidityChange()},handleFieldErrorChange:function(b,a){var c=this;c.fireEvent("fielderrorchange",c,b,a);c.onFieldErrorChange()},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn});Ext.define("Ext.panel.Table",{extend:"Ext.panel.Panel",alias:"widget.tablepanel",uses:["Ext.selection.RowModel","Ext.grid.Scroller","Ext.grid.header.Container","Ext.grid.Lockable"],extraBaseCls:Ext.baseCSSPrefix+"grid",extraBodyCls:Ext.baseCSSPrefix+"grid-body",layout:"fit",hasView:false,viewType:null,selType:"rowmodel",scrollDelta:40,scroll:true,deferRowRender:true,sortableColumns:true,enableLocking:false,verticalScrollDock:"right",verticalScrollerType:"gridscroller",horizontalScrollerPresentCls:Ext.baseCSSPrefix+"horizontal-scroller-present",verticalScrollerPresentCls:Ext.baseCSSPrefix+"vertical-scroller-present",scrollerOwner:true,invalidateScrollerOnRefresh:true,enableColumnMove:true,enableColumnResize:true,enableColumnHide:true,initComponent:function(){if(!this.viewType){Ext.Error.raise("You must specify a viewType config.")}if(this.headers){Ext.Error.raise("The headers config is not supported. Please specify columns instead.")}var h=this,a=h.scroll,e=false,c=false,k=h.columns||h.colModel,g=0,b,f=h.border;if(h.hideHeaders){f=false}h.store=Ext.data.StoreManager.lookup(h.store||"ext-empty-store");if(k instanceof Ext.grid.header.Container){h.headerCt=k;h.headerCt.border=f;h.columns=h.headerCt.items.items}else{if(Ext.isArray(k)){k={items:k,border:f}}Ext.apply(k,{forceFit:h.forceFit,sortable:h.sortableColumns,enableColumnMove:h.enableColumnMove,enableColumnResize:h.enableColumnResize,enableColumnHide:h.enableColumnHide,border:f});h.columns=k.items;if(h.enableLocking||Ext.ComponentQuery.query("{locked !== undefined}{processed != true}",h.columns).length){h.self.mixin("lockable",Ext.grid.Lockable);h.injectLockable()}}h.addEvents("reconfigure","viewready","scrollerhide","scrollershow");h.bodyCls=h.bodyCls||"";h.bodyCls+=(" "+h.extraBodyCls);h.cls=h.cls||"";h.cls+=(" "+h.extraBaseCls);delete h.autoScroll;if(!h.hasView){if(!h.headerCt){h.headerCt=Ext.create("Ext.grid.header.Container",k)}h.columns=h.headerCt.items.items;if(h.hideHeaders){h.headerCt.height=0;h.headerCt.border=false;h.headerCt.addCls(Ext.baseCSSPrefix+"grid-header-ct-hidden");h.addCls(Ext.baseCSSPrefix+"grid-header-hidden");if(Ext.isIEQuirks){h.headerCt.style={display:"none"}}}if(a===true||a==="both"){e=c=true}else{if(a==="horizontal"){c=true}else{if(a==="vertical"){e=true}else{h.headerCt.availableSpaceOffset=0}}}if(e){h.verticalScroller=Ext.ComponentManager.create(h.initVerticalScroller());h.mon(h.verticalScroller,{bodyscroll:h.onVerticalScroll,scope:h})}if(c){h.horizontalScroller=Ext.ComponentManager.create(h.initHorizontalScroller());h.mon(h.horizontalScroller,{bodyscroll:h.onHorizontalScroll,scope:h})}h.headerCt.on("resize",h.onHeaderResize,h);h.relayHeaderCtEvents(h.headerCt);h.features=h.features||[];if(!Ext.isArray(h.features)){h.features=[h.features]}h.dockedItems=h.dockedItems||[];h.dockedItems.unshift(h.headerCt);h.viewConfig=h.viewConfig||{};h.viewConfig.invalidateScrollerOnRefresh=h.invalidateScrollerOnRefresh;b=h.getView();b.on({afterrender:function(){b.el.scroll=Ext.Function.bind(h.elScroll,h);h.mon(b.el,{mousewheel:h.onMouseWheel,scope:h})},single:true});h.items=[b];h.hasView=true;h.mon(b.store,{load:h.onStoreLoad,scope:h});h.mon(b,{viewReady:h.onViewReady,resize:h.onViewResize,refresh:{fn:h.onViewRefresh,scope:h,buffer:50},scope:h});this.relayEvents(b,["beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","containermouseup","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","selectionchange","beforeselect","select","beforedeselect","deselect"])}h.callParent(arguments)},onRender:function(){var a=this.verticalScroller,b=this.horizontalScroller;if(a){a.ensureDimension()}if(b){b.ensureDimension()}this.callParent(arguments)},initStateEvents:function(){var a=this.stateEvents;Ext.each(["columnresize","columnmove","columnhide","columnshow","sortchange"],function(b){if(Ext.Array.indexOf(a,b)){a.push(b)}});this.callParent()},initHorizontalScroller:function(){var b=this,a={xtype:"gridscroller",dock:"bottom",section:b,store:b.store};return a},initVerticalScroller:function(){var b=this,a=b.verticalScroller||{};Ext.applyIf(a,{xtype:b.verticalScrollerType,dock:b.verticalScrollDock,store:b.store});return a},relayHeaderCtEvents:function(a){this.relayEvents(a,["columnresize","columnmove","columnhide","columnshow","sortchange"])},getState:function(){var a=this,b=a.callParent(),c=a.store.sorters.first();b.columns=(a.headerCt||a).getColumnsState();if(c){b.sort={property:c.property,direction:c.direction}}return b},applyState:function(e){var c=this,f=e.sort,a=c.store,b=e.columns;delete e.columns;c.callParent(arguments);if(b){(c.headerCt||c).applyColumnsState(b)}if(f){if(a.remoteSort){a.sorters.add(Ext.create("Ext.util.Sorter",{property:f.property,direction:f.direction}))}else{a.sort(f.property,f.direction)}}},getStore:function(){return this.store},getView:function(){var a=this,b;if(!a.view){b=a.getSelectionModel();a.view=a.createComponent(Ext.apply({},a.viewConfig,{deferInitialRefresh:a.deferRowRender,xtype:a.viewType,store:a.store,headerCt:a.headerCt,selModel:b,features:a.features,panel:a}));a.mon(a.view,{uievent:a.processEvent,scope:a});b.view=a.view;a.headerCt.view=a.view;a.relayEvents(a.view,["cellclick","celldblclick"])}return a.view},setAutoScroll:Ext.emptyFn,elScroll:function(e,f,b){var c=this,a;if(e==="up"||e==="left"){f=-f}if(e==="down"||e==="up"){a=c.getVerticalScroller();if(a){a.scrollByDeltaY(f)}}else{a=c.getHorizontalScroller();if(a){a.scrollByDeltaX(f)}}},processEvent:function(g,b,a,c,f,i){var h=this,k;if(f!==-1){k=h.headerCt.getGridColumns()[f];return k.processEvent.apply(k,arguments)}},determineScrollbars:function(){if(this.determineScrollbarsRunning){return}this.determineScrollbarsRunning=true;var i=this,k=i.view,e,a,f,l,n,g,h=i.verticalScroller,c=i.horizontalScroller,m=(h&&h.ownerCt===i?1:0)|(c&&c.ownerCt===i?2:0),b=0;if(!i.collapsed&&k&&k.viewReady){e=k.el.getSize();l=e.width+((m&1)?h.width:0);g=e.height+((m&2)?c.height:0);f=(i.headerCt.query("[flex]").length&&!i.headerCt.layout.tooNarrow)?0:i.headerCt.getFullWidth();if(h&&h.el){n=h.getSizeCalculation().height}else{a=k.el.child("table",true);n=a?a.offsetHeight:0}if(n>g){b=1;if(c&&((l-f)<h.width)){b=3}}else{if(f>l){b=2;if(h&&((g-n)<c.height)){b=3}}}if(b!==m){i.suspendLayout=true;if(b&1){i.showVerticalScroller()}else{i.hideVerticalScroller()}if(b&2){i.showHorizontalScroller()}else{i.hideHorizontalScroller()}i.suspendLayout=false;i.doComponentLayout();i.getLayout().layout()}}delete i.determineScrollbarsRunning},onViewResize:function(){this.determineScrollbars()},afterComponentLayout:function(){this.callParent(arguments);this.determineScrollbars();this.invalidateScroller()},onHeaderResize:function(){if(!this.componentLayout.layoutBusy&&this.view&&this.view.rendered){this.determineScrollbars();this.invalidateScroller()}},afterCollapse:function(){var a=this;if(a.verticalScroller){a.verticalScroller.saveScrollPos()}if(a.horizontalScroller){a.horizontalScroller.saveScrollPos()}a.callParent(arguments)},afterExpand:function(){var a=this;a.callParent(arguments);if(a.verticalScroller){a.verticalScroller.restoreScrollPos()}if(a.horizontalScroller){a.horizontalScroller.restoreScrollPos()}},hideHorizontalScroller:function(){var a=this;if(a.horizontalScroller&&a.horizontalScroller.ownerCt===a){a.verticalScroller.setReservedSpace(0);a.removeDocked(a.horizontalScroller,false);a.removeCls(a.horizontalScrollerPresentCls);a.fireEvent("scrollerhide",a.horizontalScroller,"horizontal")}},showHorizontalScroller:function(){var a=this;if(a.verticalScroller){a.verticalScroller.setReservedSpace(Ext.getScrollbarSize().height-1)}if(a.horizontalScroller&&a.horizontalScroller.ownerCt!==a){a.addDocked(a.horizontalScroller);a.addCls(a.horizontalScrollerPresentCls);a.fireEvent("scrollershow",a.horizontalScroller,"horizontal")}},hideVerticalScroller:function(){var a=this;a.setHeaderReserveOffset(false);if(a.verticalScroller&&a.verticalScroller.ownerCt===a){a.removeDocked(a.verticalScroller,false);a.removeCls(a.verticalScrollerPresentCls);a.fireEvent("scrollerhide",a.verticalScroller,"vertical")}},showVerticalScroller:function(){var a=this;a.setHeaderReserveOffset(true);if(a.verticalScroller&&a.verticalScroller.ownerCt!==a){a.addDocked(a.verticalScroller);a.addCls(a.verticalScrollerPresentCls);a.fireEvent("scrollershow",a.verticalScroller,"vertical")}},setHeaderReserveOffset:function(a){var c=this.headerCt,b=c.layout;if(b&&b.reserveOffset!==a){b.reserveOffset=a;if(!this.suspendLayout){c.doLayout()}}},invalidateScroller:function(){var b=this,a=b.verticalScroller,c=b.horizontalScroller;if(a){a.invalidate()}if(c){c.invalidate()}},onHeaderMove:function(c,e,a,b){this.view.refresh()},onHeaderHide:function(a,b){this.invalidateScroller()},onHeaderShow:function(a,b){this.invalidateScroller()},getVerticalScroller:function(){return this.getScrollerOwner().down("gridscroller[dock="+this.verticalScrollDock+"]")},getHorizontalScroller:function(){return this.getScrollerOwner().down("gridscroller[dock=bottom]")},onMouseWheel:function(p){var q=this,l=q.getVerticalScroller(),r=q.getHorizontalScroller(),b=-q.scrollDelta,c=p.getWheelDeltas(),i=b*c.x,h=b*c.y,n,s,a,t,f,k,m,g;if(r){s=r.scrollEl;if(s){t=s.dom;k=t.scrollLeft!==t.scrollWidth-t.clientWidth;f=t.scrollLeft!==0}}if(l){n=l.scrollEl;if(n){a=n.dom;m=a.scrollTop!==a.scrollHeight-a.clientHeight;g=a.scrollTop!==0}}if(r){if((i<0&&f)||(i>0&&k)){p.stopEvent();r.scrollByDeltaX(i)}}if(l){if((h<0&&g)||(h>0&&m)){p.stopEvent();l.scrollByDeltaY(h)}}},onViewReady:function(){var a=this;a.fireEvent("viewready",a);if(a.deferRowRender){a.determineScrollbars();a.invalidateScroller()}},onViewRefresh:function(){var a=this;if(!a.rendering){this.determineScrollbars();if(this.invalidateScrollerOnRefresh){this.invalidateScroller()}}},setScrollTop:function(e){var c=this,b=c.getScrollerOwner(),a=c.getVerticalScroller();b.virtualScrollTop=e;if(a){a.setScrollTop(e)}},getScrollerOwner:function(){var a=this;if(!this.scrollerOwner){a=this.up("[scrollerOwner]")}return a},scrollByDeltaY:function(a){var b=this.getVerticalScroller();if(b){b.scrollByDeltaY(a)}},scrollByDeltaX:function(a){var b=this.getHorizontalScroller();if(b){b.scrollByDeltaX(a)}},getLhsMarker:function(){var a=this;if(!a.lhsMarker){a.lhsMarker=Ext.DomHelper.append(a.el,{cls:Ext.baseCSSPrefix+"grid-resize-marker"},true)}return a.lhsMarker},getRhsMarker:function(){var a=this;if(!a.rhsMarker){a.rhsMarker=Ext.DomHelper.append(a.el,{cls:Ext.baseCSSPrefix+"grid-resize-marker"},true)}return a.rhsMarker},getSelectionModel:function(){if(!this.selModel){this.selModel={}}var b="SINGLE",a;if(this.simpleSelect){b="SIMPLE"}else{if(this.multiSelect){b="MULTI"}}Ext.applyIf(this.selModel,{allowDeselect:this.allowDeselect,mode:b});if(!this.selModel.events){a=this.selModel.selType||this.selType;this.selModel=Ext.create("selection."+a,this.selModel)}if(!this.selModel.hasRelaySetup){this.relayEvents(this.selModel,["selectionchange","beforeselect","beforedeselect","select","deselect"]);this.selModel.hasRelaySetup=true}if(this.disableSelection){this.selModel.locked=true}return this.selModel},onVerticalScroll:function(f,g){var b=this.getScrollerOwner(),c=b.query("tableview"),e=0,a=c.length;for(;e<a;e++){c[e].el.dom.scrollTop=g.scrollTop}},onHorizontalScroll:function(e,f){var b=this.getScrollerOwner(),c=b.query("tableview"),a=c[1]||c[0];a.el.dom.scrollLeft=f.scrollLeft;this.headerCt.el.dom.scrollLeft=f.scrollLeft},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(a){var b=this;b.store=a;b.getView().bindStore(a)},beforeDestroy:function(){Ext.destroy(this.horizontalScroller,this.verticalScroller);this.callParent()},reconfigure:function(a,b){var c=this,e=c.headerCt;if(c.lockable){c.reconfigureLockable(a,b)}else{if(b){e.suspendLayout=true;e.removeAll();e.add(b)}if(a){a=Ext.StoreManager.lookup(a);c.bindStore(a)}else{c.getView().refresh()}if(b){e.suspendLayout=false;c.forceComponentLayout()}}c.fireEvent("reconfigure",c)}});Ext.define("Ext.ux.grid.Save",{requires:["Ext.data.Operation","Ext.data.proxy.Rest","Ext.window.MessageBox","Ext.Ajax.request","Ext.Template"],statics:{save:function(f){var a=f.getStore(),c=this.progress,b=this.saveDir,h=new Ext.data.Operation({action:"read",filters:a.filters.items,sorters:a.sorters.items}),e=new Ext.data.proxy.Rest({url:a.getProxy().url,format:this.saveFormat}),g=e.buildRequest(h);c.show({msg:"Fetching your data, please wait...",width:300,wait:true,waitConfig:{interval:200},modal:false,title:"Retrieving Data..."});Ext.Ajax.request({url:g.url,params:g.params,method:"GET",success:function(i,l){var m=Ext.decode(i.responseText),k=new Ext.Template("<div>",'<a href="{dir}/{file}">Click to Download</a> - {size}',"<br/>","<span>This file link will be active for two weeks.</span>","</div>",{compiled:true,disableMethods:true});c.show({msg:k.apply({dir:b,file:m.data.file,size:m.data.size}),width:300,closable:true,modal:false,icon:"pts-icon-download",title:"Download"})},failure:function(i,k){var l=Ext.decode(i.responseText);c.show({msg:l.message,width:300,closable:true,buttons:Ext.Msg.OK,icon:Ext.MessageBox.ERROR,modal:false,title:"Error!"})}})},saveFormat:"csv",saveDir:"dl",progress:Ext.create("Ext.window.MessageBox")}});Ext.define("Ext.ux.grid.Printer",{requires:"Ext.XTemplate",statics:{print:function(a){var f=[];Ext.each(a.columns,function(q){if(q.isGroupHeader){f=f.concat(q.items.items)}else{f.push(q)}});var g=[];a.store.data.each(function(r,u){var t={};for(var q in r.data){var s=r.data[q];Ext.each(f,function(w,v){if(w.dataIndex==q){var x={item:"",tdAttr:"",style:""};s=w.renderer?w.renderer.call(a,s,x,r,u,v,a.store,a.view):s}},this);t[q]=s}g.push(t)});var e=[],m=this.printHidden;Ext.each(f,function(r){var q=m?false:r.hidden;if(!Ext.isEmpty(r.dataIndex)&&!q){e.push(r)}});f=e;if(this.stylesheetPath===null){var c=Ext.Loader.getPath("Ext.ux.grid.Printer");this.stylesheetPath=c.substring(0,c.indexOf("Printer.js"))+"css/print.css"}var p=Ext.create("Ext.XTemplate",this.headerTpl).apply(f);var i=Ext.create("Ext.XTemplate",this.bodyTpl).apply(f);var n="",l=[];Ext.each(a.plugins,function(q){if(q.ptype=="rowexpander"){n+=q.rowBodyTpl.join("")}});if(n!=""){l=['<tr class="{[xindex % 2 === 0 ? "even" : "odd"]}"><td colspan="'+f.length+'">',n,"</td></tr>",]}var b=['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">','<html class="'+Ext.baseCSSPrefix+'ux-grid-printer">',"<head>",'<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />','<link href="'+this.stylesheetPath+'" rel="stylesheet" type="text/css" />',"<title>"+a.title+"</title>","</head>",'<body class="'+Ext.baseCSSPrefix+'ux-grid-printer-body">','<div class="'+Ext.baseCSSPrefix+"ux-grid-printer-noprint "+Ext.baseCSSPrefix+'ux-grid-printer-links">','<a class="'+Ext.baseCSSPrefix+'ux-grid-printer-linkprint" href="javascript:void(0);" onclick="window.print();">'+this.printLinkText+"</a>",'<a class="'+Ext.baseCSSPrefix+'ux-grid-printer-linkclose" href="javascript:void(0);" onclick="window.close();">'+this.closeLinkText+"</a>","</div>",'<div id="'+Ext.baseCSSPrefix+'ux-grid-printer-title">','<div class="'+Ext.baseCSSPrefix+'ux-grid-printer-left"><h1>'+this.mainTitle+"</h1></div>",'<div class="'+Ext.baseCSSPrefix+'ux-grid-printer-right">'+this.rightTitle+"</div>","</div>","<table>","<tr>",p,"</tr>",'<tpl for=".">','<tr class="{[xindex % 2 === 0 ? "even" : "odd"]}">',i,"</tr>",l.join(""),"</tpl>","</table>","</body>","</html>"];var h=Ext.create("Ext.XTemplate",b).apply(g);var k=window.open("","printgrid");k.document.open();k.document.write(h);k.document.close();if(this.printAutomatically){if(Ext.isIE){window.print()}else{k.print()}}if(this.closeAutomaticallyAfterPrint){if(Ext.isIE){window.close()}else{k.close()}}},stylesheetPath:null,printAutomatically:false,closeAutomaticallyAfterPrint:false,mainTitle:"",rightTitle:"",printLinkText:"Print",closeLinkText:"Close",headerTpl:['<tpl for=".">',"<th>{text}</th>","</tpl>",],bodyTpl:['<tpl for=".">',"<td>{{dataIndex}}</td>","</tpl>",],printHidden:false}});Ext.define("Ext.layout.component.field.Trigger",{alias:["layout.triggerfield"],extend:"Ext.layout.component.field.Field",type:"triggerfield",sizeBodyContents:function(e,b){var f=this,a=f.owner,h=a.inputEl,c=a.triggerWrap,g=a.getTriggerWidth();if(a.hideTrigger||a.readOnly||g>0){f.setElementSize(h,Ext.isNumber(e)?e-g:e);c.setWidth(g)}}});Ext.define("Ext.layout.container.Column",{extend:"Ext.layout.container.Auto",alias:["layout.column"],alternateClassName:"Ext.layout.ColumnLayout",type:"column",itemCls:Ext.baseCSSPrefix+"column",targetCls:Ext.baseCSSPrefix+"column-layout-ct",scrollOffset:0,bindToOwnerCtComponent:false,getRenderTarget:function(){if(!this.innerCt){this.innerCt=this.getTarget().createChild({cls:Ext.baseCSSPrefix+"column-inner"});this.clearEl=this.innerCt.createChild({cls:Ext.baseCSSPrefix+"clear",role:"presentation"})}return this.innerCt},onLayout:function(){var h=this,f=h.getTarget(),g=h.getLayoutItems(),e=g.length,l,c,m=[],b,n,k,a;n=h.getLayoutTargetSize();if(n.width<e*10){return}if(h.adjustmentPass){if(Ext.isIE6||Ext.isIE7||Ext.isIEQuirks){n.width=h.adjustedWidth}}else{c=f.getStyle("overflow");if(c&&c!="hidden"){h.autoScroll=true;if(!(Ext.isIE6||Ext.isIE7||Ext.isIEQuirks)){f.setStyle("overflow","hidden");n=h.getLayoutTargetSize()}}}k=n.width-h.scrollOffset;h.innerCt.setWidth(k);for(c=0;c<e;c++){l=g[c];b=m[c]=l.getEl().getMargin("lr");if(!l.columnWidth){k-=(l.getWidth()+b)}}k=k<0?0:k;for(c=0;c<e;c++){l=g[c];if(l.columnWidth){a=Math.floor(l.columnWidth*k)-m[c];h.setItemSize(l,a,l.height)}else{h.layoutItem(l)}}if(!h.adjustmentPass&&h.autoScroll){f.setStyle("overflow","auto");h.adjustmentPass=(f.dom.scrollHeight>n.height);if(Ext.isIE6||Ext.isIE7||Ext.isIEQuirks){h.adjustedWidth=n.width-Ext.getScrollBarWidth()}else{f.setStyle("overflow","auto")}if(h.adjustmentPass){h.onLayout()}}delete h.adjustmentPass},configureItem:function(a){this.callParent(arguments);if(a.columnWidth){a.layoutManagedWidth=1}}});Ext.define("Ext.dd.DragZone",{extend:"Ext.dd.DragSource",constructor:function(b,a){this.callParent([b,a]);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}},getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(a,b);return true},afterRepair:function(){var a=this;if(Ext.enableFx){Ext.fly(a.dragData.ddel).highlight(a.repairHighlightColor)}a.dragging=false},getRepairXY:function(a){return Ext.Element.fly(this.dragData.ddel).getXY()},destroy:function(){this.callParent();if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.define("Ext.toolbar.TextItem",{extend:"Ext.toolbar.Item",requires:["Ext.XTemplate"],alias:"widget.tbtext",alternateClassName:"Ext.Toolbar.TextItem",text:"",renderTpl:"{text}",baseCls:Ext.baseCSSPrefix+"toolbar-text",onRender:function(){Ext.apply(this.renderData,{text:this.text});this.callParent(arguments)},setText:function(a){if(this.rendered){this.el.update(a);this.ownerCt.doLayout()}else{this.text=a}}});Ext.define("Ext.form.field.Hidden",{extend:"Ext.form.field.Base",alias:["widget.hiddenfield","widget.hidden"],alternateClassName:"Ext.form.Hidden",inputType:"hidden",hideLabel:true,initComponent:function(){this.formItemCls+="-hidden";this.callParent()},isEqual:function(b,a){return this.isEqualAsString(b,a)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.define("Ext.ux.grid.HeaderToolTip",{alias:"plugin.headertooltip",init:function(a){var b=a.headerCt;b.on("afterrender",function(){a.tip=Ext.create("Ext.tip.ToolTip",{target:b.el,delegate:".x-column-header",trackMouse:true,renderTo:Ext.getBody(),listeners:{beforeshow:function(e){var f=b.down("gridcolumn[id="+e.triggerElement.id+"]");if(f){e.update(f.tooltip);return true}return false}}})})}});Ext.define("Ext.toolbar.Spacer",{extend:"Ext.Component",alias:"widget.tbspacer",alternateClassName:"Ext.Toolbar.Spacer",baseCls:Ext.baseCSSPrefix+"toolbar-spacer",focusable:false});Ext.define("Ext.form.FieldContainer",{extend:"Ext.container.Container",mixins:{labelable:"Ext.form.Labelable",fieldAncestor:"Ext.form.FieldAncestor"},alias:"widget.fieldcontainer",componentLayout:"field",combineLabels:false,labelConnector:", ",combineErrors:false,maskOnDisable:false,initComponent:function(){var b=this,a=b.onSubCmpAddOrRemove;b.initLabelable();b.initFieldAncestor();b.callParent()},onLabelableAdded:function(a){var b=this;b.mixins.fieldAncestor.onLabelableAdded.call(this,a);b.updateLabel()},onLabelableRemoved:function(a){var b=this;b.mixins.fieldAncestor.onLabelableRemoved.call(this,a);b.updateLabel()},onRender:function(){var a=this;a.onLabelableRender();a.callParent(arguments)},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return a.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},getFieldLabel:function(){var a=this.fieldLabel||"";if(!a&&this.combineLabels){a=Ext.Array.map(this.query("[isFieldLabelable]"),function(b){return b.getFieldLabel()}).join(this.labelConnector)}return a},updateLabel:function(){var b=this,a=b.labelEl;if(a){a.update(b.getFieldLabel())}},onFieldErrorChange:function(f,b){if(this.combineErrors){var e=this,g=e.getActiveError(),c=Ext.Array.filter(e.query("[isFormField]"),function(h){return h.hasActiveError()}),a=e.getCombinedErrors(c);if(a){e.setActiveErrors(a)}else{e.unsetActiveError()}if(g!==e.getActiveError()){e.doComponentLayout()}}},getCombinedErrors:function(a){var b=Ext.Array.forEach,c=[];b(a,function(e){b(e.getActiveErrors(),function(g){var f=e.getFieldLabel();c.push((f?f+": ":"")+g)})});return c},getTargetEl:function(){return this.bodyEl||this.callParent()}});Ext.define("Ext.form.Label",{extend:"Ext.Component",alias:"widget.label",requires:["Ext.util.Format"],maskOnDisable:false,getElConfig:function(){var a=this;return{tag:"label",id:a.id,htmlFor:a.forId||"",html:a.text?Ext.util.Format.htmlEncode(a.text):(a.html||"")}},setText:function(c,b){var a=this;b=b!==false;if(b){a.text=c;delete a.html}else{a.html=c;delete a.text}if(a.rendered){a.el.dom.innerHTML=b!==false?Ext.util.Format.htmlEncode(c):c}return this}});Ext.define("Ext.dd.Registry",{singleton:true,constructor:function(){this.elements={};this.handles={};this.autoIdSeed=0},getId:function(b,a){if(typeof b=="string"){return b}var c=b.id;if(!c&&a!==false){c="extdd-"+(++this.autoIdSeed);b.id=c}return c},register:function(e,f){f=f||{};if(typeof e=="string"){e=document.getElementById(e)}f.ddel=e;this.elements[this.getId(e)]=f;if(f.isHandle!==false){this.handles[f.ddel.id]=f}if(f.handles){var c=f.handles;for(var b=0,a=c.length;b<a;b++){this.handles[this.getId(c[b])]=f}}},unregister:function(e){var g=this.getId(e,false);var f=this.elements[g];if(f){delete this.elements[g];if(f.handles){var c=f.handles;for(var b=0,a=c.length;b<a;b++){delete this.handles[this.getId(c[b],false)]}}}},getHandle:function(a){if(typeof a!="string"){a=a.id}return this.handles[a]},getHandleFromEvent:function(b){var a=b.getTarget();return a?this.handles[a.id]:null},getTarget:function(a){if(typeof a!="string"){a=a.id}return this.elements[a]},getTargetFromEvent:function(b){var a=b.getTarget();return a?this.elements[a.id]||this.handles[a.id]:null}});Ext.define("Ext.layout.container.AbstractCard",{extend:"Ext.layout.container.Fit",type:"card",sizeAllCards:false,hideInactive:true,deferredRender:false,beforeLayout:function(){var a=this;a.getActiveItem();if(a.activeItem&&a.deferredRender){a.renderItems([a.activeItem],a.getRenderTarget());return true}else{return this.callParent(arguments)}},renderChildren:function(){if(!this.deferredRender){this.getActiveItem();this.callParent()}},onLayout:function(){var g=this,h=g.activeItem,b=g.getVisibleItems(),f=b.length,a=g.getTargetBox(),c,e;for(c=0;c<f;c++){e=b[c];g.setItemBox(e,a)}if(!g.firstActivated&&h){if(h.fireEvent("beforeactivate",h)!==false){h.fireEvent("activate",h)}g.firstActivated=true}},isValidParent:function(c,e,a){var b=c.el?c.el.dom:Ext.getDom(c);return(b&&b.parentNode===(e.dom||e))||false},getActiveItem:function(){var a=this;if(!a.activeItem&&a.owner){a.activeItem=a.parseActiveItem(a.owner.activeItem)}if(a.activeItem&&a.owner.items.indexOf(a.activeItem)!=-1){return a.activeItem}return null},parseActiveItem:function(a){if(a&&a.isComponent){return a}else{if(typeof a=="number"||a===undefined){return this.getLayoutItems()[a||0]}else{return this.owner.getComponent(a)}}},configureItem:function(b,a){this.callParent([b,a]);if(this.hideInactive&&this.activeItem!==b){b.hide()}else{b.show()}},onRemove:function(a){if(a===this.activeItem){this.activeItem=null;if(this.owner.items.getCount()===0){this.firstActivated=false}}},getAnimation:function(b,a){var c=(b||{}).cardSwitchAnimation;if(c===false){return false}return c||a.cardSwitchAnimation},getNext:function(){var c=arguments[0];var a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b+1]||(c?a[0]:false)},next:function(){var b=arguments[0],a=arguments[1];return this.setActiveItem(this.getNext(a),b)},getPrev:function(){var c=arguments[0];var a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b-1]||(c?a[a.length-1]:false)},prev:function(){var b=arguments[0],a=arguments[1];return this.setActiveItem(this.getPrev(a),b)}});Ext.define("Ext.form.field.Display",{extend:"Ext.form.field.Base",alias:"widget.displayfield",requires:["Ext.util.Format","Ext.XTemplate"],alternateClassName:["Ext.form.DisplayField","Ext.form.Display"],fieldSubTpl:['<div id="{id}" class="{fieldCls}"></div>',{compiled:true,disableFormats:true}],fieldCls:Ext.baseCSSPrefix+"form-display-field",htmlEncode:false,validateOnChange:false,initEvents:Ext.emptyFn,submitValue:false,isValid:function(){return true},validate:function(){return true},getRawValue:function(){return this.rawValue},setRawValue:function(b){var a=this;b=Ext.value(b,"");a.rawValue=b;if(a.rendered){a.inputEl.dom.innerHTML=a.htmlEncode?Ext.util.Format.htmlEncode(b):b}return b},getContentTarget:function(){return this.inputEl}});Ext.define("Ext.selection.RowModel",{extend:"Ext.selection.Model",alias:"selection.rowmodel",requires:["Ext.util.KeyNav"],deltaScroll:5,enableKeyNav:true,ignoreRightMouseSelection:true,constructor:function(){this.addEvents("beforedeselect","beforeselect","deselect","select");this.callParent(arguments)},bindComponent:function(a){var b=this;b.views=b.views||[];b.views.push(a);b.bind(a.getStore(),true);a.on({itemmousedown:b.onRowMouseDown,scope:b});if(b.enableKeyNav){b.initKeyNav(a)}},initKeyNav:function(a){var b=this;if(!a.rendered){a.on("render",Ext.Function.bind(b.initKeyNav,b,[a],0),b,{single:true});return}a.el.set({tabIndex:-1});b.keyNav=new Ext.util.KeyNav(a.el,{up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,scope:b});a.el.on(Ext.EventManager.getKeyEvent(),b.onKeyPress,b)},getRowsVisible:function(){var f=false,a=this.views[0],e=a.getNode(0),b,c;if(e){b=Ext.fly(e).getHeight();c=a.el.getHeight();f=Math.floor(c/b)}return f},onKeyEnd:function(f,a){var c=this,b=c.store.getAt(c.store.getCount()-1);if(b){if(f.shiftKey){c.selectRange(b,c.lastFocused||0);c.setLastFocused(b)}else{if(f.ctrlKey){c.setLastFocused(b)}else{c.doSelect(b)}}}},onKeyHome:function(c,a){var b=this,f=b.store.getAt(0);if(f){if(c.shiftKey){b.selectRange(f,b.lastFocused||0);b.setLastFocused(f)}else{if(c.ctrlKey){b.setLastFocused(f)}else{b.doSelect(f,false)}}}},onKeyPageUp:function(i,f){var h=this,k=h.getRowsVisible(),b,c,a,g;if(k){b=h.lastFocused?h.store.indexOf(h.lastFocused):0;c=b-k;if(c<0){c=0}a=h.store.getAt(c);if(i.shiftKey){g=h.store.getAt(b);h.selectRange(a,g,i.ctrlKey,"up");h.setLastFocused(a)}else{if(i.ctrlKey){i.preventDefault();h.setLastFocused(a)}else{h.doSelect(a)}}}},onKeyPageDown:function(i,b){var g=this,k=g.getRowsVisible(),a,h,f,c;if(k){a=g.lastFocused?g.store.indexOf(g.lastFocused):0;h=a+k;if(h>=g.store.getCount()){h=g.store.getCount()-1}f=g.store.getAt(h);if(i.shiftKey){c=g.store.getAt(a);g.selectRange(f,c,i.ctrlKey,"down");g.setLastFocused(f)}else{if(i.ctrlKey){i.preventDefault();g.setLastFocused(f)}else{g.doSelect(f)}}}},onKeyPress:function(f,b){if(f.getKey()===f.SPACE){f.stopEvent();var c=this,a=c.lastFocused;if(a){if(c.isSelected(a)){c.doDeselect(a,false)}else{c.doSelect(a,true)}}}},onKeyUp:function(h,f){var g=this,c=g.views[0],a=g.store.indexOf(g.lastFocused),b;if(a>0){b=g.store.getAt(a-1);if(h.shiftKey&&g.lastFocused){if(g.isSelected(g.lastFocused)&&g.isSelected(b)){g.doDeselect(g.lastFocused,true);g.setLastFocused(b)}else{if(!g.isSelected(g.lastFocused)){g.doSelect(g.lastFocused,true);g.doSelect(b,true)}else{g.doSelect(b,true)}}}else{if(h.ctrlKey){g.setLastFocused(b)}else{g.doSelect(b)}}}},onKeyDown:function(h,f){var g=this,c=g.views[0],a=g.store.indexOf(g.lastFocused),b;if(a+1<g.store.getCount()){b=g.store.getAt(a+1);if(g.selected.getCount()===0){g.doSelect(b)}else{if(h.shiftKey&&g.lastFocused){if(g.isSelected(g.lastFocused)&&g.isSelected(b)){g.doDeselect(g.lastFocused,true);g.setLastFocused(b)}else{if(!g.isSelected(g.lastFocused)){g.doSelect(g.lastFocused,true);g.doSelect(b,true)}else{g.doSelect(b,true)}}}else{if(h.ctrlKey){g.setLastFocused(b)}else{g.doSelect(b)}}}}},scrollByDeltaX:function(e){var a=this.views[0],c=a.up(),b=c.horizontalScroller;if(b){b.scrollByDeltaX(e)}},onKeyLeft:function(b,a){this.scrollByDeltaX(-this.deltaScroll)},onKeyRight:function(b,a){this.scrollByDeltaX(this.deltaScroll)},onRowMouseDown:function(b,a,f,c,g){b.el.focus();if(!this.allowRightMouseSelection(g)){return}this.selectWithEvent(a,g)},allowRightMouseSelection:function(a){var b=this.ignoreRightMouseSelection&&a.button!==0;if(b){b=this.hasSelection()}return !b},onSelectChange:function(g,c,m,a){var k=this,n=k.views,e=n.length,l=k.store,b=l.indexOf(g),h=c?"select":"deselect",f=0;if((m||k.fireEvent("before"+h,k,g,b))!==false&&a()!==false){for(;f<e;f++){if(c){n[f].onRowSelect(b,m)}else{n[f].onRowDeselect(b,m)}}if(!m){k.fireEvent(h,k,g,b)}}},onLastFocusChanged:function(k,e,b){var a=this.views,h=a.length,c=this.store,g,f=0;if(k){g=c.indexOf(k);if(g!=-1){for(;f<h;f++){a[f].onRowFocus(g,false)}}}if(e){g=c.indexOf(e);if(g!=-1){for(f=0;f<h;f++){a[f].onRowFocus(g,true,b)}}}},onEditorTab:function(i,g){var h=this,k=h.views[0],c=i.getActiveRecord(),b=i.getActiveColumn(),f=k.getPosition(c,b),l=g.shiftKey?"left":"right",a=k.walkCells(f,l,g,this.preventWrap);if(a){i.startEditByPosition(a)}},selectByPosition:function(a){var b=this.store.getAt(a.row);this.select(b)}});Ext.define("Ext.AbstractPlugin",{disabled:false,constructor:function(a){if(!a.cmp&&Ext.global.console){Ext.global.console.warn("Attempted to attach a plugin ")}Ext.apply(this,a)},getCmp:function(){return this.cmp},init:Ext.emptyFn,destroy:Ext.emptyFn,enable:function(){this.disabled=false},disable:function(){this.disabled=true}});Ext.define("Ext.button.Split",{alias:"widget.splitbutton",extend:"Ext.button.Button",alternateClassName:"Ext.SplitButton",arrowCls:"split",split:true,initComponent:function(){this.callParent();this.addEvents("arrowclick")},setArrowHandler:function(b,a){this.arrowHandler=b;this.scope=a},onClick:function(c,a){var b=this;c.preventDefault();if(!b.disabled){if(b.overMenuTrigger){b.maybeShowMenu();b.fireEvent("arrowclick",b,c);if(b.arrowHandler){b.arrowHandler.call(b.scope||b,b,c)}}else{b.doToggle();b.fireHandler()}}}});Ext.define("Ext.dd.DDTarget",{extend:"Ext.dd.DragDrop",constructor:function(c,a,b){if(c){this.initTarget(c,a,b)}},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return("DDTarget "+this.id)}});Ext.define("Ext.picker.Month",{extend:"Ext.Component",requires:["Ext.XTemplate","Ext.util.ClickRepeater","Ext.Date","Ext.button.Button"],alias:"widget.monthpicker",alternateClassName:"Ext.MonthPicker",renderTpl:['<div id="{id}-bodyEl" class="{baseCls}-body">','<div class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month"><a href="#" hidefocus="on">{.}</a></div>',"</tpl>","</div>",'<div class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<button id="{id}-prevEl" class="{baseCls}-yearnav-prev"></button>','<button id="{id}-nextEl" class="{baseCls}-yearnav-next"></button>',"</div>",'<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year"><a href="#" hidefocus="on">{.}</a></div>',"</tpl>","</div>",'<div class="'+Ext.baseCSSPrefix+'clear"></div>',"</div>",'<tpl if="showButtons">','<div id="{id}-buttonsEl" class="{baseCls}-buttons"></div>',"</tpl>"],okText:"OK",cancelText:"Cancel",baseCls:Ext.baseCSSPrefix+"monthpicker",showButtons:true,width:178,smallCls:Ext.baseCSSPrefix+"monthpicker-small",totalYears:10,yearOffset:5,monthOffset:6,initComponent:function(){var a=this;a.selectedCls=a.baseCls+"-selected";a.addEvents("cancelclick","monthclick","monthdblclick","okclick","select","yearclick","yeardblclick");if(a.small){a.addCls(a.smallCls)}a.setValue(a.value);a.activeYear=a.getYear(new Date().getFullYear()-4,-4);this.callParent()},onRender:function(f,c){var h=this,e=0,b=[],a=Ext.Date.getShortMonthName,g=h.monthOffset;for(;e<g;++e){b.push(a(e),a(e+g))}Ext.apply(h.renderData,{months:b,years:h.getYears(),showButtons:h.showButtons});h.addChildEls("bodyEl","prevEl","nextEl","buttonsEl");h.callParent(arguments)},afterRender:function(){var b=this,a=b.bodyEl,c=b.buttonsEl;b.callParent();b.mon(a,"click",b.onBodyClick,b);b.mon(a,"dblclick",b.onBodyClick,b);b.years=a.select("."+b.baseCls+"-year a");b.months=a.select("."+b.baseCls+"-month a");if(b.showButtons){b.okBtn=Ext.create("Ext.button.Button",{text:b.okText,renderTo:c,handler:b.onOkClick,scope:b});b.cancelBtn=Ext.create("Ext.button.Button",{text:b.cancelText,renderTo:c,handler:b.onCancelClick,scope:b})}b.backRepeater=Ext.create("Ext.util.ClickRepeater",b.prevEl,{handler:Ext.Function.bind(b.adjustYear,b,[-b.totalYears])});b.prevEl.addClsOnOver(b.baseCls+"-yearnav-prev-over");b.nextRepeater=Ext.create("Ext.util.ClickRepeater",b.nextEl,{handler:Ext.Function.bind(b.adjustYear,b,[b.totalYears])});b.nextEl.addClsOnOver(b.baseCls+"-yearnav-next-over");b.updateBody()},setValue:function(e){var c=this,f=c.activeYear,g=c.monthOffset,b,a;if(!e){c.value=[null,null]}else{if(Ext.isDate(e)){c.value=[e.getMonth(),e.getFullYear()]}else{c.value=[e[0],e[1]]}}if(c.rendered){b=c.value[1];if(b!==null){if((b<f||b>f+c.yearOffset)){c.activeYear=b-c.yearOffset+1}}c.updateBody()}return c},getValue:function(){return this.value},hasSelection:function(){var a=this.value;return a[0]!==null&&a[1]!==null},getYears:function(){var e=this,f=e.yearOffset,g=e.activeYear,a=g+f,c=g,b=[];for(;c<a;++c){b.push(c,c+f)}return b},updateBody:function(){var f=this,b=f.years,a=f.months,i=f.getYears(),k=f.selectedCls,g=f.getYear(null),c=f.value[0],h=f.monthOffset,e;if(f.rendered){b.removeCls(k);a.removeCls(k);b.each(function(n,m,l){e=i[l];n.dom.innerHTML=e;if(e==g){n.dom.className=k}});if(c!==null){if(c<h){c=c*2}else{c=(c-h)*2+1}a.item(c).addCls(k)}}},getYear:function(a,c){var b=this.value[1];c=c||0;return b===null?a:b+c},onBodyClick:function(f,b){var c=this,a=f.type=="dblclick";if(f.getTarget("."+c.baseCls+"-month")){f.stopEvent();c.onMonthClick(b,a)}else{if(f.getTarget("."+c.baseCls+"-year")){f.stopEvent();c.onYearClick(b,a)}}},adjustYear:function(a){if(typeof a!="number"){a=this.totalYears}this.activeYear+=a;this.updateBody()},onOkClick:function(){this.fireEvent("okclick",this,this.value)},onCancelClick:function(){this.fireEvent("cancelclick",this)},onMonthClick:function(c,a){var b=this;b.value[0]=b.resolveOffset(b.months.indexOf(c),b.monthOffset);b.updateBody();b.fireEvent("month"+(a?"dbl":"")+"click",b,b.value);b.fireEvent("select",b,b.value)},onYearClick:function(c,a){var b=this;b.value[1]=b.activeYear+b.resolveOffset(b.years.indexOf(c),b.yearOffset);b.updateBody();b.fireEvent("year"+(a?"dbl":"")+"click",b,b.value);b.fireEvent("select",b,b.value)},resolveOffset:function(a,b){if(a%2===0){return(a/2)}else{return b+Math.floor(a/2)}},beforeDestroy:function(){var a=this;a.years=a.months=null;Ext.destroyMembers(a,"backRepeater","nextRepeater","okBtn","cancelBtn");a.callParent()}});Ext.define("Ext.dd.ScrollManager",{singleton:true,requires:["Ext.dd.DragDropManager"],constructor:function(){var a=Ext.dd.DragDropManager;a.fireEvents=Ext.Function.createSequence(a.fireEvents,this.onFire,this);a.stopDrag=Ext.Function.createSequence(a.stopDrag,this.onStop,this);this.doScroll=Ext.Function.bind(this.doScroll,this);this.ddmInstance=a;this.els={};this.dragEl=null;this.proc={}},onStop:function(a){var b=Ext.dd.ScrollManager;b.dragEl=null;b.clearProc()},triggerRefresh:function(){if(this.ddmInstance.dragCurrent){this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)}},doScroll:function(){if(this.ddmInstance.dragCurrent){var a=this.proc,b=a.el,c=a.el.ddScrollConfig,e=c?c.increment:this.increment;if(!this.animate){if(b.scroll(a.dir,e)){this.triggerRefresh()}}else{b.scroll(a.dir,e,true,this.animDuration,this.triggerRefresh)}}},clearProc:function(){var a=this.proc;if(a.id){clearInterval(a.id)}a.id=0;a.el=null;a.dir=""},startProc:function(b,a){this.clearProc();this.proc.el=b;this.proc.dir=a;var e=b.ddScrollConfig?b.ddScrollConfig.ddGroup:undefined,c=(b.ddScrollConfig&&b.ddScrollConfig.frequency)?b.ddScrollConfig.frequency:this.frequency;if(e===undefined||this.ddmInstance.dragCurrent.ddGroup==e){this.proc.id=setInterval(this.doScroll,c)}},onFire:function(h,l){if(l||!this.ddmInstance.dragCurrent){return}if(!this.dragEl||this.dragEl!=this.ddmInstance.dragCurrent){this.dragEl=this.ddmInstance.dragCurrent;this.refreshCache()}var m=h.getXY(),n=h.getPoint(),i=this.proc,g=this.els;for(var b in g){var f=g[b],a=f._region;var k=f.ddScrollConfig?f.ddScrollConfig:this;if(a&&a.contains(n)&&f.isScrollable()){if(a.bottom-n.y<=k.vthresh){if(i.el!=f){this.startProc(f,"down")}return}else{if(a.right-n.x<=k.hthresh){if(i.el!=f){this.startProc(f,"left")}return}else{if(n.y-a.top<=k.vthresh){if(i.el!=f){this.startProc(f,"up")}return}else{if(n.x-a.left<=k.hthresh){if(i.el!=f){this.startProc(f,"right")}return}}}}}}this.clearProc()},register:function(c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.register(c[b])}}else{c=Ext.get(c);this.els[c.id]=c}},unregister:function(c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.unregister(c[b])}}else{c=Ext.get(c);delete this.els[c.id]}},vthresh:25,hthresh:25,increment:100,frequency:500,animate:true,animDuration:0.4,ddGroup:undefined,refreshCache:function(){var a=this.els,b;for(b in a){if(typeof a[b]=="object"){a[b]._region=a[b].getRegion()}}}});Ext.define("Ext.form.FieldSet",{extend:"Ext.container.Container",alias:"widget.fieldset",uses:["Ext.form.field.Checkbox","Ext.panel.Tool","Ext.layout.container.Anchor","Ext.layout.component.FieldSet"],collapsed:false,baseCls:Ext.baseCSSPrefix+"fieldset",layout:"anchor",componentLayout:"fieldset",ariaRole:"",renderTpl:['<div id="{id}-body" class="{baseCls}-body"></div>'],maskOnDisable:false,getElConfig:function(){return{tag:"fieldset",id:this.id}},initComponent:function(){var b=this,a=b.baseCls;b.callParent();b.initLegend();b.addChildEls("body");if(b.collapsed){b.addCls(a+"-collapsed");b.collapse()}},onRender:function(b,a){this.callParent(arguments);this.initLegend()},initLegend:function(){var c=this,a,b=c.legend;if(!b&&(c.title||c.checkboxToggle||c.collapsible)){a=[];if(c.checkboxToggle){a.push(c.createCheckboxCmp())}else{if(c.collapsible){a.push(c.createToggleCmp())}}a.push(c.createTitleCmp());b=c.legend=Ext.create("Ext.container.Container",{baseCls:c.baseCls+"-header",ariaRole:"",ownerCt:this,getElConfig:function(){var e={tag:"legend",cls:this.baseCls};if(!Ext.isGecko3){e.children=[{cls:Ext.baseCSSPrefix+"clear"}]}return e},items:a})}if(b&&!b.rendered&&c.rendered){c.legend.render(c.el,c.body)}},createTitleCmp:function(){var a=this;a.titleCmp=Ext.create("Ext.Component",{html:a.title,getElConfig:function(){return{tag:Ext.isGecko3?"span":"div",cls:a.titleCmp.cls,id:a.titleCmp.id}},cls:a.baseCls+"-header-text"});return a.titleCmp},createCheckboxCmp:function(){var a=this,b="-checkbox";a.checkboxCmp=Ext.create("Ext.form.field.Checkbox",{getElConfig:function(){return{tag:Ext.isGecko3?"span":"div",id:a.checkboxCmp.id,cls:a.checkboxCmp.cls}},name:a.checkboxName||a.id+b,cls:a.baseCls+"-header"+b,checked:!a.collapsed,listeners:{change:a.onCheckChange,scope:a}});return a.checkboxCmp},createToggleCmp:function(){var a=this;a.toggleCmp=Ext.create("Ext.panel.Tool",{getElConfig:function(){return{tag:Ext.isGecko3?"span":"div",id:a.toggleCmp.id,cls:a.toggleCmp.cls}},type:"toggle",handler:a.toggle,scope:a});return a.toggleCmp},setTitle:function(b){var a=this;a.title=b;a.initLegend();a.titleCmp.update(b);return a},getTargetEl:function(){return this.body||this.frameBody||this.el},getContentTarget:function(){return this.body},getRefItems:function(a){var c=this.callParent(arguments),b=this.legend;if(b){c.unshift(b);if(a){c.unshift.apply(c,b.getRefItems(true))}}return c},expand:function(){return this.setExpanded(true)},collapse:function(){return this.setExpanded(false)},setExpanded:function(a){var b=this,c=b.checkboxCmp;a=!!a;if(c){c.setValue(a)}if(a){b.removeCls(b.baseCls+"-collapsed")}else{b.addCls(b.baseCls+"-collapsed")}b.collapsed=!a;if(a){b.getComponentLayout().childrenChanged=true}b.doComponentLayout();return b},toggle:function(){this.setExpanded(!!this.collapsed)},onCheckChange:function(b,a){this.setExpanded(a)},beforeDestroy:function(){var a=this.legend;if(a){a.destroy()}this.callParent()}});Ext.define("Ext.grid.header.Container",{extend:"Ext.container.Container",uses:["Ext.grid.ColumnLayout","Ext.grid.column.Column","Ext.menu.Menu","Ext.menu.CheckItem","Ext.menu.Separator","Ext.grid.plugin.HeaderResizer","Ext.grid.plugin.HeaderReorderer"],border:true,alias:"widget.headercontainer",baseCls:Ext.baseCSSPrefix+"grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",lastHeaderCls:Ext.baseCSSPrefix+"column-header-last",firstHeaderCls:Ext.baseCSSPrefix+"column-header-first",headerOpenCls:Ext.baseCSSPrefix+"column-header-open",triStateSort:false,ddLock:false,dragging:false,sortable:true,initComponent:function(){var a=this;a.headerCounter=0;a.plugins=a.plugins||[];if(!a.isHeader){a.resizer=Ext.create("Ext.grid.plugin.HeaderResizer");a.reorderer=Ext.create("Ext.grid.plugin.HeaderReorderer");if(!a.enableColumnResize){a.resizer.disable()}if(!a.enableColumnMove){a.reorderer.disable()}a.plugins.push(a.reorderer,a.resizer)}if(a.isHeader&&!a.items){a.layout="auto"}else{a.layout={type:"gridcolumn",availableSpaceOffset:a.availableSpaceOffset,align:"stretchmax",resetStretch:true}}a.defaults=a.defaults||{};Ext.applyIf(a.defaults,{width:a.defaultWidth,triStateSort:a.triStateSort,sortable:a.sortable});a.callParent();a.addEvents("columnresize","headerclick","headertriggerclick","columnmove","columnhide","columnshow","sortchange","menucreate")},onDestroy:function(){Ext.destroy(this.resizer,this.reorderer);this.callParent()},applyDefaults:function(a){if(a&&!a.isComponent&&a.xtype=="rownumberer"){return a}return this.callParent([a])},applyColumnsState:function(e){if(!e||!e.length){return}var f=this,c=0,b,a;Ext.each(e,function(g){a=f.down("gridcolumn[headerId="+g.id+"]");if(a){b=f.items.indexOf(a);if(c!==b){f.moveHeader(b,c)}if(a.applyColumnState){a.applyColumnState(g)}++c}})},getColumnsState:function(){var b=this,a=[],c;b.items.each(function(e){c=e.getColumnState&&e.getColumnState();if(c){a.push(c)}});return a},onAdd:function(b){var a=this;if(!b.headerId){b.headerId=b.initialConfig.id||("h"+(++a.headerCounter))}if(Ext.global.console&&Ext.global.console.warn){if(!a._usedIDs){a._usedIDs={}}if(a._usedIDs[b.headerId]){Ext.global.console.warn(this.$className,"attempted to reuse an existing id",b.headerId)}a._usedIDs[b.headerId]=true}a.callParent(arguments);a.purgeCache()},onRemove:function(b){var a=this;a.callParent(arguments);a.purgeCache()},afterRender:function(){this.callParent();var a=this.up("[store]").store,c=a.sorters,e=c.first(),b;if(e){b=this.down("gridcolumn[dataIndex="+e.property+"]");if(b){b.setSortState(e.direction,false,true)}}},afterLayout:function(){if(!this.isHeader){var f=this,e=f.query(">gridcolumn:not([hidden])"),c,b,a;f.callParent(arguments);if(e.length){b=e[0].el;if(b!==f.pastFirstHeaderEl){if(f.pastFirstHeaderEl){f.pastFirstHeaderEl.removeCls(f.firstHeaderCls)}b.addCls(f.firstHeaderCls);f.pastFirstHeaderEl=b}a=e[e.length-1].el;if(a!==f.pastLastHeaderEl){if(f.pastLastHeaderEl){f.pastLastHeaderEl.removeCls(f.lastHeaderCls)}a.addCls(f.lastHeaderCls);f.pastLastHeaderEl=a}}}},onHeaderShow:function(h,b){var m=this,n=m.ownerCt,e=m.getMenu(),f,c,k,a,l,g;if(e){k=e.down("menucheckitem[headerId="+h.id+"]");if(k){k.setChecked(true,true)}f=e.query("#columnItem>menucheckitem[checked]");c=f.length;if((m.getVisibleGridColumns().length>1)&&m.disabledMenuItems&&m.disabledMenuItems.length){if(c==1){Ext.Array.remove(m.disabledMenuItems,f[0])}for(g=0,l=m.disabledMenuItems.length;g<l;g++){a=m.disabledMenuItems[g];if(!a.isDestroyed){a[a.menu?"enableCheckChange":"enable"]()}}if(c==1){m.disabledMenuItems=f}else{m.disabledMenuItems=[]}}}if(!h.isGroupHeader){if(m.view){m.view.onHeaderShow(m,h,true)}if(n){n.onHeaderShow(m,h)}}m.fireEvent("columnshow",m,h);if(b!==true){m.doLayout()}},doComponentLayout:function(){var a=this;if(a.view&&a.view.saveScrollState){a.view.saveScrollState()}a.callParent(arguments);if(a.view&&a.view.restoreScrollState){a.view.restoreScrollState()}},onHeaderHide:function(g,c){var b=this,a=b.ownerCt,f=b.getMenu(),e;if(f){e=f.down("menucheckitem[headerId="+g.id+"]");if(e){e.setChecked(false,true)}b.setDisabledItems()}if(!g.isGroupHeader){if(b.view){b.view.onHeaderHide(b,g,true)}if(a){a.onHeaderHide(b,g)}if(!c){b.doLayout()}}b.fireEvent("columnhide",b,g)},setDisabledItems:function(){var e=this,g=e.getMenu(),b=0,a,f,c;f=g.query("#columnItem>menucheckitem[checked]");if((f.length===1)){if(!e.disabledMenuItems){e.disabledMenuItems=[]}if((e.getVisibleGridColumns().length===1)&&f[0].menu){f=f.concat(f[0].menu.query("menucheckitem[checked]"))}a=f.length;for(b=0;b<a;b++){c=f[b];if(!Ext.Array.contains(e.disabledMenuItems,c)){c.disabled=false;c[c.menu?"disableCheckChange":"disable"]();e.disabledMenuItems.push(c)}}}},tempLock:function(){this.ddLock=true;Ext.Function.defer(function(){this.ddLock=false},200,this)},onHeaderResize:function(c,a,b){this.tempLock();if(this.view&&this.view.rendered){this.view.onHeaderResize(c,a,b)}},onHeaderClick:function(c,b,a){this.fireEvent("headerclick",this,c,b,a)},onHeaderTriggerClick:function(c,b,a){if(this.fireEvent("headertriggerclick",this,c,b,a)!==false){this.showMenuBy(a,c)}},showMenuBy:function(b,g){var e=this.getMenu(),f=e.down("#ascItem"),c=e.down("#descItem"),a;e.activeHeader=e.ownerCt=g;e.setFloatParent(g);g.titleContainer.addCls(this.headerOpenCls);a=g.sortable?"enable":"disable";if(f){f[a]()}if(c){c[a]()}e.showBy(b)},onMenuDeactivate:function(){var a=this.getMenu();a.activeHeader.titleContainer.removeCls(this.headerOpenCls)},moveHeader:function(a,b){this.tempLock();this.onHeaderMoved(this.move(a,b),a,b)},purgeCache:function(){var a=this;delete a.gridDataColumns;delete a.hideableColumns;if(a.menu){a.menu.destroy();delete a.menu}},onHeaderMoved:function(f,b,e){var c=this,a=c.ownerCt;if(a&&a.onHeaderMove){a.onHeaderMove(c,f,b,e)}c.fireEvent("columnmove",c,f,b,e)},getMenu:function(){var a=this;if(!a.menu){a.menu=Ext.create("Ext.menu.Menu",{hideOnParentHide:false,items:a.getMenuItems(),listeners:{deactivate:a.onMenuDeactivate,scope:a}});a.setDisabledItems();a.fireEvent("menucreate",a,a.menu)}return a.menu},getMenuItems:function(){var c=this,b=[],a=c.enableColumnHide?c.getColumnMenu(c):null;if(c.sortable){b=[{itemId:"ascItem",text:c.sortAscText,cls:Ext.baseCSSPrefix+"hmenu-sort-asc",handler:c.onSortAscClick,scope:c},{itemId:"descItem",text:c.sortDescText,cls:Ext.baseCSSPrefix+"hmenu-sort-desc",handler:c.onSortDescClick,scope:c}]}if(a&&a.length){b.push("-",{itemId:"columnItem",text:c.columnsText,cls:Ext.baseCSSPrefix+"cols-icon",menu:a})}return b},onSortAscClick:function(){var b=this.getMenu(),a=b.activeHeader;a.setSortState("ASC")},onSortDescClick:function(){var b=this.getMenu(),a=b.activeHeader;a.setSortState("DESC")},getColumnMenu:function(g){var c=[],b=0,f,a=g.query(">gridcolumn[hideable]"),h=a.length,e;for(;b<h;b++){f=a[b];e=Ext.create("Ext.menu.CheckItem",{text:f.text,checked:!f.hidden,hideOnClick:false,headerId:f.id,menu:f.isGroupHeader?this.getColumnMenu(f):undefined,checkHandler:this.onColumnCheckChange,scope:this});if(h===1){e.disabled=true}c.push(e);f.on({destroy:Ext.Function.bind(e.destroy,e)})}return c},onColumnCheckChange:function(a,b){var c=Ext.getCmp(a.headerId);c[b?"show":"hide"]()},getColumnsForTpl:function(f){var c=[],e=this.getGridColumns(f),h=e.length,a=0,g,b;for(;a<h;a++){g=e[a];if(g.hidden||g.up("headercontainer[hidden=true]")){b=0}else{b=g.getDesiredWidth();if((a===0)&&(Ext.isIE6||Ext.isIE7)){b+=1}}c.push({dataIndex:g.dataIndex,align:g.align,width:b,id:g.id,cls:g.tdCls,columnId:g.getItemId()})}return c},getColumnCount:function(){return this.getGridColumns().length},getFullWidth:function(e){var c=0,b=this.getVisibleGridColumns(e),f=b.length,a=0;for(;a<f;a++){if(!isNaN(b[a].width)){if(b[a].getDesiredWidth){c+=b[a].getDesiredWidth()}else{c+=b[a].getWidth()}}}return c},clearOtherSortStates:function(a){var c=this.getGridColumns(),f=c.length,b=0,e;for(;b<f;b++){if(c[b]!==a){e=c[b].sortState;c[b].setSortState(null,true)}}},getVisibleGridColumns:function(a){return Ext.ComponentQuery.query(":not([hidden])",this.getGridColumns(a))},getGridColumns:function(b){var c=this,a=b?null:c.gridDataColumns;if(!a){c.gridDataColumns=a=[];c.cascade(function(e){if((e!==c)&&!e.isGroupHeader){a.push(e)}})}return a},getHideableColumns:function(b){var c=this,a=b?null:c.hideableColumns;if(!a){a=c.hideableColumns=c.query("[hideable]")}return a},getHeaderIndex:function(b){var a=this.getGridColumns();return Ext.Array.indexOf(a,b)},getHeaderAtIndex:function(a){var b=this.getGridColumns();return b[a]},prepareData:function(i,c,l,n,a){var h={},e=this.gridDataColumns||this.getGridColumns(),f=e.length,g=0,k,r,m,q,b,p=a.store;for(;g<f;g++){b={tdCls:"",style:""};k=e[g];r=k.id;m=k.renderer;q=i[k.dataIndex];if(typeof m==="string"){k.renderer=m=Ext.util.Format[m]}if(typeof m==="function"){q=m.call(k.scope||this.ownerCt,q,b,l,c,g,p,n)}if(b.css){h.cssWarning=true;b.tdCls=b.css;delete b.css}h[r+"-modified"]=l.isModified(k.dataIndex)?Ext.baseCSSPrefix+"grid-dirty-cell":"";h[r+"-tdCls"]=b.tdCls;h[r+"-tdAttr"]=b.tdAttr;h[r+"-style"]=b.style;if(q===undefined||q===null||q===""){q="&#160;"}h[r]=q}return h},expandToFit:function(a){if(this.view){this.view.expandToFit(a)}}});Ext.define("Ext.data.TreeStore",{extend:"Ext.data.AbstractStore",alias:"store.tree",requires:["Ext.data.Tree","Ext.data.NodeInterface","Ext.data.NodeStore"],clearOnLoad:true,nodeParam:"node",defaultRootId:"root",defaultRootProperty:"children",folderSort:false,constructor:function(c){var e=this,b,a;c=Ext.apply({},c);a=c.fields||e.fields;if(!a){c.fields=[{name:"text",type:"string"}]}e.callParent([c]);e.tree=Ext.create("Ext.data.Tree");e.relayEvents(e.tree,["append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert","expand","collapse","beforeexpand","beforecollapse","rootchange"]);e.tree.on({scope:e,remove:e.onNodeRemove,beforeexpand:e.onBeforeNodeExpand,beforecollapse:e.onBeforeNodeCollapse,append:e.onNodeAdded,insert:e.onNodeAdded});e.onBeforeSort();b=e.root;if(b){delete e.root;e.setRootNode(b)}e.addEvents("sort");if(Ext.isDefined(e.nodeParameter)){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.data.TreeStore: nodeParameter has been deprecated. Please use nodeParam instead.")}e.nodeParam=e.nodeParameter;delete e.nodeParameter}},setProxy:function(c){var a,b;if(c instanceof Ext.data.proxy.Proxy){b=Ext.isEmpty(c.getReader().root)}else{if(Ext.isString(c)){b=true}else{a=c.reader;b=!(a&&!Ext.isEmpty(a.root))}}c=this.callParent(arguments);if(b){a=c.getReader();a.root=this.defaultRootProperty;a.buildExtractors(true)}},onBeforeSort:function(){if(this.folderSort){this.sort({property:"leaf",direction:"ASC"},"prepend",false)}},onBeforeNodeExpand:function(b,c,a){if(b.isLoaded()){Ext.callback(c,a||b,[b.childNodes])}else{if(b.isLoading()){this.on("load",function(){Ext.callback(c,a||b,[b.childNodes])},this,{single:true})}else{this.read({node:b,callback:function(){Ext.callback(c,a||b,[b.childNodes])}})}}},getNewRecords:function(){return Ext.Array.filter(this.tree.flatten(),this.filterNew)},getUpdatedRecords:function(){return Ext.Array.filter(this.tree.flatten(),this.filterUpdated)},onBeforeNodeCollapse:function(b,c,a){c.call(a||b,b.childNodes)},onNodeRemove:function(a,b){var c=this.removed;if(!b.isReplace&&Ext.Array.indexOf(c,b)==-1){c.push(b)}},onNodeAdded:function(e,f){var c=this.getProxy(),a=c.getReader(),g=f.raw||f.data,h,b;Ext.Array.remove(this.removed,f);if(!f.isLeaf()&&!f.isLoaded()){h=a.getRoot(g);if(h){this.fillNode(f,a.extractData(h));delete g[a.root]}}},setRootNode:function(a){var b=this;a=a||{};if(!a.isNode){Ext.applyIf(a,{id:b.defaultRootId,text:"Root",allowDrag:false});a=Ext.ModelManager.create(a,b.model)}Ext.data.NodeInterface.decorate(a);b.getProxy().getReader().buildExtractors(true);b.tree.setRootNode(a);if(!a.isLoaded()&&(b.autoLoad===true||a.isExpanded())){b.load({node:a})}return a},getRootNode:function(){return this.tree.getRootNode()},getNodeById:function(a){return this.tree.getNodeById(a)},load:function(b){b=b||{};b.params=b.params||{};var e=this,c=b.node||e.tree.getRootNode(),a;if(!c){c=e.setRootNode({expanded:true})}if(e.clearOnLoad){c.removeAll(true)}Ext.applyIf(b,{node:c});b.params[e.nodeParam]=c?c.getId():"root";if(c){c.set("loading",true)}return e.callParent([b])},fillNode:function(g,b){var f=this,e=b?b.length:0,c=0,a;if(e&&f.sortOnLoad&&!f.remoteSort&&f.sorters&&f.sorters.items){a=Ext.create("Ext.util.MixedCollection");a.addAll(b);a.sort(f.sorters.items);b=a.items}g.set("loaded",true);for(;c<e;c++){g.appendChild(b[c],undefined,true)}return b},onProxyLoad:function(b){var e=this,f=b.wasSuccessful(),a=b.getRecords(),c=b.node;e.loading=false;c.set("loading",false);if(f){a=e.fillNode(c,a)}e.fireEvent("read",e,b.node,a,f);e.fireEvent("load",e,b.node,a,f);Ext.callback(b.callback,b.scope||e,[a,b,f])},onCreateRecords:function(c,e,m){if(m){var f=0,a=c.length,l=e.records,h,g,b,k;for(;f<a;++f){g=c[f];b=l[f];if(b){h=b.parentNode;if(h){b.isReplace=true;h.replaceChild(g,b);delete b.isReplace}g.phantom=false}}}},onUpdateRecords:function(c,e,m){if(m){var l=this,g=0,a=c.length,f=l.data,b,k,h;for(;g<a;++g){h=c[g];b=l.tree.getNodeById(h.getId());k=b.parentNode;if(k){b.isReplace=true;k.replaceChild(h,b);b.isReplace=false}}}},onDestroyRecords:function(b,a,c){if(c){this.removed=[]}},removeAll:function(){this.getRootNode().destroy(true);this.fireEvent("clear",this)},doSort:function(a){var b=this;if(b.remoteSort){b.load()}else{b.tree.sort(a,true);b.fireEvent("datachanged",b)}b.fireEvent("sort",b)}});Ext.define("Ext.form.field.Checkbox",{extend:"Ext.form.field.Base",alias:["widget.checkboxfield","widget.checkbox"],alternateClassName:"Ext.form.Checkbox",requires:["Ext.XTemplate","Ext.form.CheckboxManager"],fieldSubTpl:["<tpl if=\"boxLabel && boxLabelAlign == 'before'\">",'<label id="{cmpId}-boxLabelEl" class="{boxLabelCls} {boxLabelCls}-{boxLabelAlign}" for="{id}">{boxLabel}</label>',"</tpl>",'<input type="button" id="{id}" ','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" hidefocus="true" />',"<tpl if=\"boxLabel && boxLabelAlign == 'after'\">",'<label id="{cmpId}-boxLabelEl" class="{boxLabelCls} {boxLabelCls}-{boxLabelAlign}" for="{id}">{boxLabel}</label>',"</tpl>",{disableFormats:true,compiled:true}],isCheckbox:true,focusCls:Ext.baseCSSPrefix+"form-cb-focus",fieldBodyCls:Ext.baseCSSPrefix+"form-cb-wrap",checked:false,checkedCls:Ext.baseCSSPrefix+"form-cb-checked",boxLabelCls:Ext.baseCSSPrefix+"form-cb-label",boxLabelAlign:"after",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",ariaRole:"checkbox",onRe:/^on$/i,initComponent:function(){this.callParent(arguments);this.getManager().add(this)},initValue:function(){var b=this,a=!!b.checked;b.originalValue=b.lastValue=a;b.setValue(a)},onRender:function(b,a){var c=this;c.addChildEls("boxLabelEl");Ext.applyIf(c.subTplData,{boxLabel:c.boxLabel,boxLabelCls:c.boxLabelCls,boxLabelAlign:c.boxLabelAlign});c.callParent(arguments)},initEvents:function(){var a=this;a.callParent();a.mon(a.inputEl,"click",a.onBoxClick,a)},onBoxClick:function(b){var a=this;if(!a.disabled&&!a.readOnly){this.setValue(!this.checked)}},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var a=this.uncheckedValue,b=Ext.isDefined(a)?a:null;return this.checked?this.inputValue:b},setRawValue:function(e){var c=this,f=c.inputEl,a=c.inputValue,b=(e===true||e==="true"||e==="1"||e===1||(((Ext.isString(e)||Ext.isNumber(e))&&a)?e==a:c.onRe.test(e)));if(f){f.dom.setAttribute("aria-checked",b);c[b?"addCls":"removeCls"](c.checkedCls)}c.checked=c.rawValue=b;return b},setValue:function(b){var a=this;if(Ext.isArray(b)){a.getManager().getByName(a.name).each(function(c){c.setValue(Ext.Array.contains(b,c.inputValue))})}else{a.callParent(arguments)}return a},valueToRaw:function(a){return a},onChange:function(b,a){var e=this,c=e.handler;if(c){c.call(e.scope||e,e,b)}e.callParent(arguments)},beforeDestroy:function(){this.callParent();this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var a=this,b=a.inputEl;a.callParent();if(b){b.dom.disabled=a.readOnly}},setReadOnly:function(c){var a=this,b=a.inputEl;if(b){b.dom.disabled=c||a.disabled}a.readOnly=c},getBodyNaturalWidth:function(){var e=this,b=e.bodyEl,a="white-space",c;b.setStyle(a,"nowrap");c=b.getWidth();b.setStyle(a,"");return c}});Ext.define("Ext.form.field.Radio",{extend:"Ext.form.field.Checkbox",alias:["widget.radiofield","widget.radio"],alternateClassName:"Ext.form.Radio",requires:["Ext.form.RadioManager"],isRadio:true,inputType:"radio",ariaRole:"radio",getGroupValue:function(){var a=this.getManager().getChecked(this.name);return a?a.inputValue:null},onBoxClick:function(b){var a=this;if(!a.disabled&&!a.readOnly){this.setValue(true)}},setValue:function(a){var b=this,c;if(Ext.isBoolean(a)){b.callParent(arguments)}else{c=b.getManager().getWithValue(b.name,a).getAt(0);if(c){c.setValue(true)}}return b},getSubmitValue:function(){return this.checked?this.inputValue:null},getModelData:function(){return this.getSubmitData()},onChange:function(b,a){var c=this;c.callParent(arguments);if(b){this.getManager().getByName(c.name).each(function(e){if(e!==c){e.setValue(false)}},c)}},getManager:function(){return Ext.form.RadioManager}});Ext.define("Ext.selection.DataViewModel",{extend:"Ext.selection.Model",requires:["Ext.util.KeyNav"],deselectOnContainerClick:true,enableKeyNav:true,constructor:function(a){this.addEvents("beforedeselect","beforeselect","deselect","select");this.callParent(arguments)},bindComponent:function(a){var b=this,c={refresh:b.refresh,scope:b};b.view=a;b.bind(a.getStore());a.on(a.triggerEvent,b.onItemClick,b);a.on(a.triggerCtEvent,b.onContainerClick,b);a.on(c);if(b.enableKeyNav){b.initKeyNav(a)}},onItemClick:function(b,a,f,c,g){this.selectWithEvent(a,g)},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},initKeyNav:function(a){var b=this;if(!a.rendered){a.on("render",Ext.Function.bind(b.initKeyNav,b,[a],0),b,{single:true});return}a.el.set({tabIndex:-1});b.keyNav=Ext.create("Ext.util.KeyNav",a.el,{down:Ext.pass(b.onNavKey,[1],b),right:Ext.pass(b.onNavKey,[1],b),left:Ext.pass(b.onNavKey,[-1],b),up:Ext.pass(b.onNavKey,[-1],b),scope:b})},onNavKey:function(g){g=g||1;var f=this,b=f.view,e=f.getSelection()[0],c=f.view.store.getCount(),a;if(e){a=b.indexOf(b.getNode(e))+g}else{a=0}if(a<0){a=c-1}else{if(a>=c){a=0}}f.select(a)},onSelectChange:function(b,f,e,h){var g=this,a=g.view,c=f?"select":"deselect";if((e||g.fireEvent("before"+c,g,b))!==false&&h()!==false){if(f){a.onItemSelect(b)}else{a.onItemDeselect(b)}if(!e){g.fireEvent(c,g,b)}}},destroy:function(){Ext.destroy(this.keyNav);this.callParent()}});Ext.define("Ext.view.AbstractView",{extend:"Ext.Component",alternateClassName:"Ext.view.AbstractView",requires:["Ext.LoadMask","Ext.data.StoreManager","Ext.CompositeElementLite","Ext.DomQuery","Ext.selection.DataViewModel"],inheritableStatics:{getRecord:function(a){return this.getBoundView(a).getRecord(a)},getBoundView:function(a){return Ext.getCmp(a.boundView)}},deferInitialRefresh:true,itemCls:Ext.baseCSSPrefix+"dataview-item",loadingText:"Loading...",loadMask:true,loadingUseMsg:true,selectedItemCls:Ext.baseCSSPrefix+"item-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,last:false,triggerEvent:"itemclick",triggerCtEvent:"containerclick",addCmpEvents:function(){},initComponent:function(){var c=this,a=Ext.isDefined,e=c.itemTpl,b={};if(e){if(Ext.isArray(e)){e=e.join("")}else{if(Ext.isObject(e)){b=Ext.apply(b,e.initialConfig);e=e.html}}if(!c.itemSelector){c.itemSelector="."+c.itemCls}e=Ext.String.format('<tpl for="."><div class="{0}">{1}</div></tpl>',c.itemCls,e);c.tpl=Ext.create("Ext.XTemplate",e,b)}if(!a(c.tpl)||!a(c.itemSelector)){Ext.Error.raise({sourceClass:"Ext.view.View",tpl:c.tpl,itemSelector:c.itemSelector,msg:"DataView requires both tpl and itemSelector configurations to be defined."})}c.callParent();if(Ext.isString(c.tpl)||Ext.isArray(c.tpl)){c.tpl=Ext.create("Ext.XTemplate",c.tpl)}if(a(c.overCls)||a(c.overClass)){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.view.View: Using the deprecated overCls or overClass configuration. Use overItemCls instead.")}c.overItemCls=c.overCls||c.overClass;delete c.overCls;delete c.overClass}if(c.overItemCls){c.trackOver=true}if(a(c.selectedCls)||a(c.selectedClass)){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.view.View: Using the deprecated selectedCls or selectedClass configuration. Use selectedItemCls instead.")}c.selectedItemCls=c.selectedCls||c.selectedClass;delete c.selectedCls;delete c.selectedClass}c.addEvents("beforerefresh","refresh","viewready","itemupdate","itemadd","itemremove");c.addCmpEvents();c.store=Ext.data.StoreManager.lookup(c.store||"ext-empty-store");c.all=new Ext.CompositeElementLite()},onRender:function(){var c=this,b=c.loadMask,a={msg:c.loadingText,msgCls:c.loadingCls,useMsg:c.loadingUseMsg};c.callParent(arguments);if(b){if(Ext.isObject(b)){a=Ext.apply(a,b)}c.loadMask=Ext.create("Ext.LoadMask",c,a);c.loadMask.on({scope:c,beforeshow:c.onMaskBeforeShow,hide:c.onMaskHide})}},onMaskBeforeShow:function(){var a=this.loadingHeight;this.getSelectionModel().deselectAll();if(a){this.setCalculatedSize(undefined,a)}},onMaskHide:function(){var a=this;if(!a.destroying&&a.loadingHeight){a.setHeight(a.height)}},afterRender:function(){this.callParent(arguments);this.getSelectionModel().bindComponent(this)},getSelectionModel:function(){var a=this,b="SINGLE";if(!a.selModel){a.selModel={}}if(a.simpleSelect){b="SIMPLE"}else{if(a.multiSelect){b="MULTI"}}Ext.applyIf(a.selModel,{allowDeselect:a.allowDeselect,mode:b});if(!a.selModel.events){a.selModel=Ext.create("Ext.selection.DataViewModel",a.selModel)}if(!a.selModel.hasRelaySetup){a.relayEvents(a.selModel,["selectionchange","beforeselect","beforedeselect","select","deselect"]);a.selModel.hasRelaySetup=true}if(a.disableSelection){a.selModel.locked=true}return a.selModel},refresh:function(){var c=this,b,a;if(!c.rendered||c.isDestroyed){return}c.fireEvent("beforerefresh",c);b=c.getTargetEl();a=c.store.getRange();b.update("");if(a.length<1){if(!c.deferEmptyText||c.hasSkippedEmptyText){b.update(c.emptyText)}c.all.clear()}else{c.tpl.overwrite(b,c.collectData(a,0));c.all.fill(Ext.query(c.getItemSelector(),b.dom));c.updateIndexes(0)}c.selModel.refresh();c.hasSkippedEmptyText=true;c.fireEvent("refresh",c);if(!c.viewReady){c.viewReady=true;c.fireEvent("viewready",c)}},prepareData:function(c,b,a){if(a){Ext.apply(c,a.getAssociatedData())}return c},collectData:function(c,g){var f=[],e=0,a=c.length,b;for(;e<a;e++){b=c[e];f[f.length]=this.prepareData(b[b.persistenceProperty],g+e,b)}return f},bufferRender:function(a,b){var c=document.createElement("div");this.tpl.overwrite(c,this.collectData(a,b));return Ext.query(this.getItemSelector(),c)},onUpdate:function(f,a){var e=this,b=e.store.indexOf(a),c;if(b>-1){c=e.bufferRender([a],b)[0];if(e.getNode(a)){e.all.replaceElement(b,c,true);e.updateIndexes(b,b);e.selModel.refresh();e.fireEvent("itemupdate",a,b,c)}}},onAdd:function(f,b,c){var e=this,a;if(e.all.getCount()===0){e.refresh();return}a=e.bufferRender(b,c);e.doAdd(a,b,c);e.selModel.refresh();e.updateIndexes(c);e.fireEvent("itemadd",b,c,a)},doAdd:function(b,a,c){var e=this.all;if(c<e.getCount()){e.item(c).insertSibling(b,"before",true)}else{e.last().insertSibling(b,"after",true)}Ext.Array.insert(e.elements,c,b)},onRemove:function(e,a,b){var c=this;c.doRemove(a,b);c.updateIndexes(b);if(c.store.getCount()===0){c.refresh()}c.fireEvent("itemremove",a,b)},doRemove:function(a,b){this.all.removeElement(b,true)},refreshNode:function(a){this.onUpdate(this.store,this.store.getAt(a))},updateIndexes:function(f,e){var c=this.all.elements,a=this.store.getRange(),b;f=f||0;e=e||((e===0)?0:(c.length-1));for(b=f;b<=e;b++){c[b].viewIndex=b;c[b].viewRecordId=a[b].internalId;if(!c[b].boundView){c[b].boundView=this.id}}},getStore:function(){return this.store},bindStore:function(a,b){var e=this,c;if(!b&&e.store){if(a!==e.store&&e.store.autoDestroy){e.store.destroyStore()}else{e.mun(e.store,{scope:e,datachanged:e.onDataChanged,add:e.onAdd,remove:e.onRemove,update:e.onUpdate,clear:e.refresh})}if(!a){if(e.loadMask&&e.loadMask.bindStore){e.loadMask.bindStore(null)}e.store=null}}if(a){a=Ext.data.StoreManager.lookup(a);e.mon(a,{scope:e,datachanged:e.onDataChanged,add:e.onAdd,remove:e.onRemove,update:e.onUpdate,clear:e.refresh});if(e.loadMask&&e.loadMask.bindStore){if(Ext.Array.contains(a.alias,"store.node")){c=this.ownerCt.store}else{c=a}e.loadMask.bindStore(c)}}e.viewReady=false;e.store=a;e.getSelectionModel().bind(a);if(a){if(b&&e.deferInitialRefresh){Ext.Function.defer(function(){if(!e.isDestroyed){e.refresh(true)}},1)}else{e.refresh(true)}}},onDataChanged:function(){if(this.blockRefresh!==true){this.refresh.apply(this,arguments)}},findItemByChild:function(a){return Ext.fly(a).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(a){return a.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var b=[],a=this.selModel.getSelection(),e=a.length,c=0;for(;c<e;c++){b.push(this.getNode(a[c]))}return b},getRecords:function(c){var b=[],e=0,a=c.length,f=this.store.data;for(;e<a;e++){b[b.length]=f.getByKey(c[e].viewRecordId)}return b},getRecord:function(a){return this.store.data.getByKey(Ext.getDom(a).viewRecordId)},isSelected:function(b){var a=this.getRecord(b);return this.selModel.isSelected(a)},select:function(b,c,a){this.selModel.select(b,c,a)},deselect:function(b,a){this.selModel.deselect(b,a)},getNode:function(a){if(!this.rendered){return null}if(Ext.isString(a)){return document.getElementById(a)}if(Ext.isNumber(a)){return this.all.elements[a]}if(a instanceof Ext.data.Model){return this.getNodeByRecord(a)}return a},getNodeByRecord:function(a){var c=this.all.elements,e=c.length,b=0;for(;b<e;b++){if(c[b].viewRecordId===a.internalId){return c[b]}}return null},getNodes:function(f,a){var e=this.all.elements,b=[],c;f=f||0;a=!Ext.isDefined(a)?Math.max(e.length-1,0):a;if(f<=a){for(c=f;c<=a&&e[c];c++){b.push(e[c])}}else{for(c=f;c>=a&&e[c];c--){b.push(e[c])}}return b},indexOf:function(a){a=this.getNode(a);if(Ext.isNumber(a.viewIndex)){return a.viewIndex}return this.all.indexOf(a)},onDestroy:function(){var a=this;a.all.clear();a.callParent();a.bindStore(null);a.selModel.destroy()},onItemSelect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).addCls(this.selectedItemCls)}},onItemDeselect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).removeCls(this.selectedItemCls)}},getItemSelector:function(){return this.itemSelector}},function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection().length},getSelectedRecords:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection()},select:function(a,b,e){if(Ext.global.console){Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()")}var c=this.getSelectionModel();return c.select.apply(c,arguments)},clearSelections:function(){if(Ext.global.console){Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()")}var a=this.getSelectionModel();return a.deselectAll()}})})});Ext.define("Ext.form.Panel",{extend:"Ext.panel.Panel",mixins:{fieldAncestor:"Ext.form.FieldAncestor"},alias:"widget.form",alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],requires:["Ext.form.Basic","Ext.util.TaskRunner"],layout:"anchor",ariaRole:"form",initComponent:function(){var a=this;if(a.frame){a.border=false}a.initFieldAncestor();a.callParent();a.relayEvents(a.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]);if(a.pollForChanges){a.startPolling(a.pollInterval||500)}},initItems:function(){var a=this;a.form=a.createForm();a.callParent();a.form.initialize()},createForm:function(){return Ext.create("Ext.form.Basic",this,Ext.applyIf({listeners:{}},this.initialConfig))},getForm:function(){return this.form},loadRecord:function(a){return this.getForm().loadRecord(a)},getRecord:function(){return this.getForm().getRecord()},getValues:function(){return this.getForm().getValues()},beforeDestroy:function(){this.stopPolling();this.form.destroy();this.callParent()},load:function(a){this.form.load(a)},submit:function(a){this.form.submit(a)},disable:function(a){this.callParent(arguments);this.form.getFields().each(function(b){b.disable()})},enable:function(a){this.callParent(arguments);this.form.getFields().each(function(b){b.enable()})},startPolling:function(b){this.stopPolling();var a=Ext.create("Ext.util.TaskRunner",b);a.start({interval:0,run:this.checkChange,scope:this});this.pollTask=a},stopPolling:function(){var a=this.pollTask;if(a){a.stopAll();delete this.pollTask}},checkChange:function(){this.form.getFields().each(function(a){a.checkChange()})}});Ext.define("Ext.grid.RowEditor",{extend:"Ext.form.Panel",requires:["Ext.tip.ToolTip","Ext.util.HashMap","Ext.util.KeyNav"],saveBtnText:"Update",cancelBtnText:"Cancel",errorsText:"Errors",dirtyText:"You need to commit or cancel your changes",lastScrollLeft:0,lastScrollTop:0,border:false,hideMode:"offsets",initComponent:function(){var b=this,a;b.cls=Ext.baseCSSPrefix+"grid-row-editor";b.layout={type:"hbox",align:"middle"};b.columns=Ext.create("Ext.util.HashMap");b.columns.getKey=function(e){var c;if(e.getEditor){c=e.getEditor();if(c){return c.id}}return e.id};b.mon(b.columns,{add:b.onFieldAdd,remove:b.onFieldRemove,replace:b.onFieldReplace,scope:b});b.callParent(arguments);if(b.fields){b.setField(b.fields);delete b.fields}a=b.getForm();a.trackResetOnLoad=true},onFieldChange:function(){var c=this,b=c.getForm(),a=b.isValid();if(c.errorSummary&&c.isVisible()){c[a?"hideToolTip":"showToolTip"]()}if(c.floatingButtons){c.floatingButtons.child("#update").setDisabled(!a)}c.isValid=a},afterRender:function(){var b=this,a=b.editingPlugin;b.callParent(arguments);b.mon(b.renderTo,"scroll",b.onCtScroll,b,{buffer:100});b.mon(b.el,{click:Ext.emptyFn,stopPropagation:true});b.el.swallowEvent(["keypress","keydown"]);b.keyNav=Ext.create("Ext.util.KeyNav",b.el,{enter:a.completeEdit,esc:a.onEscKey,scope:a});b.mon(a.view,{beforerefresh:b.onBeforeViewRefresh,refresh:b.onViewRefresh,scope:b})},onBeforeViewRefresh:function(b){var c=this,a=b.el.dom;if(c.el.dom.parentNode===a){a.removeChild(c.el.dom)}},onViewRefresh:function(c){var f=this,b=c.el.dom,e=f.context,a;b.appendChild(f.el.dom);if(e&&(a=e.store.indexOf(e.record))>=0){e.row=c.getNode(a);f.reposition();if(f.tooltip&&f.tooltip.isVisible()){f.tooltip.setTarget(e.row)}}else{f.editingPlugin.cancelEdit()}},onCtScroll:function(f,c){var a=this,b=c.scrollTop,g=c.scrollLeft;if(b!==a.lastScrollTop){a.lastScrollTop=b;if((a.tooltip&&a.tooltip.isVisible())||a.hiddenTip){a.repositionTip()}}if(g!==a.lastScrollLeft){a.lastScrollLeft=g;a.reposition()}},onColumnAdd:function(a){this.setField(a)},onColumnRemove:function(a){this.columns.remove(a)},onColumnResize:function(b,a){b.getEditor().setWidth(a-2);if(this.isVisible()){this.reposition()}},onColumnHide:function(a){a.getEditor().hide();if(this.isVisible()){this.reposition()}},onColumnShow:function(a){var b=a.getEditor();b.setWidth(a.getWidth()-2).show();if(this.isVisible()){this.reposition()}},onColumnMove:function(b,a,c){var e=b.getEditor();if(this.items.indexOf(e)!=c){this.move(a,c)}},onFieldAdd:function(f,a,b){var c=this,g=c.editingPlugin.grid.headerCt.getHeaderIndex(b),e=b.getEditor({xtype:"displayfield"});c.insert(g,e)},onFieldRemove:function(g,a,b){var c=this,f=b.getEditor(),e=f.el;c.remove(f,false);if(e){e.remove()}},onFieldReplace:function(f,a,c,b){var e=this;e.onFieldRemove(f,a,b)},clearFields:function(){var a=this,b=a.columns;b.each(function(c){b.removeAtKey(c)})},getFloatingButtons:function(){var e=this,f=Ext.baseCSSPrefix,c=f+"grid-row-editor-buttons",b=e.editingPlugin,a;if(!e.floatingButtons){a=e.floatingButtons=Ext.create("Ext.Container",{renderTpl:['<div class="{baseCls}-ml"></div>','<div class="{baseCls}-mr"></div>','<div class="{baseCls}-bl"></div>','<div class="{baseCls}-br"></div>','<div class="{baseCls}-bc"></div>'],renderTo:e.el,baseCls:c,layout:{type:"hbox",align:"middle"},defaults:{margins:"0 1 0 1"},items:[{itemId:"update",flex:1,xtype:"button",handler:b.completeEdit,scope:b,text:e.saveBtnText,disabled:!e.isValid},{flex:1,xtype:"button",handler:b.cancelEdit,scope:b,text:e.cancelBtnText}]});e.mon(a.el,{mousedown:Ext.emptyFn,click:Ext.emptyFn,stopEvent:true})}return e.floatingButtons},reposition:function(t){var v=this,c=v.context,f=c&&Ext.get(c.row),r=v.getFloatingButtons(),s=r.el,a=v.editingPlugin.grid,g=a.view.el,u=a.verticalScroller,q=a.headerCt.getFullWidth(),w=a.getWidth(),m=Math.min(q,w),p=a.view.el.dom.scrollLeft,i=r.getWidth(),e=(m-i)/2+p,k,h,n,l=function(){if(u){u.invalidate();s.scrollIntoView(g,false)}if(t&&t.callback){t.callback.call(t.scope||v)}};if(f&&Ext.isElement(f.dom)){f.scrollIntoView(g,false);k=f.getXY()[1]-5;h=f.getHeight();n=h+10;if(Ext.isIE){n+=2}if(v.getHeight()!=n){v.setHeight(n);v.el.setLeft(0)}if(t){var b={to:{y:k},duration:t.duration||125,listeners:{afteranimate:function(){l();k=f.getXY()[1]-5;v.el.setY(k)}}};v.animate(b)}else{v.el.setY(k);l()}}if(v.getWidth()!=q){v.setWidth(q)}s.setLeft(e)},getEditor:function(a){var b=this;if(Ext.isNumber(a)){return b.query(">[isFormField]")[a]}else{if(a instanceof Ext.grid.column.Column){return a.getEditor()}}},removeField:function(b){var a=this;b=a.getEditor(b);a.mun(b,"validitychange",a.onValidityChange,a);a.columns.removeKey(b.id)},setField:function(a){var b=this,c;if(Ext.isArray(a)){Ext.Array.forEach(a,b.setField,b);return}c=a.getEditor(null,{xtype:"displayfield",getModelData:function(){return null}});c.margins="0 0 0 2";c.setWidth(a.getDesiredWidth()-2);b.mon(c,"change",b.onFieldChange,b);b.columns.add(c.id,a);if(a.hidden){b.onColumnHide(a)}if(b.isVisible()&&b.context){b.renderColumnData(c,b.context.record)}},loadRecord:function(a){var c=this,b=c.getForm();b.loadRecord(a);if(b.isValid()){c.hideToolTip()}else{c.showToolTip()}Ext.Array.forEach(c.query(">displayfield"),function(e){c.renderColumnData(e,a)},c)},renderColumnData:function(l,h){var i=this,a=i.editingPlugin.grid,e=a.headerCt,k=a.view,n=k.store,f=i.columns.get(l.id),m=h.get(f.dataIndex);if(f.renderer){var b={tdCls:"",style:""},c=n.indexOf(h),g=e.getHeaderIndex(f);m=f.renderer.call(f.scope||e.ownerCt,m,b,h,c,g,n,k)}l.setRawValue(m);l.resetOriginalValue()},beforeEdit:function(){var a=this;if(a.isVisible()&&!a.autoCancel&&a.isDirty()){a.showToolTip();return false}},startEdit:function(b,h){var g=this,f=g.editingPlugin.grid,a=f.getView(),c=f.store,e=g.context=Ext.apply(g.editingPlugin.context,{view:f.getView(),store:c});e.grid.getSelectionModel().select(b);g.loadRecord(b);if(!g.isVisible()){g.show();g.focusContextCell()}else{g.reposition({callback:this.focusContextCell})}},focusContextCell:function(){var a=this.getEditor(this.context.colIdx);if(a&&a.focus){a.focus()}},cancelEdit:function(){var b=this,a=b.getForm();b.hide();a.clearInvalid();a.reset()},completeEdit:function(){var b=this,a=b.getForm();if(!a.isValid()){return}a.updateRecord(b.context.record);b.hide();return true},onShow:function(){var a=this;a.callParent(arguments);a.reposition()},onHide:function(){var a=this;a.callParent(arguments);a.hideToolTip();a.invalidateScroller();if(a.context){a.context.view.focus();a.context=null}},isDirty:function(){var b=this,a=b.getForm();return a.isDirty()},getToolTip:function(){var a=this,b;if(!a.tooltip){b=a.tooltip=Ext.createWidget("tooltip",{cls:Ext.baseCSSPrefix+"grid-row-editor-errors",title:a.errorsText,autoHide:false,closable:true,closeAction:"disable",anchor:"left"})}return a.tooltip},hideToolTip:function(){var a=this,b=a.getToolTip();if(b.rendered){b.disable()}a.hiddenTip=false},showToolTip:function(){var c=this,e=c.getToolTip(),a=c.context,f=Ext.get(a.row),b=a.grid.view.el;e.setTarget(f);e.showAt([-10000,-10000]);e.body.update(c.getErrors());e.mouseOffset=[b.getWidth()-f.getWidth()+c.lastScrollLeft+15,0];c.repositionTip();e.doLayout();e.enable()},repositionTip:function(){var i=this,k=i.getToolTip(),c=i.context,m=Ext.get(c.row),l=c.grid.view.el,f=l.getHeight(),g=i.lastScrollTop,h=g+f,b=m.getHeight(),a=m.dom.offsetTop,e=a+b;if(e>g&&a<h){k.show();i.hiddenTip=false}else{k.hide();i.hiddenTip=true}},getErrors:function(){var a=this,b=!a.autoCancel&&a.isDirty()?a.dirtyText+"<br />":"",c=[];Ext.Array.forEach(a.query(">[isFormField]"),function(e){c=c.concat(Ext.Array.map(e.getErrors(),function(f){return"<li>"+f+"</li>"}))},a);return b+"<ul>"+c.join("")+"</ul>"},invalidateScroller:function(){var c=this,b=c.context,a=b.grid.verticalScroller;if(a){a.invalidate()}}});Ext.define("Ext.ux.grid.PrintGrid",{extend:"Object",requires:["Ext.button.Button","Ext.ux.grid.Printer","Ext.Date"],text:null,title:null,printHidden:false,constructor:function(a){if(a){Ext.apply(this,a)}},init:function(b){var a=b.items.indexOf(b.child("#refresh")),c;c=Ext.create("Ext.button.Button",{text:this.text,mainTitle:this.title,printHidden:this.printHidden,iconCls:"pts-printer",itemId:"printBtn",tooltip:"Print the visible records",handler:function(){var i=this,h=i.up("gridpanel"),g=i.up("pagingtoolbar").getPageData(),e=Ext.Date.format(new Date(),"F j, Y, g:i a"),f="Page "+g.currentPage+" of "+g.pageCount,k;if(Ext.isFunction(i.mainTitle)){k=i.mainTitle.call(b)}else{k=i.mainTitle?i.mainTitle:h.title+" - "+e}Ext.ux.grid.Printer.mainTitle=k;Ext.ux.grid.Printer.rightTitle=f;Ext.ux.grid.Printer.printHidden=i.printHidden;Ext.ux.grid.Printer.print(h)}});b.insert(a+1,c);b.on("change",function(e,f){c.setDisabled(!f.total)})}});Ext.define("Ext.ux.grid.SaveGrid",{extend:"Object",requires:["Ext.button.Button","Ext.ux.grid.Save"],text:null,constructor:function(a){if(a){Ext.apply(this,a)}},init:function(b){var a=b.items.indexOf(b.child("#refresh")),c;c=Ext.create("Ext.button.Button",{text:this.text,iconCls:"pts-menu-savetable",tooltip:"Download the grid",handler:function(){Ext.ux.grid.Save.save(this.up("gridpanel"))}});b.insert(a+1,c);b.on("change",function(e,f){c.setDisabled(!f.total)})}});Ext.define("Ext.form.field.Trigger",{extend:"Ext.form.field.Text",alias:["widget.triggerfield","widget.trigger"],requires:["Ext.DomHelper","Ext.util.ClickRepeater","Ext.layout.component.field.Trigger"],alternateClassName:["Ext.form.TriggerField","Ext.form.TwinTriggerField","Ext.form.Trigger"],fieldSubTpl:['<input id="{id}" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" />','<div id="{cmpId}-triggerWrap" class="{triggerWrapCls}" role="presentation">',"{triggerEl}",'<div class="{clearCls}" role="presentation"></div>',"</div>",{compiled:true,disableFormats:true}],triggerBaseCls:Ext.baseCSSPrefix+"form-trigger",triggerWrapCls:Ext.baseCSSPrefix+"form-trigger-wrap",hideTrigger:false,editable:true,readOnly:false,repeatTriggerClick:false,autoSize:Ext.emptyFn,monitorTab:true,mimicing:false,triggerIndexRe:/trigger-index-(\d+)/,componentLayout:"triggerfield",initComponent:function(){this.wrapFocusCls=this.triggerWrapCls+"-focus";this.callParent(arguments)},onRender:function(e,a){var f=this,k,g=f.triggerBaseCls,h=f.triggerWrapCls,b=[],c;if(!f.trigger1Cls){f.trigger1Cls=f.triggerCls}for(c=0;(k=f["trigger"+(c+1)+"Cls"])||c<1;c++){b.push({cls:[Ext.baseCSSPrefix+"trigger-index-"+c,g,k].join(" "),role:"button"})}b[c-1].cls+=" "+g+"-last";f.addChildEls("triggerWrap");Ext.applyIf(f.subTplData,{triggerWrapCls:h,triggerEl:Ext.DomHelper.markup(b),clearCls:f.clearCls});f.callParent(arguments);f.triggerEl=Ext.select("."+g,true,f.triggerWrap.dom);f.doc=Ext.getDoc();f.initTrigger()},onEnable:function(){this.callParent();this.triggerWrap.unmask()},onDisable:function(){this.callParent();this.triggerWrap.mask()},afterRender:function(){this.callParent();this.updateEditState();this.triggerEl.unselectable()},updateEditState:function(){var c=this,f=c.inputEl,a=c.triggerWrap,e=Ext.baseCSSPrefix+"trigger-noedit",b,g;if(c.rendered){if(c.readOnly){f.addCls(e);g=true;b=false}else{if(c.editable){f.removeCls(e);g=false}else{f.addCls(e);g=true}b=!c.hideTrigger}a.setDisplayed(b);f.dom.readOnly=g;c.doComponentLayout()}},getTriggerWidth:function(){var c=this,b=c.triggerWrap,a=0;if(b&&!c.hideTrigger&&!c.readOnly){c.triggerEl.each(function(e){a+=e.getWidth()});a+=c.triggerWrap.getFrameWidth("lr")}return a},setHideTrigger:function(a){if(a!=this.hideTrigger){this.hideTrigger=a;this.updateEditState()}},setEditable:function(a){if(a!=this.editable){this.editable=a;this.updateEditState()}},setReadOnly:function(a){if(a!=this.readOnly){this.readOnly=a;this.updateEditState()}},initTrigger:function(){var c=this,a=c.triggerWrap,b=c.triggerEl;if(c.repeatTriggerClick){c.triggerRepeater=Ext.create("Ext.util.ClickRepeater",a,{preventDefault:true,handler:function(f,g){c.onTriggerWrapClick(g)}})}else{c.mon(c.triggerWrap,"click",c.onTriggerWrapClick,c)}b.addClsOnOver(c.triggerBaseCls+"-over");b.each(function(f,g,e){f.addClsOnOver(c["trigger"+(e+1)+"Cls"]+"-over")});b.addClsOnClick(c.triggerBaseCls+"-click");b.each(function(f,g,e){f.addClsOnClick(c["trigger"+(e+1)+"Cls"]+"-click")})},onDestroy:function(){var a=this;Ext.destroyMembers(a,"triggerRepeater","triggerWrap","triggerEl");delete a.doc;a.callParent()},onFocus:function(){var a=this;a.callParent();if(!a.mimicing){a.bodyEl.addCls(a.wrapFocusCls);a.mimicing=true;a.mon(a.doc,"mousedown",a.mimicBlur,a,{delay:10});if(a.monitorTab){a.on("specialkey",a.checkTab,a)}}},checkTab:function(a,b){if(!this.ignoreMonitorTab&&b.getKey()==b.TAB){this.triggerBlur()}},onBlur:Ext.emptyFn,mimicBlur:function(a){if(!this.isDestroyed&&!this.bodyEl.contains(a.target)&&this.validateBlur(a)){this.triggerBlur()}},triggerBlur:function(){var a=this;a.mimicing=false;a.mun(a.doc,"mousedown",a.mimicBlur,a);if(a.monitorTab&&a.inputEl){a.un("specialkey",a.checkTab,a)}Ext.form.field.Trigger.superclass.onBlur.call(a);if(a.bodyEl){a.bodyEl.removeCls(a.wrapFocusCls)}},beforeBlur:Ext.emptyFn,validateBlur:function(a){return true},onTriggerWrapClick:function(h){var g=this,f=h&&h.getTarget("."+Ext.baseCSSPrefix+"form-trigger",null),c=f&&f.className.match(g.triggerIndexRe),a,b;if(c&&!g.readOnly){a=parseInt(c[1],10);b=g["onTrigger"+(a+1)+"Click"]||g.onTriggerClick;if(b){b.call(g,h)}}},onTriggerClick:Ext.emptyFn});Ext.define("Ext.form.field.Picker",{extend:"Ext.form.field.Trigger",alias:"widget.pickerfield",alternateClassName:"Ext.form.Picker",requires:["Ext.util.KeyNav"],matchFieldWidth:true,pickerAlign:"tl-bl?",openCls:Ext.baseCSSPrefix+"pickerfield-open",editable:true,initComponent:function(){this.callParent();this.addEvents("expand","collapse","select")},initEvents:function(){var a=this;a.callParent();a.keyNav=Ext.create("Ext.util.KeyNav",a.inputEl,{down:function(){if(!a.isExpanded){a.onTriggerClick()}},esc:a.collapse,scope:a,forceKeyDown:true});if(!a.editable){a.mon(a.inputEl,"click",a.onTriggerClick,a)}if(Ext.isGecko){a.inputEl.dom.setAttribute("autocomplete","off")}},expand:function(){var c=this,a,b,e;if(c.rendered&&!c.isExpanded&&!c.isDestroyed){a=c.bodyEl;b=c.getPicker();e=c.collapseIf;b.show();c.isExpanded=true;c.alignPicker();a.addCls(c.openCls);c.mon(Ext.getDoc(),{mousewheel:e,mousedown:e,scope:c});Ext.EventManager.onWindowResize(c.alignPicker,c);c.fireEvent("expand",c);c.onExpand()}},onExpand:Ext.emptyFn,alignPicker:function(){var b=this,a;if(b.isExpanded){a=b.getPicker();if(b.matchFieldWidth){a.setSize(b.bodyEl.getWidth(),a.store&&a.store.getCount()?null:0)}if(a.isFloating()){b.doAlign()}}},doAlign:function(){var e=this,c=e.picker,a="-above",b;e.picker.alignTo(e.inputEl,e.pickerAlign,e.pickerOffset);b=c.el.getY()<e.inputEl.getY();e.bodyEl[b?"addCls":"removeCls"](e.openCls+a);c[b?"addCls":"removeCls"](c.baseCls+a)},collapse:function(){if(this.isExpanded&&!this.isDestroyed){var e=this,c=e.openCls,b=e.picker,f=Ext.getDoc(),g=e.collapseIf,a="-above";b.hide();e.isExpanded=false;e.bodyEl.removeCls([c,c+a]);b.el.removeCls(b.baseCls+a);f.un("mousewheel",g,e);f.un("mousedown",g,e);Ext.EventManager.removeResizeListener(e.alignPicker,e);e.fireEvent("collapse",e);e.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(b){var a=this;if(!a.isDestroyed&&!b.within(a.bodyEl,false,true)&&!b.within(a.picker.el,false,true)){a.collapse()}},getPicker:function(){var a=this;return a.picker||(a.picker=a.createPicker())},createPicker:Ext.emptyFn,onTriggerClick:function(){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{a.expand()}a.inputEl.focus()}},mimicBlur:function(c){var b=this,a=b.picker;if(!a||!c.within(a.el,false,true)){b.callParent(arguments)}},onDestroy:function(){var b=this,a=b.picker;Ext.EventManager.removeResizeListener(b.alignPicker,b);Ext.destroy(b.keyNav);if(a){delete a.pickerField;a.destroy()}b.callParent()}});Ext.define("Ext.view.View",{extend:"Ext.view.AbstractView",alternateClassName:"Ext.DataView",alias:"widget.dataview",inheritableStatics:{EventMap:{mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",focus:"Focus"}},addCmpEvents:function(){this.addEvents("beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","beforeitemkeydown","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","itemkeydown","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","containermouseup","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","selectionchange","beforeselect")},afterRender:function(){var b=this,a;b.callParent();a={scope:b,freezeEvent:true,click:b.handleEvent,mousedown:b.handleEvent,mouseup:b.handleEvent,dblclick:b.handleEvent,contextmenu:b.handleEvent,mouseover:b.handleEvent,mouseout:b.handleEvent,keydown:b.handleEvent};b.mon(b.getTargetEl(),a);if(b.store){b.bindStore(b.store,true)}},handleEvent:function(a){if(this.processUIEvent(a)!==false){this.processSpecialEvent(a)}},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,stillOverItem:function(b,a){var c;if(a&&typeof(a.offsetParent)==="object"){c=(b.type=="mouseout")?b.getRelatedTarget():b.getTarget();return Ext.fly(a).contains(c)}return false},processUIEvent:function(h){var i=this,l=h.getTarget(i.getItemSelector(),i.getTargetEl()),a=this.statics().EventMap,g,c,k=h.type,f=i.mouseOverItem,b;if(!l){if(k=="mouseover"&&i.stillOverItem(h,f)){l=f}if(k=="keydown"){c=i.getSelectionModel().getLastSelected();if(c){l=i.getNode(c)}}}if(l){g=i.indexOf(l);if(!c){c=i.getRecord(l)}if(i.processItemEvent(c,l,g,h)===false){return false}b=i.isNewItemEvent(l,h);if(b===false){return false}if((i["onBeforeItem"+a[b]](c,l,g,h)===false)||(i.fireEvent("beforeitem"+b,i,c,l,g,h)===false)||(i["onItem"+a[b]](c,l,g,h)===false)){return false}i.fireEvent("item"+b,i,c,l,g,h)}else{if((i.processContainerEvent(h)===false)||(i["onBeforeContainer"+a[k]](h)===false)||(i.fireEvent("beforecontainer"+k,i,h)===false)||(i["onContainer"+a[k]](h)===false)){return false}i.fireEvent("container"+k,i,h)}return true},isNewItemEvent:function(f,g){var c=this,a=c.mouseOverItem,b=g.type;switch(b){case"mouseover":if(f===a){return false}c.mouseOverItem=f;return"mouseenter";case"mouseout":if(c.stillOverItem(g,a)){return false}c.mouseOverItem=null;return"mouseleave"}return b},onItemMouseEnter:function(a,c,b,f){if(this.trackOver){this.highlightItem(c)}},onItemMouseLeave:function(a,c,b,f){if(this.trackOver){this.clearHighlight()}},onItemMouseDown:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,highlightItem:function(b){var a=this;a.clearHighlight();a.highlightedItem=b;Ext.fly(b).addCls(a.overItemCls)},clearHighlight:function(){var b=this,a=b.highlightedItem;if(a){Ext.fly(a).removeCls(b.overItemCls);delete b.highlightedItem}},refresh:function(){var a=this;a.clearHighlight();a.callParent(arguments);if(!a.isFixedHeight()){a.doComponentLayout()}}});Ext.define("Ext.layout.container.Card",{alias:["layout.card"],alternateClassName:"Ext.layout.CardLayout",extend:"Ext.layout.container.AbstractCard",setActiveItem:function(b){var f=this,a=f.owner,e=f.activeItem,c;b=f.parseActiveItem(b);c=a.items.indexOf(b);if(c==-1){c=a.items.items.length;a.add(b)}if(b&&e!=b){if(!b.rendered){f.renderItem(b,f.getRenderTarget(),a.items.length);f.configureItem(b,0)}f.activeItem=b;if(b.fireEvent("beforeactivate",b,e)===false){return false}if(e&&e.fireEvent("beforedeactivate",e,b)===false){return false}if(f.sizeAllCards){f.onLayout()}else{f.setItemBox(b,f.getTargetBox())}f.owner.suspendLayout=true;if(e){if(f.hideInactive){e.hide()}e.fireEvent("deactivate",e,b)}f.owner.suspendLayout=false;if(b.hidden){b.show()}else{f.onLayout()}b.fireEvent("activate",b,e);return b}return false},configureItem:function(a){a.layoutManagedHeight=0;a.layoutManagedWidth=0;this.callParent(arguments)}});Ext.define("Ext.view.Table",{extend:"Ext.view.View",alias:"widget.tableview",uses:["Ext.view.TableChunker","Ext.util.DelayedTask","Ext.util.MixedCollection"],baseCls:Ext.baseCSSPrefix+"grid-view",itemSelector:"."+Ext.baseCSSPrefix+"grid-row",cellSelector:"."+Ext.baseCSSPrefix+"grid-cell",selectedItemCls:Ext.baseCSSPrefix+"grid-row-selected",selectedCellCls:Ext.baseCSSPrefix+"grid-cell-selected",focusedItemCls:Ext.baseCSSPrefix+"grid-row-focused",overItemCls:Ext.baseCSSPrefix+"grid-row-over",altRowCls:Ext.baseCSSPrefix+"grid-row-alt",rowClsRe:/(?:^|\s*)grid-row-(first|last|alt)(?:\s+|$)/g,cellRe:new RegExp("x-grid-cell-([^\\s]+) ",""),trackOver:true,getRowClass:null,initComponent:function(){var a=this;a.scrollState={};a.selModel.view=a;a.headerCt.view=a;a.initFeatures();a.tpl="<div></div>";a.callParent();a.mon(a.store,{load:a.onStoreLoad,scope:a})},onStoreLoad:function(){var a=this;if(a.invalidateScrollerOnRefresh){if(Ext.isGecko){if(!a.scrollToTopTask){a.scrollToTopTask=Ext.create("Ext.util.DelayedTask",a.scrollToTop,a)}a.scrollToTopTask.delay(1)}else{a.scrollToTop()}}},scrollToTop:Ext.emptyFn,addElListener:function(a,c,b){this.mon(this,a,c,b,{element:"el"})},getGridColumns:function(){return this.headerCt.getGridColumns()},getHeaderAtIndex:function(a){return this.headerCt.getHeaderAtIndex(a)},getCell:function(a,b){var c=this.getNode(a);return Ext.fly(c).down(b.getCellSelector())},getFeature:function(b){var a=this.featuresMC;if(a){return a.get(b)}},initFeatures:function(){var e=this,b=0,c,a;e.features=e.features||[];c=e.features;a=c.length;e.featuresMC=Ext.create("Ext.util.MixedCollection");for(;b<a;b++){if(!c[b].isFeature){c[b]=Ext.create("feature."+c[b].ftype,c[b])}c[b].view=e;e.featuresMC.add(c[b])}},attachEventsForFeatures:function(){var b=this.features,c=b.length,a=0;for(;a<c;a++){if(b[a].isFeature){b[a].attachEvents()}}},afterRender:function(){var a=this;a.callParent();a.mon(a.el,{scroll:a.fireBodyScroll,scope:a});a.el.unselectable();a.attachEventsForFeatures()},fireBodyScroll:function(b,a){this.fireEvent("bodyscroll",b,a)},prepareData:function(c,l,f){var h=this,k=h.headerCt.prepareData(c,l,f,h,h.ownerCt),a=h.features,g=a.length,e=0,b,m;for(;e<g;e++){m=a[e];if(m.isFeature){Ext.apply(k,m.getAdditionalData(c,l,f,k,h))}}return k},collectData:function(e,n){var p=this.callParent(arguments),c=this.headerCt,m=c.getFullWidth(),b=this.features,k=b.length,a={rows:p,fullWidth:m},g=0,q,f=0,l,h;l=p.length;if(this.getRowClass){for(;f<l;f++){h={};p[f]["rowCls"]=this.getRowClass(e[f],f,h,this.store);if(h.alt){Ext.Error.raise("The getRowClass alt property is no longer supported.")}if(h.tstyle){Ext.Error.raise("The getRowClass tstyle property is no longer supported.")}if(h.cells){Ext.Error.raise("The getRowClass cells property is no longer supported.")}if(h.body){Ext.Error.raise("The getRowClass body property is no longer supported. Use the getAdditionalData method of the rowbody feature.")}if(h.bodyStyle){Ext.Error.raise("The getRowClass bodyStyle property is no longer supported.")}if(h.cols){Ext.Error.raise("The getRowClass cols property is no longer supported.")}}}for(;g<k;g++){q=b[g];if(q.isFeature&&q.collectData&&!q.disabled){a=q.collectData(e,p,n,m,a);break}}return a},onHeaderResize:function(f,a,e){var c=this,b=c.el;if(b){c.saveScrollState();if(Ext.isIE6||Ext.isIE7){if(f.el.hasCls(Ext.baseCSSPrefix+"column-header-first")){a+=1}}b.select("."+Ext.baseCSSPrefix+"grid-col-resizer-"+f.id).setWidth(a);b.select("."+Ext.baseCSSPrefix+"grid-table-resizer").setWidth(c.headerCt.getFullWidth());c.restoreScrollState();if(!c.ignoreTemplate){c.setNewTemplate()}if(!e){c.el.focus()}}},onHeaderShow:function(c,e,b){var a=this;a.ignoreTemplate=true;if(e.oldWidth){a.onHeaderResize(e,e.oldWidth,b);delete e.oldWidth}else{if(e.width&&!e.flex){a.onHeaderResize(e,e.width,b)}}delete a.ignoreTemplate;a.setNewTemplate()},onHeaderHide:function(b,c,a){this.onHeaderResize(c,0,a)},setNewTemplate:function(){var b=this,a=b.headerCt.getColumnsForTpl(true);b.tpl=b.getTableChunker().getTableTpl({columns:a,features:b.features})},getTableChunker:function(){return this.chunker||Ext.view.TableChunker},addRowCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).addCls(a)}},removeRowCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).removeCls(a)}},onRowSelect:function(a){this.addRowCls(a,this.selectedItemCls)},onRowDeselect:function(b){var a=this;a.removeRowCls(b,a.selectedItemCls);a.removeRowCls(b,a.focusedItemCls)},onCellSelect:function(b){var a=this.getCellByPosition(b);if(a){a.addCls(this.selectedCellCls)}},onCellDeselect:function(b){var a=this.getCellByPosition(b);if(a){a.removeCls(this.selectedCellCls)}},onCellFocus:function(a){this.focusCell(a)},getCellByPosition:function(b){var h=b.row,f=b.column,e=this.store,g=this.getNode(h),i=this.headerCt.getHeaderAtIndex(f),c,a=false;if(i&&g){c=i.getCellSelector();a=Ext.fly(g).down(c)}return a},onRowFocus:function(e,b,a){var c=this,f=c.getNode(e);if(b){c.addRowCls(e,c.focusedItemCls);if(!a){c.focusRow(e)}}else{c.removeRowCls(e,c.focusedItemCls)}},focusRow:function(b){var g=this,k=g.getNode(b),c=g.el,h=0,a=g.ownerCt,i,e,f;if(k&&c){e=c.getRegion();i=Ext.fly(k).getRegion();if(i.top<e.top){h=i.top-e.top}else{if(i.bottom>e.bottom){h=i.bottom-e.bottom}}f=g.getRecord(k);b=g.store.indexOf(f);if(h){a.scrollByDeltaY(h)}g.fireEvent("rowfocus",f,k,b)}},focusCell:function(h){var k=this,l=k.getCellByPosition(h),b=k.el,e=0,f=0,c=b.getRegion(),a=k.ownerCt,i,g;if(l){i=l.getRegion();if(i.top<c.top){e=i.top-c.top}else{if(i.bottom>c.bottom){e=i.bottom-c.bottom}}if(i.left<c.left){f=i.left-c.left}else{if(i.right>c.right){f=i.right-c.right}}if(e){a.scrollByDeltaY(e)}if(f){a.scrollByDeltaX(f)}b.focus();k.fireEvent("cellfocus",g,l,h)}},scrollByDelta:function(c,b){b=b||"scrollTop";var a=this.el.dom;a[b]=(a[b]+=c)},onUpdate:function(b,a){this.callParent(arguments)},saveScrollState:function(){if(this.rendered){var b=this.el.dom,a=this.scrollState;a.left=b.scrollLeft;a.top=b.scrollTop}},restoreScrollState:function(){if(this.rendered){var b=this.el.dom,a=this.scrollState,c=this.headerCt.el.dom;c.scrollLeft=b.scrollLeft=a.left;b.scrollTop=a.top}},refresh:function(){this.setNewTemplate();this.callParent(arguments)},processItemEvent:function(b,n,k,f){var h=this,l=f.getTarget(h.cellSelector,n),i=l?l.cellIndex:-1,a=h.statics().EventMap,c=h.getSelectionModel(),g=f.type,m;if(g=="keydown"&&!l&&c.getCurrentPosition){l=h.getCellByPosition(c.getCurrentPosition());if(l){l=l.dom;i=l.cellIndex}}m=h.fireEvent("uievent",g,h,l,k,i,f);if(m===false||h.callParent(arguments)===false){return false}if(g=="mouseover"||g=="mouseout"){return true}return !((h["onBeforeCell"+a[g]](l,i,b,n,k,f)===false)||(h.fireEvent("beforecell"+g,h,l,i,b,n,k,f)===false)||(h["onCell"+a[g]](l,i,b,n,k,f)===false)||(h.fireEvent("cell"+g,h,l,i,b,n,k,f)===false))},processSpecialEvent:function(l){var p=this,b=p.statics().EventMap,f=p.features,n=f.length,q=l.type,g,r,h,k,c,m,a=p.ownerCt;p.callParent(arguments);if(q=="mouseover"||q=="mouseout"){return}for(g=0;g<n;g++){r=f[g];if(r.hasFeatureEvent){k=l.getTarget(r.eventSelector,p.getTargetEl());if(k){h=r.eventPrefix;c=r.getFireEventArgs("before"+h+q,p,k,l);m=r.getFireEventArgs(h+q,p,k,l);if((p.fireEvent.apply(p,c)===false)||(a.fireEvent.apply(a,c)===false)||(p.fireEvent.apply(p,m)===false)||(a.fireEvent.apply(a,m)===false)){return false}}}}return true},onCellMouseDown:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,expandToFit:function(b){if(b){var a=this.getMaxContentWidth(b);delete b.flex;b.setWidth(a)}},getMaxContentWidth:function(h){var a=h.getCellInnerSelector(),c=this.el.query(a),e=0,g=c.length,f=h.el.dom.scrollWidth,b;for(;e<g;e++){b=c[e].scrollWidth;if(b>f){f=b}}return f},getPositionByEvent:function(g){var f=this,b=g.getTarget(f.cellSelector),c=g.getTarget(f.itemSelector),a=f.getRecord(c),h=f.getHeaderByCell(b);return f.getPosition(a,h)},getHeaderByCell:function(b){if(b){var a=b.className.match(this.cellRe);if(a&&a[1]){return Ext.getCmp(a[1])}}return false},walkCells:function(m,n,h,p,a,q){var k=this,r=m.row,f=m.column,l=k.store.getCount(),g=k.getFirstVisibleColumnIndex(),b=k.getLastVisibleColumnIndex(),i={row:r,column:f},c=k.headerCt.getHeaderAtIndex(f);if(!c||c.hidden){return false}h=h||{};n=n.toLowerCase();switch(n){case"right":if(f===b){if(p||r===l-1){return false}if(!h.ctrlKey){i.row=r+1;i.column=g}}else{if(!h.ctrlKey){i.column=f+k.getRightGap(c)}else{i.column=b}}break;case"left":if(f===g){if(p||r===0){return false}if(!h.ctrlKey){i.row=r-1;i.column=b}}else{if(!h.ctrlKey){i.column=f+k.getLeftGap(c)}else{i.column=g}}break;case"up":if(r===0){return false}else{if(!h.ctrlKey){i.row=r-1}else{i.row=0}}break;case"down":if(r===l-1){return false}else{if(!h.ctrlKey){i.row=r+1}else{i.row=l-1}}break}if(a&&a.call(q||window,i)!==true){return false}else{return i}},getFirstVisibleColumnIndex:function(){var c=this.getHeaderCt(),a=c.getGridColumns(),e=Ext.ComponentQuery.query(":not([hidden])",a),b=e[0];return c.getHeaderIndex(b)},getLastVisibleColumnIndex:function(){var c=this.getHeaderCt(),a=c.getGridColumns(),e=Ext.ComponentQuery.query(":not([hidden])",a),b=e[e.length-1];return c.getHeaderIndex(b)},getHeaderCt:function(){return this.headerCt},getPosition:function(a,f){var e=this,b=e.store,c=e.headerCt.getGridColumns();return{row:b.indexOf(a),column:Ext.Array.indexOf(c,f)}},getRightGap:function(a){var g=this.getHeaderCt(),f=g.getGridColumns(),b=Ext.Array.indexOf(f,a),c=b+1,e;for(;c<=f.length;c++){if(!f[c].hidden){e=c;break}}return e-b},beforeDestroy:function(){if(this.rendered){this.el.removeAllListeners()}this.callParent(arguments)},getLeftGap:function(a){var g=this.getHeaderCt(),f=g.getGridColumns(),c=Ext.Array.indexOf(f,a),e=c-1,b;for(;e>=0;e--){if(!f[e].hidden){b=e;break}}return b-c}});Ext.define("Ext.grid.View",{extend:"Ext.view.Table",alias:"widget.gridview",stripeRows:true,invalidateScrollerOnRefresh:true,scrollToTop:function(){if(this.rendered){var b=this.ownerCt,a=b.verticalScroller;if(a){a.scrollToTop()}}},onAdd:function(c,a,b){this.callParent(arguments);this.doStripeRows(b)},onRemove:function(c,a,b){this.callParent(arguments);this.doStripeRows(b)},onUpdate:function(e,a,b){var c=e.indexOf(a);this.callParent(arguments);this.doStripeRows(c,c)},doStripeRows:function(b,a){if(this.stripeRows){var e=this.getNodes(b,a),g=e.length,c=0,f;for(;c<g;c++){f=e[c];f.className=f.className.replace(this.rowClsRe," ");b++;if(b%2===0){f.className+=(" "+this.altRowCls)}}}},refresh:function(b){this.callParent(arguments);this.doStripeRows(0);var a=this.up("gridpanel");if(a&&this.invalidateScrollerOnRefresh){a.invalidateScroller()}}});Ext.define("Ext.grid.Panel",{extend:"Ext.panel.Table",requires:["Ext.grid.View"],alias:["widget.gridpanel","widget.grid"],alternateClassName:["Ext.list.ListView","Ext.ListView","Ext.grid.GridPanel"],viewType:"gridview",lockable:false,normalCfgCopy:["invalidateScrollerOnRefresh","verticalScroller","verticalScrollDock","verticalScrollerType","scroll"],lockedCfgCopy:["invalidateScrollerOnRefresh"],initComponent:function(){var a=this;if(a.columnLines){a.setColumnLines(a.columnLines)}a.callParent()},setColumnLines:function(a){var b=this,c=(a)?"addClsWithUI":"removeClsWithUI";b[c]("with-col-lines")}});Ext.define("Ext.selection.CheckboxModel",{alias:"selection.checkboxmodel",extend:"Ext.selection.RowModel",mode:"MULTI",injectCheckbox:0,checkOnly:false,headerWidth:24,checkerOnCls:Ext.baseCSSPrefix+"grid-hd-checker-on",bindComponent:function(a){var b=this;b.sortable=false;b.callParent(arguments);if(!b.hasLockedHeader()||a.headerCt.lockedCt){a.headerCt.on("headerclick",b.onHeaderClick,b);b.addCheckbox(true);b.mon(a.ownerCt,"reconfigure",b.addCheckbox,b)}},hasLockedHeader:function(){var a=false;Ext.each(this.views,function(b){if(b.headerCt.lockedCt){a=true;return false}});return a},addCheckbox:function(b){var c=this,e=c.injectCheckbox,a=c.views[0],f=a.headerCt;if(e!==false){if(e=="first"){e=0}else{if(e=="last"){e=f.getColumnCount()}}f.add(e,c.getHeaderConfig())}if(b!==true){a.refresh()}},toggleUiHeader:function(e){var a=this.views[0],c=a.headerCt,b=c.child("gridcolumn[isCheckerHd]");if(b){if(e){b.el.addCls(this.checkerOnCls)}else{b.el.removeCls(this.checkerOnCls)}}},onHeaderClick:function(b,f,a){if(f.isCheckerHd){a.stopEvent();var c=f.el.hasCls(Ext.baseCSSPrefix+"grid-hd-checker-on");if(c){this.deselectAll(true)}else{this.selectAll(true)}}},getHeaderConfig:function(){var a=this;return{isCheckerHd:true,text:"&#160;",width:a.headerWidth,sortable:false,draggable:false,resizable:false,hideable:false,menuDisabled:true,dataIndex:"",cls:Ext.baseCSSPrefix+"column-header-checkbox ",renderer:Ext.Function.bind(a.renderer,a),locked:a.hasLockedHeader()}},renderer:function(g,c,b,h,f,e,a){c.tdCls=Ext.baseCSSPrefix+"grid-cell-special";return'<div class="'+Ext.baseCSSPrefix+'grid-row-checker">&#160;</div>'},onRowMouseDown:function(b,a,h,f,i){b.el.focus();var g=this,c=i.getTarget("."+Ext.baseCSSPrefix+"grid-row-checker");if(!g.allowRightMouseSelection(i)){return}if(g.checkOnly&&!c){return}if(c){var k=g.getSelectionMode();if(k!=="SINGLE"){g.setSelectionMode("SIMPLE")}g.selectWithEvent(a,i);g.setSelectionMode(k)}else{g.selectWithEvent(a,i)}},onSelectChange:function(){this.callParent(arguments);var a=this.selected.getCount()===this.store.getCount();this.toggleUiHeader(a)}});Ext.define("Ext.grid.plugin.DragDrop",{extend:"Ext.AbstractPlugin",alias:"plugin.gridviewdragdrop",uses:["Ext.view.DragZone","Ext.grid.ViewDropZone"],dragText:"{0} selected row{1}",ddGroup:"GridDD",enableDrop:true,enableDrag:true,init:function(a){a.on("render",this.onViewRender,this,{single:true})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},enable:function(){var a=this;if(a.dragZone){a.dragZone.unlock()}if(a.dropZone){a.dropZone.unlock()}a.callParent()},disable:function(){var a=this;if(a.dragZone){a.dragZone.lock()}if(a.dropZone){a.dropZone.lock()}a.callParent()},onViewRender:function(a){var b=this;if(b.enableDrag){b.dragZone=Ext.create("Ext.view.DragZone",{view:a,ddGroup:b.dragGroup||b.ddGroup,dragText:b.dragText})}if(b.enableDrop){b.dropZone=Ext.create("Ext.grid.ViewDropZone",{view:a,ddGroup:b.dropGroup||b.ddGroup})}}});Ext.define("Ext.picker.Date",{extend:"Ext.Component",requires:["Ext.XTemplate","Ext.button.Button","Ext.button.Split","Ext.util.ClickRepeater","Ext.util.KeyNav","Ext.EventObject","Ext.fx.Manager","Ext.picker.Month"],alias:"widget.datepicker",alternateClassName:"Ext.DatePicker",renderTpl:['<div class="{cls}" id="{id}" role="grid" title="{ariaTitle} {value:this.longDay}">','<div role="presentation" class="{baseCls}-header">','<div class="{baseCls}-prev"><a id="{id}-prevEl" href="#" role="button" title="{prevText}"></a></div>','<div class="{baseCls}-month" id="{id}-middleBtnEl"></div>','<div class="{baseCls}-next"><a id="{id}-nextEl" href="#" role="button" title="{nextText}"></a></div>',"</div>",'<table id="{id}-eventEl" class="{baseCls}-inner" cellspacing="0" role="presentation">','<thead role="presentation"><tr role="presentation">','<tpl for="dayNames">','<th role="columnheader" title="{.}"><span>{.:this.firstInitial}</span></th>',"</tpl>","</tr></thead>",'<tbody role="presentation"><tr role="presentation">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell" id="{[Ext.id()]}">','<a role="presentation" href="#" hidefocus="on" class="{parent.baseCls}-date" tabIndex="1">','<em role="presentation"><span role="presentation"></span></em>',"</a>","</td>","</tpl>","</tr></tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" role="presentation" class="{baseCls}-footer"></div>',"</tpl>","</div>",{firstInitial:function(a){return a.substr(0,1)},isEndOfWeek:function(b){b--;var a=b%7===0&&b!==0;return a?'</tr><tr role="row">':""},longDay:function(a){return Ext.Date.format(a,this.longDayFormat)}}],ariaTitle:"Date Picker",todayText:"Today",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",disabledDaysText:"Disabled",disabledDatesText:"Disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:true,disableAnim:false,baseCls:Ext.baseCSSPrefix+"datepicker",longDayFormat:"F d, Y",focusOnShow:false,focusOnSelect:true,width:178,initHour:12,numDays:42,initComponent:function(){var b=this,a=Ext.Date.clearTime;b.selectedCls=b.baseCls+"-selected";b.disabledCellCls=b.baseCls+"-disabled";b.prevCls=b.baseCls+"-prevday";b.activeCls=b.baseCls+"-active";b.nextCls=b.baseCls+"-prevday";b.todayCls=b.baseCls+"-today";b.dayNames=b.dayNames.slice(b.startDay).concat(b.dayNames.slice(0,b.startDay));this.callParent();b.value=b.value?a(b.value,true):a(new Date());b.addEvents("select");b.initDisabledDays()},onRender:function(b,a){var e=this,f=new Array(e.numDays),c=Ext.Date.format(new Date(),e.format);Ext.applyIf(e,{renderData:{}});Ext.apply(e.renderData,{dayNames:e.dayNames,ariaTitle:e.ariaTitle,value:e.value,showToday:e.showToday,prevText:e.prevText,nextText:e.nextText,days:f});e.getTpl("renderTpl").longDayFormat=e.longDayFormat;e.addChildEls("eventEl","prevEl","nextEl","middleBtnEl","footerEl");this.callParent(arguments);e.el.unselectable();e.cells=e.eventEl.select("tbody td");e.textNodes=e.eventEl.query("tbody td span");e.monthBtn=Ext.create("Ext.button.Split",{text:"",tooltip:e.monthYearText,renderTo:e.middleBtnEl});e.todayBtn=Ext.create("Ext.button.Button",{renderTo:e.footerEl,text:Ext.String.format(e.todayText,c),tooltip:Ext.String.format(e.todayTip,c),handler:e.selectToday,scope:e})},initEvents:function(){var c=this,a=Ext.Date,b=a.DAY;this.callParent();c.prevRepeater=Ext.create("Ext.util.ClickRepeater",c.prevEl,{handler:c.showPrevMonth,scope:c,preventDefault:true,stopDefault:true});c.nextRepeater=Ext.create("Ext.util.ClickRepeater",c.nextEl,{handler:c.showNextMonth,scope:c,preventDefault:true,stopDefault:true});c.keyNav=Ext.create("Ext.util.KeyNav",c.eventEl,Ext.apply({scope:c,left:function(f){if(f.ctrlKey){c.showPrevMonth()}else{c.update(a.add(c.activeDate,b,-1))}},right:function(f){if(f.ctrlKey){c.showNextMonth()}else{c.update(a.add(c.activeDate,b,1))}},up:function(f){if(f.ctrlKey){c.showNextYear()}else{c.update(a.add(c.activeDate,b,-7))}},down:function(f){if(f.ctrlKey){c.showPrevYear()}else{c.update(a.add(c.activeDate,b,7))}},pageUp:c.showNextMonth,pageDown:c.showPrevMonth,enter:function(f){f.stopPropagation();return true}},c.keyNavConfig));if(c.showToday){c.todayKeyListener=c.eventEl.addKeyListener(Ext.EventObject.SPACE,c.selectToday,c)}c.mon(c.eventEl,"mousewheel",c.handleMouseWheel,c);c.mon(c.eventEl,"click",c.handleDateClick,c,{delegate:"a."+c.baseCls+"-date"});c.mon(c.monthBtn,"click",c.showMonthPicker,c);c.mon(c.monthBtn,"arrowclick",c.showMonthPicker,c);c.update(c.value)},initDisabledDays:function(){var e=this,b=e.disabledDates,c="(?:",a;if(!e.disabledDatesRE&&b){a=b.length-1;Ext.each(b,function(g,f){c+=Ext.isDate(g)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(g,e.format))+"$":b[f];if(f!=a){c+="|"}},e);e.disabledDatesRE=new RegExp(c+")")}},setDisabledDates:function(a){var b=this;if(Ext.isArray(a)){b.disabledDates=a;b.disabledDatesRE=null}else{b.disabledDatesRE=a}b.initDisabledDays();b.update(b.value,true);return b},setDisabledDays:function(a){this.disabledDays=a;return this.update(this.value,true)},setMinDate:function(a){this.minDate=a;return this.update(this.value,true)},setMaxDate:function(a){this.maxDate=a;return this.update(this.value,true)},setValue:function(a){this.value=Ext.Date.clearTime(a,true);return this.update(this.value)},getValue:function(){return this.value},focus:function(){this.update(this.activeDate)},onEnable:function(){this.callParent();this.setDisabledStatus(false);this.update(this.activeDate)},onDisable:function(){this.callParent();this.setDisabledStatus(true)},setDisabledStatus:function(a){var b=this;b.keyNav.setDisabled(a);b.prevRepeater.setDisabled(a);b.nextRepeater.setDisabled(a);if(b.showToday){b.todayKeyListener.setDisabled(a);b.todayBtn.setDisabled(a)}},getActive:function(){return this.activeDate||this.value},runAnimation:function(c){var b=this.monthPicker,a={duration:200,callback:function(){if(c){b.hide()}else{b.show()}}};if(c){b.el.slideOut("t",a)}else{b.el.slideIn("t",a)}},hideMonthPicker:function(a){var c=this,b=c.monthPicker;if(b){if(c.shouldAnimate(a)){c.runAnimation(true)}else{b.hide()}}return c},showMonthPicker:function(a){var c=this,b;if(c.rendered&&!c.disabled){b=c.createMonthPicker();b.setValue(c.getActive());b.setSize(c.getSize());b.setPosition(-1,-1);if(c.shouldAnimate(a)){c.runAnimation(false)}else{b.show()}}return c},shouldAnimate:function(a){return Ext.isDefined(a)?a:!this.disableAnim},createMonthPicker:function(){var b=this,a=b.monthPicker;if(!a){b.monthPicker=a=Ext.create("Ext.picker.Month",{renderTo:b.el,floating:true,shadow:false,small:b.showToday===false,listeners:{scope:b,cancelclick:b.onCancelClick,okclick:b.onOkClick,yeardblclick:b.onOkClick,monthdblclick:b.onOkClick}});if(!b.disableAnim){a.el.setStyle("display","none")}b.on("beforehide",Ext.Function.bind(b.hideMonthPicker,b,[false]))}return a},onOkClick:function(b,f){var e=this,g=f[0],c=f[1],a=new Date(c,g,e.getActive().getDate());if(a.getMonth()!==g){a=new Date(c,g,1).getLastDateOfMonth()}e.update(a);e.hideMonthPicker()},onCancelClick:function(){this.hideMonthPicker()},showPrevMonth:function(a){return this.update(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(a){return this.update(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){this.update(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){this.update(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(a){a.stopEvent();if(!this.disabled){var b=a.getWheelDelta();if(b>0){this.showPrevMonth()}else{if(b<0){this.showNextMonth()}}}},handleDateClick:function(f,a){var c=this,b=c.handler;f.stopEvent();if(!c.disabled&&a.dateValue&&!Ext.fly(a.parentNode).hasCls(c.disabledCellCls)){c.cancelFocus=c.focusOnSelect===false;c.setValue(new Date(a.dateValue));delete c.cancelFocus;c.fireEvent("select",c,c.value);if(b){b.call(c.scope||c,c,c.value)}c.onSelect()}},onSelect:function(){if(this.hideOnSelect){this.hide()}},selectToday:function(){var c=this,a=c.todayBtn,b=c.handler;if(a&&!a.disabled){c.setValue(Ext.Date.clearTime(new Date()));c.fireEvent("select",c,c.value);if(b){b.call(c.scope||c,c,c.value)}c.onSelect()}return c},selectedUpdate:function(c,g){var f=this,e=c.getTime(),b=f.cells,a=f.selectedCls;b.removeCls(a);b.each(function(h){if(h.dom.firstChild.dateValue==e){f.el.dom.setAttribute("aria-activedescendent",h.dom.id);h.addCls(a);if(f.isVisible()&&!f.cancelFocus){Ext.fly(h.dom.firstChild).focus(50)}return false}},this)},fullUpdate:function(E,n){var H=this,g=H.cells.elements,e=H.textNodes,J=H.disabledCellCls,q=Ext.Date,z=0,G=0,f=H.isVisible(),x=+q.clearTime(E,true),C=+q.clearTime(new Date()),w=H.minDate?q.clearTime(H.minDate,true):Number.NEGATIVE_INFINITY,y=H.maxDate?q.clearTime(H.maxDate,true):Number.POSITIVE_INFINITY,F=H.disabledDatesRE,v=H.disabledDatesText,K=H.disabledDays?H.disabledDays.join(""):false,D=H.disabledDaysText,A=H.format,m=q.getDaysInMonth(E),s=q.getFirstDateOfMonth(E),h=s.getDay()-H.startDay,B=q.add(E,q.MONTH,-1),b=H.longDayFormat,l,t,a,I,p,r,c,k,u;if(h<0){h+=7}m+=h;l=q.getDaysInMonth(B)-h;t=new Date(B.getFullYear(),B.getMonth(),l,H.initHour);if(H.showToday){I=q.clearTime(new Date());a=(I<w||I>y||(F&&A&&F.test(q.dateFormat(I,A)))||(K&&K.indexOf(I.getDay())!=-1));if(!H.disabled){H.todayBtn.setDisabled(a);H.todayKeyListener.setDisabled(a)}}p=function(i){u=+q.clearTime(t,true);i.title=q.format(t,b);i.firstChild.dateValue=u;if(u==C){i.className+=" "+H.todayCls;i.title=H.todayText}if(u==x){i.className+=" "+H.selectedCls;H.el.dom.setAttribute("aria-activedescendant",i.id);if(f&&H.floating){Ext.fly(i.firstChild).focus(50)}}if(u<w){i.className=J;i.title=H.minText;return}if(u>y){i.className=J;i.title=H.maxText;return}if(K){if(K.indexOf(t.getDay())!=-1){i.title=D;i.className=J}}if(F&&A){k=q.dateFormat(t,A);if(F.test(k)){i.title=v.replace("%0",k);i.className=J}}};for(;z<H.numDays;++z){if(z<h){r=(++l);c=H.prevCls}else{if(z>=m){r=(++G);c=H.nextCls}else{r=z-h+1;c=H.activeCls}}e[z].innerHTML=r;g[z].className=c;t.setDate(t.getDate()+1);p(g[z])}H.monthBtn.setText(H.monthNames[E.getMonth()]+" "+E.getFullYear())},update:function(a,e){var b=this,c=b.activeDate;if(b.rendered){b.activeDate=a;if(!e&&c&&b.el&&c.getMonth()==a.getMonth()&&c.getFullYear()==a.getFullYear()){b.selectedUpdate(a,c)}else{b.fullUpdate(a,c)}}return b},beforeDestroy:function(){var a=this;if(a.rendered){Ext.destroy(a.todayKeyListener,a.keyNav,a.monthPicker,a.monthBtn,a.nextRepeater,a.prevRepeater,a.todayBtn);delete a.textNodes;delete a.cells.elements}a.callParent()},onShow:function(){this.callParent(arguments);if(this.focusOnShow){this.focus()}}},function(){var a=this.prototype;a.monthNames=Ext.Date.monthNames;a.dayNames=Ext.Date.dayNames;a.format=Ext.Date.defaultFormat});Ext.define("Ext.menu.DatePicker",{extend:"Ext.menu.Menu",alias:"widget.datemenu",requires:["Ext.picker.Date"],hideOnClick:true,pickerId:null,initComponent:function(){var a=this;Ext.apply(a,{showSeparator:false,plain:true,border:false,bodyPadding:0,items:Ext.applyIf({cls:Ext.baseCSSPrefix+"menu-date-item",id:a.pickerId,xtype:"datepicker"},a.initialConfig)});a.callParent(arguments);a.picker=a.down("datepicker");a.relayEvents(a.picker,["select"]);if(a.hideOnClick){a.on("select",a.hidePickerOnSelect,a)}},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}});Ext.define("Ext.form.field.Date",{extend:"Ext.form.field.Picker",alias:"widget.datefield",requires:["Ext.picker.Date"],alternateClassName:["Ext.form.DateField","Ext.form.Date"],format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerCls:Ext.baseCSSPrefix+"form-date-trigger",showToday:true,initTime:"12",initTimeFormat:"H",matchFieldWidth:false,startDay:0,initComponent:function(){var e=this,b=Ext.isString,c,a;c=e.minValue;a=e.maxValue;if(b(c)){e.minValue=e.parseDate(c)}if(b(a)){e.maxValue=e.parseDate(a)}e.disabledDatesRE=null;e.initDisabledDays();e.callParent()},initValue:function(){var a=this,b=a.value;if(Ext.isString(b)){a.value=a.rawToValue(b)}a.callParent()},initDisabledDays:function(){if(this.disabledDates){var b=this.disabledDates,a=b.length-1,c="(?:";Ext.each(b,function(f,e){c+=Ext.isDate(f)?"^"+Ext.String.escapeRegex(f.dateFormat(this.format))+"$":b[e];if(e!==a){c+="|"}},this);this.disabledDatesRE=new RegExp(c+")")}},setDisabledDates:function(a){var c=this,b=c.picker;c.disabledDates=a;c.initDisabledDays();if(b){b.setDisabledDates(c.disabledDatesRE)}},setDisabledDays:function(a){var b=this.picker;this.disabledDays=a;if(b){b.setDisabledDays(a)}},setMinValue:function(c){var b=this,a=b.picker,e=(Ext.isString(c)?b.parseDate(c):c);b.minValue=e;if(a){a.minText=Ext.String.format(b.minText,b.formatDate(b.minValue));a.setMinDate(e)}},setMaxValue:function(c){var b=this,a=b.picker,e=(Ext.isString(c)?b.parseDate(c):c);b.maxValue=e;if(a){a.maxText=Ext.String.format(b.maxText,b.formatDate(b.maxValue));a.setMaxDate(e)}},getErrors:function(s){var k=this,r=Ext.String.format,l=Ext.Date.clearTime,q=k.callParent(arguments),p=k.disabledDays,e=k.disabledDatesRE,n=k.minValue,h=k.maxValue,g=p?p.length:0,f=0,a,b,m,c;s=k.formatDate(s||k.processRawValue(k.getRawValue()));if(s===null||s.length<1){return q}a=s;s=k.parseDate(s);if(!s){q.push(r(k.invalidText,a,k.format));return q}c=s.getTime();if(n&&c<l(n).getTime()){q.push(r(k.minText,k.formatDate(n)))}if(h&&c>l(h).getTime()){q.push(r(k.maxText,k.formatDate(h)))}if(p){m=s.getDay();for(;f<g;f++){if(m===p[f]){q.push(k.disabledDaysText);break}}}b=k.formatDate(s);if(e&&e.test(b)){q.push(r(k.disabledDatesText,b))}return q},rawToValue:function(a){return this.parseDate(a)||a||null},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},safeParse:function(f,g){var e=this,b=Ext.Date,c,a=null;if(b.formatContainsHourInfo(g)){a=b.parse(f,g)}else{c=b.parse(f+" "+e.initTime,g+" "+e.initTimeFormat);if(c){a=b.clearTime(c)}}return a},getSubmitValue:function(){var b=this.submitFormat||this.format,a=this.getValue();return a?Ext.Date.format(a,b):""},parseDate:function(f){if(!f||Ext.isDate(f)){return f}var e=this,h=e.safeParse(f,e.format),b=e.altFormats,g=e.altFormatsArray,c=0,a;if(!h&&b){g=g||b.split("|");a=g.length;for(;c<a&&!h;++c){h=e.safeParse(f,g[c])}}return h},formatDate:function(a){return Ext.isDate(a)?Ext.Date.dateFormat(a,this.format):a},createPicker:function(){var a=this,b=Ext.String.format;return Ext.create("Ext.picker.Date",{pickerField:a,ownerCt:a.ownerCt,renderTo:document.body,floating:true,hidden:true,focusOnShow:true,minDate:a.minValue,maxDate:a.maxValue,disabledDatesRE:a.disabledDatesRE,disabledDatesText:a.disabledDatesText,disabledDays:a.disabledDays,disabledDaysText:a.disabledDaysText,format:a.format,showToday:a.showToday,startDay:a.startDay,minText:b(a.minText,a.formatDate(a.minValue)),maxText:b(a.maxText,a.formatDate(a.maxValue)),listeners:{scope:a,select:a.onSelect},keyNavConfig:{esc:function(){a.collapse()}}})},onSelect:function(a,c){var b=this;b.setValue(c);b.fireEvent("select",b,c);b.collapse()},onExpand:function(){var a=this.getValue();this.picker.setValue(Ext.isDate(a)?a:new Date())},onCollapse:function(){this.focus(false,60)},beforeBlur:function(){var c=this,a=c.parseDate(c.getRawValue()),b=c.focusTask;if(b){b.cancel()}if(a){c.setValue(a)}}});Ext.define("Ext.dd.DropTarget",{extend:"Ext.dd.DDTarget",requires:["Ext.dd.ScrollManager"],constructor:function(b,a){this.el=Ext.get(b);Ext.apply(this,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}this.callParent([this.el.dom,this.ddGroup||this.group,{isTarget:true}])},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(a,c,b){if(this.overClass){this.el.addCls(this.overClass)}return this.dropAllowed},notifyOver:function(a,c,b){return this.dropAllowed},notifyOut:function(a,c,b){if(this.overClass){this.el.removeCls(this.overClass)}},notifyDrop:function(a,c,b){return false},destroy:function(){this.callParent();if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.define("Ext.dd.DropZone",{extend:"Ext.dd.DropTarget",requires:["Ext.dd.Registry"],getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(f,a,c,b){},onNodeOver:function(f,a,c,b){return this.dropAllowed},onNodeOut:function(f,a,c,b){},onNodeDrop:function(f,a,c,b){return false},onContainerOver:function(a,c,b){return this.dropNotAllowed},onContainerDrop:function(a,c,b){return false},notifyEnter:function(a,c,b){return this.dropNotAllowed},notifyOver:function(a,c,b){var f=this.getTargetFromEvent(c);if(!f){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}return this.onContainerOver(a,c,b)}if(this.lastOverNode!=f){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b)}this.onNodeEnter(f,a,c,b);this.lastOverNode=f}return this.onNodeOver(f,a,c,b)},notifyOut:function(a,c,b){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}},notifyDrop:function(a,c,b){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}var f=this.getTargetFromEvent(c);return f?this.onNodeDrop(f,a,c,b):this.onContainerDrop(a,c,b)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.define("Ext.form.field.Spinner",{extend:"Ext.form.field.Trigger",alias:"widget.spinnerfield",alternateClassName:"Ext.form.Spinner",requires:["Ext.util.KeyNav"],trigger1Cls:Ext.baseCSSPrefix+"form-spinner-up",trigger2Cls:Ext.baseCSSPrefix+"form-spinner-down",spinUpEnabled:true,spinDownEnabled:true,keyNavEnabled:true,mouseWheelEnabled:true,repeatTriggerClick:true,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,initComponent:function(){this.callParent();this.addEvents("spin","spinup","spindown")},onRender:function(){var b=this,a;b.callParent(arguments);a=b.triggerEl;b.spinUpEl=a.item(0);b.spinDownEl=a.item(1);b.setSpinUpEnabled(b.spinUpEnabled);b.setSpinDownEnabled(b.spinDownEnabled);if(b.keyNavEnabled){b.spinnerKeyNav=Ext.create("Ext.util.KeyNav",b.inputEl,{scope:b,up:b.spinUp,down:b.spinDown})}if(b.mouseWheelEnabled){b.mon(b.bodyEl,"mousewheel",b.onMouseWheel,b)}},getTriggerWidth:function(){return this.hideTrigger||this.readOnly?0:this.spinUpEl.getWidth()+this.triggerWrap.getFrameWidth("lr")},onTrigger1Click:function(){this.spinUp()},onTrigger2Click:function(){this.spinDown()},spinUp:function(){var a=this;if(a.spinUpEnabled&&!a.disabled){a.fireEvent("spin",a,"up");a.fireEvent("spinup",a);a.onSpinUp()}},spinDown:function(){var a=this;if(a.spinDownEnabled&&!a.disabled){a.fireEvent("spin",a,"down");a.fireEvent("spindown",a);a.onSpinDown()}},setSpinUpEnabled:function(a){var b=this,c=b.spinUpEnabled;b.spinUpEnabled=a;if(c!==a&&b.rendered){b.spinUpEl[a?"removeCls":"addCls"](b.trigger1Cls+"-disabled")}},setSpinDownEnabled:function(a){var b=this,c=b.spinDownEnabled;b.spinDownEnabled=a;if(c!==a&&b.rendered){b.spinDownEl[a?"removeCls":"addCls"](b.trigger2Cls+"-disabled")}},onMouseWheel:function(b){var a=this,c;if(a.hasFocus){c=b.getWheelDelta();if(c>0){a.spinUp()}else{if(c<0){a.spinDown()}}b.stopEvent()}},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav","spinUpEl","spinDownEl");this.callParent()}});Ext.define("Ext.form.field.Number",{extend:"Ext.form.field.Spinner",alias:"widget.numberfield",alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowDecimals:true,decimalSeparator:".",decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:false,initComponent:function(){var a=this,b;a.callParent();a.setMinValue(a.minValue);a.setMaxValue(a.maxValue);if(a.disableKeyFilter!==true){b=a.baseChars+"";if(a.allowDecimals){b+=a.decimalSeparator}if(a.minValue<0){b+="-"}b=Ext.String.escapeRegex(b);a.maskRe=new RegExp("["+b+"]");if(a.autoStripChars){a.stripCharsRe=new RegExp("[^"+b+"]","gi")}}},getErrors:function(c){var b=this,f=b.callParent(arguments),e=Ext.String.format,a;c=Ext.isDefined(c)?c:this.processRawValue(this.getRawValue());if(c.length<1){return f}c=String(c).replace(b.decimalSeparator,".");if(isNaN(c)){f.push(e(b.nanText,c))}a=b.parseValue(c);if(b.minValue===0&&a<0){f.push(this.negativeText)}else{if(a<b.minValue){f.push(e(b.minText,b.minValue))}}if(a>b.maxValue){f.push(e(b.maxText,b.maxValue))}return f},rawToValue:function(b){var a=this.fixPrecision(this.parseValue(b));if(a===null){a=b||null}return a},valueToRaw:function(c){var b=this,a=b.decimalSeparator;c=b.parseValue(c);c=b.fixPrecision(c);c=Ext.isNumber(c)?c:parseFloat(String(c).replace(a,"."));c=isNaN(c)?"":String(c).replace(".",a);return c},onChange:function(){var b=this,c=b.getValue(),a=c===null;b.callParent(arguments);b.setSpinUpEnabled(a||c<b.maxValue);b.setSpinDownEnabled(a||c>b.minValue)},setMinValue:function(a){this.minValue=Ext.Number.from(a,Number.NEGATIVE_INFINITY)},setMaxValue:function(a){this.maxValue=Ext.Number.from(a,Number.MAX_VALUE)},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,"."));return isNaN(a)?null:a},fixPrecision:function(e){var c=this,b=isNaN(e),a=c.decimalPrecision;if(b||!e){return b?"":e}else{if(!c.allowDecimals||a<=0){a=0}}return parseFloat(Ext.Number.toFixed(parseFloat(e),a))},beforeBlur:function(){var b=this,a=b.parseValue(b.getRawValue());if(!Ext.isEmpty(a)){b.setValue(a)}},onSpinUp:function(){var a=this;if(!a.readOnly){a.setValue(Ext.Number.constrain(a.getValue()+a.step,a.minValue,a.maxValue))}},onSpinDown:function(){var a=this;if(!a.readOnly){a.setValue(Ext.Number.constrain(a.getValue()-a.step,a.minValue,a.maxValue))}}});Ext.define("Ext.toolbar.Paging",{extend:"Ext.toolbar.Toolbar",alias:"widget.pagingtoolbar",alternateClassName:"Ext.PagingToolbar",requires:["Ext.toolbar.TextItem","Ext.form.field.Number"],displayInfo:false,prependButtons:false,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,getPagingItems:function(){var a=this;return[{itemId:"first",tooltip:a.firstText,overflowText:a.firstText,iconCls:Ext.baseCSSPrefix+"tbar-page-first",disabled:true,handler:a.moveFirst,scope:a},{itemId:"prev",tooltip:a.prevText,overflowText:a.prevText,iconCls:Ext.baseCSSPrefix+"tbar-page-prev",disabled:true,handler:a.movePrevious,scope:a},"-",a.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:Ext.baseCSSPrefix+"tbar-page-number",allowDecimals:false,minValue:1,hideTrigger:true,enableKeyEvents:true,selectOnFocus:true,submitValue:false,width:a.inputItemWidth,margins:"-1 2 3 2",listeners:{scope:a,keydown:a.onPagingKeyDown,blur:a.onPagingBlur}},{xtype:"tbtext",itemId:"afterTextItem",text:Ext.String.format(a.afterPageText,1)},"-",{itemId:"next",tooltip:a.nextText,overflowText:a.nextText,iconCls:Ext.baseCSSPrefix+"tbar-page-next",disabled:true,handler:a.moveNext,scope:a},{itemId:"last",tooltip:a.lastText,overflowText:a.lastText,iconCls:Ext.baseCSSPrefix+"tbar-page-last",disabled:true,handler:a.moveLast,scope:a},"-",{itemId:"refresh",tooltip:a.refreshText,overflowText:a.refreshText,iconCls:Ext.baseCSSPrefix+"tbar-loading",handler:a.doRefresh,scope:a}]},initComponent:function(){var b=this,c=b.getPagingItems(),a=b.items||b.buttons||[];if(b.prependButtons){b.items=a.concat(c)}else{b.items=c.concat(a)}delete b.buttons;if(b.displayInfo){b.items.push("->");b.items.push({xtype:"tbtext",itemId:"displayItem"})}b.callParent();b.addEvents("change","beforechange");b.on("afterlayout",b.onLoad,b,{single:true});b.bindStore(b.store||"ext-empty-store",true)},updateInfo:function(){var f=this,c=f.child("#displayItem"),a=f.store,b=f.getPageData(),e,g;if(c){e=a.getCount();if(e===0){g=f.emptyMsg}else{g=Ext.String.format(f.displayMsg,b.fromRecord,b.toRecord,b.total)}c.setText(g);f.doComponentLayout()}},onLoad:function(){var f=this,e,b,c,a;if(!f.rendered){return}e=f.getPageData();b=e.currentPage;c=e.pageCount;a=Ext.String.format(f.afterPageText,isNaN(c)?1:c);f.child("#afterTextItem").setText(a);f.child("#inputItem").setValue(b);f.child("#first").setDisabled(b===1);f.child("#prev").setDisabled(b===1);f.child("#next").setDisabled(b===c);f.child("#last").setDisabled(b===c);f.child("#refresh").enable();f.updateInfo();f.fireEvent("change",f,e)},getPageData:function(){var b=this.store,a=b.getTotalCount();return{total:a,currentPage:b.currentPage,pageCount:Math.ceil(a/b.pageSize),fromRecord:((b.currentPage-1)*b.pageSize)+1,toRecord:Math.min(b.currentPage*b.pageSize,a)}},onLoadError:function(){if(!this.rendered){return}this.child("#refresh").enable()},readPageFromInput:function(b){var a=this.child("#inputItem").getValue(),c=parseInt(a,10);if(!a||isNaN(c)){this.child("#inputItem").setValue(b.currentPage);return false}return c},onPagingFocus:function(){this.child("#inputItem").select()},onPagingBlur:function(b){var a=this.getPageData().currentPage;this.child("#inputItem").setValue(a)},onPagingKeyDown:function(i,h){var f=this,b=h.getKey(),c=f.getPageData(),a=h.shiftKey?10:1,g;if(b==h.RETURN){h.stopEvent();g=f.readPageFromInput(c);if(g!==false){g=Math.min(Math.max(1,g),c.pageCount);if(f.fireEvent("beforechange",f,g)!==false){f.store.loadPage(g)}}}else{if(b==h.HOME||b==h.END){h.stopEvent();g=b==h.HOME?1:c.pageCount;i.setValue(g)}else{if(b==h.UP||b==h.PAGEUP||b==h.DOWN||b==h.PAGEDOWN){h.stopEvent();g=f.readPageFromInput(c);if(g){if(b==h.DOWN||b==h.PAGEDOWN){a*=-1}g+=a;if(g>=1&&g<=c.pages){i.setValue(g)}}}}}},beforeLoad:function(){if(this.rendered&&this.refresh){this.refresh.disable()}},doLoad:function(a){if(this.fireEvent("beforechange",this,o)!==false){this.store.load()}},moveFirst:function(){if(this.fireEvent("beforechange",this,1)!==false){this.store.loadPage(1)}},movePrevious:function(){var b=this,a=b.store.currentPage-1;if(a>0){if(b.fireEvent("beforechange",b,a)!==false){b.store.previousPage()}}},moveNext:function(){var c=this,b=c.getPageData().pageCount,a=c.store.currentPage+1;if(a<=b){if(c.fireEvent("beforechange",c,a)!==false){c.store.nextPage()}}},moveLast:function(){var b=this,a=b.getPageData().pageCount;if(b.fireEvent("beforechange",b,a)!==false){b.store.loadPage(a)}},doRefresh:function(){var a=this,b=a.store.currentPage;if(a.fireEvent("beforechange",a,b)!==false){a.store.loadPage(b)}},bindStore:function(a,b){var c=this;if(!b&&c.store){if(a!==c.store&&c.store.autoDestroy){c.store.destroyStore()}else{c.store.un("beforeload",c.beforeLoad,c);c.store.un("load",c.onLoad,c);c.store.un("exception",c.onLoadError,c)}if(!a){c.store=null}}if(a){a=Ext.data.StoreManager.lookup(a);a.on({scope:c,beforeload:c.beforeLoad,load:c.onLoad,exception:c.onLoadError})}c.store=a},unbind:function(a){this.bindStore(null)},bind:function(a){this.bindStore(a)},onDestroy:function(){this.bindStore(null);this.callParent()}});Ext.define("Ext.view.BoundList",{extend:"Ext.view.View",alias:"widget.boundlist",alternateClassName:"Ext.BoundList",requires:["Ext.layout.component.BoundList","Ext.toolbar.Paging"],pageSize:0,autoScroll:true,baseCls:Ext.baseCSSPrefix+"boundlist",itemCls:Ext.baseCSSPrefix+"boundlist-item",listItemCls:"",shadow:false,trackOver:true,refreshed:0,ariaRole:"listbox",componentLayout:"boundlist",renderTpl:['<div id="{id}-listEl" class="list-ct"></div>'],initComponent:function(){var b=this,a=b.baseCls,c=b.itemCls;b.selectedItemCls=a+"-selected";b.overItemCls=a+"-item-over";b.itemSelector="."+c;if(b.floating){b.addCls(a+"-floating")}if(!b.tpl){b.tpl=Ext.create("Ext.XTemplate",'<ul><tpl for=".">','<li role="option" class="'+c+'">'+b.getInnerTpl(b.displayField)+"</li>","</tpl></ul>")}else{if(Ext.isString(b.tpl)){b.tpl=Ext.create("Ext.XTemplate",b.tpl)}}if(b.pageSize){b.pagingToolbar=b.createPagingToolbar()}b.callParent();b.addChildEls("listEl")},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{pageSize:this.pageSize,store:this.store,border:false})},onRender:function(){var b=this,a=b.pagingToolbar;b.callParent(arguments);if(a){a.render(b.el)}},bindStore:function(a,b){var e=this,c=e.pagingToolbar;e.callParent(arguments);if(c){c.bindStore(a,b)}},getTargetEl:function(){return this.listEl||this.el},getInnerTpl:function(a){return"{"+a+"}"},refresh:function(){var a=this;a.callParent();if(a.isVisible()){a.refreshed++;a.doComponentLayout();a.refreshed--}},initAria:function(){this.callParent();var a=this.getSelectionModel(),c=a.getSelectionMode(),b=this.getActionEl();if(c!=="SINGLE"){b.dom.setAttribute("aria-multiselectable",true)}},onDestroy:function(){Ext.destroyMembers(this,"pagingToolbar","listEl");this.callParent()}});Ext.define("Ext.view.BoundListKeyNav",{extend:"Ext.util.KeyNav",requires:"Ext.view.BoundList",constructor:function(b,a){var c=this;c.boundList=a.boundList;c.callParent([b,Ext.apply({},a,c.defaultHandlers)])},defaultHandlers:{up:function(){var f=this,b=f.boundList,e=b.all,g=b.highlightedItem,c=g?b.indexOf(g):-1,a=c>0?c-1:e.getCount()-1;f.highlightAt(a)},down:function(){var f=this,b=f.boundList,e=b.all,g=b.highlightedItem,c=g?b.indexOf(g):-1,a=c<e.getCount()-1?c+1:0;f.highlightAt(a)},pageup:function(){},pagedown:function(){},home:function(){this.highlightAt(0)},end:function(){var a=this;a.highlightAt(a.boundList.all.getCount()-1)},enter:function(a){this.selectHighlighted(a)}},highlightAt:function(b){var a=this.boundList,c=a.all.item(b);if(c){c=c.dom;a.highlightItem(c);a.getTargetEl().scrollChildIntoView(c,false)}},selectHighlighted:function(g){var f=this,b=f.boundList,c=b.highlightedItem,a=b.getSelectionModel();if(c){a.selectWithEvent(b.getRecord(c),g)}}});Ext.define("Ext.form.field.ComboBox",{extend:"Ext.form.field.Picker",requires:["Ext.util.DelayedTask","Ext.EventObject","Ext.view.BoundList","Ext.view.BoundListKeyNav","Ext.data.StoreManager"],alternateClassName:"Ext.form.ComboBox",alias:["widget.combobox","widget.combo"],triggerCls:Ext.baseCSSPrefix+"form-arrow-trigger",hiddenDataCls:Ext.baseCSSPrefix+"hide-display "+Ext.baseCSSPrefix+"form-data-hidden",fieldSubTpl:['<div class="{hiddenDataCls}" role="presentation"></div>','<input id="{id}" type="{type}" ','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" />','<div id="{cmpId}-triggerWrap" class="{triggerWrapCls}" role="presentation">',"{triggerEl}",'<div class="{clearCls}" role="presentation"></div>',"</div>",{compiled:true,disableFormats:true}],getSubTplData:function(){var a=this;Ext.applyIf(a.subTplData,{hiddenDataCls:a.hiddenDataCls});return a.callParent(arguments)},afterRender:function(){var a=this;a.callParent(arguments);a.setHiddenValue(a.value)},multiSelect:false,delimiter:", ",displayField:"text",triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:true,pageSize:0,autoSelect:true,typeAhead:false,typeAheadDelay:250,selectOnTab:true,forceSelection:false,defaultListConfig:{emptyText:"",loadingText:"Loading...",loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},ignoreSelection:0,initComponent:function(){var f=this,c=Ext.isDefined,b=f.store,e=f.transform,a,g;Ext.applyIf(f.renderSelectors,{hiddenDataEl:"."+f.hiddenDataCls.split(" ").join(".")});if(f.typeAhead&&f.multiSelect){Ext.Error.raise("typeAhead and multiSelect are mutually exclusive options -- please remove one of them.")}if(f.typeAhead&&!f.editable){Ext.Error.raise("If typeAhead is enabled the combo must be editable: true -- please change one of those settings.")}if(f.selectOnFocus&&!f.editable){Ext.Error.raise("If selectOnFocus is enabled the combo must be editable: true -- please change one of those settings.")}this.addEvents("beforequery","select","beforeselect","beforedeselect");if(e){a=Ext.getDom(e);if(a){b=Ext.Array.map(Ext.Array.from(a.options),function(h){return[h.value,h.text]});if(!f.name){f.name=a.name}if(!("value" in f)){f.value=a.value}}}f.bindStore(b||"ext-empty-store",true);b=f.store;if(b.autoCreated){f.queryMode="local";f.valueField=f.displayField="field1";if(!b.expanded){f.displayField="field2"}}if(!c(f.valueField)){f.valueField=f.displayField}g=f.queryMode==="local";if(!c(f.queryDelay)){f.queryDelay=g?10:500}if(!c(f.minChars)){f.minChars=g?0:4}if(!f.displayTpl){f.displayTpl=Ext.create("Ext.XTemplate",'<tpl for=".">{[typeof values === "string" ? values : values["'+f.displayField+'"]]}<tpl if="xindex < xcount">'+f.delimiter+"</tpl></tpl>")}else{if(Ext.isString(f.displayTpl)){f.displayTpl=Ext.create("Ext.XTemplate",f.displayTpl)}}f.callParent();f.doQueryTask=Ext.create("Ext.util.DelayedTask",f.doRawQuery,f);if(f.store.getCount()>0){f.setValue(f.value)}if(a){f.render(a.parentNode,a);Ext.removeNode(a);delete f.renderTo}},getStore:function(){return this.store},beforeBlur:function(){this.doQueryTask.cancel();this.assertValue()},assertValue:function(){var a=this,b=a.getRawValue(),c;if(a.forceSelection){if(a.multiSelect){if(b!==a.getDisplayValue()){a.setValue(a.lastSelection)}}else{c=a.findRecordByDisplay(b);if(c){a.select(c)}else{a.setValue(a.lastSelection)}}}a.collapse()},onTypeAhead:function(){var f=this,e=f.displayField,b=f.store.findRecord(e,f.getRawValue()),c=f.getPicker(),g,a,h;if(b){g=b.get(e);a=g.length;h=f.getRawValue().length;c.highlightItem(c.getNode(b));if(h!==0&&h!==a){f.setRawValue(g);f.selectText(h,g.length)}}},resetToDefault:function(){},bindStore:function(a,b){var c=this,e=c.store;if(e&&!b){if(e!==a&&e.autoDestroy){e.destroyStore()}else{e.un({scope:c,load:c.onLoad,exception:c.collapse})}if(!a){c.store=null;if(c.picker){c.picker.bindStore(null)}}}if(a){if(!b){c.resetToDefault()}c.store=Ext.data.StoreManager.lookup(a);c.store.on({scope:c,load:c.onLoad,exception:c.collapse});if(c.picker){c.picker.bindStore(a)}}},onLoad:function(){var a=this,b=a.value;if(a.rawQuery){a.rawQuery=false;a.syncSelection();if(a.picker&&!a.picker.getSelectionModel().hasSelection()){a.doAutoSelect()}}else{if(a.value){a.setValue(a.value)}else{if(a.store.getCount()){a.doAutoSelect()}else{a.setValue("")}}}},doRawQuery:function(){this.doQuery(this.getRawValue(),false,true)},doQuery:function(h,c,f){h=h||"";var e=this,b={query:h,forceAll:c,combo:e,cancel:false},a=e.store,g=e.queryMode==="local";if(e.fireEvent("beforequery",b)===false||b.cancel){return false}h=b.query;c=b.forceAll;if(c||(h.length>=e.minChars)){e.expand();if(!e.queryCaching||e.lastQuery!==h){e.lastQuery=h;if(g){if(c){a.clearFilter()}else{a.clearFilter(true);a.filter(e.displayField,h)}}else{e.rawQuery=f;if(e.pageSize){e.loadPage(1)}else{a.load({params:e.getParams(h)})}}}if(e.getRawValue()!==e.getDisplayValue()){e.ignoreSelection++;e.picker.getSelectionModel().deselectAll();e.ignoreSelection--}if(g){e.doAutoSelect()}if(e.typeAhead){e.doTypeAhead()}}return true},loadPage:function(a){this.store.loadPage(a,{params:this.getParams(this.lastQuery)})},onPageChange:function(b,a){this.loadPage(a);return false},getParams:function(c){var b={},a=this.queryParam;if(a){b[a]=c}return b},doAutoSelect:function(){var b=this,a=b.picker,c,e;if(a&&b.autoSelect&&b.store.getCount()>0){c=a.getSelectionModel().lastSelected;e=a.getNode(c||0);if(e){a.highlightItem(e);a.listEl.scrollChildIntoView(e,false)}}},doTypeAhead:function(){if(!this.typeAheadTask){this.typeAheadTask=Ext.create("Ext.util.DelayedTask",this.onTypeAhead,this)}if(this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE){this.typeAheadTask.delay(this.typeAheadDelay)}},onTriggerClick:function(){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{a.onFocus({});if(a.triggerAction==="all"){a.doQuery(a.allQuery,true)}else{a.doQuery(a.getRawValue(),false,true)}}a.inputEl.focus()}},onKeyUp:function(f,b){var c=this,a=f.getKey();if(!c.readOnly&&!c.disabled&&c.editable){c.lastKey=a;if(!f.isSpecialKey()||a==f.BACKSPACE||a==f.DELETE){c.doQueryTask.delay(c.queryDelay)}}if(c.enableKeyEvents){c.callParent(arguments)}},initEvents:function(){var a=this;a.callParent();if(!a.enableKeyEvents){a.mon(a.inputEl,"keyup",a.onKeyUp,a)}},onDestroy:function(){this.bindStore(null);this.callParent()},createPicker:function(){var c=this,a,e=Ext.baseCSSPrefix+"menu",b=Ext.apply({pickerField:c,selModel:{mode:c.multiSelect?"SIMPLE":"SINGLE"},floating:true,hidden:true,ownerCt:c.ownerCt,cls:c.el.up("."+e)?e:"",store:c.store,displayField:c.displayField,focusOnToFront:false,pageSize:c.pageSize,tpl:c.tpl},c.listConfig,c.defaultListConfig);a=c.picker=Ext.create("Ext.view.BoundList",b);if(c.pageSize){a.pagingToolbar.on("beforechange",c.onPageChange,c)}c.mon(a,{itemclick:c.onItemClick,refresh:c.onListRefresh,scope:c});c.mon(a.getSelectionModel(),{beforeselect:c.onBeforeSelect,beforedeselect:c.onBeforeDeselect,selectionchange:c.onListSelectionChange,scope:c});return a},alignPicker:function(){var b=this,a=b.picker,f=b.getPosition()[1]-Ext.getBody().getScroll().top,e=Ext.Element.getViewHeight()-f-b.getHeight(),c=Math.max(f,e);b.callParent();if(a.getHeight()>c){a.setHeight(c-5);b.doAlign()}},onListRefresh:function(){this.alignPicker();this.syncSelection()},onItemClick:function(e,a){var g=this,b=g.lastSelection,c=g.valueField,f;if(!g.multiSelect&&b){f=b[0];if(f&&(a.get(c)===f.get(c))){g.displayTplData=[a.data];g.setRawValue(g.getDisplayValue());g.collapse()}}},onBeforeSelect:function(b,a){return this.fireEvent("beforeselect",this,a,a.index)},onBeforeDeselect:function(b,a){return this.fireEvent("beforedeselect",this,a,a.index)},onListSelectionChange:function(b,e){var a=this,f=a.multiSelect,c=e.length>0;if(!a.ignoreSelection&&a.isExpanded){if(!f){Ext.defer(a.collapse,1,a)}if(f||c){a.setValue(e,false)}if(c){a.fireEvent("select",a,e)}a.inputEl.focus()}},onExpand:function(){var e=this,a=e.listKeyNav,c=e.selectOnTab,b=e.getPicker();if(a){a.enable()}else{a=e.listKeyNav=Ext.create("Ext.view.BoundListKeyNav",this.inputEl,{boundList:b,forceKeyDown:true,tab:function(f){if(c){this.selectHighlighted(f);e.triggerBlur()}return true}})}if(c){e.ignoreMonitorTab=true}Ext.defer(a.enable,1,a);e.inputEl.focus()},onCollapse:function(){var b=this,a=b.listKeyNav;if(a){a.disable();b.ignoreMonitorTab=false}},select:function(a){this.setValue(a,true)},findRecord:function(e,c){var b=this.store,a=b.findExact(e,c);return a!==-1?b.getAt(a):false},findRecordByValue:function(a){return this.findRecord(this.valueField,a)},findRecordByDisplay:function(a){return this.findRecord(this.displayField,a)},setValue:function(m,f){var l=this,c=l.valueNotFoundText,n=l.inputEl,g,k,h,b=[],a=[],e=[];if(l.store.loading){l.value=m;l.setHiddenValue(l.value);return l}m=Ext.Array.from(m);for(g=0,k=m.length;g<k;g++){h=m[g];if(!h||!h.isModel){h=l.findRecordByValue(h)}if(h){b.push(h);a.push(h.data);e.push(h.get(l.valueField))}else{if(!l.forceSelection){a.push(m[g]);e.push(m[g])}else{if(Ext.isDefined(c)){a.push(c)}}}}l.setHiddenValue(e);l.value=l.multiSelect?e:e[0];if(!Ext.isDefined(l.value)){l.value=null}l.displayTplData=a;l.lastSelection=l.valueModels=b;if(n&&l.emptyText&&!Ext.isEmpty(m)){n.removeCls(l.emptyCls)}l.setRawValue(l.getDisplayValue());l.checkChange();if(f!==false){l.syncSelection()}l.applyEmptyText();return l},setHiddenValue:function(c){var g=this,f;if(!g.hiddenDataEl){return}c=Ext.Array.from(c);var k=g.hiddenDataEl.dom,h=k.childNodes,b=h[0],a=c.length,e=h.length;if(!b&&a>0){g.hiddenDataEl.update(Ext.DomHelper.markup({tag:"input",type:"hidden",name:g.name}));e=1;b=k.firstChild}while(e>a){k.removeChild(h[0]);--e}while(e<a){k.appendChild(b.cloneNode(true));++e}for(f=0;f<a;f++){h[f].value=c[f]}},getDisplayValue:function(){return this.displayTpl.apply(this.displayTplData)},getValue:function(){var b=this,a=b.picker,e=b.getRawValue(),c=b.value;if(b.getDisplayValue()!==e){c=e;b.value=b.displayTplData=b.valueModels=null;if(a){b.ignoreSelection++;a.getSelectionModel().deselectAll();b.ignoreSelection--}}return c},getSubmitValue:function(){return this.getValue()},isEqual:function(f,e){var b=Ext.Array.from,c,a;f=b(f);e=b(e);a=f.length;if(a!==e.length){return false}for(c=0;c<a;c++){if(e[c]!==f[c]){return false}}return true},clearValue:function(){this.setValue([])},syncSelection:function(){var e=this,f=Ext.Array,b=e.picker,c,a;if(b){c=[];f.forEach(e.valueModels||[],function(g){if(g&&g.isModel&&e.store.indexOf(g)>=0){c.push(g)}});e.ignoreSelection++;a=b.getSelectionModel();a.deselectAll();if(c.length){a.select(c)}e.ignoreSelection--}}});Ext.define("Ext.grid.column.Column",{extend:"Ext.grid.header.Container",alias:"widget.gridcolumn",requires:["Ext.util.KeyNav"],alternateClassName:"Ext.grid.Column",baseCls:Ext.baseCSSPrefix+"column-header "+Ext.baseCSSPrefix+"unselectable",hoverCls:Ext.baseCSSPrefix+"column-header-over",handleWidth:5,sortState:null,possibleSortStates:["ASC","DESC"],renderTpl:'<div id="{id}-titleContainer" class="'+Ext.baseCSSPrefix+'column-header-inner"><span id="{id}-textEl" class="'+Ext.baseCSSPrefix+'column-header-text">{text}</span><tpl if="!values.menuDisabled"><div id="{id}-triggerEl" class="'+Ext.baseCSSPrefix+'column-header-trigger"></div></tpl></div>',dataIndex:null,text:"&#160;",sortable:true,hideable:true,menuDisabled:false,renderer:false,align:"left",draggable:true,initDraggable:Ext.emptyFn,isHeader:true,initComponent:function(){var e=this,b,a,c;if(Ext.isDefined(e.header)){e.text=e.header;delete e.header}if(e.flex){e.minWidth=e.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth}else{e.minWidth=e.width}if(!e.triStateSort){e.possibleSortStates.length=2}if(Ext.isDefined(e.columns)){e.isGroupHeader=true;if(e.dataIndex){Ext.Error.raise("Ext.grid.column.Column: Group header may not accept a dataIndex")}if((e.width&&e.width!==Ext.grid.header.Container.prototype.defaultWidth)||e.flex){Ext.Error.raise("Ext.grid.column.Column: Group header does not support setting explicit widths or flexs. The group header width is calculated by the sum of its children.")}e.items=e.columns;delete e.columns;delete e.flex;e.width=0;for(b=0,a=e.items.length;b<a;b++){c=e.items[b];if(!c.hidden){e.width+=c.width||Ext.grid.header.Container.prototype.defaultWidth}if(c.flex){Ext.Error.raise("Ext.grid.column.Column: items of a grouped header do not support flexed values. Each item must explicitly define its width.")}}e.minWidth=e.width;e.cls=(e.cls||"")+" "+Ext.baseCSSPrefix+"group-header";e.sortable=false;e.resizable=false;e.align="center"}e.addChildEls("titleContainer","triggerEl","textEl");e.callParent(arguments)},onAdd:function(a){a.isSubHeader=true;a.addCls(Ext.baseCSSPrefix+"group-sub-header");this.callParent(arguments)},onRemove:function(a){a.isSubHeader=false;a.removeCls(Ext.baseCSSPrefix+"group-sub-header");this.callParent(arguments)},initRenderData:function(){var a=this;Ext.applyIf(a.renderData,{text:a.text,menuDisabled:a.menuDisabled});return a.callParent(arguments)},applyColumnState:function(b){var a=this,c=Ext.isDefined;a.applyColumnsState(b.columns);if(c(b.hidden)){a.hidden=b.hidden}if(c(b.locked)){a.locked=b.locked}if(c(b.sortable)){a.sortable=b.sortable}if(c(b.width)){delete a.flex;a.width=b.width}else{if(c(b.flex)){delete a.width;a.flex=b.flex}}},getColumnState:function(){var b=this,a=[],c={id:b.headerId};b.savePropsToState(["hidden","sortable","locked","flex","width"],c);if(b.isGroupHeader){b.items.each(function(e){a.push(e.getColumnState())});if(a.length){c.columns=a}}else{if(b.isSubHeader&&b.ownerCt.hidden){delete b.hidden}}if("width" in c){delete c.flex}return c},setText:function(a){this.text=a;if(this.rendered){this.textEl.update(a)}},getOwnerHeaderCt:function(){return this.up(":not([isHeader])")},getIndex:function(){return this.isGroupColumn?false:this.getOwnerHeaderCt().getHeaderIndex(this)},onRender:function(){var b=this,a=b.up("tablepanel");if(a&&(!b.sortable||a.sortableColumns===false)&&!b.groupable&&!b.lockable&&(a.enableColumnHide===false||!b.getOwnerHeaderCt().getHideableColumns().length)){b.menuDisabled=true}b.callParent(arguments)},afterRender:function(){var b=this,a=b.el;b.callParent(arguments);a.addCls(Ext.baseCSSPrefix+"column-header-align-"+b.align).addClsOnOver(b.overCls);b.mon(a,{click:b.onElClick,dblclick:b.onElDblClick,scope:b});if(!Ext.isIE8||!Ext.isStrict){b.mon(b.getFocusEl(),{focus:b.onTitleMouseOver,blur:b.onTitleMouseOut,scope:b})}b.mon(b.titleContainer,{mouseenter:b.onTitleMouseOver,mouseleave:b.onTitleMouseOut,scope:b});b.keyNav=Ext.create("Ext.util.KeyNav",a,{enter:b.onEnterKey,down:b.onDownKey,scope:b})},setWidth:function(b,a){var k=this,c=k.ownerCt,l,h,g,e=k.getWidth(),f=0,m;if(b!==e){k.oldWidth=e;k.minWidth=k.width=b;if(c.isGroupHeader){l=c.items.items;h=l.length;for(g=0;g<h;g++){m=l[g];if(!m.hidden){f+=(m===k)?b:m.getWidth()}}c.setWidth(f,a)}else{if(a!==false){c.doLayout()}}}},afterComponentLayout:function(c,a){var e=this,b=this.getOwnerHeaderCt();e.callParent(arguments);if(c&&!e.isGroupHeader&&b){b.onHeaderResize(e,c,true)}if(e.oldWidth&&(c!==e.oldWidth)){b.fireEvent("columnresize",b,this,c)}delete e.oldWidth},setPadding:function(a){var c=this,b=Ext.util.TextMetrics.measure(c.textEl.dom,c.text).height;if(!c.isGroupHeader){if(c.titleContainer.getHeight()<a){c.titleContainer.dom.style.height=a+"px"}}a=c.titleContainer.getViewSize().height;if(b){c.titleContainer.setStyle({paddingTop:Math.max(((a-b)/2),0)+"px"})}if(Ext.isIE&&c.triggerEl){c.triggerEl.setHeight(a)}},onDestroy:function(){var a=this;Ext.destroy(a.textEl,a.keyNav);delete a.keyNav;a.callParent(arguments)},onTitleMouseOver:function(){this.titleContainer.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleContainer.removeCls(this.hoverCls)},onDownKey:function(a){if(this.triggerEl){this.onElClick(a,this.triggerEl.dom||this.el.dom)}},onEnterKey:function(a){this.onElClick(a,this.el.dom)},onElDblClick:function(f,a){var c=this,b=c.ownerCt;if(b&&Ext.Array.indexOf(b.items,c)!==0&&c.isOnLeftEdge(f)){b.expandToFit(c.previousSibling("gridcolumn"))}},onElClick:function(f,b){var c=this,a=c.getOwnerHeaderCt();if(a&&!a.ddLock){if(c.triggerEl&&(f.target===c.triggerEl.dom||b===c.triggerEl.dom||f.within(c.triggerEl))){a.onHeaderTriggerClick(c,f,b)}else{if(f.getKey()||(!c.isOnLeftEdge(f)&&!c.isOnRightEdge(f))){c.toggleSortState();a.onHeaderClick(c,f,b)}}}},processEvent:function(g,b,a,c,f,h){return this.fireEvent.apply(this,arguments)},toggleSortState:function(){var b=this,a,c;if(b.sortable){a=Ext.Array.indexOf(b.possibleSortStates,b.sortState);c=(a+1)%b.possibleSortStates.length;b.setSortState(b.possibleSortStates[c])}},doSort:function(b){var a=this.up("tablepanel").store;a.sort({property:this.getSortParam(),direction:b})},getSortParam:function(){return this.dataIndex},setSortState:function(a,l,g){var h=this,i=Ext.baseCSSPrefix+"column-header-sort-",k=i+"ASC",c=i+"DESC",b=i+"null",f=h.getOwnerHeaderCt(),e=h.sortState;if(e!==a&&h.getSortParam()){h.addCls(i+a);if(a&&!g){h.doSort(a)}switch(a){case"DESC":h.removeCls([k,b]);break;case"ASC":h.removeCls([c,b]);break;case null:h.removeCls([k,c]);break}if(f&&!h.triStateSort&&!l){f.clearOtherSortStates(h)}h.sortState=a;f.fireEvent("sortchange",f,h,a)}},hide:function(){var g=this,c,a,e,h,f=0,b=g.getOwnerHeaderCt();g.oldWidth=g.getWidth();if(g.isGroupHeader){c=g.items.items;g.callParent(arguments);b.onHeaderHide(g);for(e=0,a=c.length;e<a;e++){c[e].hidden=true;b.onHeaderHide(c[e],true)}return}h=g.ownerCt.componentLayout.layoutBusy;g.ownerCt.componentLayout.layoutBusy=true;g.callParent(arguments);g.ownerCt.componentLayout.layoutBusy=h;b.onHeaderHide(g);if(g.ownerCt.isGroupHeader){c=g.ownerCt.query(">:not([hidden])");if(!c.length){g.ownerCt.hide()}else{for(e=0,a=c.length;e<a;e++){f+=c[e].getWidth()}g.ownerCt.minWidth=f;g.ownerCt.setWidth(f)}}},show:function(){var m=this,b=m.ownerCt,g=b.componentLayout,c=g.layoutBusy,a=b.layout,h=a.layoutBusy,l,k,f,n,e=0;g.layoutBusy=a.layoutBusy=true;m.callParent(arguments);g.layoutBusy=c;a.layoutBusy=h;if(m.isSubHeader){if(!b.isVisible()){b.show()}}if(m.isGroupHeader&&!m.query(":not([hidden])").length){l=m.query(">*");for(f=0,k=l.length;f<k;f++){n=l[f];n.preventLayout=true;n.show();e+=n.getWidth();delete n.preventLayout}m.setWidth(e)}if(b.isGroupHeader&&m.preventLayout!==true){l=b.query(">:not([hidden])");for(f=0,k=l.length;f<k;f++){e+=l[f].getWidth()}b.minWidth=e;b.setWidth(e)}b=m.getOwnerHeaderCt();if(b){b.onHeaderShow(m,m.preventLayout)}},getDesiredWidth:function(){var a=this;if(a.rendered&&a.componentLayout&&a.componentLayout.lastComponentSize){return a.componentLayout.lastComponentSize.width}else{if(a.flex){return a.width}else{return a.width}}},getCellSelector:function(){return"."+Ext.baseCSSPrefix+"grid-cell-"+this.getItemId()},getCellInnerSelector:function(){return this.getCellSelector()+" ."+Ext.baseCSSPrefix+"grid-cell-inner"},isOnLeftEdge:function(a){return(a.getXY()[0]-this.el.getLeft()<=this.handleWidth)},isOnRightEdge:function(a){return(this.el.getRight()-a.getXY()[0]<=this.handleWidth)}});Ext.define("Ext.ux.CheckColumn",{extend:"Ext.grid.column.Column",alias:"widget.checkcolumn",constructor:function(){this.addEvents("checkchange");this.callParent(arguments)},processEvent:function(f,h,l,a,g,c){if(f=="mousedown"||(f=="keydown"&&(c.getKey()==c.ENTER||c.getKey()==c.SPACE))){var b=h.panel.store.getAt(a),i=this.dataIndex,k=!b.get(i);b.set(i,k);this.fireEvent("checkchange",this,a,k);return false}else{return this.callParent(arguments)}},renderer:function(b){var c=Ext.baseCSSPrefix,a=[c+"grid-checkheader"];if(b){a.push(c+"grid-checkheader-checked")}return'<div class="'+a.join(" ")+'">&#160;</div>'}});Ext.define("Ext.ux.form.SearchField",{extend:"Ext.form.field.Trigger",alias:"widget.searchfield",trigger1Cls:Ext.baseCSSPrefix+"form-clear-trigger",trigger2Cls:Ext.baseCSSPrefix+"form-search-trigger",hasSearch:false,paramName:"query",initComponent:function(){this.callParent(arguments);this.on("specialkey",function(a,b){if(b.getKey()==b.ENTER){this.onTrigger2Click()}},this)},afterRender:function(){this.callParent();this.triggerEl.item(0).setDisplayed("none")},onTrigger1Click:function(){var c=this,a=c.store,b=a.getProxy(),e;if(c.hasSearch){c.setValue("");b.extraParams[c.paramName]="";b.extraParams.start=0;a.load();c.hasSearch=false;c.triggerEl.item(0).setDisplayed("none");c.doComponentLayout()}},onTrigger2Click:function(){var c=this,a=c.store,b=a.getProxy(),e=c.getValue();if(e.length<1){c.onTrigger1Click();return}b.extraParams[c.paramName]=e;b.extraParams.start=0;a.load();c.hasSearch=true;c.triggerEl.item(0).setDisplayed("block");c.doComponentLayout()}});Ext.define("Ext.ux.grid.FilterBar",{extend:"Ext.toolbar.Toolbar",alias:"widget.filterbar",requires:["Ext.ux.form.SearchField","Ext.form.field.ComboBox","Ext.data.ArrayStore"],searchStore:null,comboData:null,initComponent:function(){var b=this,a=b.searchStore;if(a){a=Ext.data.StoreManager.lookup(a)}b.searchStore=a;Ext.applyIf(b,{items:[{xtype:"combobox",itemId:"searchCombo",fieldLabel:"Search",labelWidth:50,store:Ext.create("Ext.data.ArrayStore",{fields:["fieldId","fieldName"]}),queryMode:"local",valueField:"fieldId",displayField:"fieldName",triggerAction:"all",editable:false,emptyText:"Select a field",listeners:{change:function(g,f,c){var e=f==="";g.ownerCt.down("searchfield").setDisabled(e)}}},{xtype:"searchfield",flex:1,disabled:true,store:b.searchStore,onTrigger1Click:function(){var e=this,c=e.store,f;if(e.hasSearch){e.setValue("");c.clearFilter();e.hasSearch=false;e.triggerEl.item(0).setDisplayed("none");e.doComponentLayout()}},onTrigger2Click:function(){var e=this,c=e.store,g=e.ownerCt.down("#searchCombo").getValue(),f=e.getValue();if(f.length<1){e.onTrigger1Click();return}c.filters.clear();c.filter(g,["ilike",f]);e.hasSearch=true;e.triggerEl.item(0).setDisplayed("block");e.doComponentLayout()},listeners:{render:function(e){Ext.tip.QuickTipManager.register({target:e.triggerEl,title:"Search Hint",text:"Wildcards % and _ are allowed."})}}}],listeners:{added:function(h){var g=h.ownerCt.columns,f=[],e=h.down("#searchCombo").getStore();Ext.each(g,function(i){if(i.dataIndex){f.push([i.dataIndex,i.text])}});e.loadData(f)},removed:function(f,e){f.searchStore.clearFilter()}}});b.callParent(arguments)}});Ext.define("Ext.picker.Time",{extend:"Ext.view.BoundList",alias:"widget.timepicker",requires:["Ext.data.Store","Ext.Date"],increment:15,format:"g:i A",displayField:"disp",initDate:[2008,0,1],componentCls:Ext.baseCSSPrefix+"timepicker",loadMask:false,initComponent:function(){var c=this,a=Ext.Date,b=a.clearTime,e=c.initDate;c.absMin=b(new Date(e[0],e[1],e[2]));c.absMax=a.add(b(new Date(e[0],e[1],e[2])),"mi",(24*60)-1);c.store=c.createStore();c.updateList();c.callParent()},setMinValue:function(a){this.minValue=a;this.updateList()},setMaxValue:function(a){this.maxValue=a;this.updateList()},normalizeDate:function(a){var b=this.initDate;a.setFullYear(b[0],b[1],b[2]);return a},updateList:function(){var c=this,b=c.normalizeDate(c.minValue||c.absMin),a=c.normalizeDate(c.maxValue||c.absMax);c.store.filterBy(function(e){var f=e.get("date");return f>=b&&f<=a})},createStore:function(){var e=this,c=Ext.Date,f=[],b=e.absMin,a=e.absMax;while(b<=a){f.push({disp:c.dateFormat(b,e.format),date:b});b=c.add(b,"mi",e.increment)}return Ext.create("Ext.data.Store",{fields:["disp","date"],data:f})}});Ext.define("Ext.form.field.Time",{extend:"Ext.form.field.Picker",alias:"widget.timefield",requires:["Ext.form.field.Date","Ext.picker.Time","Ext.view.BoundListKeyNav","Ext.Date"],alternateClassName:["Ext.form.TimeField","Ext.form.Time"],triggerCls:Ext.baseCSSPrefix+"form-time-trigger",minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,pickerMaxHeight:300,selectOnTab:true,initDate:"1/1/2008",initDateFormat:"j/n/Y",initComponent:function(){var c=this,b=c.minValue,a=c.maxValue;if(b){c.setMinValue(b)}if(a){c.setMaxValue(a)}this.callParent()},initValue:function(){var a=this,b=a.value;if(Ext.isString(b)){a.value=a.rawToValue(b)}a.callParent()},setMinValue:function(c){var b=this,a=b.picker;b.setLimit(c,true);if(a){a.setMinValue(b.minValue)}},setMaxValue:function(c){var b=this,a=b.picker;b.setLimit(c,false);if(a){a.setMaxValue(b.maxValue)}},setLimit:function(b,f){var a=this,e,c;if(Ext.isString(b)){e=a.parseDate(b)}else{if(Ext.isDate(b)){e=b}}if(e){c=Ext.Date.clearTime(new Date(a.initDate));c.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());a[f?"minValue":"maxValue"]=c}},rawToValue:function(a){return this.parseDate(a)||a||null},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},getErrors:function(e){var b=this,g=Ext.String.format,h=b.callParent(arguments),c=b.minValue,f=b.maxValue,a;e=b.formatDate(e||b.processRawValue(b.getRawValue()));if(e===null||e.length<1){return h}a=b.parseDate(e);if(!a){h.push(g(b.invalidText,e,b.format));return h}if(c&&a<c){h.push(g(b.minText,b.formatDate(c)))}if(f&&a>f){h.push(g(b.maxText,b.formatDate(f)))}return h},formatDate:function(){return Ext.form.field.Date.prototype.formatDate.apply(this,arguments)},parseDate:function(f){if(!f||Ext.isDate(f)){return f}var e=this,h=e.safeParse(f,e.format),b=e.altFormats,g=e.altFormatsArray,c=0,a;if(!h&&b){g=g||b.split("|");a=g.length;for(;c<a&&!h;++c){h=e.safeParse(f,g[c])}}return h},safeParse:function(f,g){var e=this,b=Ext.Date,c,a=null;if(b.formatContainsDateInfo(g)){a=b.parse(f,g)}else{c=b.parse(e.initDate+" "+f,e.initDateFormat+" "+g);if(c){a=c}}return a},getSubmitValue:function(){var a=this,c=a.submitFormat||a.format,b=a.getValue();return b?Ext.Date.format(b,c):null},createPicker:function(){var b=this,a=Ext.create("Ext.picker.Time",{pickerField:b,selModel:{mode:"SINGLE"},floating:true,hidden:true,minValue:b.minValue,maxValue:b.maxValue,increment:b.increment,format:b.format,ownerCt:this.ownerCt,renderTo:document.body,maxHeight:b.pickerMaxHeight,focusOnToFront:false});b.mon(a.getSelectionModel(),{selectionchange:b.onListSelect,scope:b});return a},onExpand:function(){var e=this,a=e.pickerKeyNav,c=e.selectOnTab,b=e.getPicker(),f=b.getSelectionModel().lastSelected,g;if(!a){a=e.pickerKeyNav=Ext.create("Ext.view.BoundListKeyNav",this.inputEl,{boundList:b,forceKeyDown:true,tab:function(h){if(c){if(e.picker.highlightedItem){this.selectHighlighted(h)}else{e.collapse()}e.triggerBlur()}return true}});if(c){e.ignoreMonitorTab=true}}Ext.defer(a.enable,1,a);if(f){g=b.getNode(f);if(g){b.highlightItem(g);b.el.scrollChildIntoView(g,false)}}},onCollapse:function(){var b=this,a=b.pickerKeyNav;if(a){a.disable();b.ignoreMonitorTab=false}},onChange:function(){var b=this,a=b.picker;b.callParent(arguments);if(a){a.clearHighlight()}},onListSelect:function(c,f){var b=this,a=f[0],e=a?a.get("date"):null;b.setValue(e);b.fireEvent("select",b,e);b.picker.clearHighlight();b.collapse();b.inputEl.focus()}});Ext.define("Ext.grid.column.Template",{extend:"Ext.grid.column.Column",alias:["widget.templatecolumn"],requires:["Ext.XTemplate"],alternateClassName:"Ext.grid.TemplateColumn",constructor:function(a){var c=this,b;c.callParent(arguments);b=c.tpl=(!Ext.isPrimitive(c.tpl)&&c.tpl.compile)?c.tpl:Ext.create("Ext.XTemplate",c.tpl);c.renderer=function(g,h,e){var f=Ext.apply({},e.data,e.getAssociatedData());return b.apply(f)}}});Ext.define("Ext.grid.plugin.Editing",{alias:"editing.editing",requires:["Ext.grid.column.Column","Ext.util.KeyNav"],mixins:{observable:"Ext.util.Observable"},clicksToEdit:2,defaultFieldXType:"textfield",editStyle:"",constructor:function(a){var b=this;Ext.apply(b,a);b.addEvents("beforeedit","edit","validateedit");b.mixins.observable.constructor.call(b);b.relayEvents(b,["afteredit"],"after")},init:function(a){var b=this;b.grid=a;b.view=a.view;b.initEvents();b.mon(a,"reconfigure",b.onReconfigure,b);b.onReconfigure();a.relayEvents(b,["beforeedit","edit","validateedit"]);a.isEditable=true;a.editingPlugin=a.view.editingPlugin=b},onReconfigure:function(){this.initFieldAccessors(this.view.getGridColumns())},destroy:function(){var c=this,b=c.grid,e=b.headerCt,a=b.events;Ext.destroy(c.keyNav);c.removeFieldAccessors(b.getView().getGridColumns());c.clearListeners();delete c.grid.editingPlugin;delete c.grid.view.editingPlugin;delete c.grid;delete c.view;delete c.editor;delete c.keyNav},getEditStyle:function(){return this.editStyle},initFieldAccessors:function(a){var b=this;if(Ext.isArray(a)){Ext.Array.forEach(a,b.initFieldAccessors,b);return}Ext.applyIf(a,{getEditor:function(c,e){return b.getColumnField(this,e)},setEditor:function(c){b.setColumnField(this,c)}})},removeFieldAccessors:function(a){var b=this;if(Ext.isArray(a)){Ext.Array.forEach(a,b.removeFieldAccessors,b);return}delete a.getEditor;delete a.setEditor},getColumnField:function(b,a){var c=b.field;if(!c&&b.editor){c=b.editor;delete b.editor}if(!c&&a){c=a}if(c){if(Ext.isString(c)){c={xtype:c}}if(Ext.isObject(c)&&!c.isFormField){c=Ext.ComponentManager.create(c,this.defaultFieldXType);b.field=c}Ext.apply(c,{name:b.dataIndex});return c}},setColumnField:function(a,b){if(Ext.isObject(b)&&!b.isFormField){b=Ext.ComponentManager.create(b,this.defaultFieldXType)}a.field=b},initEvents:function(){var a=this;a.initEditTriggers();a.initCancelTriggers()},initCancelTriggers:Ext.emptyFn,initEditTriggers:function(){var c=this,b=c.view,a=c.clicksToEdit===1?"click":"dblclick";c.mon(b,"cell"+a,c.startEditByClick,c);b.on("render",function(){c.keyNav=Ext.create("Ext.util.KeyNav",b.el,{enter:c.onEnterKey,esc:c.onEscKey,scope:c})},c,{single:true})},onEnterKey:function(h){var f=this,c=f.grid,b=c.getSelectionModel(),a,g=c.headerCt.getHeaderAtIndex(0);if(b.getCurrentPosition){pos=b.getCurrentPosition();a=c.store.getAt(pos.row);g=c.headerCt.getHeaderAtIndex(pos.column)}else{a=b.getLastSelected()}f.startEdit(a,g)},onEscKey:function(a){this.cancelEdit()},startEditByClick:function(c,a,i,b,h,f,g){this.startEdit(b,c.getHeaderAtIndex(i))},beforeEdit:Ext.emptyFn,startEdit:function(a,e){var c=this,b=c.getEditingContext(a,e);if(c.beforeEdit(b)===false||c.fireEvent("beforeedit",b)===false||b.cancel){return false}c.context=b;c.editing=true},getEditingContext:function(f,c){var g=this,a=g.grid,k=a.store,b,e,h=a.getView(),i;if(Ext.isNumber(f)){b=f;f=k.getAt(b)}else{b=k.indexOf(f)}if(Ext.isNumber(c)){e=c;c=a.headerCt.getHeaderAtIndex(e)}else{e=c.getIndex()}i=f.get(c.dataIndex);return{grid:a,record:f,field:c.dataIndex,value:i,row:h.getNode(b),column:c,rowIdx:b,colIdx:e}},cancelEdit:function(){this.editing=false},completeEdit:function(){var a=this;if(a.editing&&a.validateEdit()){a.fireEvent("edit",a.context)}delete a.context;a.editing=false},validateEdit:function(){var b=this,a=b.context;return b.fireEvent("validateedit",b,a)!==false&&!a.cancel}});Ext.define("Ext.ux.StoreMenu",{extend:"Ext.menu.Menu",alias:"widget.storemenu",plain:true,loadingCls:undefined,initComponent:function(){var a=this;a.store=Ext.data.StoreManager.lookup(a.store||"ext-empty-store");a.callParent(arguments);a.on("render",function(b){if(!b.store.data.getCount()>0){b.add({text:"Loading...",iconCls:a.loadingCls,hideOnClick:false,disabled:true});b.store.load()}else{b.store.each(function(c){a.add({text:c.get("text"),itemId:c.getId()})},a)}});a.store.on("load",function(c,b,e){a.removeAll();c.each(function(f){a.add({text:f.get("text"),itemId:f.getId()})},a)})}});Ext.define("Ext.slider.Tip",{extend:"Ext.tip.Tip",minWidth:10,alias:"widget.slidertip",offsets:[0,-10],isSliderTip:true,init:function(b){var a=this;b.on({scope:a,dragstart:a.onSlide,drag:a.onSlide,dragend:a.hide,destroy:a.destroy})},onSlide:function(c,f,a){var b=this;b.show();b.update(b.getText(a));b.doComponentLayout();b.el.alignTo(a.el,"b-t?",b.offsets)},getText:function(a){return String(a.value)}});Ext.define("Ext.tree.plugin.TreeViewDragDrop",{extend:"Ext.AbstractPlugin",alias:"plugin.treeviewdragdrop",uses:["Ext.tree.ViewDragZone","Ext.tree.ViewDropZone"],dragText:"{0} selected node{1}",allowParentInserts:false,allowContainerDrops:false,appendOnly:false,ddGroup:"TreeDD",expandDelay:1000,enableDrop:true,enableDrag:true,nodeHighlightColor:"c3daf9",nodeHighlightOnDrop:Ext.enableFx,nodeHighlightOnRepair:Ext.enableFx,init:function(a){a.on("render",this.onViewRender,this,{single:true})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onViewRender:function(a){var b=this;if(b.enableDrag){b.dragZone=Ext.create("Ext.tree.ViewDragZone",{view:a,ddGroup:b.dragGroup||b.ddGroup,dragText:b.dragText,repairHighlightColor:b.nodeHighlightColor,repairHighlight:b.nodeHighlightOnRepair})}if(b.enableDrop){b.dropZone=Ext.create("Ext.tree.ViewDropZone",{view:a,ddGroup:b.dropGroup||b.ddGroup,allowContainerDrops:b.allowContainerDrops,appendOnly:b.appendOnly,allowParentInserts:b.allowParentInserts,expandDelay:b.expandDelay,dropHighlightColor:b.nodeHighlightColor,dropHighlight:b.nodeHighlightOnDrop})}}});Ext.define("Ext.tree.View",{extend:"Ext.view.Table",alias:"widget.treeview",loadingCls:Ext.baseCSSPrefix+"grid-tree-loading",expandedCls:Ext.baseCSSPrefix+"grid-tree-node-expanded",expanderSelector:"."+Ext.baseCSSPrefix+"tree-expander",checkboxSelector:"."+Ext.baseCSSPrefix+"tree-checkbox",expanderIconOverCls:Ext.baseCSSPrefix+"tree-expander-over",nodeAnimWrapCls:Ext.baseCSSPrefix+"tree-animator-wrap",blockRefresh:true,rootVisible:true,expandDuration:250,collapseDuration:250,toggleOnDblClick:true,initComponent:function(){var a=this;if(a.initialConfig.animate===undefined){a.animate=Ext.enableFx}a.store=Ext.create("Ext.data.NodeStore",{recursive:true,rootVisible:a.rootVisible,listeners:{beforeexpand:a.onBeforeExpand,expand:a.onExpand,beforecollapse:a.onBeforeCollapse,collapse:a.onCollapse,scope:a}});if(a.node){a.setRootNode(a.node)}a.animQueue={};a.callParent(arguments)},processUIEvent:function(a){if(a.getTarget("."+this.nodeAnimWrapCls,this.el)){return false}return this.callParent(arguments)},onClear:function(){this.store.removeAll()},setRootNode:function(b){var a=this;a.store.setNode(b);a.node=b;if(!a.rootVisible){b.expand()}},onRender:function(){var b=this,a;b.callParent(arguments);a=b.el;a.on({scope:b,delegate:b.expanderSelector,mouseover:b.onExpanderMouseOver,mouseout:b.onExpanderMouseOut});a.on({scope:b,delegate:b.checkboxSelector,click:b.onCheckboxChange})},onCheckboxChange:function(f,a){var c=this,b=f.getTarget(c.getItemSelector(),c.getTargetEl());if(b){c.onCheckChange(c.getRecord(b))}},onCheckChange:function(a){var b=a.get("checked");if(Ext.isBoolean(b)){b=!b;a.set("checked",b);this.fireEvent("checkchange",a,b)}},getChecked:function(){var a=[];this.node.cascadeBy(function(b){if(b.get("checked")){a.push(b)}});return a},isItemChecked:function(a){return a.get("checked")},createAnimWrap:function(k,l){var g="",f=this.panel.headerCt,b=f.getGridColumns(),h=0,m=b.length,n,e=this.getNode(k),a,c;for(;h<m;h++){n=b[h];g+='<th style="width: '+(n.hidden?0:n.getDesiredWidth())+'px; height: 0px;"></th>'}c=Ext.get(e);a=c.insertSibling({tag:"tr",html:['<td colspan="'+f.getColumnCount()+'">','<div class="'+this.nodeAnimWrapCls+'">','<table class="'+Ext.baseCSSPrefix+'grid-table" style="width: '+f.getFullWidth()+'px;"><tbody>',g,"</tbody></table>","</div>","</td>"].join("")},"after");return{record:k,node:e,el:a,expanding:false,collapsing:false,animating:false,animateEl:a.down("div"),targetEl:a.down("tbody")}},getAnimWrap:function(a){if(!this.animate){return null}while(a){if(a.animWrap){return a.animWrap}a=a.parentNode}return null},doAdd:function(b,e,i){var k=this,g=e[0],m=g.parentNode,l=k.all.elements,p=0,f=k.getAnimWrap(m),n,c,h;if(!f||!f.expanding){k.resetScrollers();return k.callParent(arguments)}m=f.record;n=f.targetEl;c=n.dom.childNodes;h=c.length-1;p=i-k.indexOf(m)-1;if(!h||p>=h){n.appendChild(b)}else{Ext.fly(c[p+1]).insertSibling(b,"before",true)}Ext.Array.insert(l,i,b);if(f.isAnimating){k.onExpand(m)}},beginBulkUpdate:function(){this.bulkUpdate=true;this.ownerCt.changingScrollbars=true},endBulkUpdate:function(){var b=this,a=b.ownerCt;b.bulkUpdate=false;b.ownerCt.changingScrollbars=true;b.resetScrollers()},onRemove:function(f,a,b){var e=this,c=e.bulkUpdate;e.doRemove(a,b);if(!c){e.updateIndexes(b)}if(e.store.getCount()===0){e.refresh()}if(!c){e.fireEvent("itemremove",a,b)}},doRemove:function(a,c){var h=this,f=a.parentNode,e=h.all,b=h.getAnimWrap(a),g=e.item(c).dom;if(!b||!b.collapsing){h.resetScrollers();return h.callParent(arguments)}b.targetEl.appendChild(g);e.removeElement(c)},onBeforeExpand:function(e,b,c){var f=this,a;if(!f.rendered||!f.animate){return}if(f.getNode(e)){a=f.getAnimWrap(e);if(!a){a=e.animWrap=f.createAnimWrap(e);a.animateEl.setHeight(0)}else{if(a.collapsing){a.targetEl.select(f.itemSelector).remove()}}a.expanding=true;a.collapsing=false}},onExpand:function(c){var e=this,a=e.animQueue,i=c.getId(),b,f,g,h;if(e.singleExpand){e.ensureSingleExpand(c)}b=e.getAnimWrap(c);if(!b){e.resetScrollers();return}f=b.animateEl;g=b.targetEl;f.stopAnimation();a[i]=true;f.slideIn("t",{duration:e.expandDuration,listeners:{scope:e,lastframe:function(){b.el.insertSibling(g.query(e.itemSelector),"before");b.el.remove();e.resetScrollers();delete b.record.animWrap;delete a[i]}}});b.isAnimating=true},resetScrollers:function(){if(!this.bulkUpdate){var a=this.panel;a.determineScrollbars();a.invalidateScroller()}},onBeforeCollapse:function(e,b,c){var f=this,a;if(!f.rendered||!f.animate){return}if(f.getNode(e)){a=f.getAnimWrap(e);if(!a){a=e.animWrap=f.createAnimWrap(e,c)}else{if(a.expanding){a.targetEl.select(this.itemSelector).remove()}}a.expanding=false;a.collapsing=true}},onCollapse:function(c){var e=this,a=e.animQueue,h=c.getId(),b=e.getAnimWrap(c),f,g;if(!b){e.resetScrollers();return}f=b.animateEl;g=b.targetEl;a[h]=true;f.stopAnimation();f.slideOut("t",{duration:e.collapseDuration,listeners:{scope:e,lastframe:function(){b.el.remove();delete b.record.animWrap;e.resetScrollers();delete a[h]}}});b.isAnimating=true},isAnimating:function(a){return !!this.animQueue[a.getId()]},collectData:function(c){var g=this.callParent(arguments),f=g.rows,a=f.length,e=0,h,b;for(;e<a;e++){h=f[e];b=c[e];if(b.get("qtip")){h.rowAttr='data-qtip="'+b.get("qtip")+'"';if(b.get("qtitle")){h.rowAttr+=' data-qtitle="'+b.get("qtitle")+'"'}}if(b.isExpanded()){h.rowCls=(h.rowCls||"")+" "+this.expandedCls}if(b.isLoading()){h.rowCls=(h.rowCls||"")+" "+this.loadingCls}}return g},expand:function(b,a,e,c){return b.expand(a,e,c)},collapse:function(b,a,e,c){return b.collapse(a,e,c)},toggle:function(a){this[a.isExpanded()?"collapse":"expand"](a)},onItemDblClick:function(a,c,b){this.callParent(arguments);if(this.toggleOnDblClick){this.toggle(a)}},onBeforeItemMouseDown:function(a,c,b,f){if(f.getTarget(this.expanderSelector,c)){return false}return this.callParent(arguments)},onItemClick:function(a,c,b,f){if(f.getTarget(this.expanderSelector,c)){this.toggle(a);return false}return this.callParent(arguments)},onExpanderMouseOver:function(b,a){b.getTarget(this.cellSelector,10,true).addCls(this.expanderIconOverCls)},onExpanderMouseOut:function(b,a){b.getTarget(this.cellSelector,10,true).removeCls(this.expanderIconOverCls)},getTreeStore:function(){return this.panel.store},ensureSingleExpand:function(b){var a=b.parentNode;if(a){a.eachChild(function(c){if(c!==b&&c.isExpanded()){c.collapse()}})}}});Ext.define("Ext.selection.TreeModel",{extend:"Ext.selection.RowModel",alias:"selection.treemodel",pruneRemoved:false,onKeyRight:function(f,b){var c=this.getLastFocused(),a=this.view;if(c){if(c.isExpanded()){this.onKeyDown(f,b)}else{if(!c.isLeaf()){a.expand(c)}}}},onKeyLeft:function(i,f){var h=this.getLastFocused(),c=this.view,b=c.getSelectionModel(),a,g;if(h){a=h.parentNode;if(h.isExpanded()){c.collapse(h)}else{if(a&&!a.isRoot()){if(i.shiftKey){b.selectRange(a,h,i.ctrlKey,"up");b.setLastFocused(a)}else{if(i.ctrlKey){b.setLastFocused(a)}else{b.select(a)}}}}}},onKeyPress:function(g,b){var a=g.getKey(),c,f;if(a===g.SPACE||a===g.ENTER){g.stopEvent();c=this.getLastSelected();if(c){this.view.onCheckChange(c)}}else{this.callParent(arguments)}}});Ext.define("Ext.tree.Column",{extend:"Ext.grid.column.Column",alias:"widget.treecolumn",initComponent:function(){var a=this.renderer||this.defaultRenderer,b=this.scope||window;this.renderer=function(n,q,f,e,m,h,l){var u=[],s=Ext.String.format,w=f.getDepth(),t=Ext.baseCSSPrefix+"tree-",g=t+"elbow-",p=t+"expander",k='<img src="{1}" class="{0}" />',x='<input type="button" role="checkbox" class="{0}" {1} />',i=a.apply(b,arguments),r=f.get("href"),v=f.get("hrefTarget"),c=f.get("cls");while(f){if(!f.isRoot()||(f.isRoot()&&l.rootVisible)){if(f.getDepth()===w){u.unshift(s(k,t+"icon "+t+"icon"+(f.get("icon")?"-inline ":(f.isLeaf()?"-leaf ":"-parent "))+(f.get("iconCls")||""),f.get("icon")||Ext.BLANK_IMAGE_URL));if(f.get("checked")!==null){u.unshift(s(x,(t+"checkbox")+(f.get("checked")?" "+t+"checkbox-checked":""),f.get("checked")?'aria-checked="true"':""));if(f.get("checked")){q.tdCls+=(" "+t+"checked")}}if(f.isLast()){if(f.isExpandable()){u.unshift(s(k,(g+"end-plus "+p),Ext.BLANK_IMAGE_URL))}else{u.unshift(s(k,(g+"end"),Ext.BLANK_IMAGE_URL))}}else{if(f.isExpandable()){u.unshift(s(k,(g+"plus "+p),Ext.BLANK_IMAGE_URL))}else{u.unshift(s(k,(t+"elbow"),Ext.BLANK_IMAGE_URL))}}}else{if(f.isLast()||f.getDepth()===0){u.unshift(s(k,(g+"empty"),Ext.BLANK_IMAGE_URL))}else{if(f.getDepth()!==0){u.unshift(s(k,(g+"line"),Ext.BLANK_IMAGE_URL))}}}}f=f.parentNode}if(r){u.push('<a href="',r,'" target="',v,'">',i,"</a>")}else{u.push(i)}if(c){q.tdCls+=" "+c}return u.join("")};this.callParent(arguments)},defaultRenderer:function(a){return a}});Ext.define("Ext.layout.component.Editor",{alias:["layout.editor"],extend:"Ext.layout.component.Component",onLayout:function(e,c){var f=this,b=f.owner,a=b.autoSize;if(a===true){a={width:"field",height:"field"}}if(a){e=f.getDimension(b,a.width,"Width",e);c=f.getDimension(b,a.height,"Height",c)}f.setTargetSize(e,c);b.field.setSize(e,c)},getDimension:function(a,b,c,f){var e="get"+c;switch(b){case"boundEl":return a.boundEl[e]();case"field":return a.field[e]();default:return f}}});Ext.define("Ext.Action",{constructor:function(a){this.initialConfig=a;this.itemId=a.itemId=(a.itemId||a.id||Ext.id());this.items=[]},isAction:true,setText:function(a){this.initialConfig.text=a;this.callEach("setText",[a])},getText:function(){return this.initialConfig.text},setIconCls:function(a){this.initialConfig.iconCls=a;this.callEach("setIconCls",[a])},getIconCls:function(){return this.initialConfig.iconCls},setDisabled:function(a){this.initialConfig.disabled=a;this.callEach("setDisabled",[a])},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(a){this.initialConfig.hidden=a;this.callEach("setVisible",[!a])},show:function(){this.setHidden(false)},hide:function(){this.setHidden(true)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(b,a){this.initialConfig.handler=b;this.initialConfig.scope=a;this.callEach("setHandler",[b,a])},each:function(b,a){Ext.each(this.items,b,a)},callEach:function(f,c){var b=this.items,e=0,a=b.length;for(;e<a;e++){b[e][f].apply(b[e],c)}},addComponent:function(a){this.items.push(a);a.on("destroy",this.removeComponent,this)},removeComponent:function(a){Ext.Array.remove(this.items,a)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||Ext.global,arguments)}});Ext.define("Ext.slider.Thumb",{requires:["Ext.dd.DragTracker","Ext.util.Format"],topZIndex:10000,constructor:function(a){var b=this;Ext.apply(b,a||{},{cls:Ext.baseCSSPrefix+"slider-thumb",constrain:false});b.callParent([a]);if(b.slider.vertical){Ext.apply(b,Ext.slider.Thumb.Vertical)}},render:function(){var a=this;a.el=a.slider.innerEl.insertFirst({cls:a.cls});if(a.disabled){a.disable()}a.initEvents()},move:function(b,a){if(!a){this.el.setLeft(b)}else{Ext.create("Ext.fx.Anim",{target:this.el,duration:350,to:{left:b}})}},bringToFront:function(){this.el.setStyle("zIndex",this.topZIndex)},sendToBack:function(){this.el.setStyle("zIndex","")},enable:function(){var a=this;a.disabled=false;if(a.el){a.el.removeCls(a.slider.disabledCls)}},disable:function(){var a=this;a.disabled=true;if(a.el){a.el.addCls(a.slider.disabledCls)}},initEvents:function(){var b=this,a=b.el;b.tracker=Ext.create("Ext.dd.DragTracker",{onBeforeStart:Ext.Function.bind(b.onBeforeDragStart,b),onStart:Ext.Function.bind(b.onDragStart,b),onDrag:Ext.Function.bind(b.onDrag,b),onEnd:Ext.Function.bind(b.onDragEnd,b),tolerance:3,autoStart:300,overCls:Ext.baseCSSPrefix+"slider-thumb-over"});b.tracker.initEl(a)},onBeforeDragStart:function(a){if(this.disabled){return false}else{this.slider.promoteThumb(this);return true}},onDragStart:function(b){var a=this;a.el.addCls(Ext.baseCSSPrefix+"slider-thumb-drag");a.dragging=true;a.dragStartValue=a.value;a.slider.fireEvent("dragstart",a.slider,b,a)},onDrag:function(h){var f=this,c=f.slider,b=f.index,g=f.getNewValue(),a,i;if(f.constrain){a=c.thumbs[b+1];i=c.thumbs[b-1];if(i!==undefined&&g<=i.value){g=i.value}if(a!==undefined&&g>=a.value){g=a.value}}c.setValue(b,g,false);c.fireEvent("drag",c,h,f)},getNewValue:function(){var a=this.slider,b=a.innerEl.translatePoints(this.tracker.getXY());return Ext.util.Format.round(a.reverseValue(b.left),a.decimalPrecision)},onDragEnd:function(f){var b=this,a=b.slider,c=b.value;b.el.removeCls(Ext.baseCSSPrefix+"slider-thumb-drag");b.dragging=false;a.fireEvent("dragend",a,f);if(b.dragStartValue!=c){a.fireEvent("changecomplete",a,c,b)}},destroy:function(){Ext.destroy(this.tracker)},statics:{Vertical:{getNewValue:function(){var b=this.slider,c=b.innerEl,e=c.translatePoints(this.tracker.getXY()),a=c.getHeight()-e.top;return Ext.util.Format.round(b.reverseValue(a),b.decimalPrecision)},move:function(b,a){if(!a){this.el.setBottom(b)}else{Ext.create("Ext.fx.Anim",{target:this.el,duration:350,to:{bottom:b}})}}}}});Ext.define("Ext.layout.component.field.Slider",{alias:["layout.sliderfield"],extend:"Ext.layout.component.field.Field",type:"sliderfield",sizeBodyContents:function(a,l){var b=this.owner,g=b.thumbs,c=g.length,k=b.inputEl,h=b.innerEl,f=b.endEl,e=0;for(;e<c;++e){g[e].el.stopAnimation()}if(b.vertical){k.setHeight(l);h.setHeight(Ext.isNumber(l)?l-k.getPadding("t")-f.getPadding("b"):l)}else{k.setWidth(a);h.setWidth(Ext.isNumber(a)?a-k.getPadding("l")-f.getPadding("r"):a)}b.syncThumbs()}});Ext.define("Ext.layout.component.Tab",{alias:["layout.tab"],extend:"Ext.layout.component.Button",beforeLayout:function(){var b=this,a=b.lastClosable!==b.owner.closable;if(a){delete b.adjWidth}return this.callParent(arguments)||a},onLayout:function(){var a=this;a.callParent(arguments);a.lastClosable=a.owner.closable}});Ext.define("Ext.grid.plugin.RowEditing",{extend:"Ext.grid.plugin.Editing",alias:"plugin.rowediting",requires:["Ext.grid.RowEditor"],editStyle:"row",autoCancel:true,errorSummary:true,constructor:function(){var a=this;a.callParent(arguments);if(!a.clicksToMoveEditor){a.clicksToMoveEditor=a.clicksToEdit}a.autoCancel=!!a.autoCancel},destroy:function(){var a=this;Ext.destroy(a.editor);a.callParent(arguments)},startEdit:function(a,e){var c=this,b=c.getEditor();if(c.callParent(arguments)===false){return false}if(b.beforeEdit()!==false){b.startEdit(c.context.record,c.context.column)}},cancelEdit:function(){var a=this;if(a.editing){a.getEditor().cancelEdit();a.callParent(arguments);a.fireEvent("canceledit",a.context)}},completeEdit:function(){var a=this;if(a.editing&&a.validateEdit()){a.editing=false;a.fireEvent("edit",a.context)}},validateEdit:function(){var g=this,f=g.editor,e=g.context,a=e.record,c={},h={},b;f.items.each(function(i){b=i.name;c[b]=i.getValue();h[b]=a.get(b)});Ext.apply(e,{newValues:c,originalValues:h});return g.callParent(arguments)&&g.getEditor().completeEdit()},getEditor:function(){var a=this;if(!a.editor){a.editor=a.initEditor()}return a.editor},initEditor:function(){var c=this,b=c.grid,a=c.view,e=b.headerCt;return Ext.create("Ext.grid.RowEditor",{autoCancel:c.autoCancel,errorSummary:c.errorSummary,fields:e.getGridColumns(),hidden:true,editingPlugin:c,renderTo:a.el})},initEditTriggers:function(){var c=this,b=c.grid,a=c.view,f=b.headerCt,e=c.clicksToMoveEditor===1?"click":"dblclick";c.callParent(arguments);if(c.clicksToMoveEditor!==c.clicksToEdit){c.mon(a,"cell"+e,c.moveEditorByClick,c)}a.on("render",function(){c.mon(f,{add:c.onColumnAdd,remove:c.onColumnRemove,columnresize:c.onColumnResize,columnhide:c.onColumnHide,columnshow:c.onColumnShow,columnmove:c.onColumnMove,scope:c})},c,{single:true})},startEditByClick:function(){var a=this;if(!a.editing||a.clicksToMoveEditor===a.clicksToEdit){a.callParent(arguments)}},moveEditorByClick:function(){var a=this;if(a.editing){a.superclass.startEditByClick.apply(a,arguments)}},onColumnAdd:function(a,c){if(c.isHeader){var e=this,b;e.initFieldAccessors(c);b=e.getEditor();if(b&&b.onColumnAdd){b.onColumnAdd(c)}}},onColumnRemove:function(a,c){if(c.isHeader){var e=this,b=e.getEditor();if(b&&b.onColumnRemove){b.onColumnRemove(c)}e.removeFieldAccessors(c)}},onColumnResize:function(a,e,c){if(e.isHeader){var f=this,b=f.getEditor();if(b&&b.onColumnResize){b.onColumnResize(e,c)}}},onColumnHide:function(a,c){var e=this,b=e.getEditor();if(b&&b.onColumnHide){b.onColumnHide(c)}},onColumnShow:function(a,c){var e=this,b=e.getEditor();if(b&&b.onColumnShow){b.onColumnShow(c)}},onColumnMove:function(a,e,c,g){var f=this,b=f.getEditor();if(b&&b.onColumnMove){b.onColumnMove(e,c,g)}},setColumnField:function(a,c){var b=this;b.callParent(arguments);b.getEditor().setField(a.field,a)}});Ext.define("Ext.tree.Panel",{extend:"Ext.panel.Table",alias:"widget.treepanel",alternateClassName:["Ext.tree.TreePanel","Ext.TreePanel"],requires:["Ext.tree.View","Ext.selection.TreeModel","Ext.tree.Column"],viewType:"treeview",selType:"treemodel",treeCls:Ext.baseCSSPrefix+"tree-panel",deferRowRender:false,lines:true,useArrows:false,singleExpand:false,ddConfig:{enableDrag:true,enableDrop:true},rootVisible:true,displayField:"text",root:null,normalCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible","scroll"],lockedCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible"],constructor:function(a){a=a||{};if(a.animate===undefined){a.animate=Ext.enableFx}this.enableAnimations=a.animate;delete a.animate;this.callParent([a])},initComponent:function(){var b=this,a=[b.treeCls];if(b.useArrows){a.push(Ext.baseCSSPrefix+"tree-arrows");b.lines=false}if(b.lines){a.push(Ext.baseCSSPrefix+"tree-lines")}else{if(!b.useArrows){a.push(Ext.baseCSSPrefix+"tree-no-lines")}}if(Ext.isString(b.store)){b.store=Ext.StoreMgr.lookup(b.store)}else{if(!b.store||Ext.isObject(b.store)&&!b.store.isStore){b.store=Ext.create("Ext.data.TreeStore",Ext.apply({},b.store||{},{root:b.root,fields:b.fields,model:b.model,folderSort:b.folderSort}))}else{if(b.root){b.store=Ext.data.StoreManager.lookup(b.store);b.store.setRootNode(b.root);if(b.folderSort!==undefined){b.store.folderSort=b.folderSort;b.store.sort()}}}}b.viewConfig=Ext.applyIf(b.viewConfig||{},{rootVisible:b.rootVisible,animate:b.enableAnimations,singleExpand:b.singleExpand,node:b.store.getRootNode(),hideHeaders:b.hideHeaders});b.mon(b.store,{scope:b,rootchange:b.onRootChange,clear:b.onClear});b.relayEvents(b.store,["beforeload","load"]);b.store.on({append:b.createRelayer("itemappend"),remove:b.createRelayer("itemremove"),move:b.createRelayer("itemmove"),insert:b.createRelayer("iteminsert"),beforeappend:b.createRelayer("beforeitemappend"),beforeremove:b.createRelayer("beforeitemremove"),beforemove:b.createRelayer("beforeitemmove"),beforeinsert:b.createRelayer("beforeiteminsert"),expand:b.createRelayer("itemexpand"),collapse:b.createRelayer("itemcollapse"),beforeexpand:b.createRelayer("beforeitemexpand"),beforecollapse:b.createRelayer("beforeitemcollapse")});if(!b.columns){if(b.initialConfig.hideHeaders===undefined){b.hideHeaders=true}b.columns=[{xtype:"treecolumn",text:"Name",flex:1,dataIndex:b.displayField}]}if(b.cls){a.push(b.cls)}b.cls=a.join(" ");b.callParent();b.relayEvents(b.getView(),["checkchange"]);if(!b.getView().rootVisible&&!b.getRootNode()){b.setRootNode({expanded:true})}},onClear:function(){this.view.onClear()},setRootNode:function(){return this.store.setRootNode.apply(this.store,arguments)},getRootNode:function(){return this.store.getRootNode()},onRootChange:function(a){this.view.setRootNode(a)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(a){return a.get("checked")},expandAll:function(f,e){var b=this.getRootNode(),c=this.enableAnimations,a=this.getView();if(b){if(!c){a.beginBulkUpdate()}b.expand(true,f,e);if(!c){a.endBulkUpdate()}}},collapseAll:function(f,e){var b=this.getRootNode(),c=this.enableAnimations,a=this.getView();if(b){if(!c){a.beginBulkUpdate()}if(a.rootVisible){b.collapse(true,f,e)}else{b.collapseChildren(true,f,e)}if(!c){a.endBulkUpdate()}}},expandPath:function(m,g,a,h,l){var e=this,c=e.getRootNode(),b=1,f=e.getView(),k,i;g=g||e.getRootNode().idProperty;a=a||"/";if(Ext.isEmpty(m)){Ext.callback(h,l||e,[false,null]);return}k=m.split(a);if(c.get(g)!=k[1]){Ext.callback(h,l||e,[false,c]);return}i=function(){if(++b===k.length){Ext.callback(h,l||e,[true,c]);return}var n=c.findChild(g,k[b]);if(!n){Ext.callback(h,l||e,[false,c]);return}c=n;c.expand(false,i)};c.expand(false,i)},selectPath:function(h,g,f,i,a){var e=this,c,b;g=g||e.getRootNode().idProperty;f=f||"/";c=h.split(f);b=c.pop();e.expandPath(c.join(f),g,f,function(m,l){var k=false;if(m&&l){l=l.findChild(g,b);if(l){e.getSelectionModel().select(l);Ext.callback(i,a||e,[true,l]);k=true}}else{if(l===e.getRootNode()){k=true}}Ext.callback(i,a||e,[k,l])},e)}});Ext.define("Ext.Editor",{extend:"Ext.Component",alias:"widget.editor",requires:["Ext.layout.component.Editor"],componentLayout:"editor",allowBlur:true,revertInvalid:true,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:false,swallowKeys:true,completeOnEnter:true,cancelOnEsc:true,updateEl:false,hidden:true,baseCls:Ext.baseCSSPrefix+"editor",initComponent:function(){var a=this,b=a.field=Ext.ComponentManager.create(a.field,"textfield");Ext.apply(b,{inEditor:true,msgTarget:b.msgTarget=="title"?"title":"qtip"});a.mon(b,{scope:a,blur:{fn:a.onBlur,delay:1},specialkey:a.onSpecialKey});if(b.grow){a.mon(b,"autosize",a.onAutoSize,a,{delay:1})}a.floating={constrain:a.constrain};a.callParent(arguments);a.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onAutoSize:function(){this.doComponentLayout()},onRender:function(b,a){var c=this,f=c.field,e=f.inputEl;c.callParent(arguments);f.render(c.el);if(e){e.dom.name="";if(c.swallowKeys){e.swallowEvent(["keypress","keydown"])}}},onSpecialKey:function(g,f){var e=this,b=f.getKey(),a=e.completeOnEnter&&b==f.ENTER,c=e.cancelOnEsc&&b==f.ESC;if(a||c){f.stopEvent();Ext.defer(function(){if(a){e.completeEdit()}else{e.cancelEdit()}if(g.triggerBlur){g.triggerBlur()}},10)}this.fireEvent("specialkey",this,g,f)},startEdit:function(a,c){var b=this,e=b.field;b.completeEdit();b.boundEl=Ext.get(a);c=Ext.isDefined(c)?c:b.boundEl.dom.innerHTML;if(!b.rendered){b.render(b.parentEl||document.body)}if(b.fireEvent("beforestartedit",b,b.boundEl,c)!==false){b.startValue=c;b.show();e.reset();e.setValue(c);b.realign(true);e.focus(false,10);if(e.autoSize){e.autoSize()}b.editing=true}},realign:function(a){var b=this;if(a===true){b.doComponentLayout()}b.alignTo(b.boundEl,b.alignment,b.offsets)},completeEdit:function(a){var b=this,e=b.field,c;if(!b.editing){return}if(e.assertValue){e.assertValue()}c=b.getValue();if(!e.isValid()){if(b.revertInvalid!==false){b.cancelEdit(a)}return}if(String(c)===String(b.startValue)&&b.ignoreNoChange){b.hideEdit(a);return}if(b.fireEvent("beforecomplete",b,c,b.startValue)!==false){c=b.getValue();if(b.updateEl&&b.boundEl){b.boundEl.update(c)}b.hideEdit(a);b.fireEvent("complete",b,c,b.startValue)}},onShow:function(){var a=this;a.callParent(arguments);if(a.hideEl!==false){a.boundEl.hide()}a.fireEvent("startedit",a.boundEl,a.startValue)},cancelEdit:function(a){var c=this,b=c.startValue,e;if(c.editing){e=c.getValue();c.setValue(b);c.hideEdit(a);c.fireEvent("canceledit",c,e,b)}},hideEdit:function(a){if(a!==true){this.editing=false;this.hide()}},onBlur:function(){var a=this;if(a.allowBlur===true&&a.editing&&a.selectSameEditor!==true){a.completeEdit()}},onHide:function(){var a=this,b=a.field;if(a.editing){a.completeEdit();return}b.blur();if(b.collapse){b.collapse()}if(a.hideEl!==false){a.boundEl.show()}a.callParent(arguments)},setValue:function(a){this.field.setValue(a)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){var a=this;Ext.destroy(a.field);delete a.field;delete a.parentEl;delete a.boundEl;a.callParent(arguments)}});Ext.define("Ext.grid.CellEditor",{extend:"Ext.Editor",constructor:function(a){a=Ext.apply({},a);if(a.field){a.field.monitorTab=false}if(!Ext.isDefined(a.autoSize)){a.autoSize={width:"boundEl"}}this.callParent([a])},onShow:function(){var a=this.boundEl.first();if(a){a.hide()}this.callParent(arguments)},onHide:function(){var a=this.boundEl.first();if(a){a.show()}this.callParent(arguments)},afterRender:function(){this.callParent(arguments);var a=this.field;if(a.isXType("checkboxfield")){a.mon(a.inputEl,"mousedown",this.onCheckBoxMouseDown,this);a.mon(a.inputEl,"click",this.onCheckBoxClick,this)}},onCheckBoxMouseDown:function(){this.completeEdit=Ext.emptyFn},onCheckBoxClick:function(){delete this.completeEdit;this.field.focus(false,10)},alignment:"tl-tl",hideEl:false,cls:Ext.baseCSSPrefix+"small-editor "+Ext.baseCSSPrefix+"grid-editor",shim:false,shadow:false});Ext.define("Ext.grid.plugin.CellEditing",{alias:"plugin.cellediting",extend:"Ext.grid.plugin.Editing",requires:["Ext.grid.CellEditor","Ext.util.DelayedTask"],constructor:function(){this.callParent(arguments);this.editors=Ext.create("Ext.util.MixedCollection",false,function(a){return a.editorId});this.editTask=Ext.create("Ext.util.DelayedTask")},onReconfigure:function(){this.editors.clear();this.callParent()},destroy:function(){var a=this;a.editTask.cancel();a.editors.each(Ext.destroy,Ext);a.editors.clear();a.callParent(arguments)},onBodyScroll:function(){var a=this.getActiveEditor();if(a&&a.field){if(a.field.triggerBlur){a.field.triggerBlur()}else{a.field.blur()}}},initCancelTriggers:function(){var c=this,b=c.grid,a=b.view;a.addElListener("mousewheel",c.cancelEdit,c);c.mon(a,"bodyscroll",c.onBodyScroll,c);c.mon(b,{columnresize:c.cancelEdit,columnmove:c.cancelEdit,scope:c})},startEdit:function(a,g){var e=this,f=a.get(g.dataIndex),c=e.getEditingContext(a,g),b;a=c.record;g=c.column;e.completeEdit();c.originalValue=c.value=f;if(e.beforeEdit(c)===false||e.fireEvent("beforeedit",c)===false||c.cancel){return false}if(g&&!g.getEditor(a)){return false}b=e.getEditor(a,g);if(b){e.context=c;e.setActiveEditor(b);e.setActiveRecord(a);e.setActiveColumn(g);e.editTask.delay(15,b.startEdit,b,[e.getCell(a,g),f])}else{e.grid.getView().getEl(g).focus((Ext.isWebKit||Ext.isIE)?10:false)}},completeEdit:function(){var a=this.getActiveEditor();if(a){a.completeEdit()}},setActiveEditor:function(a){this.activeEditor=a},getActiveEditor:function(){return this.activeEditor},setActiveColumn:function(a){this.activeColumn=a},getActiveColumn:function(){return this.activeColumn},setActiveRecord:function(a){this.activeRecord=a},getActiveRecord:function(){return this.activeRecord},getEditor:function(a,e){var g=this,f=g.editors,c=e.getItemId(),b=f.getByKey(c);if(b){return b}else{b=e.getEditor(a);if(!b){return false}if(!(b instanceof Ext.grid.CellEditor)){b=Ext.create("Ext.grid.CellEditor",{editorId:c,field:b})}b.parentEl=g.grid.getEditorParent();b.on({scope:g,specialkey:g.onSpecialKey,complete:g.onEditComplete,canceledit:g.cancelEdit});f.add(b);return b}},setColumnField:function(b,c){var a=this.editors.getByKey(b.getItemId());Ext.destroy(a,b.field);this.editors.removeAtKey(b.getItemId());this.callParent(arguments)},getCell:function(a,b){return this.grid.getView().getCell(a,b)},onSpecialKey:function(a,f,c){var b=this.grid,g;if(c.getKey()===c.TAB){c.stopEvent();g=b.getSelectionModel();if(g.onEditorTab){g.onEditorTab(this,c)}}},onEditComplete:function(b,h,a){var g=this,e=g.grid,i=e.getSelectionModel(),f=g.getActiveColumn(),c;if(f){c=f.dataIndex;g.setActiveEditor(null);g.setActiveColumn(null);g.setActiveRecord(null);delete i.wasEditing;if(!g.validateEdit()){return}if(h!==a){g.context.record.set(c,h)}else{e.getView().getEl(f).focus()}g.context.value=h;g.fireEvent("edit",g,g.context)}},cancelEdit:function(){var c=this,b=c.getActiveEditor(),a=c.grid.getView().getEl(c.getActiveColumn());c.setActiveEditor(null);c.setActiveColumn(null);c.setActiveRecord(null);if(b){b.cancelEdit();a.focus()}},startEditByPosition:function(a){var e=this,c=e.grid,g=c.getSelectionModel(),b=c.store.getAt(a.row),f=c.headerCt.getHeaderAtIndex(a.column);if(g.selectByPosition){g.selectByPosition(a)}e.startEdit(b,f)}});Ext.define("Ext.slider.Multi",{extend:"Ext.form.field.Base",alias:"widget.multislider",alternateClassName:"Ext.slider.MultiSlider",requires:["Ext.slider.Thumb","Ext.slider.Tip","Ext.Number","Ext.util.Format","Ext.Template","Ext.layout.component.field.Slider"],fieldSubTpl:['<div id="{id}" class="'+Ext.baseCSSPrefix+'slider {fieldCls} {vertical}" aria-valuemin="{minValue}" aria-valuemax="{maxValue}" aria-valuenow="{value}" aria-valuetext="{value}">','<div id="{cmpId}-endEl" class="'+Ext.baseCSSPrefix+'slider-end" role="presentation">','<div id="{cmpId}-innerEl" class="'+Ext.baseCSSPrefix+'slider-inner" role="presentation">','<a id="{cmpId}-focusEl" class="'+Ext.baseCSSPrefix+'slider-focus" href="#" tabIndex="-1" hidefocus="on" role="presentation"></a>',"</div>","</div>","</div>",{disableFormats:true,compiled:true}],vertical:false,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:true,animate:true,dragging:false,constrainThumbs:true,componentLayout:"sliderfield",useTips:true,tipText:null,ariaRole:"slider",initValue:function(){var f=this,c=Ext.value,b=c(f.values,[c(f.value,c(f.minValue,0))]),e=0,a=b.length;f.originalValue=b;for(;e<a;e++){f.addThumb(b[e])}},initComponent:function(){var c=this,a,b;c.thumbs=[];c.keyIncrement=Math.max(c.increment,c.keyIncrement);c.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend");if(c.vertical){Ext.apply(c,Ext.slider.Multi.Vertical)}c.callParent();if(c.useTips){a=c.tipText?{getText:c.tipText}:{};c.plugins=c.plugins||[];Ext.each(c.plugins,function(e){if(e.isSliderTip){b=true;return false}});if(!b){c.plugins.push(Ext.create("Ext.slider.Tip",a))}}},addThumb:function(c){var b=this,a=Ext.create("Ext.slider.Thumb",{value:c,slider:b,index:b.thumbs.length,constrain:b.constrainThumbs});b.thumbs.push(a);if(b.rendered){a.render()}return a},promoteThumb:function(c){var a=this.thumbs,f=a.length,g,b,e;for(e=0;e<f;e++){b=a[e];if(b==c){b.bringToFront()}else{b.sendToBack()}}},onRender:function(){var f=this,e=0,b=f.thumbs,a=b.length,c;Ext.applyIf(f.subTplData,{vertical:f.vertical?Ext.baseCSSPrefix+"slider-vert":Ext.baseCSSPrefix+"slider-horz",minValue:f.minValue,maxValue:f.maxValue,value:f.value});f.addChildEls("endEl","innerEl","focusEl");f.callParent(arguments);for(;e<a;e++){b[e].render()}c=f.innerEl.down("."+Ext.baseCSSPrefix+"slider-thumb");f.halfThumb=(f.vertical?c.getHeight():c.getWidth())/2},onChange:function(b,a){this.setValue(a,undefined,true)},initEvents:function(){var a=this;a.mon(a.el,{scope:a,mousedown:a.onMouseDown,keydown:a.onKeyDown,change:a.onChange});a.focusEl.swallowEvent("click",true)},onMouseDown:function(k){var g=this,h=false,f=0,b=g.thumbs,a=b.length,c;if(g.disabled){return}for(;f<a;f++){h=h||k.target==b[f].el.dom}if(g.clickToChange&&!h){c=g.innerEl.translatePoints(k.getXY());g.onClickChange(c)}g.focus()},onClickChange:function(c){var e=this,a,b;if(c.top>e.clickRange[0]&&c.top<e.clickRange[1]){a=e.getNearest(c,"left");if(!a.disabled){b=a.index;e.setValue(b,Ext.util.Format.round(e.reverseValue(c.left),e.decimalPrecision),undefined,true)}}},getNearest:function(p,b){var m=this,r=b=="top"?m.innerEl.getHeight()-p[b]:p[b],k=m.reverseValue(r),n=(m.maxValue-m.minValue)+5,g=0,c=null,h=m.thumbs,e=0,f=h.length,a,q,l;for(;e<f;e++){a=m.thumbs[e];q=a.value;l=Math.abs(q-k);if(Math.abs(l<=n)){c=a;g=e;n=l}}return c},onKeyDown:function(c){var b=this,a,f;if(b.disabled||b.thumbs.length!==1){c.preventDefault();return}a=c.getKey();switch(a){case c.UP:case c.RIGHT:c.stopEvent();f=c.ctrlKey?b.maxValue:b.getValue(0)+b.keyIncrement;b.setValue(0,f,undefined,true);break;case c.DOWN:case c.LEFT:c.stopEvent();f=c.ctrlKey?b.minValue:b.getValue(0)-b.keyIncrement;b.setValue(0,f,undefined,true);break;default:c.preventDefault()}},afterRender:function(){var g=this,f=0,b=g.thumbs,a=b.length,e,c;g.callParent(arguments);for(;f<a;f++){e=b[f];if(e.value!==undefined){c=g.normalizeValue(e.value);if(c!==e.value){g.setValue(f,c,false)}else{e.move(g.translateValue(c),false)}}}},getRatio:function(){var a=this.innerEl.getWidth(),b=this.maxValue-this.minValue;return b===0?a:(a/b)},normalizeValue:function(a){var b=this;a=Ext.Number.snap(a,this.increment,this.minValue,this.maxValue);a=Ext.util.Format.round(a,b.decimalPrecision);a=Ext.Number.constrain(a,b.minValue,b.maxValue);return a},setMinValue:function(g){var f=this,e=0,b=f.thumbs,a=b.length,c;f.minValue=g;if(f.rendered){f.inputEl.dom.setAttribute("aria-valuemin",g)}for(;e<a;++e){c=b[e];c.value=c.value<g?g:c.value}f.syncThumbs()},setMaxValue:function(g){var f=this,e=0,b=f.thumbs,a=b.length,c;f.maxValue=g;if(f.rendered){f.inputEl.dom.setAttribute("aria-valuemax",g)}for(;e<a;++e){c=b[e];c.value=c.value>g?g:c.value}f.syncThumbs()},setValue:function(c,g,b,f){var e=this,a=e.thumbs[c];g=e.normalizeValue(g);if(g!==a.value&&e.fireEvent("beforechange",e,g,a.value,a)!==false){a.value=g;if(e.rendered){e.inputEl.set({"aria-valuenow":g,"aria-valuetext":g});a.move(e.translateValue(g),Ext.isDefined(b)?b!==false:e.animate);e.fireEvent("change",e,g,a);if(f){e.fireEvent("changecomplete",e,g,a)}}}},translateValue:function(a){var b=this.getRatio();return(a*b)-(this.minValue*b)-this.halfThumb},reverseValue:function(b){var a=this.getRatio();return(b+(this.minValue*a))/a},focus:function(){this.focusEl.focus(10)},onDisable:function(){var g=this,e=0,b=g.thumbs,a=b.length,c,f,h;g.callParent();for(;e<a;e++){c=b[e];f=c.el;c.disable();if(Ext.isIE){h=f.getXY();f.hide();g.innerEl.addCls(g.disabledCls).dom.disabled=true;if(!g.thumbHolder){g.thumbHolder=g.endEl.createChild({cls:Ext.baseCSSPrefix+"slider-thumb "+g.disabledCls})}g.thumbHolder.show().setXY(h)}}},onEnable:function(){var g=this,e=0,b=g.thumbs,a=b.length,c,f;this.callParent();for(;e<a;e++){c=b[e];f=c.el;c.enable();if(Ext.isIE){g.innerEl.removeCls(g.disabledCls).dom.disabled=false;if(g.thumbHolder){g.thumbHolder.hide()}f.show();g.syncThumbs()}}},syncThumbs:function(){if(this.rendered){var a=this.thumbs,c=a.length,b=0;for(;b<c;b++){a[b].move(this.translateValue(a[b].value))}}},getValue:function(a){return Ext.isNumber(a)?this.thumbs[a].value:this.getValues()},getValues:function(){var c=[],e=0,b=this.thumbs,a=b.length;for(;e<a;e++){c.push(b[e].value)}return c},getSubmitValue:function(){var a=this;return(a.disabled||!a.submitValue)?null:a.getValue()},reset:function(){var b=this,a=Ext.Array;a.forEach(a.from(b.originalValue),function(e,c){b.setValue(c,e)});b.clearInvalid();delete b.wasValid},beforeDestroy:function(){var a=this;Ext.destroy(a.innerEl,a.endEl,a.focusEl);Ext.each(a.thumbs,function(b){Ext.destroy(b)},a);a.callParent()},statics:{Vertical:{getRatio:function(){var b=this.innerEl.getHeight(),a=this.maxValue-this.minValue;return b/a},onClickChange:function(e){var f=this,b,c,a;if(e.left>f.clickRange[0]&&e.left<f.clickRange[1]){b=f.getNearest(e,"top");if(!b.disabled){c=b.index;a=f.reverseValue(f.innerEl.getHeight()-e.top);f.setValue(c,Ext.util.Format.round(f.minValue+a,f.decimalPrecision),undefined,true)}}}}}});Ext.define("Ext.slider.Single",{extend:"Ext.slider.Multi",alias:["widget.slider","widget.sliderfield"],alternateClassName:["Ext.Slider","Ext.form.SliderField","Ext.slider.SingleSlider","Ext.slider.Slider"],getValue:function(){return this.callParent([0])},setValue:function(e,b){var c=Ext.toArray(arguments),a=c.length;if(a==1||(a<=3&&typeof arguments[1]!="number")){c.unshift(0)}return this.callParent(c)},getNearest:function(){return this.thumbs[0]}});Ext.define("Ext.tab.Tab",{extend:"Ext.button.Button",alias:"widget.tab",requires:["Ext.layout.component.Tab","Ext.util.KeyNav"],componentLayout:"tab",isTab:true,baseCls:Ext.baseCSSPrefix+"tab",activeCls:"active",closableCls:"closable",closable:true,closeText:"Close Tab",active:false,scale:false,position:"top",initComponent:function(){var a=this;a.addEvents("activate","deactivate","beforeclose","close");a.callParent(arguments);if(a.card){a.setCard(a.card)}},onRender:function(){var b=this,a=b.up("tabbar"),c=b.up("tabpanel");b.addClsWithUI(b.position);b.syncClosableUI();if(!b.minWidth){b.minWidth=(a)?a.minTabWidth:b.minWidth;if(!b.minWidth&&c){b.minWidth=c.minTabWidth}if(b.minWidth&&b.iconCls){b.minWidth+=25}}if(!b.maxWidth){b.maxWidth=(a)?a.maxTabWidth:b.maxWidth;if(!b.maxWidth&&c){b.maxWidth=c.maxTabWidth}}b.callParent(arguments);if(b.active){b.activate(true)}b.syncClosableElements();b.keyNav=Ext.create("Ext.util.KeyNav",b.el,{enter:b.onEnterKey,del:b.onDeleteKey,scope:b})},enable:function(a){var b=this;b.callParent(arguments);b.removeClsWithUI(b.position+"-disabled");return b},disable:function(a){var b=this;b.callParent(arguments);b.addClsWithUI(b.position+"-disabled");return b},onDestroy:function(){var a=this;if(a.closeEl){a.closeEl.un("click",Ext.EventManager.preventDefault);a.closeEl=null}Ext.destroy(a.keyNav);delete a.keyNav;a.callParent(arguments)},setClosable:function(a){var b=this;a=(!arguments.length||!!a);if(b.closable!=a){b.closable=a;if(b.card){b.card.closable=a}b.syncClosableUI();if(b.rendered){b.syncClosableElements();b.doComponentLayout();if(b.ownerCt){b.ownerCt.doLayout()}}}},syncClosableElements:function(){var a=this;if(a.closable){if(!a.closeEl){a.closeEl=a.el.createChild({tag:"a",cls:a.baseCls+"-close-btn",href:"#",title:a.closeText}).on("click",Ext.EventManager.preventDefault)}}else{var b=a.closeEl;if(b){b.un("click",Ext.EventManager.preventDefault);b.remove();a.closeEl=null}}},syncClosableUI:function(){var b=this,a=[b.closableCls,b.closableCls+"-"+b.position];if(b.closable){b.addClsWithUI(a)}else{b.removeClsWithUI(a)}},setCard:function(a){var b=this;b.card=a;b.setText(b.title||a.title);b.setIconCls(b.iconCls||a.iconCls)},onCloseClick:function(){var a=this;if(a.fireEvent("beforeclose",a)!==false){if(a.tabBar){if(a.tabBar.closeTab(a)===false){return}}else{a.fireEvent("close",a)}}},fireClose:function(){this.fireEvent("close",this)},onEnterKey:function(b){var a=this;if(a.tabBar){a.tabBar.onClick(b,a.el)}},onDeleteKey:function(b){var a=this;if(a.closable){a.onCloseClick()}},activate:function(b){var a=this;a.active=true;a.addClsWithUI([a.activeCls,a.position+"-"+a.activeCls]);if(b!==true){a.fireEvent("activate",a)}},deactivate:function(b){var a=this;a.active=false;a.removeClsWithUI([a.activeCls,a.position+"-"+a.activeCls]);if(b!==true){a.fireEvent("deactivate",a)}}});Ext.define("Ext.tab.Bar",{extend:"Ext.panel.Header",alias:"widget.tabbar",baseCls:Ext.baseCSSPrefix+"tab-bar",requires:["Ext.tab.Tab","Ext.FocusManager"],isTabBar:true,defaultType:"tab",plain:false,renderTpl:['<div id="{id}-body" class="{baseCls}-body <tpl if="bodyCls"> {bodyCls}</tpl> <tpl if="ui"> {baseCls}-body-{ui}<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl></tpl>"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>></div>','<div id="{id}-strip" class="{baseCls}-strip<tpl if="ui"> {baseCls}-strip-{ui}<tpl for="uiCls"> {parent.baseCls}-strip-{parent.ui}-{.}</tpl></tpl>"></div>'],initComponent:function(){var b=this,a;if(b.plain){b.setUI(b.ui+"-plain")}b.addClsWithUI(b.dock);b.addEvents("change");b.addChildEls("body","strip");b.callParent(arguments);b.layout.align=(b.orientation=="vertical")?"left":"top";b.layout.overflowHandler=Ext.create("Ext.layout.container.boxOverflow.Scroller",b.layout);b.remove(b.titleCmp);delete b.titleCmp;a=b.orientation=="vertical"?["up","down"]:["left","right"];Ext.FocusManager.subscribe(b,{keys:a});Ext.apply(b.renderData,{bodyCls:b.bodyCls})},onAdd:function(a){a.position=this.dock;this.callParent(arguments)},onRemove:function(a){var b=this;if(a===b.previousTab){b.previousTab=null}if(b.items.getCount()===0){b.activeTab=null}b.callParent(arguments)},afterRender:function(){var a=this;a.mon(a.el,{scope:a,click:a.onClick,delegate:"."+Ext.baseCSSPrefix+"tab"});a.callParent(arguments)},afterComponentLayout:function(){var a=this;a.callParent(arguments);a.strip.setWidth(a.el.getWidth())},onClick:function(c,b){var a=Ext.getCmp(b.id),f=this.tabPanel;b=c.getTarget();if(a&&a.isDisabled&&!a.isDisabled()){if(a.closable&&b===a.closeEl.dom){a.onCloseClick()}else{if(f){f.setActiveTab(a.card)}else{this.setActiveTab(a)}a.focus()}}},closeTab:function(c){var e=this,b=c.card,f=e.tabPanel,a;if(b&&b.fireEvent("beforeclose",b)===false){return false}if(c.active&&e.items.getCount()>1){a=e.previousTab||c.next("tab")||e.items.first();e.setActiveTab(a);if(f){f.setActiveTab(a.card)}}c.fireClose();e.remove(c);if(f&&b){b.fireEvent("close",b);f.remove(b)}if(a){a.focus()}},setActiveTab:function(a){if(a.disabled){return}var b=this;if(b.activeTab){b.previousTab=b.activeTab;b.activeTab.deactivate()}a.activate();if(b.rendered){b.layout.layout();a.el&&a.el.scrollIntoView(b.layout.getRenderTarget())}b.activeTab=a;b.fireEvent("change",b,a,a.card)}});Ext.define("Ext.tab.Panel",{extend:"Ext.panel.Panel",alias:"widget.tabpanel",alternateClassName:["Ext.TabPanel"],requires:["Ext.layout.container.Card","Ext.tab.Bar"],tabPosition:"top",removePanelHeader:true,plain:false,itemCls:"x-tabpanel-child",minTabWidth:undefined,maxTabWidth:undefined,deferredRender:true,initComponent:function(){var c=this,b=c.dockedItems||[],a=c.activeTab||0;c.layout=Ext.create("Ext.layout.container.Card",Ext.apply({owner:c,deferredRender:c.deferredRender,itemCls:c.itemCls},c.layout));c.tabBar=Ext.create("Ext.tab.Bar",Ext.apply({},c.tabBar,{dock:c.tabPosition,plain:c.plain,border:c.border,cardLayout:c.layout,tabPanel:c}));if(b&&!Ext.isArray(b)){b=[b]}b.push(c.tabBar);c.dockedItems=b;c.addEvents("beforetabchange","tabchange");c.callParent(arguments);c.setActiveTab(a);c.on("afterlayout",c.afterInitialLayout,c,{single:true})},afterInitialLayout:function(){var b=this,a=b.getComponent(b.activeTab);if(a){b.layout.setActiveItem(a)}},setActiveTab:function(a){var c=this,b;a=c.getComponent(a);if(a){b=c.getActiveTab();if(b&&b!==a&&c.fireEvent("beforetabchange",c,a,b)===false){return false}c.tabBar.setActiveTab(a.tab);c.activeTab=a;if(c.rendered){c.layout.setActiveItem(a)}if(b&&b!==a){c.fireEvent("tabchange",c,a,b)}}},getActiveTab:function(){return this.activeTab},getTabBar:function(){return this.tabBar},onAdd:function(f,c){var e=this,b=f.tabConfig||{},a={xtype:"tab",card:f,disabled:f.disabled,closable:f.closable,hidden:f.hidden,tabBar:e.tabBar};if(f.closeText){a.closeText=f.closeText}b=Ext.applyIf(b,a);f.tab=e.tabBar.insert(c,b);f.on({scope:e,enable:e.onItemEnable,disable:e.onItemDisable,beforeshow:e.onItemBeforeShow,iconchange:e.onItemIconChange,titlechange:e.onItemTitleChange});if(f.isPanel){if(e.removePanelHeader){f.preventHeader=true;if(f.rendered){f.updateHeader()}}if(f.isPanel&&e.border){f.setBorder(false)}}if(this.rendered&&e.items.getCount()===1){e.setActiveTab(0)}},onItemEnable:function(a){a.tab.enable()},onItemDisable:function(a){a.tab.disable()},onItemBeforeShow:function(a){if(a!==this.activeTab){this.setActiveTab(a);return false}},onItemIconChange:function(b,a){b.tab.setIconCls(a);this.getTabBar().doLayout()},onItemTitleChange:function(a,b){a.tab.setText(b);this.getTabBar().doLayout()},doRemove:function(e,b){var c=this,a=c.items,f=a.getCount()>1;if(c.destroying||!f){c.activeTab=null}else{if(e===c.activeTab){c.setActiveTab(e.next()||a.getAt(0))}}c.callParent(arguments);delete e.tab.card;delete e.tab},onRemove:function(c,a){var b=this;c.un({scope:b,enable:b.onItemEnable,disable:b.onItemDisable,beforeshow:b.onItemBeforeShow});if(!b.destroying&&c.tab.ownerCt==b.tabBar){b.tabBar.remove(c.tab)}}});Ext.define("Ext.grid.plugin.HeaderResizer",{extend:"Ext.util.Observable",requires:["Ext.dd.DragTracker","Ext.util.Region"],alias:"plugin.gridheaderresizer",disabled:false,configs:{dynamic:true},colHeaderCls:Ext.baseCSSPrefix+"column-header",minColWidth:40,maxColWidth:1000,wResizeCursor:"col-resize",eResizeCursor:"col-resize",init:function(a){this.headerCt=a;a.on("render",this.afterHeaderRender,this,{single:true})},destroy:function(){if(this.tracker){this.tracker.destroy()}},afterHeaderRender:function(){var b=this.headerCt,a=b.el;b.mon(a,"mousemove",this.onHeaderCtMouseMove,this);this.tracker=Ext.create("Ext.dd.DragTracker",{disabled:this.disabled,onBeforeStart:Ext.Function.bind(this.onBeforeStart,this),onStart:Ext.Function.bind(this.onStart,this),onDrag:Ext.Function.bind(this.onDrag,this),onEnd:Ext.Function.bind(this.onEnd,this),tolerance:3,autoStart:300,el:a})},onHeaderCtMouseMove:function(c,a){if(this.headerCt.dragging){if(this.activeHd){this.activeHd.el.dom.style.cursor="";delete this.activeHd}}else{var g=c.getTarget("."+this.colHeaderCls,3,true),b,f;if(g){b=Ext.getCmp(g.id);if(b.isOnLeftEdge(c)){f=b.previousNode("gridcolumn:not([hidden])")}else{if(b.isOnRightEdge(c)){f=b}else{f=null}}if(f){if(f.isGroupHeader){f=f.down(":not([isGroupHeader]):not([hidden]):last")}if(f&&!(f.fixed||(f.resizable===false)||this.disabled)){this.activeHd=f;b.el.dom.style.cursor=this.eResizeCursor}}else{b.el.dom.style.cursor="";delete this.activeHd}}}},onBeforeStart:function(b){var a=b.getTarget();this.dragHd=this.activeHd;if(!!this.dragHd&&!Ext.fly(a).hasCls("x-column-header-trigger")&&!this.headerCt.dragging){this.tracker.constrainTo=this.getConstrainRegion();return true}else{this.headerCt.dragging=false;return false}},getConstrainRegion:function(){var a=this.dragHd.el,b=Ext.util.Region.getRegion(a);return b.adjust(0,this.maxColWidth-a.getWidth(),0,this.minColWidth)},onStart:function(w){var x=this,h=x.dragHd,b=h.el,q=b.getWidth(),k=x.headerCt,m=w.getTarget();if(x.dragHd&&!Ext.fly(m).hasCls("x-column-header-trigger")){k.dragging=true}x.origWidth=q;if(!x.dynamic){var f=b.getXY(),u=k.up("[scrollerOwner]"),g=x.dragHd.up(":not([isGroupHeader])"),l=g.up(),c=u.getLhsMarker(),p=u.getRhsMarker(),a=p.parent(),i=a.getLeft(true),v=a.getTop(true),s=a.translatePoints(f),r=l.body.getHeight()+k.getHeight(),n=s.top-v;c.setTop(n);p.setTop(n);c.setHeight(r);p.setHeight(r);c.setLeft(s.left-i);p.setLeft(s.left+q-i)}},onDrag:function(h){if(!this.dynamic){var g=this.tracker.getXY("point"),a=this.headerCt.up("[scrollerOwner]"),i=a.getRhsMarker(),c=i.parent(),b=c.translatePoints(g),f=c.getLeft(true);i.setLeft(b.left-f)}else{this.doResize()}},onEnd:function(h){this.headerCt.dragging=false;if(this.dragHd){if(!this.dynamic){var g=this.dragHd,c=this.headerCt.up("[scrollerOwner]"),f=c.getLhsMarker(),k=c.getRhsMarker(),a=g.getWidth(),i=this.tracker.getOffset("point"),b=-9999;f.setLeft(b);k.setLeft(b)}this.doResize()}},doResize:function(){if(this.dragHd){var b=this.dragHd,a,c=this.tracker.getOffset("point");if(b.flex){delete b.flex}this.headerCt.suspendLayout=true;b.setWidth(this.origWidth+c[0],false);if(this.headerCt.forceFit){a=b.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(a){delete a.flex;a.setWidth(a.getWidth()-c[0],false)}}this.headerCt.suspendLayout=false;this.headerCt.doComponentLayout(this.headerCt.getFullWidth())}},disable:function(){this.disabled=true;if(this.tracker){this.tracker.disable()}},enable:function(){this.disabled=false;if(this.tracker){this.tracker.enable()}}});Ext.define("Ext.grid.ColumnLayout",{extend:"Ext.layout.container.HBox",alias:"layout.gridcolumn",type:"column",reserveOffset:false,shrinkToFit:false,clearInnerCtOnLayout:true,beforeLayout:function(){var h=this,c=0,b=h.getLayoutItems(),a=b.length,g,f,e;if(!Ext.isDefined(h.availableSpaceOffset)){e=h.owner.up("tablepanel").verticalScroller;h.availableSpaceOffset=e?e.width-1:0}f=h.callParent(arguments);h.innerCt.setHeight(23);for(;c<a;c++){g=b[c];g.el.setStyle({height:"auto"});g.titleContainer.setStyle({height:"auto",paddingTop:"0"});if(g.componentLayout&&g.componentLayout.lastComponentSize){g.componentLayout.lastComponentSize.height=g.el.dom.offsetHeight}}return f},calculateChildBoxes:function(m,c){var k=this,b=k.callParent(arguments),g=b.boxes,a=b.meta,h=g.length,e=0,f,l;if(c.width&&!k.isHeader){if(k.owner.forceFit){for(;e<h;e++){f=g[e];l=f.component;l.minWidth=Ext.grid.plugin.HeaderResizer.prototype.minColWidth;l.flex=f.width}b=k.callParent(arguments)}else{if(a.tooNarrow){c.width=a.desiredSize}}}return b},afterLayout:function(){var n=this,a=n.owner,m,p,h,b,g,c,f=0,l,k,e;n.callParent(arguments);if(!n.owner.hideHeaders){if(a.lockableInjected){m=a.up("tablepanel").up("tablepanel");p=m.query("headercontainer:not([isHeader])");h=(p[0]===a)?p[1]:p[0];if(!h.rendered){return}g=h.layout.getRenderTarget().getViewSize().height;if(!g){return}b=this.getRenderTarget().getViewSize().height;if(!b){return}m.componentLayout.layoutBusy=true;e=b;if(b>g){h.layout.align="stretch";h.setCalculatedSize(h.getWidth(),a.getHeight(),h.ownerCt);delete h.layout.align;c=h.up("tablepanel")}else{if(g>b){e=g;this.align="stretch";a.setCalculatedSize(a.getWidth(),h.getHeight(),a.ownerCt);delete this.align;c=a.up("tablepanel")}}m.componentLayout.layoutBusy=false;l=p[0].layout.getLayoutItems().concat(p[1].layout.getLayoutItems())}else{e=this.getRenderTarget().getViewSize().height;l=n.getLayoutItems()}k=l.length;for(;f<k;f++){l[f].setPadding(e)}if(c){setTimeout(function(){c.doLayout()},1)}}},updateInnerCtSize:function(b,e){var c=this,a;if(!c.isHeader){c.tooNarrow=e.meta.tooNarrow;a=(c.reserveOffset?c.availableSpaceOffset:0);if(e.meta.tooNarrow){b.width=e.meta.desiredSize+a}else{b.width+=a}}return c.callParent(arguments)},doOwnerCtLayouts:function(){var a=this.owner.ownerCt;if(!a.componentLayout.layoutBusy){a.doComponentLayout()}}});Ext.define("Ext.view.TableChunker",{singleton:true,requires:["Ext.XTemplate"],metaTableTpl:["{[this.openTableWrap()]}",'<table class="'+Ext.baseCSSPrefix+"grid-table "+Ext.baseCSSPrefix+'grid-table-resizer" border="0" cellspacing="0" cellpadding="0" {[this.embedFullWidth()]}>',"<tbody>",'<tr class="'+Ext.baseCSSPrefix+'grid-header-row">','<tpl for="columns">','<th class="'+Ext.baseCSSPrefix+'grid-col-resizer-{id}" style="width: {width}px; height: 0px;"></th>',"</tpl>","</tr>","{[this.openRows()]}","{row}",'<tpl for="features">',"{[this.embedFeature(values, parent, xindex, xcount)]}","</tpl>","{[this.closeRows()]}","</tbody>","</table>","{[this.closeTableWrap()]}"],constructor:function(){Ext.XTemplate.prototype.recurse=function(b,a){return this.apply(a?b[a]:b)}},embedFeature:function(b,e,a,f){var c="";if(!b.disabled){c=b.getFeatureTpl(b,e,a,f)}return c},embedFullWidth:function(){return'style="width: {fullWidth}px;"'},openRows:function(){return'<tpl for="rows">'},closeRows:function(){return"</tpl>"},metaRowTpl:['<tr class="'+Ext.baseCSSPrefix+'grid-row {addlSelector} {[this.embedRowCls()]}" {[this.embedRowAttr()]}>','<tpl for="columns">','<td class="{cls} '+Ext.baseCSSPrefix+"grid-cell "+Ext.baseCSSPrefix+'grid-cell-{columnId} {{id}-modified} {{id}-tdCls} {[this.firstOrLastCls(xindex, xcount)]}" {{id}-tdAttr}><div unselectable="on" class="'+Ext.baseCSSPrefix+"grid-cell-inner "+Ext.baseCSSPrefix+'unselectable" style="{{id}-style}; text-align: {align};">{{id}}</div></td>',"</tpl>","</tr>"],firstOrLastCls:function(b,c){var a="";if(b===1){a=Ext.baseCSSPrefix+"grid-cell-first"}else{if(b===c){a=Ext.baseCSSPrefix+"grid-cell-last"}}return a},embedRowCls:function(){return"{rowCls}"},embedRowAttr:function(){return"{rowAttr}"},openTableWrap:function(){return""},closeTableWrap:function(){return""},getTableTpl:function(l,b){var k,h={openRows:this.openRows,closeRows:this.closeRows,embedFeature:this.embedFeature,embedFullWidth:this.embedFullWidth,openTableWrap:this.openTableWrap,closeTableWrap:this.closeTableWrap},g={},c=l.features||[],n=c.length,f=0,m={embedRowCls:this.embedRowCls,embedRowAttr:this.embedRowAttr,firstOrLastCls:this.firstOrLastCls},e=Array.prototype.slice.call(this.metaRowTpl,0),a;for(;f<n;f++){if(!c[f].disabled){c[f].mutateMetaRowTpl(e);Ext.apply(m,c[f].getMetaRowTplFragments());Ext.apply(g,c[f].getFragmentTpl());Ext.apply(h,c[f].getTableFragments())}}e=Ext.create("Ext.XTemplate",e.join(""),m);l.row=e.applyTemplate(l);a=Ext.create("Ext.XTemplate",this.metaTableTpl.join(""),h);k=a.applyTemplate(l);if(!b){k=Ext.create("Ext.XTemplate",k,g)}return k}});Ext.define("Ext.view.DragZone",{extend:"Ext.dd.DragZone",containerScroll:false,constructor:function(a){var b=this;Ext.apply(b,a);if(!b.ddGroup){b.ddGroup="view-dd-zone-"+b.view.id}b.callParent([b.view.el.dom.parentNode]);b.ddel=Ext.get(document.createElement("div"));b.ddel.addCls(Ext.baseCSSPrefix+"grid-dd-wrap")},init:function(c,a,b){this.initTarget(c,a,b);this.view.mon(this.view,{itemmousedown:this.onItemMouseDown,scope:this})},onItemMouseDown:function(b,a,f,c,g){if(!this.isPreventDrag(g,a,f,c)){this.handleMouseDown(g);if(b.getSelectionModel().selectionMode=="MULTI"&&!g.ctrlKey&&b.getSelectionModel().isSelected(a)){return false}}},isPreventDrag:function(a){return false},getDragData:function(h){var c=this.view,g=h.getTarget(c.getItemSelector()),b,a,f;if(g){b=c.getRecord(g);a=c.getSelectionModel();f=a.getSelection();return{copy:this.view.copy||(this.view.allowCopy&&h.ctrlKey),event:new Ext.EventObjectImpl(h),view:c,ddel:this.ddel,item:g,records:f,fromPosition:Ext.fly(g).getXY()}}},onInitDrag:function(b,k){var g=this,h=g.dragData,f=h.view,a=f.getSelectionModel(),c=f.getRecord(h.item),i=h.event;if(!a.isSelected(c)||i.hasModifier()){a.selectWithEvent(c,i,true)}h.records=a.getSelection();g.ddel.update(g.getDragText());g.proxy.update(g.ddel.dom);g.onStartDrag(b,k);return true},getDragText:function(){var a=this.dragData.records.length;return Ext.String.format(this.dragText,a,a==1?"":"s")},getRepairXY:function(b,a){return a?a.fromPosition:false}});Ext.define("Ext.tree.ViewDragZone",{extend:"Ext.view.DragZone",isPreventDrag:function(b,a){return(a.get("allowDrag")===false)||!!b.getTarget(this.view.expanderSelector)},afterRepair:function(){var e=this,a=e.view,f=a.selectedItemCls,b=e.dragData.records,c=Ext.fly;if(Ext.enableFx&&e.repairHighlight){Ext.Array.forEach(b,function(g){var h=a.getNode(g);c(h.firstChild).highlight(e.repairHighlightColor,{listeners:{beforeanimate:function(){if(a.isSelected(h)){c(h).removeCls(f)}},afteranimate:function(){if(a.isSelected(h)){c(h).addCls(f)}}}})})}e.dragging=false}});Ext.define("Ext.grid.LockingView",{mixins:{observable:"Ext.util.Observable"},eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell)/,constructor:function(c){var g=this,i=[],a=g.eventRelayRe,b=c.locked.getView(),h=c.normal.getView(),e,f;Ext.apply(g,{lockedView:b,normalView:h,lockedGrid:c.locked,normalGrid:c.normal,panel:c.panel});g.mixins.observable.constructor.call(g,c);e=b.events;for(f in e){if(e.hasOwnProperty(f)&&a.test(f)){i.push(f)}}g.relayEvents(b,i);g.relayEvents(h,i);h.on({scope:g,itemmouseleave:g.onItemMouseLeave,itemmouseenter:g.onItemMouseEnter});b.on({scope:g,itemmouseleave:g.onItemMouseLeave,itemmouseenter:g.onItemMouseEnter})},getGridColumns:function(){var a=this.lockedGrid.headerCt.getGridColumns();return a.concat(this.normalGrid.headerCt.getGridColumns())},getEl:function(a){return this.getViewForColumn(a).getEl()},getViewForColumn:function(b){var a=this.lockedView,c;a.headerCt.cascade(function(e){if(e===b){c=true;return false}});return c?a:this.normalView},onItemMouseEnter:function(c,b){var g=this,e=g.lockedView,a=g.normalView,f;if(c.trackOver){if(c!==e){a=e}f=a.getNode(b);a.highlightItem(f)}},onItemMouseLeave:function(c,b){var f=this,e=f.lockedView,a=f.normalView;if(c.trackOver){if(c!==e){a=e}a.clearHighlight()}},relayFn:function(c,b){b=b||[];var a=this.lockedView;a[c].apply(a,b||[]);a=this.normalView;a[c].apply(a,b||[])},getSelectionModel:function(){return this.panel.getSelectionModel()},getStore:function(){return this.panel.store},getNode:function(a){return this.normalView.getNode(a)},getCell:function(b,c){var a=this.getViewForColumn(c),e;e=a.getNode(b);return Ext.fly(e).down(c.getCellSelector())},getRecord:function(b){var a=this.lockedView.getRecord(b);if(!b){a=this.normalView.getRecord(b)}return a},addElListener:function(a,c,b){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},refresh:function(){this.relayFn("refresh",arguments)},bindStore:function(){this.relayFn("bindStore",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)}});Ext.define("Ext.grid.header.DragZone",{extend:"Ext.dd.DragZone",colHeaderCls:Ext.baseCSSPrefix+"column-header",maxProxyWidth:120,constructor:function(a){this.headerCt=a;this.ddGroup=this.getDDGroup();this.callParent([a.el]);this.proxy.el.addCls(Ext.baseCSSPrefix+"grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(b){var f=b.getTarget("."+this.colHeaderCls),a;if(f){a=Ext.getCmp(f.id);if(!this.headerCt.dragging&&a.draggable&&!(a.isOnLeftEdge(b)||a.isOnRightEdge(b))){var c=document.createElement("div");c.innerHTML=Ext.getCmp(f.id).text;return{ddel:c,header:a}}}return false},onBeforeDrag:function(){return !(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=true;this.callParent(arguments)},onDragDrop:function(){this.headerCt.dragging=false;this.callParent(arguments)},afterRepair:function(){this.callParent();this.headerCt.dragging=false},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=true},enable:function(){this.disabled=false}});Ext.define("Ext.grid.header.DropZone",{extend:"Ext.dd.DropZone",colHeaderCls:Ext.baseCSSPrefix+"column-header",proxyOffsets:[-4,-9],constructor:function(a){this.headerCt=a;this.ddGroup=this.getDDGroup();this.callParent([a.el])},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(a){return a.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){if(!this.topIndicator){this.topIndicator=Ext.DomHelper.append(Ext.getBody(),{cls:"col-move-top",html:"&#160;"},true)}return this.topIndicator},getBottomIndicator:function(){if(!this.bottomIndicator){this.bottomIndicator=Ext.DomHelper.append(Ext.getBody(),{cls:"col-move-bottom",html:"&#160;"},true)}return this.bottomIndicator},getLocation:function(f,b){var a=f.getXY()[0],c=Ext.fly(b).getRegion(),h,g;if((c.right-a)<=(c.right-c.left)/2){h="after"}else{h="before"}return{pos:h,header:Ext.getCmp(b.id),node:b}},positionIndicator:function(z,r,x){var a=this.getLocation(x,r),t=a.header,h=a.pos,g=z.nextSibling("gridcolumn:not([hidden])"),w=z.previousSibling("gridcolumn:not([hidden])"),f,n,u,v,b,c,m,p,A,y;if(!t.draggable&&t.getIndex()==0){return false}this.lastLocation=a;if((z!==t)&&((h==="before"&&g!==t)||(h==="after"&&w!==t))&&!t.isDescendantOf(z)){var q=Ext.dd.DragDropManager.getRelated(this),l=q.length,s=0,k;for(;s<l;s++){k=q[s];if(k!==this&&k.invalidateDrop){k.invalidateDrop()}}this.valid=true;n=this.getTopIndicator();u=this.getBottomIndicator();if(h==="before"){v="tl";b="bl"}else{v="tr";b="br"}c=t.el.getAnchorXY(v);m=t.el.getAnchorXY(b);p=this.headerCt.el;A=p.getLeft();y=p.getRight();c[0]=Ext.Number.constrain(c[0],A,y);m[0]=Ext.Number.constrain(m[0],A,y);c[0]-=4;c[1]-=9;m[0]-=4;n.setXY(c);u.setXY(m);n.show();u.show()}else{this.invalidateDrop()}},invalidateDrop:function(){this.valid=false;this.hideIndicators()},onNodeOver:function(b,a,f,c){if(c.header.el.dom!==b){this.positionIndicator(c.header,b,f)}return this.valid?this.dropAllowed:this.dropNotAllowed},hideIndicators:function(){this.getTopIndicator().hide();this.getBottomIndicator().hide()},onNodeOut:function(){this.hideIndicators()},onNodeDrop:function(f,m,l,g){if(this.valid){this.invalidateDrop();var i=g.header,h=this.lastLocation,p=i.ownerCt,a=p.items.indexOf(i),k=h.header.ownerCt,q=k.items.indexOf(h.header),c=this.headerCt,n,b;if(h.pos==="after"){q++}if(p!==k&&p.lockableInjected&&k.lockableInjected&&k.lockedCt){b=p.up("[scrollerOwner]");b.lock(i,q)}else{if(p!==k&&p.lockableInjected&&k.lockableInjected&&p.lockedCt){b=p.up("[scrollerOwner]");b.unlock(i,q)}else{if((p===k)&&(q>p.items.indexOf(i))){q--}if(p!==k){p.suspendLayout=true;p.remove(i,false);p.suspendLayout=false}if(p.isGroupHeader){if(!p.items.getCount()){n=p.ownerCt;n.suspendLayout=true;n.remove(p,false);p.el.dom.parentNode.removeChild(p.el.dom);n.suspendLayout=false}else{p.minWidth=p.getWidth()-i.getWidth();p.setWidth(p.minWidth)}}k.suspendLayout=true;if(p===k){k.move(a,q)}else{k.insert(q,i)}k.suspendLayout=false;if(k.isGroupHeader){i.savedFlex=i.flex;delete i.flex;i.width=i.getWidth();k.minWidth=k.getWidth()+i.getWidth()-(i.savedFlex?1:0);k.setWidth(k.minWidth)}else{if(i.savedFlex){i.flex=i.savedFlex;delete i.width}}c.purgeCache();c.doLayout();c.onHeaderMoved(i,a,q);if(!p.items.getCount()){p.destroy()}}}}}});Ext.define("Ext.layout.component.Body",{alias:["layout.body"],extend:"Ext.layout.component.Component",uses:["Ext.layout.container.Container"],type:"body",onLayout:function(c,b){var e=this,a=e.owner;e.setTargetSize(c,b);e.setBodySize.apply(e,arguments);if(a&&a.layout&&a.layout.isLayout){if(!Ext.isNumber(a.height)||!Ext.isNumber(a.width)){a.layout.bindToOwnerCtComponent=true}else{a.layout.bindToOwnerCtComponent=false}}e.callParent(arguments)},setBodySize:function(f,b){var g=this,a=g.owner,c=a.frameSize,e=Ext.isNumber;if(e(f)){f-=a.el.getFrameWidth("lr")-c.left-c.right}if(e(b)){b-=a.el.getFrameWidth("tb")-c.top-c.bottom}g.setElementSize(a.body,f,b)}});Ext.define("Ext.view.DropZone",{extend:"Ext.dd.DropZone",indicatorHtml:'<div class="x-grid-drop-indicator-left"></div><div class="x-grid-drop-indicator-right"></div>',indicatorCls:"x-grid-drop-indicator",constructor:function(a){var b=this;Ext.apply(b,a);if(!b.ddGroup){b.ddGroup="view-dd-zone-"+b.view.id}b.callParent([b.view.el])},fireViewEvent:function(){var b=this,a;b.lock();a=b.view.fireEvent.apply(b.view,arguments);b.unlock();return a},getTargetFromEvent:function(l){var k=l.getTarget(this.view.getItemSelector()),f,c,b,g,a,h;if(!k){f=l.getPageY();for(g=0,c=this.view.getNodes(),a=c.length;g<a;g++){b=c[g];h=Ext.fly(b).getBox();if(f<=h.bottom){return b}}}return k},getIndicator:function(){var a=this;if(!a.indicator){a.indicator=Ext.createWidget("component",{html:a.indicatorHtml,cls:a.indicatorCls,ownerCt:a.view,floating:true,shadow:false})}return a.indicator},getPosition:function(c,a){var g=c.getXY()[1],b=Ext.fly(a).getRegion(),f;if((b.bottom-g)>=(b.bottom-b.top)/2){f="before"}else{f="after"}return f},containsRecordAtOffset:function(e,b,g){if(!b){return false}var a=this.view,c=a.indexOf(b),f=a.getNode(c+g),h=f?a.getRecord(f):null;return h&&Ext.Array.contains(e,h)},positionIndicator:function(b,c,f){var g=this,i=g.view,h=g.getPosition(f,b),m=i.getRecord(b),a=c.records,k,l;if(!Ext.Array.contains(a,m)&&(h=="before"&&!g.containsRecordAtOffset(a,m,-1)||h=="after"&&!g.containsRecordAtOffset(a,m,1))){g.valid=true;if(g.overRecord!=m||g.currentPosition!=h){l=Ext.fly(b).getY()-i.el.getY()-1;if(h=="after"){l+=Ext.fly(b).getHeight()}g.getIndicator().setWidth(Ext.fly(i.el).getWidth()).showAt(0,l);g.overRecord=m;g.currentPosition=h}}else{g.invalidateDrop()}},invalidateDrop:function(){if(this.valid){this.valid=false;this.getIndicator().hide()}},onNodeOver:function(c,a,g,f){var b=this;if(!Ext.Array.contains(f.records,b.view.getRecord(c))){b.positionIndicator(c,f,g)}return b.valid?b.dropAllowed:b.dropNotAllowed},notifyOut:function(c,a,g,f){var b=this;b.callParent(arguments);delete b.overRecord;delete b.currentPosition;if(b.indicator){b.indicator.hide()}},onContainerOver:function(a,h,g){var f=this,b=f.view,c=b.store.getCount();if(c){f.positionIndicator(b.getNode(c-1),g,h)}else{delete f.overRecord;delete f.currentPosition;f.getIndicator().setWidth(Ext.fly(b.el).getWidth()).showAt(0,0);f.valid=true}return f.dropAllowed},onContainerDrop:function(a,c,b){return this.onNodeDrop(a,null,c,b)},onNodeDrop:function(f,a,h,g){var c=this,k=false,b=function(){c.invalidateDrop();c.handleNodeDrop(g,c.overRecord,c.currentPosition);k=true;c.fireViewEvent("drop",f,g,c.overRecord,c.currentPosition)},i=false;if(c.valid){i=c.fireViewEvent("beforedrop",f,g,c.overRecord,c.currentPosition,b);if(i!==false){if(!k){b()}}}return i},destroy:function(){Ext.destroy(this.indicator);delete this.indicator;this.callParent()}});Ext.define("Ext.grid.Lockable",{requires:["Ext.grid.LockingView"],syncRowHeight:true,spacerHidden:true,headerCounter:0,unlockText:"Unlock",lockText:"Lock",determineXTypeToCreate:function(){var c=this,g;if(c.subGridXType){g=c.subGridXType}else{var e=this.getXTypes().split("/"),b=e.length,f=e[b-1],a=e[b-2];if(a!=="tablepanel"){g=a}else{g=f}}return g},injectLockable:function(){this.lockable=true;this.hasView=true;var l=this,a=l.determineXTypeToCreate(),h=l.getSelectionModel(),b={xtype:a,enableAnimations:false,scroll:false,scrollerOwner:false,selModel:h,border:false,cls:Ext.baseCSSPrefix+"grid-inner-locked"},k={xtype:a,enableAnimations:false,scrollerOwner:false,selModel:h,border:false},f=0,e,c,g;l.addCls(Ext.baseCSSPrefix+"grid-locked");Ext.copyTo(k,l,l.normalCfgCopy);Ext.copyTo(b,l,l.lockedCfgCopy);for(;f<l.normalCfgCopy.length;f++){delete l[l.normalCfgCopy[f]]}for(f=0;f<l.lockedCfgCopy.length;f++){delete l[l.lockedCfgCopy[f]]}l.addEvents("lockcolumn","unlockcolumn");l.addStateEvents(["lockcolumn","unlockcolumn"]);l.lockedHeights=[];l.normalHeights=[];e=l.processColumns(l.columns);b.width=e.lockedWidth+Ext.num(h.headerWidth,0);b.columns=e.locked;k.columns=e.normal;l.store=Ext.StoreManager.lookup(l.store);b.store=l.store;k.store=l.store;k.flex=1;b.viewConfig=l.lockedViewConfig||{};b.viewConfig.loadingUseMsg=false;k.viewConfig=l.normalViewConfig||{};Ext.applyIf(b.viewConfig,l.viewConfig);Ext.applyIf(k.viewConfig,l.viewConfig);l.normalGrid=Ext.ComponentManager.create(k);l.lockedGrid=Ext.ComponentManager.create(b);l.view=Ext.create("Ext.grid.LockingView",{locked:l.lockedGrid,normal:l.normalGrid,panel:l});if(l.syncRowHeight){l.lockedGrid.getView().on({refresh:l.onLockedGridAfterRefresh,itemupdate:l.onLockedGridAfterUpdate,scope:l});l.normalGrid.getView().on({refresh:l.onNormalGridAfterRefresh,itemupdate:l.onNormalGridAfterUpdate,scope:l})}c=l.lockedGrid.headerCt;g=l.normalGrid.headerCt;c.lockedCt=true;c.lockableInjected=true;g.lockableInjected=true;c.on({columnshow:l.onLockedHeaderShow,columnhide:l.onLockedHeaderHide,columnmove:l.onLockedHeaderMove,sortchange:l.onLockedHeaderSortChange,columnresize:l.onLockedHeaderResize,scope:l});g.on({columnmove:l.onNormalHeaderMove,sortchange:l.onNormalHeaderSortChange,scope:l});l.normalGrid.on({scrollershow:l.onScrollerShow,scrollerhide:l.onScrollerHide,scope:l});l.lockedGrid.on("afterlayout",l.onLockedGridAfterLayout,l,{single:true});l.modifyHeaderCt();l.items=[l.lockedGrid,l.normalGrid];l.relayHeaderCtEvents(c);l.relayHeaderCtEvents(g);l.layout={type:"hbox",align:"stretch"}},processColumns:function(g){var f=0,a=g.length,b=1,e=[],c=[],h;for(;f<a;++f){h=g[f];h.processed=true;if(h.locked){if(h.flex){Ext.Error.raise("Columns which are locked do NOT support a flex width. You must set a width on the "+g[f].text+"column.")}if(!h.hidden){b+=h.width||Ext.grid.header.Container.prototype.defaultWidth}e.push(h)}else{c.push(h)}if(!h.headerId){h.headerId=(h.initialConfig||h).id||("L"+(++this.headerCounter))}}return{lockedWidth:b,locked:e,normal:c}},onLockedGridAfterLayout:function(){var b=this,a=b.lockedGrid.getView();a.on({beforerefresh:b.destroySpacer,scope:b})},onLockedHeaderMove:function(){if(this.syncRowHeight){this.onNormalGridAfterRefresh()}},onNormalHeaderMove:function(){if(this.syncRowHeight){this.onLockedGridAfterRefresh()}},getSpacerEl:function(){var e=this,b,a,c;if(!e.spacerEl){b=Ext.getScrollBarWidth()+(Ext.isIE?2:0);a=e.lockedGrid.getView();c=a.el;e.spacerEl=Ext.DomHelper.append(c,{cls:e.spacerHidden?(Ext.baseCSSPrefix+"hidden"):"",style:"height: "+b+"px;"},true)}return e.spacerEl},destroySpacer:function(){var a=this;if(a.spacerEl){a.spacerEl.destroy();delete a.spacerEl}},onLockedGridAfterRefresh:function(){var f=this,a=f.lockedGrid.getView(),c=a.el,g=c.query(a.getItemSelector()),e=g.length,b=0;f.lockedHeights=[];for(;b<e;b++){f.lockedHeights[b]=g[b].clientHeight}f.syncRowHeights()},onNormalGridAfterRefresh:function(){var f=this,a=f.normalGrid.getView(),c=a.el,g=c.query(a.getItemSelector()),e=g.length,b=0;f.normalHeights=[];for(;b<e;b++){f.normalHeights[b]=g[b].clientHeight}f.syncRowHeights()},onLockedGridAfterUpdate:function(a,b,c){this.lockedHeights[b]=c.clientHeight;this.syncRowHeights()},onNormalGridAfterUpdate:function(a,b,c){this.normalHeights[b]=c.clientHeight;this.syncRowHeights()},syncRowHeights:function(){var m=this,b=m.lockedHeights,n=m.normalHeights,a=[],l=b.length,h=0,p,e,f,k,g=m.getVerticalScroller(),c;if(b.length&&n.length){p=m.lockedGrid.getView();e=m.normalGrid.getView();f=p.el.query(p.getItemSelector());k=e.el.query(e.getItemSelector());for(;h<l;h++){if(!isNaN(b[h])&&!isNaN(n[h])){if(b[h]>n[h]){Ext.fly(k[h]).setHeight(b[h])}else{if(b[h]<n[h]){Ext.fly(f[h]).setHeight(n[h])}}}}m.normalGrid.invalidateScroller();if(g&&g.setViewScrollTop){g.setViewScrollTop(m.virtualScrollTop)}else{c=e.el.dom.scrollTop;e.el.dom.scrollTop=c;p.el.dom.scrollTop=c}m.lockedHeights=[];m.normalHeights=[]}},onScrollerShow:function(a,b){if(b==="horizontal"){this.spacerHidden=false;this.getSpacerEl().removeCls(Ext.baseCSSPrefix+"hidden")}},onScrollerHide:function(a,b){if(b==="horizontal"){this.spacerHidden=true;if(this.spacerEl){this.spacerEl.addCls(Ext.baseCSSPrefix+"hidden")}}},modifyHeaderCt:function(){var a=this;a.lockedGrid.headerCt.getMenuItems=a.getMenuItems(true);a.normalGrid.headerCt.getMenuItems=a.getMenuItems(false)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},getMenuItems:function(b){var g=this,h=g.unlockText,i=g.lockText,c=Ext.baseCSSPrefix+"hmenu-unlock",f=Ext.baseCSSPrefix+"hmenu-lock",a=Ext.Function.bind(g.onUnlockMenuClick,g),e=Ext.Function.bind(g.onLockMenuClick,g);return function(){var k=Ext.grid.header.Container.prototype.getMenuItems.call(this);k.push("-",{cls:c,text:h,handler:a,disabled:!b});k.push({cls:f,text:i,handler:e,disabled:b});return k}},lock:function(a,e){var c=this,f=c.normalGrid,h=c.lockedGrid,g=f.headerCt,b=h.headerCt;a=a||g.getMenu().activeHeader;if(a.flex){a.width=a.getWidth();delete a.flex}g.remove(a,false);b.suspendLayout=true;a.locked=true;if(Ext.isDefined(e)){b.insert(e,a)}else{b.add(a)}b.suspendLayout=false;c.syncLockedSection();c.fireEvent("lockcolumn",c,a)},syncLockedSection:function(){var a=this;a.syncLockedWidth();a.lockedGrid.getView().refresh();a.normalGrid.getView().refresh()},syncLockedWidth:function(){var b=this,a=b.lockedGrid.headerCt.getFullWidth(true);b.lockedGrid.setWidth(a+1);b.doComponentLayout()},onLockedHeaderResize:function(){this.syncLockedWidth()},onLockedHeaderHide:function(){this.syncLockedWidth()},onLockedHeaderShow:function(){this.syncLockedWidth()},onLockedHeaderSortChange:function(b,c,a){if(a){this.normalGrid.headerCt.clearOtherSortStates(null,true)}},onNormalHeaderSortChange:function(b,c,a){if(a){this.lockedGrid.headerCt.clearOtherSortStates(null,true)}},unlock:function(a,e){var c=this,f=c.normalGrid,h=c.lockedGrid,g=f.headerCt,b=h.headerCt;if(!Ext.isDefined(e)){e=0}a=a||b.getMenu().activeHeader;b.remove(a,false);c.syncLockedWidth();c.lockedGrid.getView().refresh();a.locked=false;g.insert(e,a);c.normalGrid.getView().refresh();c.fireEvent("unlockcolumn",c,a)},applyColumnsState:function(f){var m=this,c=m.lockedGrid,e=c.headerCt,k=m.normalGrid.headerCt,n=e.items,g=k.items,a,i=[],l=[],b,h=1;Ext.each(f,function(p){function q(r){return r.headerId==p.id}b=true;if(!(a=n.findBy(q))){a=g.findBy(q);b=false}if(a){if(a.applyColumnState){a.applyColumnState(p)}if(!Ext.isDefined(a.locked)){a.locked=b}if(a.locked){i.push(a);if(!a.hidden&&Ext.isNumber(a.width)){h+=a.width}}else{l.push(a)}}});if(i.length+l.length==n.getCount()+g.getCount()){e.removeAll(false);k.removeAll(false);e.add(i);k.add(l);c.setWidth(h)}},getColumnsState:function(){var b=this,a=b.lockedGrid.headerCt.getColumnsState(),c=b.normalGrid.headerCt.getColumnsState();return a.concat(c)},reconfigureLockable:function(a,b){var c=this,f=c.lockedGrid,e=c.normalGrid;if(b){f.headerCt.suspendLayout=true;e.headerCt.suspendLayout=true;f.headerCt.removeAll();e.headerCt.removeAll();b=c.processColumns(b);f.setWidth(b.lockedWidth);f.headerCt.add(b.locked);e.headerCt.add(b.normal)}if(a){a=Ext.data.StoreManager.lookup(a);c.store=a;f.bindStore(a);e.bindStore(a)}else{f.getView().refresh();e.getView().refresh()}if(b){f.headerCt.suspendLayout=false;e.headerCt.suspendLayout=false;f.headerCt.forceComponentLayout();e.headerCt.forceComponentLayout()}}});Ext.define("Ext.grid.plugin.HeaderReorderer",{extend:"Ext.util.Observable",requires:["Ext.grid.header.DragZone","Ext.grid.header.DropZone"],alias:"plugin.gridheaderreorderer",init:function(a){this.headerCt=a;a.on("render",this.onHeaderCtRender,this)},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onHeaderCtRender:function(){this.dragZone=Ext.create("Ext.grid.header.DragZone",this.headerCt);this.dropZone=Ext.create("Ext.grid.header.DropZone",this.headerCt);if(this.disabled){this.dragZone.disable()}},enable:function(){this.disabled=false;if(this.dragZone){this.dragZone.enable()}},disable:function(){this.disabled=true;if(this.dragZone){this.dragZone.disable()}}});Ext.define("Ext.layout.component.FieldSet",{extend:"Ext.layout.component.Body",alias:["layout.fieldset"],type:"fieldset",doContainerLayout:function(){if(!this.owner.collapsed){this.callParent()}}});Ext.define("Ext.grid.ViewDropZone",{extend:"Ext.view.DropZone",indicatorHtml:'<div class="x-grid-drop-indicator-left"></div><div class="x-grid-drop-indicator-right"></div>',indicatorCls:"x-grid-drop-indicator",handleNodeDrop:function(b,e,f){var k=this.view,l=k.getStore(),h,a,c,g;if(b.copy){a=b.records;b.records=[];for(c=0,g=a.length;c<g;c++){b.records.push(a[c].copy(a[c].getId()))}}else{b.view.store.remove(b.records,b.view===k)}h=l.indexOf(e);if(f!=="before"){h++}l.insert(h,b.records);k.getSelectionModel().select(b.records)}});Ext.define("Ext.tree.ViewDropZone",{extend:"Ext.view.DropZone",allowParentInserts:false,allowContainerDrops:false,appendOnly:false,expandDelay:500,indicatorCls:"x-tree-ddindicator",expandNode:function(b){var a=this.view;if(!b.isLeaf()&&!b.isExpanded()){a.expand(b);this.expandProcId=false}},queueExpand:function(a){this.expandProcId=Ext.Function.defer(this.expandNode,this.expandDelay,this,[a])},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId);this.expandProcId=false}},getPosition:function(g,b){var k=this.view,c=k.getRecord(b),h=g.getPageY(),l=c.isLeaf(),a=false,i=Ext.fly(b).getRegion(),f;if(c.isRoot()){return"append"}if(this.appendOnly){return l?false:"append"}if(!this.allowParentInsert){a=c.hasChildNodes()&&c.isExpanded()}f=(i.bottom-i.top)/(l?2:3);if(h>=i.top&&h<(i.top+f)){return"before"}else{if(!a&&(l||(h>=(i.bottom-f)&&h<=i.bottom))){return"after"}else{return"append"}}},isValidDropPoint:function(b,k,p,l,g){if(!b||!g.item){return false}var q=this.view,m=q.getRecord(b),f=g.records,a=f.length,n=f.length,c,h;if(!(m&&k&&a)){return false}for(c=0;c<n;c++){h=f[c];if(h.isNode&&h.contains(m)){return false}}if(k==="append"&&m.get("allowDrop")===false){return false}else{if(k!="append"&&m.parentNode.get("allowDrop")===false){return false}}if(Ext.Array.contains(f,m)){return false}return true},onNodeOver:function(a,i,g,c){var f=this.getPosition(g,a),b=this.dropNotAllowed,k=this.view,h=k.getRecord(a),l=this.getIndicator(),n=0,m=0;this.cancelExpand();if(f=="append"&&!this.expandProcId&&!Ext.Array.contains(c.records,h)&&!h.isLeaf()&&!h.isExpanded()){this.queueExpand(h)}if(this.isValidDropPoint(a,f,i,g,c)){this.valid=true;this.currentPosition=f;this.overRecord=h;l.setWidth(Ext.fly(a).getWidth());m=Ext.fly(a).getY()-Ext.fly(k.el).getY()-1;if(f=="before"){b=h.isFirst()?Ext.baseCSSPrefix+"tree-drop-ok-above":Ext.baseCSSPrefix+"tree-drop-ok-between";l.showAt(0,m);i.proxy.show()}else{if(f=="after"){b=h.isLast()?Ext.baseCSSPrefix+"tree-drop-ok-below":Ext.baseCSSPrefix+"tree-drop-ok-between";m+=Ext.fly(a).getHeight();l.showAt(0,m);i.proxy.show()}else{b=Ext.baseCSSPrefix+"tree-drop-ok-append";l.hide()}}}else{this.valid=false}this.currentCls=b;return b},onContainerOver:function(a,c,b){return c.getTarget("."+this.indicatorCls)?this.currentCls:this.dropNotAllowed},notifyOut:function(){this.callParent(arguments);this.cancelExpand()},handleNodeDrop:function(e,m,f){var p=this,q=p.view,g=m.parentNode,r=q.getStore(),t=[],a,c,l,b,k,n,s,h;if(e.copy){a=e.records;e.records=[];for(c=0,l=a.length;c<l;c++){e.records.push(Ext.apply({},a[c].data))}}p.cancelExpand();if(f=="before"){b=g.insertBefore;k=[null,m];m=g}else{if(f=="after"){if(m.nextSibling){b=g.insertBefore;k=[null,m.nextSibling]}else{b=g.appendChild;k=[null]}m=g}else{if(!m.isExpanded()){n=true}b=m.appendChild;k=[null]}}s=function(){var i;for(c=0,l=e.records.length;c<l;c++){k[0]=e.records[c];i=b.apply(m,k);if(Ext.enableFx&&p.dropHighlight){t.push(q.getNode(i))}}if(Ext.enableFx&&p.dropHighlight){Ext.Array.forEach(t,function(u){if(u){Ext.fly(u.firstChild?u.firstChild:u).highlight(p.dropHighlightColor)}})}};if(n){m.expand(false,s)}else{s()}}});Ext.define("Ext.grid.column.Action",{extend:"Ext.grid.column.Column",alias:["widget.actioncolumn"],alternateClassName:"Ext.grid.ActionColumn",header:"&#160;",actionIdRe:new RegExp(Ext.baseCSSPrefix+"action-col-(\\d+)"),altText:"",sortable:false,constructor:function(e){var h=this,b=Ext.apply({},e),c=b.items||[h],a=c.length,f,g;delete b.items;h.callParent([b]);h.items=c;h.renderer=function(i,k){i=Ext.isFunction(b.renderer)?b.renderer.apply(this,arguments)||"":"";k.tdCls+=" "+Ext.baseCSSPrefix+"action-col-cell";for(f=0;f<a;f++){g=c[f];g.disable=Ext.Function.bind(h.disableAction,h,[f]);g.enable=Ext.Function.bind(h.enableAction,h,[f]);i+='<img alt="'+(g.altText||h.altText)+'" src="'+(g.icon||Ext.BLANK_IMAGE_URL)+'" class="'+Ext.baseCSSPrefix+"action-col-icon "+Ext.baseCSSPrefix+"action-col-"+String(f)+" "+(g.disabled?Ext.baseCSSPrefix+"item-disabled":" ")+(g.iconCls||"")+" "+(Ext.isFunction(g.getClass)?g.getClass.apply(g.scope||h.scope||h,arguments):(h.iconCls||""))+'"'+((g.tooltip)?' data-qtip="'+g.tooltip+'"':"")+" />"}return i}},enableAction:function(a){var b=this;if(!a){a=0}else{if(!Ext.isNumber(a)){a=Ext.Array.indexOf(b.items,a)}}b.items[a].disabled=false;b.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+a).removeCls(b.disabledCls)},disableAction:function(a){var b=this;if(!a){a=0}else{if(!Ext.isNumber(a)){a=Ext.Array.indexOf(b.items,a)}}b.items[a].disabled=true;b.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+a).addCls(b.disabledCls)},destroy:function(){delete this.items;delete this.renderer;return this.callParent(arguments)},processEvent:function(g,k,l,a,h,c){var f=this,b=c.getTarget().className.match(f.actionIdRe),m,i;if(b){m=f.items[parseInt(b[1],10)];if(m){if(g=="click"){i=m.handler||f.handler;if(i&&!m.disabled){i.call(m.scope||f.scope||f,k,a,h,m,c)}}else{if(g=="mousedown"&&m.stopSelection!==false){return false}}}}return f.callParent(arguments)},cascade:function(b,a){b.call(a||this,this)},getRefItems:function(){return[]}});Ext.define("Ext.util.Inflector",{singleton:true,plurals:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat|potat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status|sex)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/^person$/),"people"],[(/^man$/),"men"],[(/^(child)$/),"$1ren"],[(/s$/i),"s"],[(/$/),"s"]],singulars:[[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/people$/i),"person"],[(/s$/i),""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(b,a){this.singulars.unshift([b,a])},plural:function(b,a){this.plurals.unshift([b,a])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(a){return Ext.Array.indexOf(this.uncountable,a)!=-1},pluralize:function(g){if(this.isTransnumeral(g)){return g}var f=this.plurals,e=f.length,a,c,b;for(b=0;b<e;b++){a=f[b];c=a[0];if(c==g||(c.test&&c.test(g))){return g.replace(c,a[1])}}return g},singularize:function(g){if(this.isTransnumeral(g)){return g}var f=this.singulars,e=f.length,a,c,b;for(b=0;b<e;b++){a=f[b];c=a[0];if(c==g||(c.test&&c.test(g))){return g.replace(c,a[1])}}return g},classify:function(a){return Ext.String.capitalize(this.singularize(a))},ordinalize:function(e){var b=parseInt(e,10),c=b%10,a=b%100;if(11<=a&&a<=13){return e+"th"}else{switch(c){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}}}},function(){var b={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},a;for(a in b){this.plural(a,b[a]);this.singular(b[a],a)}});Ext.define("Ext.data.HasManyAssociation",{extend:"Ext.data.Association",requires:["Ext.util.Inflector"],alias:"association.hasmany",constructor:function(c){var e=this,a,b;e.callParent(arguments);e.name=e.name||Ext.util.Inflector.pluralize(e.associatedName.toLowerCase());a=e.ownerModel.prototype;b=e.name;Ext.applyIf(e,{storeName:b+"Store",foreignKey:e.ownerName.toLowerCase()+"_id"});a[b]=e.createStore()},createStore:function(){var h=this,i=h.associatedModel,c=h.storeName,e=h.foreignKey,a=h.primaryKey,g=h.filterProperty,b=h.autoLoad,f=h.storeConfig||{};return function(){var n=this,l,m,k={};if(n[c]===undefined){if(g){m={property:g,value:n.get(g),exactMatch:true}}else{m={property:e,value:n.get(a),exactMatch:true}}k[e]=n.get(a);l=Ext.apply({},f,{model:i,filters:[m],remoteFilter:false,modelDefaults:k});n[c]=Ext.create("Ext.data.Store",l);if(b){n[c].load()}}return n[c]}},read:function(c,a,f){var e=c[this.name](),b;e.add(a.read(f).records);b=this.associatedModel.prototype.associations.findBy(function(g){return g.type==="belongsTo"&&g.associatedName===c.$className});if(b){e.data.each(function(g){g[b.instanceName]=c})}}});Ext.define("Ext.layout.container.CheckboxGroup",{extend:"Ext.layout.container.Container",alias:["layout.checkboxgroup"],onLayout:function(){var b=this.getColCount(),c=this.getShadowCt(),a=this.owner,g=a.items,k=c.items,h=g.length,l=0,e,f;k.each(function(i){i.items.clear()});while(k.length>b){c.remove(k.last())}while(k.length<b){c.add({xtype:"container",cls:a.groupCls,flex:1})}if(a.vertical){f=Math.ceil(h/b);for(e=0;e<h;e++){if(e>0&&e%f===0){l++}k.getAt(l).items.add(g.getAt(e))}}else{for(e=0;e<h;e++){l=e%b;k.getAt(l).items.add(g.getAt(e))}}if(!c.rendered){c.render(this.getRenderTarget())}else{k.each(function(i){var m=i.getLayout();m.renderItems(m.getLayoutItems(),m.getRenderTarget())})}c.doComponentLayout()},renderItems:Ext.emptyFn,getShadowCt:function(){var k=this,e=k.shadowCt,a,h,l,c,g,b,f;if(!e){a=k.owner;c=a.columns;g=Ext.isArray(c);b=k.getColCount();h=[];for(f=0;f<b;f++){l={xtype:"container",cls:a.groupCls};if(g){if(c[f]<1){l.flex=c[f]}else{l.width=c[f]}}else{l.flex=1}h.push(l)}e=k.shadowCt=Ext.createWidget("container",{layout:"hbox",items:h,ownerCt:a})}return e},getColCount:function(){var a=this.owner,b=a.columns;return Ext.isArray(b)?b.length:(Ext.isNumber(b)?b:a.items.length)}});Ext.define("Ext.form.CheckboxGroup",{extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.field.Field"},alias:"widget.checkboxgroup",requires:["Ext.layout.container.CheckboxGroup","Ext.form.field.Base"],columns:"auto",vertical:false,allowBlank:true,blankText:"You must select at least one item in this group",defaultType:"checkboxfield",groupCls:Ext.baseCSSPrefix+"form-check-group",fieldBodyCls:Ext.baseCSSPrefix+"form-checkboxgroup-body",layout:"checkboxgroup",initComponent:function(){var a=this;a.callParent();a.initField()},initValue:function(){var b=this,a=b.value;b.originalValue=b.lastValue=a||b.getValue();if(a){b.setValue(a)}},onFieldAdded:function(b){var a=this;if(b.isCheckbox){a.mon(b,"change",a.checkChange,a)}a.callParent(arguments)},onFieldRemoved:function(b){var a=this;if(b.isCheckbox){a.mun(b,"change",a.checkChange,a)}a.callParent(arguments)},isEqual:function(b,a){var c=Ext.Object.toQueryString;return c(b)===c(a)},getErrors:function(){var a=[];if(!this.allowBlank&&Ext.isEmpty(this.getChecked())){a.push(this.blankText)}return a},getBoxes:function(){return this.query("[isCheckbox]")},eachBox:function(b,a){Ext.Array.forEach(this.getBoxes(),b,a||this)},getChecked:function(){return Ext.Array.filter(this.getBoxes(),function(a){return a.getValue()})},isDirty:function(){return Ext.Array.some(this.getBoxes(),function(a){return a.isDirty()})},setReadOnly:function(a){this.eachBox(function(b){b.setReadOnly(a)});this.readOnly=a},reset:function(){var c=this,b=c.hasActiveError(),a=c.preventMark;c.preventMark=true;c.batchChanges(function(){c.eachBox(function(e){e.reset()})});c.preventMark=a;c.unsetActiveError();if(b){c.doComponentLayout()}},resetOriginalValue:function(){Ext.defer(function(){this.callParent()},1,this)},setValue:function(b){var a=this;a.batchChanges(function(){a.eachBox(function(c){var e=c.getName(),f=false;if(b&&e in b){if(Ext.isArray(b[e])){f=Ext.Array.contains(b[e],c.inputValue)}else{f=b[e]}}c.setValue(f)})});return a},getValue:function(){var a={};this.eachBox(function(c){var e=c.getName(),b=c.inputValue,f;if(c.getValue()){if(e in a){f=a[e];if(!Ext.isArray(f)){f=a[e]=[f]}f.push(b)}else{a[e]=b}}});return a},getSubmitData:function(){return null},getModelData:function(){return null},validate:function(){var a=this,e=a.getErrors(),c=Ext.isEmpty(e),b=!a.hasActiveError();if(c){a.unsetActiveError()}else{a.setActiveError(e)}if(c!==b){a.fireEvent("validitychange",a,c);a.doComponentLayout()}return c}},function(){this.borrow(Ext.form.field.Base,["markInvalid","clearInvalid"])});Ext.define("Ext.form.RadioGroup",{extend:"Ext.form.CheckboxGroup",alias:"widget.radiogroup",allowBlank:true,blankText:"You must select one item in this group",defaultType:"radiofield",groupCls:Ext.baseCSSPrefix+"form-radio-group",getBoxes:function(){return this.query("[isRadio]")},setValue:function(b){var a=this;if(Ext.isObject(b)){Ext.Object.each(b,function(c,f){var e=Ext.form.RadioManager.getWithValue(c,f);e.each(function(g){g.setValue(true)})})}return a}});Ext.define("Ext.grid.column.Number",{extend:"Ext.grid.column.Column",alias:["widget.numbercolumn"],requires:["Ext.util.Format"],alternateClassName:"Ext.grid.NumberColumn",format:"0,000.00",constructor:function(a){this.callParent(arguments);this.renderer=Ext.util.Format.numberRenderer(this.format)}});Ext.define("Ext.ux.grid.GrabField",{extend:"Ext.AbstractPlugin",requires:["Ext.button.Button"],alias:"plugin.pagingtoolbargrabfield",delimiter:", \n",windowTitle:"Data",constructor:function(a){if(a){Ext.apply(this,a)}this.callParent(arguments)},init:function(b){var e=this,a=b.items.indexOf(b.child("#refresh")),c;c=Ext.create("Ext.button.Button",{text:e.text,iconCls:e.iconCls,tooltip:e.tooltip,scope:e,handler:function(i){var h=i.up("gridpanel"),f=h.getStore(),k=[],g=this;if(g.dataindex){f.each(function(l){k.push(l.get(g.dataindex))},g);Ext.Msg.show({title:g.windowTitle,value:k.join(g.delimiter),width:400,defaultTextHeight:300,buttons:Ext.Msg.OK,multiline:true,animateTarget:i,icon:Ext.window.MessageBox.INFO})}else{Ext.Error.raise("Ext.ux.grid.GrabField: No dataindex specified.")}}});b.insert(a+1,c);b.on("change",function(f,g){c.setDisabled(!g.total)})}});Ext.define("Ext.ux.grid.PagingToolbarResizer",{extend:"Ext.AbstractPlugin",alias:"plugin.pagingtoolbarresizer",options:[5,10,15,20,25,30,50,75,100,200,300,500,1000],mode:"remote",displayText:"Records per Page",constructor:function(a){Ext.apply(this,a);this.callParent(arguments)},init:function(e){var c=this.options;var a=e.store;var f=Ext.create("Ext.form.field.ComboBox",{typeAhead:false,triggerAction:"all",forceSelection:true,lazyRender:true,editable:false,mode:this.mode,value:a.pageSize,width:50,store:c,listeners:{select:function(k,h,g){a.pageSize=h[0].data.field1;a.load()}}});var b=e.items.indexOf(e.items.map.refresh);e.insert(++b,"-");e.insert(++b,this.displayText);e.insert(++b,f);e.insert(++b,"-");e.on({beforedestroy:function(){f.destroy()}})}});Ext.define("Ext.container.Viewport",{extend:"Ext.container.Container",alias:"widget.viewport",requires:["Ext.EventManager"],alternateClassName:"Ext.Viewport",isViewport:true,ariaRole:"application",initComponent:function(){var c=this,a=Ext.fly(document.body.parentNode),b;c.callParent(arguments);a.addCls(Ext.baseCSSPrefix+"viewport");if(c.autoScroll){a.setStyle("overflow","auto")}c.el=b=Ext.getBody();b.setHeight=Ext.emptyFn;b.setWidth=Ext.emptyFn;b.setSize=Ext.emptyFn;b.dom.scroll="no";c.allowDomMove=false;Ext.EventManager.onWindowResize(c.fireResize,c);c.renderTo=c.el;c.width=Ext.Element.getViewportWidth();c.height=Ext.Element.getViewportHeight()},fireResize:function(a,b){this.setSize(a,b)}});Ext.define("Ext.resizer.Splitter",{extend:"Ext.Component",requires:["Ext.XTemplate"],uses:["Ext.resizer.SplitterTracker"],alias:"widget.splitter",renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" class="',Ext.baseCSSPrefix,"collapse-el ",Ext.baseCSSPrefix,'layout-split-{collapseDir}">&nbsp;</div>',"</tpl>"],baseCls:Ext.baseCSSPrefix+"splitter",collapsedClsInternal:Ext.baseCSSPrefix+"splitter-collapsed",collapsible:false,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1000,width:5,height:5,collapseTarget:"next",onRender:function(){var a=this,b=a.getCollapseTarget(),c=a.getCollapseDirection();Ext.applyIf(a.renderData,{collapseDir:c,collapsible:a.collapsible||b.collapsible});a.addChildEls("collapseEl");this.callParent(arguments);if(a.performCollapse!==false){if(a.renderData.collapsible){a.mon(a.collapseEl,"click",a.toggleTargetCmp,a)}if(a.collapseOnDblClick){a.mon(a.el,"dblclick",a.toggleTargetCmp,a)}}a.mon(b,"collapse",a.onTargetCollapse,a);a.mon(b,"expand",a.onTargetExpand,a);a.el.addCls(a.baseCls+"-"+a.orientation);a.el.unselectable();a.tracker=Ext.create("Ext.resizer.SplitterTracker",{el:a.el});a.relayEvents(a.tracker,["beforedragstart","dragstart","dragend"])},getCollapseDirection:function(){var c=this,a,b=c.ownerCt.layout.type;if(c.collapseTarget.isComponent){a=Number(c.ownerCt.items.indexOf(c.collapseTarget)==c.ownerCt.items.indexOf(c)-1)<<1|Number(b=="hbox")}else{a=Number(c.collapseTarget=="prev")<<1|Number(b=="hbox")}c.orientation=["horizontal","vertical"][a&1];return["bottom","right","top","left"][a]},getCollapseTarget:function(){var a=this;return a.collapseTarget.isComponent?a.collapseTarget:a.collapseTarget=="prev"?a.previousSibling():a.nextSibling()},onTargetCollapse:function(a){this.el.addCls([this.collapsedClsInternal,this.collapsedCls])},onTargetExpand:function(a){this.el.removeCls([this.collapsedClsInternal,this.collapsedCls])},toggleTargetCmp:function(c,a){var b=this.getCollapseTarget();if(b.isVisible()){if(b.collapsed){b.expand(b.animCollapse)}else{b.collapse(this.renderData.collapseDir,b.animCollapse)}}},setSize:function(){var a=this;a.callParent(arguments);if(Ext.isIE){a.el.repaint()}}});Ext.define("Ext.layout.container.Border",{alias:["layout.border"],extend:"Ext.layout.container.Container",requires:["Ext.resizer.Splitter","Ext.container.Container","Ext.fx.Anim"],alternateClassName:"Ext.layout.BorderLayout",targetCls:Ext.baseCSSPrefix+"border-layout-ct",itemCls:Ext.baseCSSPrefix+"border-item",bindToOwnerCtContainer:true,percentageRe:/(\d+)%/,slideDirection:{north:"t",south:"b",west:"l",east:"r"},constructor:function(a){this.initialConfig=a;this.callParent(arguments)},onLayout:function(){var a=this;if(!a.borderLayoutInitialized){a.initializeBorderLayout()}a.fixHeightConstraints();a.shadowLayout.onLayout();if(a.embeddedContainer){a.embeddedContainer.layout.onLayout()}if(!a.initialCollapsedComplete){Ext.iterate(a.regions,function(b,c){if(c.borderCollapse){a.onBeforeRegionCollapse(c,c.collapseDirection,false,0)}});a.initialCollapsedComplete=true}},isValidParent:function(b,c,a){if(!this.borderLayoutInitialized){this.initializeBorderLayout()}return this.shadowLayout.isValidParent(b,c,a)},beforeLayout:function(){if(!this.borderLayoutInitialized){this.initializeBorderLayout()}this.shadowLayout.beforeLayout()},renderItems:function(a,b){Ext.Error.raise("This should not be called")},renderItem:function(a){Ext.Error.raise("This should not be called")},renderChildren:function(){if(!this.borderLayoutInitialized){this.initializeBorderLayout()}this.shadowLayout.renderChildren()},getVisibleItems:function(){return Ext.ComponentQuery.query(":not([slideOutAnim])",this.callParent(arguments))},initializeBorderLayout:function(){var l=this,c=0,k=l.getLayoutItems(),h=k.length,b=(l.regions={}),f=[],g=[],a=0,n=0,e,m;l.splitters={};for(;c<h;c++){e=k[c];b[e.region]=e;if(e.region!="center"&&e.collapsible&&e.collapseMode!="header"){e.borderCollapse=e.collapsed;e.collapsed=false;e.on({beforecollapse:l.onBeforeRegionCollapse,beforeexpand:l.onBeforeRegionExpand,destroy:l.onRegionDestroy,scope:l});l.setupState(e)}}if(!b.center){Ext.Error.raise("You must specify a center region when defining a BorderLayout.")}e=b.center;if(!e.flex){e.flex=1}delete e.width;e.maintainFlex=true;e=b.west;if(e){e.collapseDirection=Ext.Component.DIRECTION_LEFT;g.push(e);if(e.split){g.push(l.splitters.west=l.createSplitter(e))}m=Ext.isString(e.width)&&e.width.match(l.percentageRe);if(m){a+=(e.flex=parseInt(m[1],10)/100);delete e.width}}e=b.north;if(e){e.collapseDirection=Ext.Component.DIRECTION_TOP;f.push(e);if(e.split){f.push(l.splitters.north=l.createSplitter(e))}m=Ext.isString(e.height)&&e.height.match(l.percentageRe);if(m){n+=(e.flex=parseInt(m[1],10)/100);delete e.height}}if(b.north||b.south){if(b.east||b.west){f.push(l.embeddedContainer=Ext.create("Ext.container.Container",{xtype:"container",region:"center",id:l.owner.id+"-embedded-center",cls:Ext.baseCSSPrefix+"border-item",flex:b.center.flex,maintainFlex:true,layout:{type:"hbox",align:"stretch",getVisibleItems:l.getVisibleItems}}));g.push(b.center)}else{f.push(b.center)}}else{g.push(b.center)}e=b.south;if(e){e.collapseDirection=Ext.Component.DIRECTION_BOTTOM;if(e.split){f.push(l.splitters.south=l.createSplitter(e))}m=Ext.isString(e.height)&&e.height.match(l.percentageRe);if(m){n+=(e.flex=parseInt(m[1],10)/100);delete e.height}f.push(e)}e=b.east;if(e){e.collapseDirection=Ext.Component.DIRECTION_RIGHT;if(e.split){g.push(l.splitters.east=l.createSplitter(e))}m=Ext.isString(e.width)&&e.width.match(l.percentageRe);if(m){a+=(e.flex=parseInt(m[1],10)/100);delete e.width}g.push(e)}if(b.north||b.south){l.shadowContainer=Ext.create("Ext.container.Container",{ownerCt:l.owner,el:l.getTarget(),layout:Ext.applyIf({type:"vbox",align:"stretch",getVisibleItems:l.getVisibleItems},l.initialConfig)});l.createItems(l.shadowContainer,f);if(l.splitters.north){l.splitters.north.ownerCt=l.shadowContainer}if(l.splitters.south){l.splitters.south.ownerCt=l.shadowContainer}if(l.embeddedContainer){l.embeddedContainer.ownerCt=l.shadowContainer;l.createItems(l.embeddedContainer,g);if(l.splitters.east){l.splitters.east.ownerCt=l.embeddedContainer}if(l.splitters.west){l.splitters.west.ownerCt=l.embeddedContainer}Ext.each([l.splitters.north,l.splitters.south],function(i){if(i){i.on("beforedragstart",l.fixHeightConstraints,l)}});if(a){b.center.flex-=a}if(n){l.embeddedContainer.flex-=n}}else{if(n){b.center.flex-=n}}}else{l.shadowContainer=Ext.create("Ext.container.Container",{ownerCt:l.owner,el:l.getTarget(),layout:Ext.applyIf({type:(g.length==1)?"fit":"hbox",align:"stretch"},l.initialConfig)});l.createItems(l.shadowContainer,g);if(l.splitters.east){l.splitters.east.ownerCt=l.shadowContainer}if(l.splitters.west){l.splitters.west.ownerCt=l.shadowContainer}if(a){b.center.flex-=n}}for(c=0,k=l.shadowContainer.items.items,h=k.length;c<h;c++){k[c].shadowOwnerCt=l.shadowContainer}if(l.embeddedContainer){for(c=0,k=l.embeddedContainer.items.items,h=k.length;c<h;c++){k[c].shadowOwnerCt=l.embeddedContainer}}l.shadowLayout=l.shadowContainer.getLayout();l.borderLayoutInitialized=true},setupState:function(b){var a=b.getState;b.getState=function(){var c=a.call(b)||{},e=b.region;c.collapsed=!!b.collapsed;if(e=="west"||e=="east"){c.width=b.getWidth()}else{c.height=b.getHeight()}return c};b.addStateEvents(["collapse","expand","resize"])},createItems:function(a,b){delete a.items;a.initItems();a.items.addAll(b)},createSplitter:function(a){var b=this,c=(a.collapseMode!="header"),e;e=Ext.create("Ext.resizer.Splitter",{hidden:!!a.hidden,collapseTarget:a,performCollapse:!c,listeners:c?{click:{fn:Ext.Function.bind(b.onSplitterCollapseClick,b,[a]),element:"collapseEl"}}:null});if(a.collapseMode=="mini"){a.placeholder=e;e.collapsedCls=a.collapsedCls}a.on({hide:b.onRegionVisibilityChange,show:b.onRegionVisibilityChange,scope:b});return e},fixHeightConstraints:function(){var c=this,a=c.embeddedContainer,b=1e+99,e=-1;if(!a){return}a.items.each(function(f){if(Ext.isNumber(f.maxHeight)){b=Math.max(b,f.maxHeight)}if(Ext.isNumber(f.minHeight)){e=Math.max(e,f.minHeight)}});a.maxHeight=b;a.minHeight=e},onRegionVisibilityChange:function(a){this.splitters[a.region][a.hidden?"hide":"show"]();this.layout()},onSplitterCollapseClick:function(a){if(a.collapsed){this.onPlaceHolderToolClick(null,null,null,{client:a})}else{a.collapse()}},getPlaceholder:function(c){var e=this,g=c.placeholder,b=c.shadowOwnerCt,f=b.layout,a=Ext.panel.Panel.prototype.getOppositeDirection(c.collapseDirection),h=(c.region=="north"||c.region=="south");if(c.collapseMode=="header"){return}if(!g){if(c.collapseMode=="mini"){g=Ext.create("Ext.resizer.Splitter",{id:"collapse-placeholder-"+c.id,collapseTarget:c,performCollapse:false,listeners:{click:{fn:Ext.Function.bind(e.onSplitterCollapseClick,e,[c]),element:"collapseEl"}}});g.addCls(g.collapsedCls)}else{g={id:"collapse-placeholder-"+c.id,margins:c.initialConfig.margins||Ext.getClass(c).prototype.margins,xtype:"header",orientation:h?"horizontal":"vertical",title:c.title,textCls:c.headerTextCls,iconCls:c.iconCls,baseCls:c.baseCls+"-header",ui:c.ui,indicateDrag:c.draggable,cls:Ext.baseCSSPrefix+"region-collapsed-placeholder "+Ext.baseCSSPrefix+"region-collapsed-"+c.collapseDirection+"-placeholder "+c.collapsedCls,listeners:c.floatable?{click:{fn:function(i){e.floatCollapsedPanel(i,c)},element:"el"}}:null};if((Ext.isIE6||Ext.isIE7||(Ext.isIEQuirks))&&!h){g.width=25}if(!c.hideCollapseTool){g[h?"tools":"items"]=[{xtype:"tool",client:c,type:"expand-"+a,handler:e.onPlaceHolderToolClick,scope:e}]}}g=e.owner.createComponent(g);if(c.isXType("panel")){c.on({titlechange:e.onRegionTitleChange,iconchange:e.onRegionIconChange,scope:e})}}c.placeholder=g;g.comp=c;return g},onRegionTitleChange:function(a,b){a.placeholder.setTitle(b)},onRegionIconChange:function(b,a){b.placeholder.setIconCls(a)},calculateChildBox:function(a){var b=this;if(b.shadowContainer.items.contains(a)){return b.shadowContainer.layout.calculateChildBox(a)}else{if(b.embeddedContainer&&b.embeddedContainer.items.contains(a)){return b.embeddedContainer.layout.calculateChildBox(a)}}},onBeforeRegionCollapse:function(h,l,e){if(h.collapsedChangingLayout){if(Ext.global.console&&Ext.global.console.warn){Ext.global.console.warn(Ext.getDisplayName(arguments.callee),"aborted because the collapsed state is in the middle of changing")}return false}h.collapsedChangingLayout=true;var k=this,q=h.el,c,b=h.collapseMode=="mini",i=h.shadowOwnerCt,a=i.layout,n=h.placeholder,g=k.owner.suspendLayout,m=i.suspendLayout,p=(h.region=="north"||h.region=="west");k.owner.suspendLayout=true;i.suspendLayout=true;a.layoutBusy=true;if(i.componentLayout){i.componentLayout.layoutBusy=true}k.shadowContainer.layout.layoutBusy=true;k.layoutBusy=true;k.owner.componentLayout.layoutBusy=true;if(!n){n=k.getPlaceholder(h)}if(n.shadowOwnerCt===i){n.show()}else{i.insert(i.items.indexOf(h)+(p?0:1),n);n.shadowOwnerCt=i;n.ownerCt=k.owner}h.hidden=true;if(!n.rendered){a.renderItem(n,a.innerCt);if(h.region=="north"||h.region=="south"){n.setCalculatedSize(h.getWidth())}else{n.setCalculatedSize(undefined,h.getHeight())}}function f(){k.owner.suspendLayout=g;i.suspendLayout=m;delete a.layoutBusy;if(i.componentLayout){delete i.componentLayout.layoutBusy}delete k.shadowContainer.layout.layoutBusy;delete k.layoutBusy;delete k.owner.componentLayout.layoutBusy;delete h.collapsedChangingLayout;h.collapsed=true;h.fireEvent("collapse",h)}if(h.animCollapse&&k.initialCollapsedComplete){a.layout();q.dom.style.zIndex=100;if(!b){n.el.hide()}q.slideOut(k.slideDirection[h.region],{duration:Ext.Number.from(h.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){q.show().setLeftTop(-10000,-10000);q.dom.style.zIndex="";if(!b){n.el.slideIn(k.slideDirection[h.region],{easing:"linear",duration:100})}f()}}})}else{q.setLeftTop(-10000,-10000);a.layout();f()}return false},onBeforeRegionExpand:function(b,a){this.onPlaceHolderToolClick(null,null,null,{client:b,shouldFireBeforeexpand:false});return false},onPlaceHolderToolClick:function(p,v,a,c){var u=this,r=c.client,i=(r.collapseMode!="mini")||!r.split,t=r.el,l,f=r.placeholder,m=f.el,s=r.shadowOwnerCt,b=s.layout,k,q=u.owner.suspendLayout,n=s.suspendLayout,h;if(r.collapsedChangingLayout){if(Ext.global.console&&Ext.global.console.warn){Ext.global.console.warn(Ext.getDisplayName(arguments.callee),"aborted because the collapsed state is in the middle of changing")}return false}if(c.shouldFireBeforeexpand!==false&&r.fireEvent("beforeexpand",r,true)===false){return false}r.collapsedChangingLayout=true;if(r.getActiveAnimation()){r.stopAnimation()}if(r.slideOutAnim){t.un(r.panelMouseMon);m.un(r.placeholderMouseMon);delete r.slideOutAnim;delete r.panelMouseMon;delete r.placeholderMouseMon;h=true}u.owner.suspendLayout=true;s.suspendLayout=true;b.layoutBusy=true;if(s.componentLayout){s.componentLayout.layoutBusy=true}u.shadowContainer.layout.layoutBusy=true;u.layoutBusy=true;u.owner.componentLayout.layoutBusy=true;r.hidden=false;r.collapsed=false;if(i){f.hidden=true}l=b.calculateChildBox(r);if(r.collapseTool){r.collapseTool.show()}if(r.animCollapse&&!h){t.setStyle("visibility","hidden")}t.setLeftTop(l.left,l.top);k=r.getSize();if(k.height!=l.height||k.width!=l.width){u.setItemSize(r,l.width,l.height)}function g(){u.owner.suspendLayout=q;s.suspendLayout=n;delete b.layoutBusy;if(s.componentLayout){delete s.componentLayout.layoutBusy}delete u.shadowContainer.layout.layoutBusy;delete u.layoutBusy;delete u.owner.componentLayout.layoutBusy;delete r.collapsedChangingLayout;r.removeCls(Ext.baseCSSPrefix+"border-region-slide-in");r.fireEvent("expand",r)}if(i){f.el.hide()}if(r.animCollapse&&!h){t.dom.style.zIndex=100;t.slideIn(u.slideDirection[r.region],{duration:Ext.Number.from(r.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){t.dom.style.zIndex="";r.hidden=false;b.onLayout();g()}}})}else{b.onLayout();g()}},floatCollapsedPanel:function(k,h){if(h.floatable===false){return}var l=this,r=h.el,p=h.placeholder,q=p.el,i=h.shadowOwnerCt,b=i.layout,g=b.getChildBox(p),n=i.suspendLayout,a,f,m;if(k.getTarget("."+Ext.baseCSSPrefix+"tool")){return}if(r.getActiveAnimation()){return}if(h.slideOutAnim){l.slideOutFloatedComponent(h);return}function c(t){var s=r.getRegion().union(q.getRegion()).adjust(1,-1,-1,1);if(!s.contains(t.getPoint())){l.slideOutFloatedComponent(h)}}h.placeholderMouseMon=q.monitorMouseLeave(500,c);i.suspendLayout=true;l.layoutBusy=true;l.owner.componentLayout.layoutBusy=true;if(h.collapseTool){h.collapseTool.hide()}h.hidden=false;h.collapsed=false;p.hidden=true;f=b.calculateChildBox(h);p.hidden=false;if(h.region=="north"||h.region=="west"){f[b.parallelBefore]+=g[b.parallelPrefix]-1}else{f[b.parallelBefore]-=(g[b.parallelPrefix]-1)}r.setStyle("visibility","hidden");r.setLeftTop(f.left,f.top);a=h.getSize();if(a.height!=f.height||a.width!=f.width){l.setItemSize(h,f.width,f.height)}m={listeners:{afteranimate:function(){i.suspendLayout=n;delete l.layoutBusy;delete l.owner.componentLayout.layoutBusy;m.listeners={afterAnimate:function(){r.show().removeCls(Ext.baseCSSPrefix+"border-region-slide-in").setLeftTop(-10000,-10000);h.hidden=true;h.collapsed=true;delete h.slideOutAnim;delete h.panelMouseMon;delete h.placeholderMouseMon}};h.slideOutAnim=m}},duration:500};r.addCls(Ext.baseCSSPrefix+"border-region-slide-in");r.slideIn(l.slideDirection[h.region],m);h.panelMouseMon=r.monitorMouseLeave(500,c)},slideOutFloatedComponent:function(a){var c=a.el,b;c.un(a.panelMouseMon);a.placeholder.el.un(a.placeholderMouseMon);c.slideOut(this.slideDirection[a.region],a.slideOutAnim);delete a.slideOutAnim;delete a.panelMouseMon;delete a.placeholderMouseMon},onRegionDestroy:function(a){var b=a.placeholder;if(b){delete b.ownerCt;b.destroy()}},onDestroy:function(){var b=this,a=b.shadowContainer,c=b.embeddedContainer;if(a){delete a.ownerCt;Ext.destroy(a)}if(c){delete c.ownerCt;Ext.destroy(c)}delete b.regions;delete b.splitters;delete b.shadowContainer;delete b.embeddedContainer;b.callParent(arguments)}});Ext.define("Ext.resizer.SplitterTracker",{extend:"Ext.dd.DragTracker",requires:["Ext.util.Region"],enabled:true,overlayCls:Ext.baseCSSPrefix+"resizable-overlay",getPrevCmp:function(){var a=this.getSplitter();return a.previousSibling()},getNextCmp:function(){var a=this.getSplitter();return a.nextSibling()},onBeforeStart:function(h){var f=this,g=f.getPrevCmp(),a=f.getNextCmp(),c=f.getSplitter().collapseEl,b;if(c&&(h.getTarget()===f.getSplitter().collapseEl.dom)){return false}if(a.collapsed||g.collapsed){return false}b=f.overlay=Ext.getBody().createChild({cls:f.overlayCls,html:"&#160;"});b.unselectable();b.setSize(Ext.Element.getViewWidth(true),Ext.Element.getViewHeight(true));b.show();f.prevBox=g.getEl().getBox();f.nextBox=a.getEl().getBox();f.constrainTo=f.calculateConstrainRegion()},onStart:function(b){var a=this.getSplitter();a.addCls(a.baseCls+"-active")},calculateConstrainRegion:function(){var g=this,a=g.getSplitter(),h=a.getWidth(),i=a.defaultSplitMin,b=a.orientation,e=g.prevBox,k=g.getPrevCmp(),c=g.nextBox,f=g.getNextCmp(),m,l;if(b==="vertical"){m=Ext.create("Ext.util.Region",e.y,(k.maxWidth?e.x+k.maxWidth:c.right-(f.minWidth||i))+h,e.bottom,e.x+(k.minWidth||i));l=Ext.create("Ext.util.Region",c.y,c.right-(f.minWidth||i),c.bottom,(f.maxWidth?c.right-f.maxWidth:e.x+(e.minWidth||i))-h)}else{m=Ext.create("Ext.util.Region",e.y+(k.minHeight||i),e.right,(k.maxHeight?e.y+k.maxHeight:c.bottom-(f.minHeight||i))+h,e.x);l=Ext.create("Ext.util.Region",(f.maxHeight?c.bottom-f.maxHeight:e.y+(k.minHeight||i))-h,c.right,c.bottom-(f.minHeight||i),c.x)}return m.intersect(l)},performResize:function(h){var k=this,c=k.getOffset("dragTarget"),a=k.getSplitter(),f=a.orientation,l=k.getPrevCmp(),i=k.getNextCmp(),b=a.ownerCt,g=b.getLayout();b.suspendLayout=true;if(f==="vertical"){if(l){if(!l.maintainFlex){delete l.flex;l.setSize(k.prevBox.width+c[0],l.getHeight())}}if(i){if(!i.maintainFlex){delete i.flex;i.setSize(k.nextBox.width-c[0],i.getHeight())}}}else{if(l){if(!l.maintainFlex){delete l.flex;l.setSize(l.getWidth(),k.prevBox.height+c[1])}}if(i){if(!i.maintainFlex){delete i.flex;i.setSize(l.getWidth(),k.nextBox.height-c[1])}}}delete b.suspendLayout;g.onLayout()},endDrag:function(){var a=this;if(a.overlay){a.overlay.remove();delete a.overlay}a.callParent(arguments)},onEnd:function(c){var a=this,b=a.getSplitter();b.removeCls(b.baseCls+"-active");a.performResize()},onDrag:function(g){var c=this,h=c.getOffset("dragTarget"),f=c.getSplitter(),b=f.getEl(),a=f.orientation;if(a==="vertical"){b.setX(c.startRegion.left+h[0])}else{b.setY(c.startRegion.top+h[1])}},getSplitter:function(){return Ext.getCmp(this.getDragCt().id)}});Ext.define("Ext.grid.column.Date",{extend:"Ext.grid.column.Column",alias:["widget.datecolumn"],requires:["Ext.Date"],alternateClassName:"Ext.grid.DateColumn",initComponent:function(){var a=this;a.callParent(arguments);if(!a.format){a.format=Ext.Date.defaultFormat}a.renderer=Ext.util.Format.dateRenderer(a.format)}});Ext.define("Ext.button.Cycle",{alias:"widget.cycle",extend:"Ext.button.Split",alternateClassName:"Ext.CycleButton",getButtonText:function(b){var a=this,c="";if(b&&a.showText===true){if(a.prependText){c+=a.prependText}c+=b.text;return c}return a.text},setActiveItem:function(c,a){var b=this;if(!Ext.isObject(c)){c=b.menu.getComponent(c)}if(c){if(!b.rendered){b.text=b.getButtonText(c);b.iconCls=c.iconCls}else{b.setText(b.getButtonText(c));b.setIconCls(c.iconCls)}b.activeItem=c;if(!c.checked){c.setChecked(true,false)}if(b.forceIcon){b.setIconCls(b.forceIcon)}if(!a){b.fireEvent("change",b,c)}}},getActiveItem:function(){return this.activeItem},initComponent:function(){var c=this,b=0,a;c.addEvents("change");if(c.changeHandler){c.on("change",c.changeHandler,c.scope||c);delete c.changeHandler}a=(c.menu.items||[]).concat(c.items||[]);c.menu=Ext.applyIf({cls:Ext.baseCSSPrefix+"cycle-menu",items:[]},c.menu);Ext.each(a,function(f,e){f=Ext.applyIf({group:c.id,itemIndex:e,checkHandler:c.checkHandler,scope:c,checked:f.checked||false},f);c.menu.items.push(f);if(f.checked){b=e}});c.itemCount=c.menu.items.length;c.callParent(arguments);c.on("click",c.toggleSelected,c);c.setActiveItem(b,c);if(c.width&&c.showText){c.addCls(Ext.baseCSSPrefix+"cycle-fixed-width")}},checkHandler:function(a,b){if(b){this.setActiveItem(a)}},toggleSelected:function(){var c=this,a=c.menu,b;b=c.activeItem.next(":not([disabled])")||a.items.getAt(0);b.setChecked(true)}});Ext.define("Ext.grid.column.Boolean",{extend:"Ext.grid.column.Column",alias:["widget.booleancolumn"],alternateClassName:"Ext.grid.BooleanColumn",trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(a){this.callParent(arguments);var b=this.trueText,c=this.falseText,e=this.undefinedText;this.renderer=function(f){if(f===undefined){return e}if(!f||f==="false"){return c}return b}}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible",{singleton:true,version:"1.5.1",versionDetails:{major:1,minor:5,patch:1},extVersion:"4.0.1",hasBorderRadius:Ext.supports.CSS3BorderRadius,log:function(a){},getScrollWidth:function(){return Ext.getScrollbarSize?Ext.getScrollbarSize().width:Ext.getScrollBarWidth()},constructor:function(){Ext.onReady(function(){if(Extensible.getScrollWidth()<3){Ext.getBody().addCls("x-no-scrollbar")}if(Ext.isWindows){Ext.getBody().addCls("x-win")}})},Date:{use24HourTime:false,diff:function(f,a,c){var b=1,e=a.getTime()-f.getTime();if(c=="s"){b=1000}else{if(c=="m"){b=1000*60}else{if(c=="h"){b=1000*60*60}}}return Math.round(e/b)},diffDays:function(f,b){var c=1000*60*60*24,a=Ext.Date.clearTime,e=a(b,true).getTime()-a(f,true).getTime();return Math.ceil(e/c)},copyTime:function(c,b){var a=Ext.Date.clone(b);a.setHours(c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds());return a},compare:function(c,b,a){var f=c,e=b;if(a!==true){f=Ext.Date.clone(c);f.setMilliseconds(0);e=Ext.Date.clone(b);e.setMilliseconds(0)}return e.getTime()-f.getTime()},maxOrMin:function(a){var f=(a?0:Number.MAX_VALUE),c=0,b=arguments[1],e=b.length;for(;c<e;c++){f=Math[a?"max":"min"](f,b[c].getTime())}return new Date(f)},max:function(){return this.maxOrMin.apply(this,[true,arguments])},min:function(){return this.maxOrMin.apply(this,[false,arguments])},isInRange:function(a,c,b){return(a>=c&&a<=b)},rangesOverlap:function(g,b,f,a){var c=(g>=f&&g<=a),e=(b>=f&&b<=a),h=(g<=f&&b>=a);return(c||e||h)},isWeekend:function(a){return a.getDay()%6===0},isWeekday:function(a){return a.getDay()%6!==0},isMidnight:function(a){return a.getHours()===0&&a.getMinutes()===0},isToday:function(a){return this.diffDays(a,this.today())===0},today:function(){return Ext.Date.clearTime(new Date())},add:function(c,e){if(!e){return c}var b=Ext.Date,a=b.add,f=b.clone(c);if(e.years){f=a(f,b.YEAR,e.years)}if(e.months){f=a(f,b.MONTH,e.months)}if(e.weeks){e.days=(e.days||0)+(e.weeks*7)}if(e.days){f=a(f,b.DAY,e.days)}if(e.hours){f=a(f,b.HOUR,e.hours)}if(e.minutes){f=a(f,b.MINUTE,e.minutes)}if(e.seconds){f=a(f,b.SECOND,e.seconds)}if(e.millis){f=a(f,b.MILLI,e.millis)}return e.clearTime?b.clearTime(f):f}}});Ext.require(["Ext.picker.Color","Ext.form.Basic","Ext.data.MemoryProxy"]);Extensible.applyOverrides=function(){Ext.DomHelper=Ext.core.DomHelper;var a=Ext.getVersion();if(Ext.layout.container.AbstractCard){Ext.layout.container.AbstractCard.override({renderChildren:function(){if(!this.deferredRender){this.getActiveItem();this.callParent()}}})}Ext.Component.override({getId:function(){var b=this,c;if(!b.id){c=b.getXType();c=c?c.replace(/[\.,\s]/g,"-"):"ext-comp";b.id=c+"-"+b.getAutoId()}return b.id}});if(Ext.picker&&Ext.picker.Color){Ext.picker.Color.override({constructor:function(){this.renderTpl=this.renderTpl||Ext.create("Ext.XTemplate",'<tpl for="colors"><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" unselectable="on">&#160;</span></em></a></tpl>');this.callParent(arguments)}})}if(a.isLessThan("4.1")){if(Ext.data&&Ext.data.reader&&Ext.data.reader.Reader){Ext.data.reader.Reader.override({extractData:function(m){var l=this,n=[],g=[],f=l.model,h=0,c=m.length,p=l.getIdProperty(),e,b,k;if(!m.length&&Ext.isObject(m)){m=[m];c=1}for(;h<c;h++){e=m[h];n=l.extractValues(e);b=l.getId(n);k=new f(n,b,e);g.push(k);if(l.implicitIncludes){l.readAssociated(k,e)}}return g}})}}if(Ext.form&&Ext.form.Basic){Ext.form.Basic.override({reset:function(){var b=this;b.getFields().each(function(c){c.reset()});return b}})}if(Ext.data&&Ext.data.MemoryProxy){Ext.data.MemoryProxy.override({updateOperation:function(b,e,c){Ext.each(b.records,function(f){f.commit()});b.setCompleted();b.setSuccessful();Ext.callback(e,c||this,[b])},create:function(){this.updateOperation.apply(this,arguments)},update:function(){this.updateOperation.apply(this,arguments)},destroy:function(){this.updateOperation.apply(this,arguments)}})}};Ext.onReady(Extensible.applyOverrides);
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.util.WeekEventRenderer",{requires:["Ext.core.DomHelper"],statics:{getEventRow:function(a,b,h){var f=1,g=Ext.get(a+"-wk-"+b),e,c;if(g){c=g.child(".ext-cal-evt-tbl",true);e=c.tBodies[0].childNodes[h+f];if(!e){e=Ext.core.DomHelper.append(c.tBodies[0],"<tr></tr>")}}return Ext.get(e)},renderEvent:function(e,l,b,c,a,g,f){var k=Extensible.calendar.data.EventMappings,n=e.data||e.event.data,p=Ext.Date.clone(g),q=Extensible.Date.add(p,{days:a-b,millis:-1}),h=this.getEventRow(f.viewId,l,c),m=Extensible.Date.diffDays(g,n[k.EndDate.name])+1,i=Math.min(m,a-b);n._weekIndex=l;n._renderAsAllDay=n[k.IsAllDay.name]||e.isSpanStart;n.spanLeft=n[k.StartDate.name].getTime()<p.getTime();n.spanRight=n[k.EndDate.name].getTime()>q.getTime();n.spanCls=(n.spanLeft?(n.spanRight?"ext-cal-ev-spanboth":"ext-cal-ev-spanleft"):(n.spanRight?"ext-cal-ev-spanright":""));var r={tag:"td",cls:"ext-cal-ev",cn:f.tpl.apply(f.templateDataFn(n))};if(i>1){r.colspan=i}Ext.core.DomHelper.append(h,r)},render:function(v){var x=this,y="&#160;",s=0,g=v.eventGrid,h=Ext.Date.clone(v.viewStart),l="",m=v.tpl,q=v.maxEventsPerDay!=undefined?v.maxEventsPerDay:999,t=v.weekCount<1?6:v.weekCount,n=v.weekCount==1?v.dayCount:7,u,p,a,e,f,r,c,k,i,b;for(;s<t;s++){p=0;a=g[s];for(;p<n;p++){if(a&&a[p]){e=0;f=0;r=a[p];c=r.length;l=Ext.Date.format(h,"Ymd");for(;e<c;e++){if(!r[e]){if(e>=q){continue}u=x.getEventRow(v.viewId,s,e);Ext.core.DomHelper.append(u,{tag:"td",cls:"ext-cal-ev",html:y,id:v.viewId+"-empty-"+c+"-day-"+l})}else{if(e>=q){f++;continue}k=r[e];if(!k.isSpan||k.isSpanStart){x.renderEvent(k,s,p,e,n,h,v)}}}if(f>0){u=x.getEventRow(v.viewId,s,q);Ext.core.DomHelper.append(u,{tag:"td",cls:"ext-cal-ev-more",id:"ext-cal-ev-more-"+Ext.Date.format(h,"Ymd"),cn:{tag:"a",html:Ext.String.format(v.getMoreText(f),f)}})}else{if(c<v.evtMaxCount[s]){u=x.getEventRow(v.viewId,s,c);if(u){i={tag:"td",cls:"ext-cal-ev",html:y,id:v.viewId+"-empty-"+(c+1)+"-day-"+l};var w=v.evtMaxCount[s]-c;if(w>1){i.rowspan=w}Ext.core.DomHelper.append(u,i)}}}}else{u=x.getEventRow(v.viewId,s,0);if(u){i={tag:"td",cls:"ext-cal-ev",html:y,id:v.viewId+"-empty-day-"+l};if(v.evtMaxCount[s]>1){i.rowspan=v.evtMaxCount[s]}Ext.core.DomHelper.append(u,i)}}h=Extensible.Date.add(h,{days:1})}}}}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.template.BoxLayout",{extend:"Ext.XTemplate",requires:["Ext.Date"],firstWeekDateFormat:"D j",otherWeeksDateFormat:"j",singleDayDateFormat:"l, F j, Y",multiDayFirstDayFormat:"M j, Y",multiDayMonthStartFormat:"M j",constructor:function(a){Ext.apply(this,a);var b=this.showWeekLinks?'<div id="{weekLinkId}" class="ext-cal-week-link">{weekNum}</div>':"";Extensible.calendar.template.BoxLayout.superclass.constructor.call(this,'<tpl for="weeks">','<div id="{[this.id]}-wk-{[xindex-1]}" class="ext-cal-wk-ct" style="top:{[this.getRowTop(xindex, xcount)]}%; height:{[this.getRowHeight(xcount)]}%;">',b,'<table class="ext-cal-bg-tbl" cellpadding="0" cellspacing="0">',"<tbody>","<tr>",'<tpl for=".">','<td id="{[this.id]}-day-{date:date("Ymd")}" class="{cellCls}">&#160;</td>',"</tpl>","</tr>","</tbody>","</table>",'<table class="ext-cal-evt-tbl" cellpadding="0" cellspacing="0">',"<tbody>","<tr>",'<tpl for=".">','<td id="{[this.id]}-ev-day-{date:date("Ymd")}" class="{titleCls}"><div>{title}</div></td>',"</tpl>","</tr>","</tbody>","</table>","</div>","</tpl>",{getRowTop:function(c,e){return((c-1)*(100/e))},getRowHeight:function(c){return 100/c}})},applyTemplate:function(n){Ext.apply(this,n);var k=0,u="",f=true,v=false,h=false,t=false,a=false,m=false,e=n.weekendCls,p=n.prevMonthCls,s=n.nextMonthCls,b=n.todayCls,g=[[]],r=Extensible.Date.today(),l=Ext.Date.clone(this.viewStart),c=this.startDate.getMonth();for(;k<this.weekCount||this.weekCount==-1;k++){if(l>this.viewEnd){break}g[k]=[];for(var q=0;q<this.dayCount;q++){v=l.getTime()===r.getTime();h=f||(l.getDate()==1);t=(l.getMonth()<c)&&this.weekCount==-1;a=(l.getMonth()>c)&&this.weekCount==-1;m=l.getDay()%6===0;if(l.getDay()==1){g[k].weekNum=this.showWeekNumbers?Ext.Date.format(l,"W"):"&#160;";g[k].weekLinkId="ext-cal-week-"+Ext.Date.format(l,"Ymd")}if(h){if(v){u=this.getTodayText()}else{u=Ext.Date.format(l,this.dayCount==1?this.singleDayDateFormat:(f?this.multiDayFirstDayFormat:this.multiDayMonthStartFormat))}}else{var i=(k==0&&this.showHeader!==true)?this.firstWeekDateFormat:this.otherWeeksDateFormat;u=v?this.getTodayText():Ext.Date.format(l,i)}g[k].push({title:u,date:Ext.Date.clone(l),titleCls:"ext-cal-dtitle "+(v?" ext-cal-dtitle-today":"")+(k==0?" ext-cal-dtitle-first":"")+(t?" ext-cal-dtitle-prev":"")+(a?" ext-cal-dtitle-next":""),cellCls:"ext-cal-day "+(v?" "+b:"")+(q==0?" ext-cal-day-first":"")+(t?" "+p:"")+(a?" "+s:"")+(m&&e?" "+e:"")});l=Extensible.Date.add(l,{days:1});f=false}}if(Ext.getVersion().isLessThan("4.1")){return Extensible.calendar.template.BoxLayout.superclass.applyTemplate.call(this,{weeks:g})}else{return this.applyOut({weeks:g},[]).join("")}},getTodayText:function(){var b=Extensible.Date.use24HourTime?"G:i ":"g:ia ",c=this.showTodayText!==false?this.todayText:"",a=this.showTime!==false?' <span id="'+this.id+'-clock" class="ext-cal-dtitle-time" aria-live="off">'+Ext.Date.format(new Date(),b)+"</span>":"",e=c.length>0||a.length>0?" &#8212; ":"";if(this.dayCount==1){return Ext.Date.format(new Date(),this.singleDayDateFormat)+e+c+a}fmt=this.weekCount==1?this.firstWeekDateFormat:this.otherWeeksDateFormat;return c.length>0?c+a:Ext.Date.format(new Date(),fmt)+a}},function(){this.createAlias("apply","applyTemplate")});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.ns("Extensible.calendar.data");Extensible.calendar.data.CalendarMappings={CalendarId:{name:"CalendarId",mapping:"id",type:"int"},Title:{name:"Title",mapping:"title",type:"string"},Description:{name:"Description",mapping:"desc",type:"string"},ColorId:{name:"ColorId",mapping:"color",type:"int"},IsHidden:{name:"IsHidden",mapping:"hidden",type:"boolean"}};
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.ns("Extensible.calendar.data");Extensible.calendar.data.EventMappings={EventId:{name:"EventId",mapping:"id",type:"int"},CalendarId:{name:"CalendarId",mapping:"cid",type:"int"},Title:{name:"Title",mapping:"title",type:"string"},StartDate:{name:"StartDate",mapping:"start",type:"date",dateFormat:"c"},EndDate:{name:"EndDate",mapping:"end",type:"date",dateFormat:"c"},RRule:{name:"RecurRule",mapping:"rrule",type:"string"},Location:{name:"Location",mapping:"loc",type:"string"},Notes:{name:"Notes",mapping:"notes",type:"string"},Url:{name:"Url",mapping:"url",type:"string"},IsAllDay:{name:"IsAllDay",mapping:"ad",type:"boolean"},Reminder:{name:"Reminder",mapping:"rem",type:"string"}};
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.data.EventModel",{extend:"Ext.data.Model",requires:["Ext.util.MixedCollection","Extensible.calendar.data.EventMappings"],statics:{reconfigure:function(){var f=Extensible.calendar.data,c=f.EventMappings,g=f.EventModel.prototype,b=[];g.idProperty=c.EventId.name||"id";for(prop in c){if(c.hasOwnProperty(prop)){b.push(c[prop])}}g.fields.clear();for(var e=0,a=b.length;e<a;e++){g.fields.add(Ext.create("Ext.data.Field",b[e]))}return f.EventModel}}},function(){Extensible.calendar.data.EventModel.reconfigure()});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.dd.StatusProxy",{extend:"Ext.dd.StatusProxy",moveEventCls:"ext-cal-dd-move",addEventCls:"ext-cal-dd-add",renderTpl:['<div class="'+Ext.baseCSSPrefix+'dd-drop-icon"></div>','<div class="ext-dd-ghost-ct">','<div id="{id}-ghost" class="'+Ext.baseCSSPrefix+'dd-drag-ghost"></div>','<div id="{id}-message" class="ext-dd-msg"></div>',"</div>"],childEls:["ghost","message"],constructor:function(a){if(Ext.getVersion().isLessThan("4.1")){this.preComponentConstructor(a)}else{this.callParent(arguments)}},preComponentConstructor:function(a){var b=this;Ext.apply(b,a);b.id=b.id||Ext.id();b.proxy=Ext.createWidget("component",{floating:true,id:b.id||Ext.id(),html:b.renderTpl.join(""),cls:Ext.baseCSSPrefix+"dd-drag-proxy "+b.dropNotAllowed,shadow:!a||a.shadow!==false,renderTo:document.body});b.el=b.proxy.el;b.el.show();b.el.setVisibilityMode(Ext.core.Element.VISIBILITY);b.el.hide();b.ghost=Ext.get(b.el.dom.childNodes[1].childNodes[0]);b.message=Ext.get(b.el.dom.childNodes[1].childNodes[1]);b.dropStatus=b.dropNotAllowed},update:function(a){this.callParent(arguments);var b=this.ghost.dom.firstChild;if(b){Ext.fly(b).setHeight("auto")}},updateMsg:function(a){this.message.update(a)}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.data.CalendarModel",{extend:"Ext.data.Model",requires:["Ext.util.MixedCollection","Extensible.calendar.data.CalendarMappings"],statics:{reconfigure:function(){var f=Extensible.calendar.data,c=f.CalendarMappings,g=f.CalendarModel.prototype,b=[];g.idProperty=c.CalendarId.name||"id";for(prop in c){if(c.hasOwnProperty(prop)){b.push(c[prop])}}g.fields.clear();for(var e=0,a=b.length;e<a;e++){g.fields.add(Ext.create("Ext.data.Field",b[e]))}return f.CalendarModel}}},function(){Extensible.calendar.data.CalendarModel.reconfigure()});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.util.ColorPicker",{extend:"Ext.picker.Color",alias:"widget.extensible.calendarcolorpicker",requires:["Ext.XTemplate"],colorCount:32,constructor:function(){this.renderTpl=Ext.create("Ext.XTemplate",'<tpl for="colors"><a href="#" class="x-cal-{.}" hidefocus="on"><em><span unselectable="on">&#160;</span></em></a></tpl>');this.callParent(arguments)},initComponent:function(){this.callParent(arguments);this.addCls("x-calendar-palette");if(this.handler){this.on("select",this.handler,this.scope||this,{delegate:"a"})}this.colors=[];for(var a=1;a<=this.colorCount;a++){this.colors.push(a)}},handleClick:function(b,a){b.preventDefault();var c=a.className.split("x-cal-")[1];this.select(c)},select:function(g,a){var c=this,f=c.selectedCls,e=c.value;if(!c.rendered){c.value=g;return}if(g!=e||c.allowReselect){var b=c.el;if(c.value){b.down(".x-cal-"+e).removeCls(f)}b.down(".x-cal-"+g).addCls(f);c.value=g;if(a!==true){c.fireEvent("select",c,g)}}}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.template.DayHeader",{extend:"Ext.XTemplate",requires:["Extensible.calendar.template.BoxLayout"],constructor:function(a){Ext.apply(this,a);this.allDayTpl=Ext.create("Extensible.calendar.template.BoxLayout",a);this.allDayTpl.compile();Extensible.calendar.template.DayHeader.superclass.constructor.call(this,'<div class="ext-cal-hd-ct">','<table class="ext-cal-hd-days-tbl" cellspacing="0" cellpadding="0">',"<tbody>","<tr>",'<td class="ext-cal-gutter"></td>','<td class="ext-cal-hd-days-td"><div class="ext-cal-hd-ad-inner">{allDayTpl}</div></td>','<td class="ext-cal-gutter-rt"></td>',"</tr>","</tbody>","</table>","</div>")},applyTemplate:function(b){var a={allDayTpl:this.allDayTpl.apply(b)};if(Ext.getVersion().isLessThan("4.1")){return Extensible.calendar.template.DayHeader.superclass.applyTemplate.call(this,a)}else{return this.applyOut(a,[]).join("")}}},function(){this.createAlias("apply","applyTemplate")});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.template.DayBody",{extend:"Ext.XTemplate",constructor:function(a){Ext.apply(this,a);Extensible.calendar.template.DayBody.superclass.constructor.call(this,'<table class="ext-cal-bg-tbl" cellspacing="0" cellpadding="0" style="height:{dayHeight}px;">',"<tbody>",'<tr height="1">','<td class="ext-cal-gutter"></td>','<td colspan="{dayCount}">','<div class="ext-cal-bg-rows">','<div class="ext-cal-bg-rows-inner">','<tpl for="times">','<div class="ext-cal-bg-row ext-row-{[xindex]}" style="height:{parent.hourHeight}px;">','<div class="ext-cal-bg-row-div {parent.hourSeparatorCls}" style="height:{parent.hourSeparatorHeight}px;"></div>',"</div>","</tpl>","</div>","</div>","</td>","</tr>","<tr>",'<td class="ext-cal-day-times">','<tpl for="times">','<div class="ext-cal-bg-row" style="height:{parent.hourHeight}px;">','<div class="ext-cal-day-time-inner"  style="height:{parent.hourHeight-1}px;">{.}</div>',"</div>","</tpl>","</td>",'<tpl for="days">','<td class="ext-cal-day-col">','<div class="ext-cal-day-col-inner">','<div id="{[this.id]}-day-col-{.:date("Ymd")}" class="ext-cal-day-col-gutter" style="height:{parent.dayHeight}px;"></div>',"</div>","</td>","</tpl>","</tr>","</tbody>","</table>")},applyTemplate:function(e){this.today=Extensible.Date.today();this.dayCount=this.dayCount||1;var l=0,n=[],f=Ext.Date.clone(e.viewStart);for(;l<this.dayCount;l++){n[l]=Extensible.Date.add(f,{days:l})}var a=[],b=this.viewStartHour,k=this.viewEndHour,c=this.hourIncrement,m=this.hourHeight*(k-b),g=Extensible.Date.use24HourTime?"G:i":"ga",h;f=Extensible.Date.add(new Date("5/26/1972"),{hours:b});for(l=b;l<k;l++){a.push(Ext.Date.format(f,g));f=Extensible.Date.add(f,{minutes:c})}h={days:n,dayCount:n.length,times:a,hourHeight:this.hourHeight,hourSeparatorCls:this.showHourSeparator?"":"no-sep",dayHeight:m,hourSeparatorHeight:(this.hourHeight/2)};if(Ext.getVersion().isLessThan("4.1")){return Extensible.calendar.template.DayBody.superclass.applyTemplate.call(this,h)}else{return this.applyOut(h,[]).join("")}}},function(){this.createAlias("apply","applyTemplate")});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.template.Month",{extend:"Ext.XTemplate",requires:["Extensible.calendar.template.BoxLayout"],dayHeaderFormat:"D",dayHeaderTitleFormat:"l, F j, Y",constructor:function(a){Ext.apply(this,a);this.weekTpl=Ext.create("Extensible.calendar.template.BoxLayout",a);this.weekTpl.compile();var b=this.showWeekLinks?'<div class="ext-cal-week-link-hd">&#160;</div>':"";Extensible.calendar.template.Month.superclass.constructor.call(this,'<div class="ext-cal-inner-ct {extraClasses}">','<div class="ext-cal-hd-ct ext-cal-month-hd">',b,'<table class="ext-cal-hd-days-tbl" cellpadding="0" cellspacing="0">',"<tbody>","<tr>",'<tpl for="days">','<th class="ext-cal-hd-day{[xindex==1 ? " ext-cal-day-first" : ""]}" title="{title}">{name}</th>',"</tpl>","</tr>","</tbody>","</table>","</div>",'<div class="ext-cal-body-ct">{weeks}</div>',"</div>")},applyTemplate:function(c){var l=[],b=this.weekTpl.apply(c),e=c.viewStart,a=Extensible.Date,f;for(var h=0;h<7;h++){var k=a.add(e,{days:h});l.push({name:Ext.Date.format(k,this.dayHeaderFormat),title:Ext.Date.format(k,this.dayHeaderTitleFormat)})}var g=this.showHeader===true?"":"ext-cal-noheader";if(this.showWeekLinks){g+=" ext-cal-week-links"}f={days:l,weeks:b,extraClasses:g};if(Ext.getVersion().isLessThan("4.1")){return Extensible.calendar.template.Month.superclass.applyTemplate.call(this,f)}else{return this.applyOut(f,[]).join("")}}},function(){this.createAlias("apply","applyTemplate")});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.form.EventWindow",{extend:"Ext.window.Window",alias:"widget.extensible.eventeditwindow",requires:["Ext.form.Panel","Extensible.calendar.data.EventModel","Extensible.calendar.data.EventMappings"],titleTextAdd:"Add Event",titleTextEdit:"Edit Event",width:600,labelWidth:65,detailsLinkText:"Edit Details...",savingMessage:"Saving changes...",deletingMessage:"Deleting event...",saveButtonText:"Save",deleteButtonText:"Delete",cancelButtonText:"Cancel",titleLabelText:"Title",datesLabelText:"When",calendarLabelText:"Calendar",closeAction:"hide",modal:false,resizable:false,constrain:true,buttonAlign:"left",editDetailsLinkClass:"edit-dtl-link",enableEditDetails:true,layout:"fit",formPanelConfig:{border:false},initComponent:function(){this.addEvents({eventadd:true,eventupdate:true,eventdelete:true,eventcancel:true,editdetails:true});this.fbar=this.getFooterBarConfig();this.callParent(arguments)},getFooterBarConfig:function(){var a=["->",{text:this.saveButtonText,itemId:this.id+"-save-btn",disabled:false,handler:this.onSave,scope:this},{text:this.deleteButtonText,itemId:this.id+"-delete-btn",disabled:false,handler:this.onDelete,scope:this,hideMode:"offsets"},{text:this.cancelButtonText,itemId:this.id+"-cancel-btn",disabled:false,handler:this.onCancel,scope:this}];if(this.enableEditDetails!==false){a.unshift({xtype:"tbtext",itemId:this.id+"-details-btn",text:'<a href="#" class="'+this.editDetailsLinkClass+'">'+this.detailsLinkText+"</a>"})}return a},onRender:function(b,a){this.formPanel=Ext.create("Ext.FormPanel",Ext.applyIf({fieldDefaults:{labelWidth:this.labelWidth},items:this.getFormItemConfigs()},this.formPanelConfig));this.add(this.formPanel);this.callParent(arguments)},getFormItemConfigs:function(){var a=[{xtype:"textfield",itemId:this.id+"-title",name:Extensible.calendar.data.EventMappings.Title.name,fieldLabel:this.titleLabelText,anchor:"100%"},{xtype:"extensible.daterangefield",itemId:this.id+"-dates",name:"dates",anchor:"95%",singleLine:true,fieldLabel:this.datesLabelText}];if(this.calendarStore){a.push({xtype:"extensible.calendarcombo",itemId:this.id+"-calendar",name:Extensible.calendar.data.EventMappings.CalendarId.name,anchor:"100%",fieldLabel:this.calendarLabelText,store:this.calendarStore})}return a},afterRender:function(){this.callParent(arguments);this.el.addCls("ext-cal-event-win");this.initRefs();var a=this.getDockedItems("toolbar")[0].items.items[0];if(a.el.hasCls("x-component-default")){Ext.destroy(a)}},initRefs:function(){this.saveButton=this.down("#"+this.id+"-save-btn");this.deleteButton=this.down("#"+this.id+"-delete-btn");this.cancelButton=this.down("#"+this.id+"-cancel-btn");this.detailsButton=this.down("#"+this.id+"-details-btn");if(this.detailsButton){this.detailsButton.getEl().on("click",this.onEditDetailsClick,this)}this.titleField=this.down("#"+this.id+"-title");this.dateRangeField=this.down("#"+this.id+"-dates");this.calendarField=this.down("#"+this.id+"-calendar")},onEditDetailsClick:function(a){a.stopEvent();this.updateRecord(this.activeRecord,true);this.fireEvent("editdetails",this,this.activeRecord,this.animateTarget)},show:function(g,e){this.animateTarget=(Ext.isIE8&&Ext.isStrict)?null:e,M=Extensible.calendar.data.EventMappings;this.callParent([this.animateTarget,function(){this.titleField.focus(false,100)},this]);this.deleteButton[g.data&&g.data[M.EventId.name]?"show":"hide"]();var c,b=this.formPanel.form;if(g.data){c=g;if(c.phantom){this.setTitle(this.titleTextAdd)}else{this.setTitle(this.titleTextEdit)}b.loadRecord(c)}else{this.setTitle(this.titleTextAdd);var h=g[M.StartDate.name],a=g[M.EndDate.name]||Extensible.Date.add(h,{hours:1});c=Ext.create("Extensible.calendar.data.EventModel");c.data[M.StartDate.name]=h;c.data[M.EndDate.name]=a;c.data[M.IsAllDay.name]=!!g[M.IsAllDay.name]||h.getDate()!=Extensible.Date.add(a,{millis:1}).getDate();b.reset();b.loadRecord(c)}if(this.calendarStore){this.calendarField.setValue(c.data[M.CalendarId.name])}this.dateRangeField.setValue(c.data);this.activeRecord=c;return this},roundTime:function(b,c){c=c||15;var a=parseInt(b.getMinutes());return b.add("mi",c-(a%c))},onCancel:function(){this.cleanup(true);this.fireEvent("eventcancel",this,this.activeRecord,this.animateTarget)},cleanup:function(a){if(this.activeRecord){this.activeRecord.reject()}delete this.activeRecord;if(a===true){this.hide()}},updateRecord:function(b,f){var a=b.fields,c=this.formPanel.getForm().getValues(),e,i=Extensible.calendar.data.EventMappings,h={};a.each(function(k){e=k.name;if(e in c){h[e]=c[e]}});var g=this.dateRangeField.getValue();h[i.StartDate.name]=g[0];h[i.EndDate.name]=g[1];h[i.IsAllDay.name]=g[2];b.beginEdit();b.set(h);if(!f){b.endEdit()}return this},onSave:function(){if(!this.formPanel.form.isValid()){return}if(!this.updateRecord(this.activeRecord)){this.onCancel();return}this.fireEvent(this.activeRecord.phantom?"eventadd":"eventupdate",this,this.activeRecord,this.animateTarget)},onDelete:function(){this.fireEvent("eventdelete",this,this.activeRecord,this.animateTarget)}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.dd.DragZone",{extend:"Ext.dd.DragZone",requires:["Extensible.calendar.dd.StatusProxy","Extensible.calendar.data.EventMappings"],ddGroup:"CalendarDD",eventSelector:".ext-cal-evt",constructor:function(b,a){if(!Extensible.calendar._statusProxyInstance){Extensible.calendar._statusProxyInstance=Ext.create("Extensible.calendar.dd.StatusProxy")}this.proxy=Extensible.calendar._statusProxyInstance;this.callParent(arguments)},getDragData:function(b){var a=b.getTarget(this.eventSelector,3);if(a){var c=this.view.getEventRecordFromEl(a);if(!c){return}return{type:"eventdrag",ddel:a,eventStart:c.data[Extensible.calendar.data.EventMappings.StartDate.name],eventEnd:c.data[Extensible.calendar.data.EventMappings.EndDate.name],proxy:this.proxy}}a=this.view.getDayAt(b.getX(),b.getY());if(a.el){return{type:"caldrag",start:a.date,proxy:this.proxy}}return null},onInitDrag:function(a,e){if(this.dragData.ddel){var b=this.dragData.ddel.cloneNode(true),c=Ext.fly(b).down("dl");Ext.fly(b).setWidth("auto");if(c){c.setHeight("auto")}this.proxy.update(b);this.onStartDrag(a,e)}else{if(this.dragData.start){this.onStartDrag(a,e)}}this.view.onInitDrag();return true},afterRepair:function(){if(Ext.enableFx&&this.dragData.ddel){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9")}this.dragging=false},getRepairXY:function(a){if(this.dragData.ddel){return Ext.Element.fly(this.dragData.ddel).getXY()}},afterInvalidDrop:function(a,b){Ext.select(".ext-dd-shim").hide()},destroy:function(){this.callParent(arguments);delete Extensible.calendar._statusProxyInstance}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.data.MemoryEventStore",{extend:"Ext.data.Store",model:"Extensible.calendar.data.EventModel",requires:["Ext.data.proxy.Memory","Ext.data.reader.Json","Ext.data.writer.Json","Extensible.calendar.data.EventModel","Extensible.calendar.data.EventMappings"],proxy:{type:"memory",reader:{type:"json",root:"evts"},writer:{type:"json"}},constructor:function(a){a=a||{};this.callParent(arguments);this.sorters=this.sorters||[{property:Extensible.calendar.data.EventMappings.StartDate.name,direction:"ASC"}];this.idProperty=this.idProperty||Extensible.calendar.data.EventMappings.EventId.mapping||"id";this.fields=Extensible.calendar.data.EventModel.prototype.fields.getRange();if(a.autoMsg!==false){this.on("write",this.onWrite,this)}this.autoMsg=a.autoMsg;this.onCreateRecords=Ext.Function.createInterceptor(this.onCreateRecords,this.interceptCreateRecords);this.initRecs()},interceptCreateRecords:function(c,b,g){if(g){var e=0,f,a=c.length;for(;e<a;e++){c[e].data[Extensible.calendar.data.EventMappings.EventId.name]=c[e].id}}},initRecs:function(){this.each(function(a){a.store=this;a.phantom=false},this)},onWrite:function(b,a){var c=this;if(Extensible.example&&Extensible.example.msg){var g=a.wasSuccessful(),f=a.getRecords()[0],e=f.data[Extensible.calendar.data.EventMappings.Title.name];switch(a.action){case"create":Extensible.example.msg("Add",'Added "'+Ext.value(e,"(No title)")+'"');break;case"update":Extensible.example.msg("Update",'Updated "'+Ext.value(e,"(No title)")+'"');break;case"destroy":Extensible.example.msg("Delete",'Deleted "'+Ext.value(e,"(No title)")+'"');break}}},onProxyLoad:function(b){var e=this,a;if(e.data&&e.data.length>0){e.totalCount=e.data.length;a=e.data.items}else{var c=b.getResultSet(),f=b.wasSuccessful();a=b.getRecords();if(c){e.totalCount=c.total}if(f){e.loadRecords(a,b)}}e.loading=false;e.fireEvent("load",e,a,f)}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.data.EventStore",{extend:"Ext.data.Store",model:"Extensible.calendar.data.EventModel",constructor:function(a){a=a||{};this.deferLoad=a.autoLoad;a.autoLoad=false;this.callParent(arguments)},load:function(a){Extensible.log("store load");a=a||{};if(a.params){delete this.initialParams}if(this.initialParams){a.params=a.params||{};Ext.apply(a.params,this.initialParams);delete this.initialParams}this.callParent(arguments)}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.data.MemoryCalendarStore",{extend:"Ext.data.Store",model:"Extensible.calendar.data.CalendarModel",requires:["Ext.data.proxy.Memory","Ext.data.reader.Json","Ext.data.writer.Json","Extensible.calendar.data.CalendarModel","Extensible.calendar.data.CalendarMappings"],proxy:{type:"memory",reader:{type:"json",root:"calendars"},writer:{type:"json"}},autoLoad:true,initComponent:function(){this.sorters=this.sorters||[{property:Extensible.calendar.data.CalendarMappings.Title.name,direction:"ASC"}];this.idProperty=this.idProperty||Extensible.calendar.data.CalendarMappings.CalendarId.name||"id";this.fields=Extensible.calendar.data.CalendarModel.prototype.fields.getRange();this.callParent(arguments)}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.gadget.CalendarListMenu",{extend:"Ext.menu.Menu",alias:"widget.extensible.calendarlistmenu",requires:["Extensible.calendar.util.ColorPicker"],hideOnClick:true,ignoreParentClicks:true,displayOnlyThisCalendarText:"Display only this calendar",enableScrolling:false,initComponent:function(){this.addEvents("showcalendar","hidecalendar","radiocalendar","colorchange");Ext.apply(this,{items:[{text:this.displayOnlyThisCalendarText,iconCls:"extensible-cal-icon-cal-show",handler:Ext.bind(this.handleRadioCalendarClick,this)},"-",{xtype:"extensible.calendarcolorpicker",id:this.id+"-calendar-color-picker",handler:Ext.bind(this.handleColorSelect,this)}]});this.addClass("x-calendar-list-menu");this.callParent(arguments)},afterRender:function(){this.callParent(arguments);this.palette=this.down("#"+this.id+"-calendar-color-picker");if(this.colorId){this.palette.select(this.colorId,true)}},handleRadioCalendarClick:function(b,a){this.fireEvent("radiocalendar",this,this.calendarId)},handleColorSelect:function(b,a){this.fireEvent("colorchange",this,this.calendarId,a,this.colorId);this.colorId=a;this.menuHide()},setCalendar:function(b,a){this.calendarId=b;this.colorId=a;if(this.rendered){this.palette.select(a,true)}return this},menuHide:function(){if(this.hideOnClick){this.hide()}}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.gadget.CalendarListPanel",{extend:"Ext.panel.Panel",alias:"widget.extensible.calendarlist",requires:["Ext.XTemplate","Extensible.calendar.gadget.CalendarListMenu"],title:"Calendars",collapsible:true,autoHeight:true,layout:"fit",menuSelector:"em",width:100,initComponent:function(){this.addCls("x-calendar-list");this.callParent(arguments)},afterRender:function(b,a){this.callParent(arguments);if(this.store){this.setStore(this.store,true)}this.refresh();this.body.on("click",this.onClick,this);this.body.on("mouseover",this.onMouseOver,this,{delegate:"li"});this.body.on("mouseout",this.onMouseOut,this,{delegate:"li"})},getListTemplate:function(){if(!this.tpl){this.tpl=!(Ext.isIE||Ext.isOpera)?Ext.create("Ext.XTemplate",'<ul class="x-unselectable"><tpl for=".">','<li id="{cmpId}" class="ext-cal-evr {colorCls} {hiddenCls}">{title}<em>&#160;</em></li>',"</tpl></ul>"):Ext.create("Ext.XTemplate",'<ul class="x-unselectable"><tpl for=".">','<li id="{cmpId}" class="ext-cal-evo {colorCls} {hiddenCls}">','<div class="ext-cal-evm">','<div class="ext-cal-evi">{title}<em>&#160;</em></div>',"</div>","</li>","</tpl></ul>");this.tpl.compile()}return this.tpl},setStore:function(a,b){if(!b&&this.store){this.store.un("load",this.refresh,this);this.store.un("add",this.refresh,this);this.store.un("remove",this.refresh,this);this.store.un("update",this.onUpdate,this);this.store.un("clear",this.refresh,this)}if(a){a.on("load",this.refresh,this);a.on("add",this.refresh,this);a.on("remove",this.refresh,this);a.on("update",this.onUpdate,this);a.on("clear",this.refresh,this)}this.store=a},onUpdate:function(b,c,a){if(a==Ext.data.Record.COMMIT){this.refresh()}},refresh:function(){if(this.skipRefresh){return}var f=[],c=0,g=null,b=Extensible.calendar.data.CalendarMappings,e=this.store.getRange(),a=e.length;for(;c<a;c++){g={cmpId:this.id+"__"+e[c].data[b.CalendarId.name],title:e[c].data[b.Title.name],colorCls:this.getColorCls(e[c].data[b.ColorId.name])};if(e[c].data[b.IsHidden.name]===true){g.hiddenCls="ext-cal-hidden"}f[f.length]=g}this.getListTemplate().overwrite(this.body,f)},getColorCls:function(a){return"x-cal-"+a+"-ad"},toggleCalendar:function(c,b){var a=this.store.findRecord(Extensible.calendar.data.CalendarMappings.CalendarId.name,c);CM=Extensible.calendar.data.CalendarMappings,isHidden=a.data[CM.IsHidden.name];a.set([CM.IsHidden.name],!isHidden);if(b!==false){a.commit()}},showCalendar:function(c,b){var a=this.store.findRecord(Extensible.calendar.data.CalendarMappings.CalendarId.name,c);if(a.data[Extensible.calendar.data.CalendarMappings.IsHidden.name]===true){this.toggleCalendar(c,b)}},hideCalendar:function(c,b){var a=this.store.findRecord(Extensible.calendar.data.CalendarMappings.CalendarId.name,c);if(a.data[Extensible.calendar.data.CalendarMappings.IsHidden.name]!==true){this.toggleCalendar(c,b)}},radioCalendar:function(g){var b=0,f,c=Extensible.calendar.data.CalendarMappings.CalendarId.name,e=this.store.getRange(),a=e.length;for(;b<a;b++){f=e[b].data[c];if(f==g){this.showCalendar(f,false)}else{this.hideCalendar(f,false)}}this.skipRefresh=true;this.store.sync();delete this.skipRefresh;this.refresh()},onMouseOver:function(b,a){Ext.fly(a).addCls("hover")},onMouseOut:function(b,a){Ext.fly(a).removeCls("hover")},getCalendarId:function(a){return a.id.split("__")[1]},getCalendarItemEl:function(a){return Ext.get(this.id+"__"+a)},onClick:function(c,a){var b;if(b=c.getTarget(this.menuSelector,3,true)){this.showEventMenu(b,c.getXY())}else{if(b=c.getTarget("li",3,true)){this.toggleCalendar(this.getCalendarId(b))}}},handleColorChange:function(e,f,c,a){var b=this.store.findRecord(Extensible.calendar.data.CalendarMappings.CalendarId.name,f);b.data[Extensible.calendar.data.CalendarMappings.ColorId.name]=c;b.commit()},handleRadioCalendar:function(a,b){this.radioCalendar(b)},showEventMenu:function(a,b){var e=this.getCalendarId(a.parent("li")),c=this.store.findRecord(Extensible.calendar.data.CalendarMappings.CalendarId.name,e);colorId=c.data[Extensible.calendar.data.CalendarMappings.ColorId.name];if(!this.menu){this.menu=Ext.create("Extensible.calendar.gadget.CalendarListMenu");this.menu.on("colorchange",this.handleColorChange,this);this.menu.on("radiocalendar",this.handleRadioCalendar,this)}this.menu.setCalendar(e,colorId);this.menu.showAt(b)}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.menu.Event",{extend:"Ext.menu.Menu",alias:"widget.extensible.eventcontextmenu",requires:["Ext.menu.DatePicker"],hideOnClick:true,ignoreParentClicks:true,editDetailsText:"Edit Details",deleteText:"Delete",moveToText:"Move to...",enableScrolling:false,initComponent:function(){this.addEvents("editdetails","eventdelete","eventmove");this.buildMenu();this.callParent(arguments)},buildMenu:function(){if(this.rendered){return}this.dateMenu=Ext.create("Ext.menu.DatePicker",{scope:this,handler:function(b,a){a=Extensible.Date.copyTime(this.rec.data[Extensible.calendar.data.EventMappings.StartDate.name],a);this.fireEvent("eventmove",this,this.rec,a)}});Ext.apply(this,{items:[{text:this.editDetailsText,iconCls:"extensible-cal-icon-evt-edit",scope:this,handler:function(){this.fireEvent("editdetails",this,this.rec,this.ctxEl)}},{text:this.deleteText,iconCls:"extensible-cal-icon-evt-del",scope:this,handler:function(){this.fireEvent("eventdelete",this,this.rec,this.ctxEl)}},"-",{text:this.moveToText,iconCls:"extensible-cal-icon-evt-move",menu:this.dateMenu}]})},showForEvent:function(c,a,b){this.rec=c;this.ctxEl=a;this.dateMenu.picker.setValue(c.data[Extensible.calendar.data.EventMappings.StartDate.name]);this.showAt(b)},onHide:function(){this.callParent(arguments);delete this.ctxEl}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.dd.DropZone",{extend:"Ext.dd.DropZone",requires:["Ext.Layer","Extensible.calendar.data.EventMappings"],ddGroup:"CalendarDD",eventSelector:".ext-cal-evt",dateRangeFormat:"{0}-{1}",dateFormat:"n/j",shims:[],getTargetFromEvent:function(b){var a=this.dragOffset||0,f=b.getPageY()-a,c=this.view.getDayAt(b.getPageX(),f);return c.el?c:null},onNodeOver:function(f,l,k,h){var a=Extensible.Date,b=h.type=="eventdrag"?f.date:a.min(h.start,f.date),g=h.type=="eventdrag"?a.add(f.date,{days:a.diffDays(h.eventStart,h.eventEnd)}):a.max(h.start,f.date);if(!this.dragStartDate||!this.dragEndDate||(a.diffDays(b,this.dragStartDate)!=0)||(a.diffDays(g,this.dragEndDate)!=0)){this.dragStartDate=b;this.dragEndDate=a.add(g,{days:1,millis:-1,clearTime:true});this.shim(b,g);var i=Ext.Date.format(b,this.dateFormat);if(a.diffDays(b,g)>0){g=Ext.Date.format(g,this.dateFormat);i=Ext.String.format(this.dateRangeFormat,i,g)}var c=Ext.String.format(h.type=="eventdrag"?this.moveText:this.createText,i);h.proxy.updateMsg(c)}return this.dropAllowed},shim:function(b,g){this.currWeek=-1;var c=Ext.Date.clone(b),h=0,f,k,a=Extensible.Date,e=a.diffDays(c,g)+1;Ext.each(this.shims,function(i){if(i){i.isActive=false}});while(h++<e){var l=this.view.getDayEl(c);if(l){var m=this.view.getWeekIndex(c),f=this.shims[m];if(!f){f=this.createShim();this.shims[m]=f}if(m!=this.currWeek){f.boxInfo=l.getBox();this.currWeek=m}else{k=l.getBox();f.boxInfo.right=k.right;f.boxInfo.width=k.right-f.boxInfo.x}f.isActive=true}c=a.add(c,{days:1})}Ext.each(this.shims,function(i){if(i){if(i.isActive){i.show();i.setBox(i.boxInfo)}else{if(i.isVisible()){i.hide()}}}})},createShim:function(){var a=this.view.ownerCalendarPanel?this.view.ownerCalendarPanel:this.view;if(!this.shimCt){this.shimCt=Ext.get("ext-dd-shim-ct-"+a.id);if(!this.shimCt){this.shimCt=document.createElement("div");this.shimCt.id="ext-dd-shim-ct-"+a.id;a.getEl().parent().appendChild(this.shimCt)}}var b=document.createElement("div");b.className="ext-dd-shim";this.shimCt.appendChild(b);return Ext.create("Ext.Layer",{shadow:false,useDisplay:true,constrain:false},b)},clearShims:function(){Ext.each(this.shims,function(a){if(a){a.hide()}})},onContainerOver:function(a,c,b){return this.dropAllowed},onCalendarDragComplete:function(){delete this.dragStartDate;delete this.dragEndDate;this.clearShims()},onNodeDrop:function(h,a,f,c){if(h&&c){if(c.type=="eventdrag"){var g=this.view.getEventRecordFromEl(c.ddel),b=Extensible.Date.copyTime(g.data[Extensible.calendar.data.EventMappings.StartDate.name],h.date);this.view.onEventDrop(g,b);this.onCalendarDragComplete();return true}if(c.type=="caldrag"){this.view.onCalendarEndDrag(this.dragStartDate,this.dragEndDate,Ext.bind(this.onCalendarDragComplete,this));return true}}this.onCalendarDragComplete();return false},onContainerDrop:function(a,c,b){this.onCalendarDragComplete();return false},destroy:function(){Ext.each(this.shims,function(a){if(a){Ext.destroy(a)}});Ext.removeNode(this.shimCt);delete this.shimCt;this.shims.length=0}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.form.field.ReminderCombo",{extend:"Ext.form.ComboBox",alias:"widget.extensible.remindercombo",requires:["Ext.data.ArrayStore"],fieldLabel:"Reminder",queryMode:"local",triggerAction:"all",forceSelection:true,displayField:"desc",valueField:"value",noneText:"None",atStartTimeText:"At start time",reminderValueFormat:"{0} {1} before start",minutesText:"minutes",hourText:"hour",hoursText:"hours",dayText:"day",daysText:"days",weekText:"week",weeksText:"weeks",initComponent:function(){this.store=this.store||Ext.create("Ext.data.ArrayStore",{fields:["value","desc"],idIndex:0,data:this.getValueList()});this.callParent(arguments)},getValueList:function(){var c=this,a=c.reminderValueFormat,b=Ext.String.format;return[["",c.noneText],["0",c.atStartTimeText],["5",b(a,"5",c.getMinutesText(5))],["15",b(a,"15",c.getMinutesText(15))],["30",b(a,"30",c.getMinutesText(30))],["60",b(a,"1",c.getHoursText(1))],["90",b(a,"1.5",c.getHoursText(1.5))],["120",b(a,"2",c.getHoursText(2))],["180",b(a,"3",c.getHoursText(3))],["360",b(a,"6",c.getHoursText(6))],["720",b(a,"12",c.getHoursText(12))],["1440",b(a,"1",c.getDaysText(1))],["2880",b(a,"2",c.getDaysText(2))],["4320",b(a,"3",c.getDaysText(3))],["5760",b(a,"4",c.getDaysText(4))],["7200",b(a,"5",c.getDaysText(5))],["10080",b(a,"1",c.getWeeksText(1))],["20160",b(a,"2",c.getWeeksText(2))]]},getMinutesText:function(a){return a===1?this.minuteText:this.minutesText},getHoursText:function(a){return a===1?this.hourText:this.hoursText},getDaysText:function(a){return a===1?this.dayText:this.daysText},getWeeksText:function(a){return a===1?this.weekText:this.weeksText},initValue:function(){if(this.value!==undefined){this.setValue(this.value)}else{this.setValue("")}this.originalValue=this.getValue()}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.form.field.CalendarCombo",{extend:"Ext.form.field.ComboBox",alias:"widget.extensible.calendarcombo",requires:["Extensible.calendar.data.CalendarMappings"],fieldLabel:"Calendar",triggerAction:"all",queryMode:"local",forceSelection:true,selectOnFocus:true,defaultCls:"x-cal-default",hiddenCalendarCls:"ext-cal-hidden",initComponent:function(){this.valueField=Extensible.calendar.data.CalendarMappings.CalendarId.name;this.displayField=Extensible.calendar.data.CalendarMappings.Title.name;this.listConfig=Ext.apply(this.listConfig||{},{getInnerTpl:this.getListItemTpl});this.store.on("update",this.refreshColorCls,this);this.callParent(arguments)},getListItemTpl:function(a){return'<div class="x-combo-list-item x-cal-{'+Extensible.calendar.data.CalendarMappings.ColorId.name+'}"><div class="ext-cal-picker-icon">&#160;</div>{'+a+"}</div>"},afterRender:function(){this.callParent(arguments);this.wrap=this.el.down(".x-form-item-body");this.wrap.addCls("ext-calendar-picker");this.icon=Ext.core.DomHelper.append(this.wrap,{tag:"div",cls:"ext-cal-picker-icon ext-cal-picker-mainicon"})},refreshColorCls:function(){var a=this,e=Extensible.calendar.data.CalendarMappings,c="",b=a.getValue();if(!a.wrap){return a}if(a.currentStyleClss!==undefined){a.wrap.removeCls(a.currentStyleClss)}if(!Ext.isEmpty(b)){if(Ext.isArray(b)){b=b[0]}if(!b.data){b=this.store.findRecord(e.CalendarId.name,b)}c="x-cal-"+(b.data?b.data[e.ColorId.name]:b)}a.currentStyleClss=c;a.wrap.addCls(c);return a},setValue:function(a){if(!a&&this.store.getCount()>0){a=this.store.getAt(0).data[Extensible.calendar.data.CalendarMappings.CalendarId.name]}this.callParent(arguments);this.refreshColorCls()}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.form.recurrence.Combo",{extend:"Ext.form.ComboBox",alias:"widget.extensible.recurrencecombo",requires:["Ext.data.ArrayStore"],width:160,fieldLabel:"Repeats",mode:"local",triggerAction:"all",forceSelection:true,displayField:"pattern",valueField:"id",recurrenceText:{none:"Does not repeat",daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"},initComponent:function(){this.callParent(arguments);this.addEvents("recurrencechange");this.store=this.store||Ext.create("Ext.data.ArrayStore",{fields:["id","pattern"],idIndex:0,data:[["NONE",this.recurrenceText.none],["DAILY",this.recurrenceText.daily],["WEEKLY",this.recurrenceText.weekly],["MONTHLY",this.recurrenceText.monthly],["YEARLY",this.recurrenceText.yearly]]})},initValue:function(){this.callParent(arguments);if(this.value!=undefined){this.fireEvent("recurrencechange",this.value)}},setValue:function(b){var a=this.value;this.callParent(arguments);if(a!=b){this.fireEvent("recurrencechange",b)}return this}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.dd.DayDragZone",{extend:"Extensible.calendar.dd.DragZone",ddGroup:"DayViewDD",resizeSelector:".ext-evt-rsz",getDragData:function(c){var a=c.getTarget(this.resizeSelector,2,true);if(a){var b=a.parent(this.eventSelector),f=this.view.getEventRecordFromEl(b);if(!f){return}return{type:"eventresize",xy:c.getXY(),ddel:b.dom,eventStart:f.data[Extensible.calendar.data.EventMappings.StartDate.name],eventEnd:f.data[Extensible.calendar.data.EventMappings.EndDate.name],proxy:this.proxy}}var a=c.getTarget(this.eventSelector,3);if(a){var f=this.view.getEventRecordFromEl(a);if(!f){return}return{type:"eventdrag",xy:c.getXY(),ddel:a,eventStart:f.data[Extensible.calendar.data.EventMappings.StartDate.name],eventEnd:f.data[Extensible.calendar.data.EventMappings.EndDate.name],proxy:this.proxy}}a=this.view.getDayAt(c.getX(),c.getY());if(a.el){return{type:"caldrag",dayInfo:a,proxy:this.proxy}}return null}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.dd.DayDropZone",{extend:"Extensible.calendar.dd.DropZone",ddGroup:"DayViewDD",dateRangeFormat:"{0}-{1}",dateFormat:"n/j",onNodeOver:function(c,q,m,i){var b,r=this.createText,h=Extensible.Date.use24HourTime?"G:i":"g:ia";if(i.type=="caldrag"){if(!this.dragStartMarker){this.dragStartMarker=c.el.parent().createChild({style:"position:absolute;"});this.dragStartMarker.setBox(i.dayInfo.timeBox);this.dragCreateDt=i.dayInfo.date}var l,k=this.dragStartMarker.getBox();k.height=Math.ceil(Math.abs(m.getY()-k.y)/c.timeBox.height)*c.timeBox.height;if(m.getY()<k.y){k.height+=c.timeBox.height;k.y=k.y-k.height+c.timeBox.height;l=Extensible.Date.add(this.dragCreateDt,{minutes:this.ddIncrement})}else{c.date=Extensible.Date.add(c.date,{minutes:this.ddIncrement})}this.shim(this.dragCreateDt,k);var p=Extensible.Date.diff(this.dragCreateDt,c.date),u=Extensible.Date.add(this.dragCreateDt,{millis:p});this.dragStartDate=Extensible.Date.min(this.dragCreateDt,u);this.dragEndDate=l||Extensible.Date.max(this.dragCreateDt,u);b=Ext.String.format(this.dateRangeFormat,Ext.Date.format(this.dragStartDate,h),Ext.Date.format(this.dragEndDate,h))}else{var t=Ext.get(i.ddel),s=t.parent().parent(),k=t.getBox();k.width=s.getWidth();if(i.type=="eventdrag"){if(this.dragOffset===undefined){var f=this.view.getDayAt(i.xy[0],i.xy[1]).timeBox;this.dragOffset=f.y-k.y}else{k.y=c.timeBox.y}b=Ext.Date.format(c.date,(this.dateFormat+" "+h));k.x=c.el.getLeft();this.shim(c.date,k);r=this.moveText}if(i.type=="eventresize"){if(!this.resizeDt){this.resizeDt=c.date}k.x=s.getLeft();k.height=Math.ceil(Math.abs(m.getY()-k.y)/c.timeBox.height)*c.timeBox.height;if(m.getY()<k.y){k.y-=k.height}else{c.date=Extensible.Date.add(c.date,{minutes:this.ddIncrement})}this.shim(this.resizeDt,k);var p=Extensible.Date.diff(this.resizeDt,c.date),u=Extensible.Date.add(this.resizeDt,{millis:p}),a=Extensible.Date.min(i.eventStart,u),g=Extensible.Date.max(i.eventStart,u);i.resizeDates={StartDate:a,EndDate:g};b=Ext.String.format(this.dateRangeFormat,Ext.Date.format(a,h),Ext.Date.format(g,h));r=this.resizeText}}i.proxy.updateMsg(Ext.String.format(r,b));return this.dropAllowed},shim:function(b,a){Ext.each(this.shims,function(e){if(e){e.isActive=false;e.hide()}});var c=this.shims[0];if(!c){c=this.createShim();this.shims[0]=c}c.isActive=true;c.show();c.setBox(a)},onNodeDrop:function(g,a,c,b){if(g&&b){if(b.type=="eventdrag"){var f=this.view.getEventRecordFromEl(b.ddel);this.view.onEventDrop(f,g.date);this.onCalendarDragComplete();delete this.dragOffset;return true}if(b.type=="eventresize"){var f=this.view.getEventRecordFromEl(b.ddel);this.view.onEventResize(f,b.resizeDates);this.onCalendarDragComplete();delete this.resizeDt;return true}if(b.type=="caldrag"){Ext.destroy(this.dragStartMarker);delete this.dragStartMarker;delete this.dragCreateDt;this.view.onCalendarEndDrag(this.dragStartDate,this.dragEndDate,Ext.bind(this.onCalendarDragComplete,this));return true}}this.onCalendarDragComplete();return false}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.form.field.DateRange",{extend:"Ext.form.FieldContainer",alias:"widget.extensible.daterangefield",requires:["Ext.form.field.Date","Ext.form.field.Time","Ext.form.Label","Ext.form.field.Checkbox"],toText:"to",allDayText:"All day",singleLine:true,dateFormat:"n/j/Y",fieldLayout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}},initComponent:function(){var a=this;a.timeFormat=a.timeFormat||(Extensible.Date.use24HourTime?"G:i":"g:i A");a.addCls("ext-dt-range");if(a.singleLine){a.layout=a.fieldLayout;a.items=a.getFieldConfigs()}else{a.items=[{xtype:"container",layout:a.fieldLayout,items:[a.getStartDateConfig(),a.getStartTimeConfig(),a.getDateSeparatorConfig()]},{xtype:"container",layout:a.fieldLayout,items:[a.getEndDateConfig(),a.getEndTimeConfig(),a.getAllDayConfig()]}]}a.callParent(arguments);a.initRefs()},initRefs:function(){var a=this;a.startDate=a.down("#"+a.id+"-start-date");a.startTime=a.down("#"+a.id+"-start-time");a.endTime=a.down("#"+a.id+"-end-time");a.endDate=a.down("#"+a.id+"-end-date");a.allDay=a.down("#"+a.id+"-allday");a.toLabel=a.down("#"+a.id+"-to-label")},getFieldConfigs:function(){var a=this;return[a.getStartDateConfig(),a.getStartTimeConfig(),a.getDateSeparatorConfig(),a.getEndTimeConfig(),a.getEndDateConfig(),a.getAllDayConfig()]},getLayoutItems:function(a){var b=this;return a?b.items.items:[[b.startDate,b.startTime,b.toLabel],[b.endDate,b.endTime,b.allDay]]},getStartDateConfig:function(){return{xtype:"datefield",id:this.id+"-start-date",format:this.dateFormat,width:100,listeners:{change:{fn:function(){this.onFieldChange("date","start")},scope:this}}}},getStartTimeConfig:function(){return{xtype:"timefield",id:this.id+"-start-time",hidden:this.showTimes===false,labelWidth:0,hideLabel:true,width:90,format:this.timeFormat,listeners:{select:{fn:function(){this.onFieldChange("time","start")},scope:this}}}},getEndDateConfig:function(){return{xtype:"datefield",id:this.id+"-end-date",format:this.dateFormat,hideLabel:true,width:100,listeners:{change:{fn:function(){this.onFieldChange("date","end")},scope:this}}}},getEndTimeConfig:function(){return{xtype:"timefield",id:this.id+"-end-time",hidden:this.showTimes===false,labelWidth:0,hideLabel:true,width:90,format:this.timeFormat,listeners:{select:{fn:function(){this.onFieldChange("time","end")},scope:this}}}},getAllDayConfig:function(){return{xtype:"checkbox",id:this.id+"-allday",hidden:this.showTimes===false||this.showAllDay===false,boxLabel:this.allDayText,margins:{top:2,right:5,bottom:0,left:0},handler:this.onAllDayChange,scope:this}},onAllDayChange:function(a,b){this.startTime.setVisible(!b);this.endTime.setVisible(!b)},getDateSeparatorConfig:function(){return{xtype:"label",id:this.id+"-to-label",text:this.toText,margins:{top:4,right:5,bottom:0,left:0}}},isSingleLine:function(){var c=this;if(c.calculatedSingleLine===undefined){if(c.singleLine=="auto"){var e=c.ownerCt.getEl(),a=c.ownerCt.getWidth()-e.getPadding("lr"),b=e.down(".x-panel-body");if(b){a-=b.getPadding("lr")}b=e.down(".x-form-item-label");if(b){a-=b.getWidth()-b.getPadding("lr")}singleLine=a<=c.singleLineMinWidth?false:true}else{c.calculatedSingleLine=c.singleLine!==undefined?c.singleLine:true}}return c.calculatedSingleLine},onFieldChange:function(a,b){this.checkDates(a,b);this.fireEvent("change",this,this.getValue())},checkDates:function(f,i){var h=this,g=f==="date"?"Date":"Time",e=this["start"+g],b=this["end"+g],c=h.getDT("start"),a=h.getDT("end");if(c>a){if(i=="start"){b.setValue(c)}else{e.setValue(a);h.checkDates(f,"start")}}if(f=="date"){h.checkDates("time",i)}},getValue:function(){return[this.getDT("start"),this.getDT("end"),this.allDay.getValue()]},getDT:function(e){var b=this[e+"Time"].getValue(),a=this[e+"Date"].getValue();if(Ext.isDate(a)){a=Ext.Date.format(a,this[e+"Date"].format)}else{return null}if(b&&b!=""){b=Ext.Date.format(b,this[e+"Time"].format);var c=Ext.Date.parseDate(a+" "+b,this[e+"Date"].format+" "+this[e+"Time"].format);return c}return Ext.Date.parseDate(a,this[e+"Date"].format)},setValue:function(a){if(!a){return}var c=this,b=Extensible.calendar.data.EventMappings,e=b.StartDate.name;if(Ext.isArray(a)){c.setDT(a[0],"start");c.setDT(a[1],"end");c.allDay.setValue(!!a[2])}else{if(Ext.isDate(a)){c.setDT(a,"start");c.setDT(a,"end");c.allDay.setValue(false)}else{if(a[e]){c.setDT(a[e],"start");if(!c.setDT(a[b.EndDate.name],"end")){c.setDT(a[e],"end")}c.allDay.setValue(!!a[b.IsAllDay.name])}}}},setDT:function(a,b){if(a&&Ext.isDate(a)){this[b+"Date"].setValue(a);this[b+"Time"].setValue(Ext.Date.format(a,this[b+"Time"].format));return true}},isDirty:function(){var a=false;if(this.rendered&&!this.disabled){this.items.each(function(b){if(b.isDirty()){a=true;return false}})}return a},reset:function(){this.delegateFn("reset")},delegateFn:function(a){this.items.each(function(b){if(b[a]){b[a]()}})},beforeDestroy:function(){Ext.destroy(this.fieldCt);this.callParent(arguments)},getRawValue:Ext.emptyFn,setRawValue:Ext.emptyFn});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.form.EventDetails",{extend:"Ext.form.Panel",alias:"widget.extensible.eventeditform",requires:["Extensible.form.field.DateRange","Extensible.calendar.form.field.ReminderCombo","Extensible.calendar.data.EventMappings","Extensible.calendar.form.field.CalendarCombo","Extensible.form.recurrence.Combo","Ext.layout.container.Column"],labelWidth:65,labelWidthRightCol:65,colWidthLeft:0.6,colWidthRight:0.4,title:"Event Form",titleTextAdd:"Add Event",titleTextEdit:"Edit Event",titleLabelText:"Title",datesLabelText:"When",reminderLabelText:"Reminder",notesLabelText:"Notes",locationLabelText:"Location",webLinkLabelText:"Web Link",calendarLabelText:"Calendar",repeatsLabelText:"Repeats",saveButtonText:"Save",deleteButtonText:"Delete",cancelButtonText:"Cancel",bodyStyle:"padding:20px 20px 10px;",border:false,buttonAlign:"center",autoHeight:true,enableRecurrence:false,layout:"column",initComponent:function(){this.addEvents({eventadd:true,eventupdate:true,eventdelete:true,eventcancel:true});this.titleField=Ext.create("Ext.form.TextField",{fieldLabel:this.titleLabelText,name:Extensible.calendar.data.EventMappings.Title.name,anchor:"90%"});this.dateRangeField=Ext.create("Extensible.form.field.DateRange",{fieldLabel:this.datesLabelText,singleLine:false,anchor:"90%",listeners:{change:Ext.bind(this.onDateChange,this)}});this.reminderField=Ext.create("Extensible.calendar.form.field.ReminderCombo",{name:Extensible.calendar.data.EventMappings.Reminder.name,fieldLabel:this.reminderLabelText,anchor:"70%"});this.notesField=Ext.create("Ext.form.TextArea",{fieldLabel:this.notesLabelText,name:Extensible.calendar.data.EventMappings.Notes.name,grow:true,growMax:150,anchor:"100%"});this.locationField=Ext.create("Ext.form.TextField",{fieldLabel:this.locationLabelText,name:Extensible.calendar.data.EventMappings.Location.name,anchor:"100%"});this.urlField=Ext.create("Ext.form.TextField",{fieldLabel:this.webLinkLabelText,name:Extensible.calendar.data.EventMappings.Url.name,anchor:"100%"});var a=[this.titleField,this.dateRangeField,this.reminderField],b=[this.notesField,this.locationField,this.urlField];if(this.enableRecurrence){this.recurrenceField=Ext.create("Extensible.form.recurrence.Fieldset",{name:Extensible.calendar.data.EventMappings.RRule.name,fieldLabel:this.repeatsLabelText,anchor:"90%"});a.splice(2,0,this.recurrenceField)}if(this.calendarStore){this.calendarField=Ext.create("Extensible.calendar.form.field.CalendarCombo",{store:this.calendarStore,fieldLabel:this.calendarLabelText,name:Extensible.calendar.data.EventMappings.CalendarId.name,anchor:"70%"});a.splice(2,0,this.calendarField)}this.items=[{id:this.id+"-left-col",columnWidth:this.colWidthLeft,layout:"anchor",fieldDefaults:{labelWidth:this.labelWidth},border:false,items:a},{id:this.id+"-right-col",columnWidth:this.colWidthRight,layout:"anchor",fieldDefaults:{labelWidth:this.labelWidthRightCol||this.labelWidth},border:false,items:b}];this.fbar=[{text:this.saveButtonText,scope:this,handler:this.onSave},{itemId:this.id+"-del-btn",text:this.deleteButtonText,scope:this,handler:this.onDelete},{text:this.cancelButtonText,scope:this,handler:this.onCancel}];this.addCls("ext-evt-edit-form");this.callParent(arguments)},onDateChange:function(a,b){if(this.recurrenceField){this.recurrenceField.setStartDate(b[0])}},loadRecord:function(a){this.form.reset().loadRecord.apply(this.form,arguments);this.activeRecord=a;this.dateRangeField.setValue(a.data);if(this.recurrenceField){this.recurrenceField.setStartDate(a.data[Extensible.calendar.data.EventMappings.StartDate.name])}if(this.calendarStore){this.form.setValues({calendar:a.data[Extensible.calendar.data.EventMappings.CalendarId.name]})}if(a.phantom){this.setTitle(this.titleTextAdd);this.down("#"+this.id+"-del-btn").hide()}else{this.setTitle(this.titleTextEdit);this.down("#"+this.id+"-del-btn").show()}this.titleField.focus()},updateRecord:function(){var c=this.dateRangeField.getValue(),f=Extensible.calendar.data.EventMappings,e=this.activeRecord,a=e.fields,b=false;e.beginEdit();a.each(function(h){var i=this.form.findField(h.name);if(i){var g=i.getValue();if(g.getGroupValue){g=g.getGroupValue()}else{if(i.eachItem){g=[];i.eachItem(function(k){g.push(k.getValue())})}}e.set(h.name,g)}},this);e.set(f.StartDate.name,c[0]);e.set(f.EndDate.name,c[1]);e.set(f.IsAllDay.name,c[2]);b=e.dirty;e.endEdit();return b},onCancel:function(){this.cleanup(true);this.fireEvent("eventcancel",this,this.activeRecord)},cleanup:function(a){if(this.activeRecord){this.activeRecord.reject()}delete this.activeRecord;if(this.form.isDirty()){this.form.reset()}},onSave:function(){if(!this.form.isValid()){return}if(!this.updateRecord()){this.onCancel();return}this.fireEvent(this.activeRecord.phantom?"eventadd":"eventupdate",this,this.activeRecord)},onDelete:function(){this.fireEvent("eventdelete",this,this.activeRecord)}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.view.AbstractCalendar",{extend:"Ext.Component",requires:["Ext.CompositeElement"],requires:["Extensible.calendar.form.EventDetails","Extensible.calendar.form.EventWindow","Extensible.calendar.menu.Event","Extensible.calendar.dd.DragZone","Extensible.calendar.dd.DropZone"],startDay:0,spansHavePriority:false,trackMouseOver:true,enableFx:true,enableAddFx:true,enableUpdateFx:false,enableRemoveFx:true,enableDD:true,enableContextMenus:true,suppressBrowserContextMenu:false,monitorResize:true,todayText:"Today",ddCreateEventText:"Create event for {0}",ddMoveEventText:"Move event to {0}",ddResizeEventText:"Update event to {0}",defaultEventTitleText:"(No title)",dateParamStart:"startDate",dateParamEnd:"endDate",dateParamFormat:"Y-m-d",editModal:false,enableEditDetails:true,weekendCls:"ext-cal-day-we",prevMonthCls:"ext-cal-day-prev",nextMonthCls:"ext-cal-day-next",todayCls:"ext-cal-day-today",hideMode:"offsets",weekCount:1,dayCount:1,eventSelector:".ext-cal-evt",eventOverClass:"ext-evt-over",eventElIdDelimiter:"-evt-",dayElIdDelimiter:"-day-",getEventBodyMarkup:Ext.emptyFn,getEventTemplate:Ext.emptyFn,initComponent:function(){this.setStartDate(this.startDate||new Date());this.callParent(arguments);if(this.readOnly===true){this.addCls("ext-cal-readonly")}this.addEvents({eventsrendered:true,eventclick:true,eventover:true,eventout:true,beforedatechange:true,datechange:true,rangeselect:true,beforeeventmove:true,eventmove:true,initdrag:true,dayover:true,dayout:true,editdetails:true,eventadd:true,eventupdate:true,eventcancel:true,beforeeventdelete:true,eventdelete:true})},afterRender:function(){this.callParent(arguments);this.renderTemplate();if(this.store){this.setStore(this.store,true);if(this.store.deferLoad){this.reloadStore(this.store.deferLoad);delete this.store.deferLoad}else{this.store.initialParams=this.getStoreParams()}}if(this.calendarStore){this.setCalendarStore(this.calendarStore,true)}this.on("resize",this.onResize,this);this.el.on({mouseover:this.onMouseOver,mouseout:this.onMouseOut,click:this.onClick,scope:this});if(this.enableContextMenus&&this.readOnly!==true){this.el.on("contextmenu",this.onContextMenu,this)}this.el.unselectable();if(this.enableDD&&this.readOnly!==true&&this.initDD){this.initDD()}this.on("eventsrendered",this.onEventsRendered);Ext.defer(this.forceSize,100,this)},getStoreDateParams:function(){var a={};a[this.dateParamStart]=Ext.Date.format(this.viewStart,this.dateParamFormat);a[this.dateParamEnd]=Ext.Date.format(this.viewEnd,this.dateParamFormat);return a},getStoreParams:function(){var a=this.getStoreDateParams();return a},reloadStore:function(a){Extensible.log("reloadStore");a=Ext.isObject(a)?a:{};a.params=a.params||{};Ext.apply(a.params,this.getStoreParams());this.store.load(a)},onEventsRendered:function(){this.forceSize()},forceSize:function(){if(this.el&&this.el.down){var e=this.el.down(".ext-cal-hd-ct"),b=this.el.down(".ext-cal-body-ct");if(b==null||e==null){return}var a=e.getHeight(),c=this.el.parent().getSize();b.setHeight(c.height-a)}},refresh:function(a){Extensible.log("refresh (base), reload = "+a);if(a===true){this.reloadStore()}this.prepareData();this.renderTemplate();this.renderItems()},getWeekCount:function(){var a=Extensible.Date.diffDays(this.viewStart,this.viewEnd);return Math.ceil(a/this.dayCount)},prepareData:function(){var h=Ext.Date.getLastDateOfMonth(this.startDate),c=0,g=0,f=Ext.Date.clone(this.viewStart),e=this.weekCount<1?6:this.weekCount;this.eventGrid=[[]];this.allDayGrid=[[]];this.evtMaxCount=[];var b=this.store.queryBy(function(i){return this.isEventVisible(i.data)},this);for(;c<e;c++){this.evtMaxCount[c]=0;if(this.weekCount==-1&&f>h){break}this.eventGrid[c]=this.eventGrid[c]||[];this.allDayGrid[c]=this.allDayGrid[c]||[];for(d=0;d<this.dayCount;d++){if(b.getCount()>0){var a=b.filterBy(function(m){var k=Ext.Date.clearTime(m.data[Extensible.calendar.data.EventMappings.StartDate.name],true),l=f.getTime()==k.getTime(),i=(c==0&&d==0&&(f>m.data[Extensible.calendar.data.EventMappings.StartDate.name]));return l||i},this);this.sortEventRecordsForDay(a);this.prepareEventGrid(a,c,d)}f=Extensible.Date.add(f,{days:1})}}this.currentWeekCount=c},prepareEventGrid:function(c,b,i){var g=this,h=0,f=Ext.Date.clone(g.viewStart),a=g.maxEventsPerDay||999,e;c.each(function(l){var m=Extensible.calendar.data.EventMappings;if(Extensible.Date.diffDays(l.data[m.StartDate.name],l.data[m.EndDate.name])>0){var k=Extensible.Date.diffDays(Extensible.Date.max(g.viewStart,l.data[m.StartDate.name]),Extensible.Date.min(g.viewEnd,l.data[m.EndDate.name]))+1;g.prepareEventGridSpans(l,g.eventGrid,b,i,k);g.prepareEventGridSpans(l,g.allDayGrid,b,i,k,true)}else{h=g.findEmptyRowIndex(b,i);g.eventGrid[b][i]=g.eventGrid[b][i]||[];g.eventGrid[b][i][h]=l;if(l.data[m.IsAllDay.name]){h=g.findEmptyRowIndex(b,i,true);g.allDayGrid[b][i]=g.allDayGrid[b][i]||[];g.allDayGrid[b][i][h]=l}}e=g[g.isHeaderView?"allDayGrid":"eventGrid"][b][i]||[];if(e.length&&g.evtMaxCount[b]<e.length){g.evtMaxCount[b]=Math.min(a+1,e.length)}return true},g)},prepareEventGridSpans:function(i,a,h,g,k,l){var f=h,b=g,m=this.findEmptyRowIndex(h,g,l),e=Ext.Date.clone(this.viewStart);var c={event:i,isSpan:true,isSpanStart:true,spanLeft:false,spanRight:(g==6)};a[h][g]=a[h][g]||[];a[h][g][m]=c;while(--k){e=Extensible.Date.add(e,{days:1});if(e>this.viewEnd){break}if(++b>6){b=0;f++;m=this.findEmptyRowIndex(f,0)}a[f]=a[f]||[];a[f][b]=a[f][b]||[];a[f][b][m]={event:i,isSpan:true,isSpanStart:(b==0),spanLeft:(f>h)&&(b%7==0),spanRight:(b==6)&&(k>1)}}},findEmptyRowIndex:function(b,h,a){var f=a?this.allDayGrid:this.eventGrid,c=f[b]?f[b][h]||[]:[],e=0,g=c.length;for(;e<g;e++){if(c[e]==null){return e}}return g},renderTemplate:function(){if(this.tpl){this.tpl.overwrite(this.el,this.getTemplateParams());this.lastRenderStart=Ext.Date.clone(this.viewStart);this.lastRenderEnd=Ext.Date.clone(this.viewEnd)}},getTemplateParams:function(){return{viewStart:this.viewStart,viewEnd:this.viewEnd,startDate:this.startDate,dayCount:this.dayCount,weekCount:this.weekCount,weekendCls:this.weekendCls,prevMonthCls:this.prevMonthCls,nextMonthCls:this.nextMonthCls,todayCls:this.todayCls}},disableStoreEvents:function(){this.monitorStoreEvents=false;return this},enableStoreEvents:function(a){this.monitorStoreEvents=true;if(a===true){this.refresh()}return this},onResize:function(){this.refresh(false)},onInitDrag:function(){this.fireEvent("initdrag",this)},onEventDrop:function(b,a){this.moveEvent(b,a)},onCalendarEndDrag:function(e,a,c){this.dragPending=true;var b={},c=Ext.bind(this.onCalendarEndDragComplete,this,[c]);b[Extensible.calendar.data.EventMappings.StartDate.name]=e;b[Extensible.calendar.data.EventMappings.EndDate.name]=a;if(this.fireEvent("rangeselect",this,b,c)!==false){this.showEventEditor(b,null);if(this.editWin){this.editWin.on("hide",c,this,{single:true})}else{c()}}else{this.onCalendarEndDragComplete(c)}},onCalendarEndDragComplete:function(a){a();this.dragPending=false},onUpdate:function(b,c,a){if(this.hidden===true||this.monitorStoreEvents===false){return}if(a==Ext.data.Record.COMMIT){Extensible.log("onUpdate");this.dismissEventEditor();var e=c.data[Extensible.calendar.data.EventMappings.RRule.name];this.refresh(e!==undefined&&e!=="");if(this.enableFx&&this.enableUpdateFx){this.doUpdateFx(this.getEventEls(c.data[Extensible.calendar.data.EventMappings.EventId.name]),{scope:this})}}},doUpdateFx:function(a,b){this.highlightEvent(a,null,b)},onAdd:function(c,b,a){var e=Ext.isArray(b)?b[0]:b;if(this.hidden===true||this.monitorStoreEvents===false){return}if(e._deleting){delete e._deleting;return}Extensible.log("onAdd");var f=e.data[Extensible.calendar.data.EventMappings.RRule.name];this.dismissEventEditor();this.tempEventId=e.id;this.refresh(f!==undefined&&f!=="");if(this.enableFx&&this.enableAddFx){this.doAddFx(this.getEventEls(e.data[Extensible.calendar.data.EventMappings.EventId.name]),{scope:this})}},doAddFx:function(a,b){a.fadeIn(Ext.apply(b,{duration:2000}))},onRemove:function(b,c){if(this.hidden===true||this.monitorStoreEvents===false){return}Extensible.log("onRemove");this.dismissEventEditor();var e=c.data[Extensible.calendar.data.EventMappings.RRule.name],a=e!==undefined&&e!=="";if(this.enableFx&&this.enableRemoveFx){this.doRemoveFx(this.getEventEls(c.data[Extensible.calendar.data.EventMappings.EventId.name]),{remove:true,scope:this,callback:Ext.bind(this.refresh,this,[a])})}else{this.getEventEls(c.data[Extensible.calendar.data.EventMappings.EventId.name]).remove();this.refresh(a)}},doRemoveFx:function(a,b){if(a.getCount()==0&&Ext.isFunction(b.callback)){b.callback.call(b.scope||this)}else{a.fadeOut(b)}},highlightEvent:function(b,a,e){if(this.enableFx){var f;!(Ext.isIE||Ext.isOpera)?b.highlight(a,e):b.each(function(c){c.highlight(a,Ext.applyIf({attr:"color"},e));if(f=c.down(".ext-cal-evm")){f.highlight(a,e)}},this)}},getEventIdFromEl:function(c){c=Ext.get(c);var e,f="",a,b=c.dom.className.split(" ");Ext.each(b,function(g){e=g.split(this.eventElIdDelimiter);if(e.length>1){f=e[1];return false}},this);return f},getEventId:function(a){if(a===undefined&&this.tempEventId){a=this.tempEventId}return a},getEventSelectorCls:function(b,a){var c=a?".":"";return c+this.id+this.eventElIdDelimiter+this.getEventId(b)},getEventEls:function(b){var a=this.el.select(this.getEventSelectorCls(this.getEventId(b),true),false);return Ext.create("Ext.CompositeElement",a)},isToday:function(){var a=Ext.Date.clearTime(new Date()).getTime();return this.viewStart.getTime()<=a&&this.viewEnd.getTime()>=a},onDataChanged:function(a){Extensible.log("onDataChanged");this.refresh(false)},isEventVisible:function(c){var i=Extensible.calendar.data.EventMappings,f=c.data||c,b=this.calendarStore?this.calendarStore.findRecord(i.CalendarId.name,c[i.CalendarId.name]):null;if(b&&b.data[Extensible.calendar.data.CalendarMappings.IsHidden.name]===true){return false}var h=this.viewStart.getTime(),a=this.viewEnd.getTime(),g=f[i.StartDate.name].getTime(),e=f[i.EndDate.name].getTime();return Extensible.Date.rangesOverlap(h,a,g,e)},isOverlapping:function(m,l){var k=m.data?m.data:m,i=l.data?l.data:l,f=Extensible.calendar.data.EventMappings,c=k[f.StartDate.name].getTime(),g=Extensible.Date.add(k[f.EndDate.name],{seconds:-1}).getTime(),b=i[f.StartDate.name].getTime(),e=Extensible.Date.add(i[f.EndDate.name],{seconds:-1}).getTime(),h=Extensible.Date.diff(k[f.StartDate.name],i[f.StartDate.name],"m");if(g<c){g=c}if(e<b){e=b}var p=Extensible.Date.rangesOverlap(c,g,b,e),n=this.minEventDisplayMinutes||0,a=n>0&&(h>-n&&h<n);return(p||a)},isEventSpanning:function(a){var e=Extensible.calendar.data.EventMappings,b=a.data||a,c;c=Extensible.Date.diffDays(b[e.StartDate.name],b[e.EndDate.name]);return c>0},getDayEl:function(a){return Ext.get(this.getDayId(a))},getDayId:function(a){if(Ext.isDate(a)){a=Ext.Date.format(a,"Ymd")}return this.id+this.dayElIdDelimiter+a},getStartDate:function(){return this.startDate},setStartDate:function(i,g){var f=this;Extensible.log("setStartDate (base) "+Ext.Date.format(i,"Y-m-d"));var c=Ext.Date.clone,b=f.startDate?c(f.startDate):null,e=c(i),a=f.viewStart?c(f.viewStart):null,h=f.viewEnd?c(f.viewEnd):null;if(f.fireEvent("beforedatechange",f,b,e,a,h)!==false){f.startDate=Ext.Date.clearTime(i);f.setViewBounds(i);if(f.ownerCalendarPanel&&f.ownerCalendarPanel.startDate!==f.startDate){f.ownerCalendarPanel.startDate=f.startDate}if(f.rendered){f.refresh(g)}f.fireEvent("datechange",f,c(f.startDate),c(f.viewStart),c(f.viewEnd))}},setViewBounds:function(a){var c=this,g=a||c.startDate,f=g.getDay()-c.startDay,e=Extensible.Date;if(f<0){f+=7}switch(this.weekCount){case 0:case 1:c.viewStart=c.dayCount<7&&!c.startDayIsStatic?g:e.add(g,{days:-f,clearTime:true});c.viewEnd=e.add(c.viewStart,{days:c.dayCount||7,seconds:-1});return;case -1:g=Ext.Date.getFirstDateOfMonth(g);f=g.getDay()-c.startDay;if(f<0){f+=7}c.viewStart=e.add(g,{days:-f,clearTime:true});var b=e.add(g,{months:1,seconds:-1});f=c.startDay;if(f>b.getDay()){f-=7}c.viewEnd=e.add(b,{days:6-b.getDay()+f});return;default:c.viewStart=e.add(g,{days:-f,clearTime:true});c.viewEnd=e.add(c.viewStart,{days:c.weekCount*7,seconds:-1})}},getViewBounds:function(){return{start:this.viewStart,end:this.viewEnd}},sortEventRecordsForDay:function(a){if(a.length<2){return}a.sortBy(Ext.bind(function(g,f){var e=g.data,c=f.data,i=Extensible.calendar.data.EventMappings;if(e[i.IsAllDay.name]){return -1}else{if(c[i.IsAllDay.name]){return 1}}if(this.spansHavePriority){var h=Extensible.Date.diffDays;if(h(e[i.StartDate.name],e[i.EndDate.name])>0){if(h(c[i.StartDate.name],c[i.EndDate.name])>0){if(e[i.StartDate.name].getTime()==c[i.StartDate.name].getTime()){return c[i.EndDate.name].getTime()-e[i.EndDate.name].getTime()}return e[i.StartDate.name].getTime()-c[i.StartDate.name].getTime()}return -1}else{if(h(c[i.StartDate.name],c[i.EndDate.name])>0){return 1}}return e[i.StartDate.name].getTime()-c[i.StartDate.name].getTime()}else{return e[i.StartDate.name].getTime()-c[i.StartDate.name].getTime()}},this))},moveTo:function(b,a){if(Ext.isDate(b)){this.setStartDate(b,a);return this.startDate}return b},moveNext:function(a){return this.moveTo(Extensible.Date.add(this.viewEnd,{days:1}),a)},movePrev:function(a){var b=Extensible.Date.diffDays(this.viewStart,this.viewEnd)+1;return this.moveDays(-b,a)},moveMonths:function(b,a){return this.moveTo(Extensible.Date.add(this.startDate,{months:b}),a)},moveWeeks:function(b,a){return this.moveTo(Extensible.Date.add(this.startDate,{days:b*7}),a)},moveDays:function(b,a){return this.moveTo(Extensible.Date.add(this.startDate,{days:b}),a)},moveToday:function(a){return this.moveTo(new Date(),a)},setStore:function(a,b){var c=this.store;if(!b&&c){c.un("datachanged",this.onDataChanged,this);c.un("clear",this.refresh,this);c.un("write",this.onWrite,this);c.un("exception",this.onException,this)}if(a){a.on("datachanged",this.onDataChanged,this);a.on("clear",this.refresh,this);a.on("write",this.onWrite,this);a.on("exception",this.onException,this)}this.store=a},onException:function(c,e,f,g,b,a){if(a.reject){a.reject()}},setCalendarStore:function(a,b){if(!b&&this.calendarStore){this.calendarStore.un("datachanged",this.refresh,this);this.calendarStore.un("add",this.refresh,this);this.calendarStore.un("remove",this.refresh,this);this.calendarStore.un("update",this.refresh,this)}if(a){a.on("datachanged",this.refresh,this);a.on("add",this.refresh,this);a.on("remove",this.refresh,this);a.on("update",this.refresh,this)}this.calendarStore=a},getEventRecord:function(b){var a=this.store.find(Extensible.calendar.data.EventMappings.EventId.name,b,0,false,true,true);return this.store.getAt(a)},getEventRecordFromEl:function(a){return this.getEventRecord(this.getEventIdFromEl(a))},getEventEditor:function(){this.editWin=this.editWin||Ext.WindowMgr.get("ext-cal-editwin");if(!this.editWin){this.editWin=Ext.create("Extensible.calendar.form.EventWindow",{id:"ext-cal-editwin",calendarStore:this.calendarStore,modal:this.editModal,enableEditDetails:this.enableEditDetails,listeners:{eventadd:{fn:function(b,c,a){b.currentView.onEventAdd(null,c)},scope:this},eventupdate:{fn:function(b,c,a){b.currentView.onEventUpdate(null,c)},scope:this},eventdelete:{fn:function(b,c,a){b.currentView.onEventDelete(null,c)},scope:this},editdetails:{fn:function(c,e,b,a){c.animateTarget=null;c.hide();c.currentView.fireEvent("editdetails",c.currentView,e)},scope:this},eventcancel:{fn:function(b,c,a){this.dismissEventEditor(null,a);b.currentView.onEventCancel()},scope:this}}})}this.editWin.currentView=this;return this.editWin},showEventEditor:function(b,a){this.getEventEditor().show(b,a,this);return this},dismissEventEditor:function(b,c){if(this.newRecord&&this.newRecord.phantom){this.store.remove(this.newRecord)}delete this.newRecord;var a=Ext.WindowMgr.get("ext-cal-editwin");if(a){a[b?b:"hide"](c)}return this},save:function(){if(!this.store.autoSync){this.store.sync()}},onWrite:function(b,a){if(a.wasSuccessful()){var c=a.records[0];switch(a.action){case"create":this.onAdd(b,c);break;case"update":this.onUpdate(b,c,Ext.data.Record.COMMIT);break;case"destroy":this.onRemove(b,c);break}}},onEventAdd:function(a,b){this.newRecord=b;if(!b.store){this.store.add(b);this.save()}this.fireEvent("eventadd",this,b)},onEventUpdate:function(a,b){this.save();this.fireEvent("eventupdate",this,b)},onEventDelete:function(a,b){if(b.store){this.store.remove(b)}this.save();this.fireEvent("eventdelete",this,b)},onEventCancel:function(a,b){this.fireEvent("eventcancel",this,b)},onDayClick:function(c,b,a){if(this.readOnly===true){return}if(this.fireEvent("dayclick",this,Ext.Date.clone(c),b,a)!==false){var f=Extensible.calendar.data.EventMappings,e={};e[f.StartDate.name]=c;e[f.IsAllDay.name]=b;this.showEventEditor(e,a)}},showEventMenu:function(a,b){if(!this.eventMenu){this.eventMenu=Ext.create("Extensible.calendar.menu.Event",{listeners:{editdetails:Ext.bind(this.onEditDetails,this),eventdelete:Ext.bind(this.onDeleteEvent,this),eventmove:Ext.bind(this.onMoveEvent,this)}})}this.eventMenu.showForEvent(this.getEventRecordFromEl(a),a,b);this.menuActive=true},onEditDetails:function(c,b,a){this.fireEvent("editdetails",this,b,a);this.menuActive=false},onMoveEvent:function(c,b,a){this.moveEvent(b,a);this.menuActive=false},moveEvent:function(c,a){if(Extensible.Date.compare(c.data[Extensible.calendar.data.EventMappings.StartDate.name],a)===0){return}if(this.fireEvent("beforeeventmove",this,c,Ext.Date.clone(a))!==false){var b=a.getTime()-c.data[Extensible.calendar.data.EventMappings.StartDate.name].getTime();c.beginEdit();c.set(Extensible.calendar.data.EventMappings.StartDate.name,a);c.set(Extensible.calendar.data.EventMappings.EndDate.name,Extensible.Date.add(c.data[Extensible.calendar.data.EventMappings.EndDate.name],{millis:b}));c.endEdit();this.save();this.fireEvent("eventmove",this,c)}},onDeleteEvent:function(c,b,a){b._deleting=true;this.deleteEvent(b,a);this.menuActive=false},deleteEvent:function(b,a){if(this.fireEvent("beforeeventdelete",this,b,a)!==false){this.store.remove(b);this.save();this.fireEvent("eventdelete",this,b,a)}},onContextMenu:function(f,b){var c,a=false;if(c=f.getTarget(this.eventSelector,5,true)){this.dismissEventEditor().showEventMenu(c,f.getXY());a=true}if(a||this.suppressBrowserContextMenu===true){f.preventDefault()}},onClick:function(f,a){var c=this,b=f.getTarget(c.eventSelector,5);if(c.dropZone){c.dropZone.clearShims()}if(c.menuActive===true){c.menuActive=false;return true}if(b){var h=c.getEventIdFromEl(b),g=c.getEventRecord(h);if(c.fireEvent("eventclick",c,g,b)!==false){if(c.readOnly!==true){c.showEventEditor(g,b)}}return true}},onMouseOver:function(b,a){if(this.trackMouseOver!==false&&(this.dragZone==undefined||!this.dragZone.dragging)){if(!this.handleEventMouseEvent(b,a,"over")){this.handleDayMouseEvent(b,a,"over")}}},onMouseOut:function(b,a){if(this.trackMouseOver!==false&&(this.dragZone==undefined||!this.dragZone.dragging)){if(!this.handleEventMouseEvent(b,a,"out")){this.handleDayMouseEvent(b,a,"out")}}},handleEventMouseEvent:function(h,c,g){var f;if(f=h.getTarget(this.eventSelector,5,true)){var a=Ext.get(h.getRelatedTarget());if(f==a||f.contains(a)){return true}var i=this.getEventIdFromEl(f);if(this.eventOverClass!=""){var b=this.getEventEls(i);b[g=="over"?"addCls":"removeCls"](this.eventOverClass)}this.fireEvent("event"+g,this,this.getEventRecord(i),f);return true}return false},getDateFromId:function(c,b){var a=c.split(b);return a[a.length-1]},handleDayMouseEvent:function(k,f,h){if(f=k.getTarget("td",3)){if(f.id&&f.id.indexOf(this.dayElIdDelimiter)>-1){var i=this.getDateFromId(f.id,this.dayElIdDelimiter),a=Ext.get(k.getRelatedTarget()),c,b;if(a){c=a.is("td")?a:a.up("td",3);b=c&&c.id?this.getDateFromId(c.id,this.dayElIdDelimiter):""}if(!a||i!=b){var g=this.getDayEl(i);if(g&&this.dayOverClass!=""){g[h=="over"?"addCls":"removeCls"](this.dayOverClass)}this.fireEvent("day"+h,this,Ext.Date.parseDate(i,"Ymd"),g)}}}},renderItems:function(){throw"This method must be implemented by a subclass"},destroy:function(){this.callParent(arguments);if(this.el){this.el.un("contextmenu",this.onContextMenu,this)}Ext.destroy(this.editWin,this.eventMenu,this.dragZone,this.dropZone)}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.view.MonthDayDetail",{extend:"Ext.Component",alias:"widget.extensible.monthdaydetailview",requires:["Ext.XTemplate","Extensible.calendar.view.AbstractCalendar"],initComponent:function(){this.callParent(arguments);this.addEvents({eventsrendered:true})},afterRender:function(){this.tpl=this.getTemplate();this.callParent(arguments);this.el.on({click:this.view.onClick,mouseover:this.view.onMouseOver,mouseout:this.view.onMouseOut,scope:this.view})},getTemplate:function(){if(!this.tpl){this.tpl=Ext.create("Ext.XTemplate",'<div class="ext-cal-mdv x-unselectable">','<table class="ext-cal-mvd-tbl" cellpadding="0" cellspacing="0">',"<tbody>",'<tpl for=".">','<tr><td class="ext-cal-ev">{markup}</td></tr>',"</tpl>","</tbody>","</table>","</div>")}this.tpl.compile();return this.tpl},update:function(a){this.date=a;this.refresh()},refresh:function(){if(!this.rendered){return}var a=this.view.getEventTemplate(),b=[];evts=this.store.queryBy(function(e){var g=Ext.Date.clearTime(this.date,true).getTime(),k=Extensible.calendar.data.EventMappings,i=Ext.Date.clearTime(e.data[k.StartDate.name],true).getTime(),f=(g==i),h=false,m=e.data[k.CalendarId.name],c=this.calendarStore?this.calendarStore.getById(m):null;if(c&&c.data[Extensible.calendar.data.CalendarMappings.IsHidden.name]===true){return false}if(!f){var l=Ext.Date.clearTime(e.data[k.EndDate.name],true).getTime();h=i<g&&l>=g}return f||h},this);Extensible.calendar.view.AbstractCalendar.prototype.sortEventRecordsForDay.call(this,evts);evts.each(function(c){var e=c.data,f=Extensible.calendar.data.EventMappings;e._renderAsAllDay=e[f.IsAllDay.name]||Extensible.Date.diffDays(e[f.StartDate.name],e[f.EndDate.name])>0;e.spanLeft=Extensible.Date.diffDays(e[f.StartDate.name],this.date)>0;e.spanRight=Extensible.Date.diffDays(this.date,e[f.EndDate.name])>0;e.spanCls=(e.spanLeft?(e.spanRight?"ext-cal-ev-spanboth":"ext-cal-ev-spanleft"):(e.spanRight?"ext-cal-ev-spanright":""));b.push({markup:a.apply(this.getTemplateEventData(e))})},this);this.tpl.overwrite(this.el,b);this.fireEvent("eventsrendered",this,this.date,evts.getCount())},getTemplateEventData:function(a){var b=this.view.getTemplateEventData(a);b._elId="dtl-"+b._elId;return b}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.view.Month",{extend:"Extensible.calendar.view.AbstractCalendar",alias:"widget.extensible.monthview",requires:["Ext.XTemplate","Extensible.calendar.template.Month","Extensible.calendar.util.WeekEventRenderer","Extensible.calendar.view.MonthDayDetail"],moreText:"+{0} more...",detailsTitleDateFormat:"F j",showTime:true,showTodayText:true,showHeader:false,showWeekLinks:false,showWeekNumbers:false,weekLinkOverClass:"ext-week-link-over",daySelector:".ext-cal-day",moreSelector:".ext-cal-ev-more",weekLinkSelector:".ext-cal-week-link",weekCount:-1,dayCount:7,moreElIdDelimiter:"-more-",weekLinkIdDelimiter:"ext-cal-week-",initComponent:function(){this.callParent(arguments);this.addEvents({dayclick:true,weekclick:true,dayover:true,dayout:true})},initDD:function(){var a={view:this,createText:this.ddCreateEventText,moveText:this.ddMoveEventText,ddGroup:this.ddGroup||this.id+"-MonthViewDD"};this.dragZone=Ext.create("Extensible.calendar.dd.DragZone",this.el,a);this.dropZone=Ext.create("Extensible.calendar.dd.DropZone",this.el,a)},onDestroy:function(){Ext.destroy(this.ddSelector);Ext.destroy(this.dragZone);Ext.destroy(this.dropZone);this.callParent(arguments)},afterRender:function(){if(!this.tpl){this.tpl=Ext.create("Extensible.calendar.template.Month",{id:this.id,showTodayText:this.showTodayText,todayText:this.todayText,showTime:this.showTime,showHeader:this.showHeader,showWeekLinks:this.showWeekLinks,showWeekNumbers:this.showWeekNumbers});this.tpl.compile()}this.addCls("ext-cal-monthview ext-cal-ct");this.callParent(arguments)},onResize:function(){if(this.monitorResize){this.maxEventsPerDay=this.getMaxEventsPerDay();this.refresh(false)}},forceSize:function(){if(this.showWeekLinks&&this.el){var f=this.el.down(".ext-cal-hd-days-tbl"),e=this.el.select(".ext-cal-bg-tbl"),c=this.el.select(".ext-cal-evt-tbl"),b=this.el.down(".ext-cal-week-link").getWidth(),a=this.el.getWidth()-b;f.setWidth(a);e.setWidth(a);c.setWidth(a)}this.callParent(arguments)},initClock:function(){if(Ext.fly(this.id+"-clock")!==null){this.prevClockDay=new Date().getDay();if(this.clockTask){Ext.TaskManager.stop(this.clockTask)}this.clockTask=Ext.TaskManager.start({run:function(){var b=Ext.fly(this.id+"-clock"),a=new Date();if(a.getDay()==this.prevClockDay){if(b){b.update(Ext.Date.format(a,Extensible.Date.use24HourTime?"G:i":"g:ia"))}}else{this.prevClockDay=a.getDay();this.moveTo(a)}},scope:this,interval:1000})}},getMoreText:function(a){return this.moreText},getEventBodyMarkup:function(){if(!this.eventBodyMarkup){this.eventBodyMarkup=["{Title}",'<tpl if="_isReminder">','<i class="ext-cal-ic ext-cal-ic-rem">&#160;</i>',"</tpl>",'<tpl if="_isRecurring">','<i class="ext-cal-ic ext-cal-ic-rcr">&#160;</i>',"</tpl>",'<tpl if="spanLeft">','<i class="ext-cal-spl">&#160;</i>',"</tpl>",'<tpl if="spanRight">','<i class="ext-cal-spr">&#160;</i>',"</tpl>"].join("")}return this.eventBodyMarkup},getEventTemplate:function(){if(!this.eventTpl){var b,a=this.getEventBodyMarkup();b=!(Ext.isIE||Ext.isOpera)?Ext.create("Ext.XTemplate",'<div class="{_extraCls} {spanCls} ext-cal-evt ext-cal-evr">',a,"</div>"):Ext.create("Ext.XTemplate",'<tpl if="_renderAsAllDay">','<div class="{_extraCls} {spanCls} ext-cal-evt ext-cal-evo">','<div class="ext-cal-evm">','<div class="ext-cal-evi">',"</tpl>",'<tpl if="!_renderAsAllDay">','<div class="{_extraCls} ext-cal-evt ext-cal-evr">',"</tpl>",a,'<tpl if="_renderAsAllDay">',"</div>","</div>","</tpl>","</div>");b.compile();this.eventTpl=b}return this.eventTpl},getTemplateEventData:function(k){var h=Extensible.calendar.data.EventMappings,f=[this.getEventSelectorCls(k[h.EventId.name])],g={},b=k[h.RRule.name]!="",a="x-cal-default",i=k[h.Title.name],c=Extensible.Date.use24HourTime?"G:i ":"g:ia ";if(this.calendarStore&&k[h.CalendarId.name]){var e=this.calendarStore.findRecord(Extensible.calendar.data.CalendarMappings.CalendarId.name,k[h.CalendarId.name]);if(e){a="x-cal-"+e.data[Extensible.calendar.data.CalendarMappings.ColorId.name]}}a+=(k._renderAsAllDay?"-ad":"");f.push(a);if(this.getEventClass){var e=this.getEventRecord(k[h.EventId.name]),l=this.getEventClass(e,!!k._renderAsAllDay,g,this.store);f.push(l)}g._extraCls=f.join(" ");g._isRecurring=k.Recurrence&&k.Recurrence!="";g._isReminder=k[h.Reminder.name]&&k[h.Reminder.name]!="";g.Title=(k[h.IsAllDay.name]?"":Ext.Date.format(k[h.StartDate.name],c))+(!i||i.length==0?this.defaultEventTitleText:i);return Ext.applyIf(g,k)},refresh:function(a){Extensible.log("refresh (MonthView)");if(this.detailPanel){this.detailPanel.hide()}this.callParent(arguments);if(this.showTime!==false){this.initClock()}},renderItems:function(){Extensible.calendar.util.WeekEventRenderer.render({eventGrid:this.allDayOnly?this.allDayGrid:this.eventGrid,viewStart:this.viewStart,tpl:this.getEventTemplate(),maxEventsPerDay:this.maxEventsPerDay,viewId:this.id,templateDataFn:Ext.bind(this.getTemplateEventData,this),evtMaxCount:this.evtMaxCount,weekCount:this.weekCount,dayCount:this.dayCount,getMoreText:Ext.bind(this.getMoreText,this)});this.fireEvent("eventsrendered",this)},getDayEl:function(a){return Ext.get(this.getDayId(a))},getDayId:function(a){if(Ext.isDate(a)){a=Ext.Date.format(a,"Ymd")}return this.id+this.dayElIdDelimiter+a},getWeekIndex:function(b){var a=this.getDayEl(b).up(".ext-cal-wk-ct");return parseInt(a.id.split("-wk-")[1])},getDaySize:function(g){var c=this.el.getBox(),f=this.getViewPadding(),a=(c.width-f.width)/this.dayCount,b=(c.height-f.height)/this.getWeekCount();if(g){var e=this.el.select(".ext-cal-dtitle").last().parent("tr");b=e?b-e.getHeight(true):b}return{height:b,width:a}},getEventHeight:function(){if(!this.eventHeight){var a=this.el.select(".ext-cal-evt").first();if(a){this.eventHeight=a.parent("td").getHeight()}else{return 16}}return this.eventHeight},getMaxEventsPerDay:function(){var b=this.getDaySize(true).height,c=this.getEventHeight(),a=Math.max(Math.floor((b-c)/c),0);return a},getViewPadding:function(e){var e=e||"tlbr",g=e.indexOf("t")>-1,f=e.indexOf("l")>-1,b=e.indexOf("r")>-1,a=this.showHeader&&g?this.el.select(".ext-cal-hd-days-tbl").first().getHeight():0,c=0;if(this.isHeaderView){if(f){c=this.el.select(".ext-cal-gutter").first().getWidth()}if(b){c+=this.el.select(".ext-cal-gutter-rt").first().getWidth()}}else{if(this.showWeekLinks&&f){c=this.el.select(".ext-cal-week-link").first().getWidth()}}return{height:a,width:c}},getDayAt:function(i,f){var c=this.el.getBox(),g=this.getViewPadding("tl"),h=this.getDaySize(),e=Math.floor(((i-c.x-g.width)/h.width)),b=Math.floor(((f-c.y-g.height)/h.height)),k=(b*7)+e,a=Extensible.Date.add(this.viewStart,{days:k});return{date:a,el:this.getDayEl(a)}},moveNext:function(){return this.moveMonths(1,true)},movePrev:function(){return this.moveMonths(-1,true)},onInitDrag:function(){this.callParent(arguments);Ext.select(this.daySelector).removeCls(this.dayOverClass);if(this.detailPanel){this.detailPanel.hide()}},onMoreClick:function(a){if(!this.detailPanel){this.detailPanel=Ext.create("Ext.Panel",{id:this.id+"-details-panel",title:Ext.Date.format(a,this.detailsTitleDateFormat),layout:"fit",floating:true,renderTo:Ext.getBody(),tools:[{type:"close",handler:function(f,b,c){c.ownerCt.hide()}}],items:{xtype:"extensible.monthdaydetailview",id:this.id+"-details-view",date:a,view:this,store:this.store,calendarStore:this.calendarStore,listeners:{eventsrendered:Ext.bind(this.onDetailViewUpdated,this)}}});if(this.enableContextMenus&&this.readOnly!==true){this.detailPanel.body.on("contextmenu",this.onContextMenu,this)}}else{this.detailPanel.setTitle(Ext.Date.format(a,this.detailsTitleDateFormat))}this.detailPanel.getComponent(this.id+"-details-view").update(a)},onDetailViewUpdated:function(a,e,b){var g=this.detailPanel,f=this.getDayEl(e),c=f.getBox();g.setWidth(Math.max(c.width,220));g.show();g.getPositionEl().alignTo(f,"t-t?")},onHide:function(){this.callParent(arguments);if(this.detailPanel){this.detailPanel.hide()}},onClick:function(f,a){if(this.detailPanel){this.detailPanel.hide()}if(el=f.getTarget(this.moreSelector,3)){var b=el.id.split(this.moreElIdDelimiter)[1];this.onMoreClick(Ext.Date.parseDate(b,"Ymd"));return}if(el=f.getTarget(this.weekLinkSelector,3)){var b=el.id.split(this.weekLinkIdDelimiter)[1];this.fireEvent("weekclick",this,Ext.Date.parseDate(b,"Ymd"));return}if(Extensible.calendar.view.Month.superclass.onClick.apply(this,arguments)){return}if(el=f.getTarget("td",3)){if(el.id&&el.id.indexOf(this.dayElIdDelimiter)>-1){var c=el.id.split(this.dayElIdDelimiter),b=c[c.length-1];this.onDayClick(Ext.Date.parseDate(b,"Ymd"),false,Ext.get(this.getDayId(b)));return}}},handleDayMouseEvent:function(f,a,c){var b=f.getTarget(this.weekLinkSelector,3,true);if(b){b[c=="over"?"addCls":"removeCls"](this.weekLinkOverClass);return}this.callParent(arguments)},destroy:function(){this.callParent(arguments);if(this.detailsPanel){this.detailPanel.body.un("contextmenu",this.onContextMenu,this)}}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.view.MultiWeek",{extend:"Extensible.calendar.view.Month",alias:"widget.extensible.multiweekview",weekCount:2,moveNext:function(){return this.moveWeeks(this.weekCount,true)},movePrev:function(){return this.moveWeeks(-this.weekCount,true)}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.view.DayHeader",{extend:"Extensible.calendar.view.Month",alias:"widget.extensible.dayheaderview",requires:["Extensible.calendar.template.DayHeader"],weekCount:1,dayCount:1,allDayOnly:true,monitorResize:false,isHeaderView:true,afterRender:function(){if(!this.tpl){this.tpl=Ext.create("Extensible.calendar.template.DayHeader",{id:this.id,showTodayText:this.showTodayText,todayText:this.todayText,showTime:this.showTime})}this.tpl.compile();this.addCls("ext-cal-day-header");this.callParent(arguments)},forceSize:Ext.emptyFn,refresh:function(a){Extensible.log("refresh (DayHeaderView)");this.callParent(arguments);this.recalcHeaderBox()},recalcHeaderBox:function(){var b=this.el.down(".ext-cal-evt-tbl"),a=b.getHeight();this.el.setHeight(a+7);this.el.down(".ext-cal-hd-ad-inner").setHeight(a+5);this.el.down(".ext-cal-bg-tbl").setHeight(a+5)},moveNext:function(){return this.moveDays(this.dayCount)},movePrev:function(){return this.moveDays(-this.dayCount)},onClick:function(f,a){if(el=f.getTarget("td",3)){if(el.id&&el.id.indexOf(this.dayElIdDelimiter)>-1){var c=el.id.split(this.dayElIdDelimiter),b=c[c.length-1];this.onDayClick(Ext.Date.parseDate(b,"Ymd"),true,Ext.get(this.getDayId(b,true)));return}}this.callParent(arguments)}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.view.DayBody",{extend:"Extensible.calendar.view.AbstractCalendar",alias:"widget.extensible.daybodyview",requires:["Ext.XTemplate","Extensible.calendar.template.DayBody","Extensible.calendar.data.EventMappings","Extensible.calendar.dd.DayDragZone","Extensible.calendar.dd.DayDropZone"],dayColumnElIdDelimiter:"-day-col-",hourIncrement:60,initComponent:function(){this.callParent(arguments);if(this.readOnly===true){this.enableEventResize=false}this.incrementsPerHour=this.hourIncrement/this.ddIncrement;this.minEventHeight=this.minEventDisplayMinutes/(this.hourIncrement/this.hourHeight);this.addEvents({beforeeventresize:true,eventresize:true,dayclick:true})},initDD:function(){var a={view:this,createText:this.ddCreateEventText,moveText:this.ddMoveEventText,resizeText:this.ddResizeEventText,ddIncrement:this.ddIncrement,ddGroup:this.ddGroup||this.id+"-DayViewDD"};this.el.ddScrollConfig={vthresh:Ext.isIE||Ext.isOpera?100:40,hthresh:-1,frequency:50,increment:100,ddGroup:this.ddGroup||this.id+"-DayViewDD"};this.dragZone=Ext.create("Extensible.calendar.dd.DayDragZone",this.el,Ext.apply({},a));this.dropZone=Ext.create("Extensible.calendar.dd.DayDropZone",this.el,a)},refresh:function(a){Extensible.log("refresh (DayBodyView)");var b=this.el.getScroll().top;this.callParent(arguments);if(this.scrollReady){this.scrollTo(b)}},scrollTo:function(b,a){a=a||(Ext.isIE||Ext.isOpera);if(a){Ext.defer(function(){this.el.scrollTo("top",b);this.scrollReady=true},10,this)}else{this.el.scrollTo("top",b);this.scrollReady=true}},afterRender:function(){if(!this.tpl){this.tpl=Ext.create("Extensible.calendar.template.DayBody",{id:this.id,dayCount:this.dayCount,showTodayText:this.showTodayText,todayText:this.todayText,showTime:this.showTime,showHourSeparator:this.showHourSeparator,viewStartHour:this.viewStartHour,viewEndHour:this.viewEndHour,hourIncrement:this.hourIncrement,hourHeight:this.hourHeight})}this.tpl.compile();this.addCls("ext-cal-body-ct");this.callParent(arguments);var b=Math.max(this.scrollStartHour,this.viewStartHour),a=Math.max(0,b-this.viewStartHour);if(a>0){this.scrollTo(a*this.hourHeight)}},forceSize:Ext.emptyFn,onEventResize:function(e,b){if(this.fireEvent("beforeeventresize",this,e,b)!==false){var c=Extensible.Date,f=Extensible.calendar.data.EventMappings.StartDate.name,a=Extensible.calendar.data.EventMappings.EndDate.name;if(c.compare(e.data[f],b.StartDate)===0&&c.compare(e.data[a],b.EndDate)===0){return}e.set(f,b.StartDate);e.set(a,b.EndDate);this.onEventUpdate(null,e);this.fireEvent("eventresize",this,e)}},getEventBodyMarkup:function(){if(!this.eventBodyMarkup){this.eventBodyMarkup=["{Title}",'<tpl if="_isReminder">','<i class="ext-cal-ic ext-cal-ic-rem">&#160;</i>',"</tpl>",'<tpl if="_isRecurring">','<i class="ext-cal-ic ext-cal-ic-rcr">&#160;</i>',"</tpl>"].join("")}return this.eventBodyMarkup},getEventTemplate:function(){if(!this.eventTpl){this.eventTpl=!(Ext.isIE||Ext.isOpera)?Ext.create("Ext.XTemplate",'<div id="{_elId}" class="{_extraCls} ext-cal-evt ext-cal-evr" ','style="left: {_left}%; width: {_width}%; top: {_top}px; height: {_height}px;">','<div class="ext-evt-bd">',this.getEventBodyMarkup(),"</div>",this.enableEventResize?'<div class="ext-evt-rsz"><div class="ext-evt-rsz-h">&#160;</div></div>':"","</div>"):Ext.create("Ext.XTemplate",'<div id="{_elId}" class="ext-cal-evt {_extraCls}" ','style="left: {_left}%; width: {_width}%; top: {_top}px;">','<div class="ext-cal-evb">&#160;</div>','<dl style="height: {_height}px;" class="ext-cal-evdm">','<dd class="ext-evt-bd">',this.getEventBodyMarkup(),"</dd>",this.enableEventResize?'<div class="ext-evt-rsz"><div class="ext-evt-rsz-h">&#160;</div></div>':"","</dl>",'<div class="ext-cal-evb">&#160;</div>',"</div>");this.eventTpl.compile()}return this.eventTpl},getEventAllDayTemplate:function(){if(!this.eventAllDayTpl){var b,a=this.getEventBodyMarkup();b=!(Ext.isIE||Ext.isOpera)?Ext.create("Ext.XTemplate",'<div class="{_extraCls} {spanCls} ext-cal-evt ext-cal-evr" ','style="left: {_left}%; width: {_width}%; top: {_top}px; height: {_height}px;">',a,"</div>"):Ext.create("Ext.XTemplate",'<div class="ext-cal-evt" ','style="left: {_left}%; width: {_width}%; top: {_top}px; height: {_height}px;">','<div class="{_extraCls} {spanCls} ext-cal-evo">','<div class="ext-cal-evm">','<div class="ext-cal-evi">',a,"</div>","</div>","</div>","</div>");b.compile();this.eventAllDayTpl=b}return this.eventAllDayTpl},getTemplateEventData:function(k){var h=Extensible.calendar.data.EventMappings,f=[this.getEventSelectorCls(k[h.EventId.name])],g={},a="x-cal-default",i=k[h.Title.name],c=Extensible.Date.use24HourTime?"G:i ":"g:ia ",b=k[h.RRule.name]!="";this.getTemplateEventBox(k);if(this.calendarStore&&k[h.CalendarId.name]){var e=this.calendarStore.findRecord(Extensible.calendar.data.CalendarMappings.CalendarId.name,k[h.CalendarId.name]);if(e){a="x-cal-"+e.data[Extensible.calendar.data.CalendarMappings.ColorId.name]}}a+=(k._renderAsAllDay?"-ad":"")+(Ext.isIE||Ext.isOpera?"-x":"");f.push(a);if(this.getEventClass){var e=this.getEventRecord(k[h.EventId.name]),l=this.getEventClass(e,!!k._renderAsAllDay,g,this.store);f.push(l)}g._extraCls=f.join(" ");g._isRecurring=k.Recurrence&&k.Recurrence!="";g._isReminder=k[h.Reminder.name]&&k[h.Reminder.name]!="";g.Title=(k[h.IsAllDay.name]?"":Ext.Date.format(k[h.StartDate.name],c))+(!i||i.length==0?this.defaultEventTitleText:i);return Ext.applyIf(g,k)},getEventPositionOffsets:function(){return{top:0,height:-1}},getTemplateEventBox:function(k){var c=this.hourHeight/this.hourIncrement,b=k[Extensible.calendar.data.EventMappings.StartDate.name],e=k[Extensible.calendar.data.EventMappings.EndDate.name],h=Math.max(b.getHours()-this.viewStartHour,0),i=Math.min(e.getHours()-this.viewStartHour,this.viewEndHour-this.viewStartHour),a=h*this.hourIncrement,f=i*this.hourIncrement,l=Extensible.Date.add(Ext.Date.clone(e),{hours:this.viewEndHour,clearTime:true}),g=this.getEventPositionOffsets();if(b.getHours()>=this.viewStartHour){a+=b.getMinutes()}if(e<=l){f+=e.getMinutes()}k._left=0;k._width=100;k._top=a*c+g.top;k._height=Math.max(((f-a)*c),this.minEventHeight)+g.height},renderItems:function(){var p=0,c=[];for(;p<this.dayCount;p++){var u=emptyCells=skipped=0,v=this.eventGrid[0][p],b=v?v.length:0,g;for(;u<b;u++){g=v[u];if(!g){continue}var t=g.data||g.event.data,e=Extensible.calendar.data.EventMappings,w=t[e.IsAllDay.name]===true,n=this.isEventSpanning(g.event||g),f=w||n;if(f){continue}Ext.apply(t,{cls:"ext-cal-ev",_positioned:true});c.push({data:this.getTemplateEventData(t),date:Extensible.Date.add(this.viewStart,{days:p})})}}var q=j=0,r=[],k=c.length,a;for(;q<k;q++){var g=c[q].data,m=null,h=g[Extensible.calendar.data.EventMappings.StartDate.name].getDate();for(j=0;j<k;j++){if(q==j){continue}m=c[j].data;if(this.isOverlapping(g,m)){g._overlap=g._overlap==undefined?1:g._overlap+1;if(q<j){if(g._overcol===undefined){g._overcol=0}m._overcol=g._overcol+1;r[h]=r[h]?Math.max(r[h],m._overcol):m._overcol}}}}for(q=0;q<k;q++){var g=c[q].data,h=g[Extensible.calendar.data.EventMappings.StartDate.name].getDate();if(g._overlap!==undefined){var x=100/(r[h]+1),z=100-(x*g._overlap);g._width=x;g._left=x*g._overcol}var s=this.getEventTemplate().apply(g),y=this.id+"-day-col-"+Ext.Date.format(c[q].date,"Ymd");Ext.core.DomHelper.append(y,s)}this.fireEvent("eventsrendered",this)},getDayEl:function(a){return Ext.get(this.getDayId(a))},getDayId:function(a){if(Ext.isDate(a)){a=Ext.Date.format(a,"Ymd")}return this.id+this.dayColumnElIdDelimiter+a},getDaySize:function(){var a=this.el.down(".ext-cal-day-col-inner").getBox();return{height:a.height,width:a.width}},getDayAt:function(p,k){var f=".ext-cal-body-ct",h=this.el.down(".ext-cal-day-times").getWidth(),t=this.el.getBox(),n=this.getDaySize(false),q=p-t.x-h,a=Math.floor(q/n.width),m=this.el.getScroll(),s=this.el.down(".ext-cal-bg-row"),r=s.getHeight()/this.incrementsPerHour,l=k-t.y-r+m.top,i=Math.max(0,Math.ceil(l/r)),b=i*(this.hourIncrement/this.incrementsPerHour),e=Extensible.Date.add(this.viewStart,{days:a,minutes:b,hours:this.viewStartHour}),c=this.getDayEl(e),g=p;if(c){g=c.getLeft()}return{date:e,el:c,timeBox:{x:g,y:(i*this.hourHeight/this.incrementsPerHour)+t.y-m.top,width:n.width,height:r}}},onClick:function(g,b){if(this.dragPending||Extensible.calendar.view.DayBody.superclass.onClick.apply(this,arguments)){return}if(g.getTarget(".ext-cal-day-times",3)!==null){return}var c=g.getTarget("td",3);if(c){if(c.id&&c.id.indexOf(this.dayElIdDelimiter)>-1){var f=this.getDateFromId(c.id,this.dayElIdDelimiter);this.onDayClick(Ext.Date.parseDate(f,"Ymd"),true,Ext.get(this.getDayId(f)));return}}var a=this.getDayAt(g.getX(),g.getY());if(a&&a.date){this.onDayClick(a.date,false,null)}}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.view.Day",{extend:"Ext.Container",alias:"widget.extensible.dayview",requires:["Extensible.calendar.view.AbstractCalendar","Extensible.calendar.view.DayHeader","Extensible.calendar.view.DayBody"],showTime:true,showTodayText:true,dayCount:1,enableEventResize:true,ddIncrement:30,minEventDisplayMinutes:30,showHourSeparator:true,viewStartHour:0,viewEndHour:24,scrollStartHour:7,hourHeight:42,hideMode:"offsets",initComponent:function(){this.ddCreateEventText=this.ddCreateEventText||Extensible.calendar.view.AbstractCalendar.prototype.ddCreateEventText;this.ddMoveEventText=this.ddMoveEventText||Extensible.calendar.view.AbstractCalendar.prototype.ddMoveEventText;this.dayCount=this.dayCount>7?7:(this.dayCount<1?1:this.dayCount);var b=Ext.apply({},this.initialConfig);b.showTime=this.showTime;b.showTodayText=this.showTodayText;b.todayText=this.todayText;b.dayCount=this.dayCount;b.weekCount=1;b.readOnly=this.readOnly;b.ddIncrement=this.ddIncrement;b.minEventDisplayMinutes=this.minEventDisplayMinutes;var c=Ext.applyIf({xtype:"extensible.dayheaderview",id:this.id+"-hd",ownerCalendarPanel:this.ownerCalendarPanel},b);var a=Ext.applyIf({xtype:"extensible.daybodyview",enableEventResize:this.enableEventResize,showHourSeparator:this.showHourSeparator,viewStartHour:this.viewStartHour,viewEndHour:this.viewEndHour,scrollStartHour:this.scrollStartHour,hourHeight:this.hourHeight,id:this.id+"-bd",ownerCalendarPanel:this.ownerCalendarPanel},b);this.items=[c,a];this.addCls("ext-cal-dayview ext-cal-ct");this.callParent(arguments)},afterRender:function(){this.callParent(arguments);this.header=Ext.getCmp(this.id+"-hd");this.body=Ext.getCmp(this.id+"-bd");this.body.on("eventsrendered",this.forceSize,this);this.on("resize",this.onResize,this)},refresh:function(){Extensible.log("refresh (DayView)");this.header.refresh();this.body.refresh()},forceSize:function(){Ext.defer(function(){var a=this.el.up(".x-panel-body"),c=this.el.down(".ext-cal-day-header"),b=a.getHeight()-c.getHeight();this.el.down(".ext-cal-body-ct").setHeight(b-1)},1,this)},onResize:function(){this.forceSize();Ext.defer(this.refresh,Ext.isIE?1:0,this)},doHide:function(){this.header.doHide.apply(this,arguments);this.body.doHide.apply(this,arguments)},getViewBounds:function(){return this.header.getViewBounds()},getStartDate:function(){return this.header.getStartDate()},setStartDate:function(a){this.header.setStartDate(a,true);this.body.setStartDate(a)},renderItems:function(){this.header.renderItems();this.body.renderItems()},isToday:function(){return this.header.isToday()},moveTo:function(a){this.header.moveTo(a);return this.body.moveTo(a,true)},moveNext:function(){this.header.moveNext();return this.body.moveNext(true)},movePrev:function(a){this.header.movePrev();return this.body.movePrev(true)},moveDays:function(a){this.header.moveDays(a);return this.body.moveDays(a,true)},moveToday:function(){this.header.moveToday();return this.body.moveToday(true)},showEventEditor:function(b,a){return Extensible.calendar.view.AbstractCalendar.prototype.showEventEditor.apply(this,arguments)},dismissEventEditor:function(a){return Extensible.calendar.view.AbstractCalendar.prototype.dismissEventEditor.apply(this,arguments)}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.view.MultiDay",{extend:"Extensible.calendar.view.Day",alias:"widget.extensible.multidayview",dayCount:3,startDayIsStatic:false,moveNext:function(a){return this.moveDays(this.startDayIsStatic?7:this.dayCount,a)},movePrev:function(a){return this.moveDays(this.startDayIsStatic?-7:-this.dayCount,a)}});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.view.Week",{extend:"Extensible.calendar.view.MultiDay",alias:"widget.extensible.weekview",dayCount:7});
/*
 * Extensible 1.5.1
 * Copyright(c) 2010-2011 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.define("Extensible.calendar.CalendarPanel",{extend:"Ext.panel.Panel",alias:"widget.extensible.calendarpanel",requires:["Ext.layout.container.Card","Extensible.calendar.view.Day","Extensible.calendar.view.Week","Extensible.calendar.view.Month","Extensible.calendar.view.MultiDay","Extensible.calendar.view.MultiWeek"],enableRecurrence:false,showDayView:true,showMultiDayView:false,showWeekView:true,showMultiWeekView:true,showMonthView:true,showNavBar:true,todayText:"Today",showTodayText:true,showTime:true,readOnly:false,showNavToday:true,showNavJump:true,showNavNextPrev:true,jumpToText:"Jump to:",goText:"Go",dayText:"Day",multiDayText:"{0} Days",weekText:"Week",multiWeekText:"{0} Weeks",monthText:"Month",editModal:false,enableEditDetails:true,layout:{type:"card",deferredRender:true},startDate:new Date(),initComponent:function(){this.tbar={cls:"ext-cal-toolbar",border:true,items:[]};this.viewCount=0;var b=(this.multiDayViewCfg&&this.multiDayViewCfg.dayCount)||3,g=(this.multiWeekViewCfg&&this.multiWeekViewCfg.weekCount)||2;if(this.showNavToday){this.tbar.items.push({id:this.id+"-tb-today",text:this.todayText,handler:this.onTodayClick,scope:this})}if(this.showNavNextPrev){this.tbar.items.push({id:this.id+"-tb-prev",handler:this.onPrevClick,scope:this,iconCls:"x-tbar-page-prev"});this.tbar.items.push({id:this.id+"-tb-next",handler:this.onNextClick,scope:this,iconCls:"x-tbar-page-next"})}if(this.showNavJump){this.tbar.items.push(this.jumpToText);this.tbar.items.push({id:this.id+"-tb-jump-dt",xtype:"datefield",width:120,showToday:false});this.tbar.items.push({id:this.id+"-tb-jump",text:this.goText,handler:this.onJumpClick,scope:this})}this.tbar.items.push("->");if(this.showDayView){this.tbar.items.push({id:this.id+"-tb-day",text:this.dayText,handler:this.onDayNavClick,scope:this,toggleGroup:this.id+"-tb-views"});this.viewCount++}if(this.showMultiDayView){var i=Ext.String.format(this.getMultiDayText(b),b);this.tbar.items.push({id:this.id+"-tb-multiday",text:i,handler:this.onMultiDayNavClick,scope:this,toggleGroup:this.id+"-tb-views"});this.viewCount++}if(this.showWeekView){this.tbar.items.push({id:this.id+"-tb-week",text:this.weekText,handler:this.onWeekNavClick,scope:this,toggleGroup:this.id+"-tb-views"});this.viewCount++}if(this.showMultiWeekView){var i=Ext.String.format(this.getMultiWeekText(g),g);this.tbar.items.push({id:this.id+"-tb-multiweek",text:i,handler:this.onMultiWeekNavClick,scope:this,toggleGroup:this.id+"-tb-views"});this.viewCount++}if(this.showMonthView||this.viewCount==0){this.tbar.items.push({id:this.id+"-tb-month",text:this.monthText,handler:this.onMonthNavClick,scope:this,toggleGroup:this.id+"-tb-views"});this.viewCount++;this.showMonthView=true}var h=this.viewCount-1;this.activeItem=this.activeItem===undefined?h:(this.activeItem>h?h:this.activeItem);if(this.showNavBar===false){delete this.tbar;this.addCls("x-calendar-nonav")}this.callParent(arguments);this.addEvents({eventadd:true,eventupdate:true,beforeeventdelete:true,eventdelete:true,eventcancel:true,viewchange:true,editdetails:true});this.addCls("x-cal-panel");if(this.eventStore){this.store=this.eventStore;delete this.eventStore}this.setStore(this.store);var k={showToday:this.showToday,todayText:this.todayText,showTodayText:this.showTodayText,showTime:this.showTime,readOnly:this.readOnly,enableRecurrence:this.enableRecurrence,store:this.store,calendarStore:this.calendarStore,editModal:this.editModal,enableEditDetails:this.enableEditDetails,ownerCalendarPanel:this};if(this.showDayView){var f=Ext.apply({xtype:"extensible.dayview",title:this.dayText},k);f=Ext.apply(Ext.apply(f,this.viewConfig),this.dayViewCfg);f.id=this.id+"-day";this.initEventRelay(f);this.add(f)}if(this.showMultiDayView){var a=Ext.apply({xtype:"extensible.multidayview",title:this.getMultiDayText(b)},k);a=Ext.apply(Ext.apply(a,this.viewConfig),this.multiDayViewCfg);a.id=this.id+"-multiday";this.initEventRelay(a);this.add(a)}if(this.showWeekView){var l=Ext.applyIf({xtype:"extensible.weekview",title:this.weekText},k);l=Ext.apply(Ext.apply(l,this.viewConfig),this.weekViewCfg);l.id=this.id+"-week";this.initEventRelay(l);this.add(l)}if(this.showMultiWeekView){var e=Ext.applyIf({xtype:"extensible.multiweekview",title:this.getMultiWeekText(g)},k);e=Ext.apply(Ext.apply(e,this.viewConfig),this.multiWeekViewCfg);e.id=this.id+"-multiweek";this.initEventRelay(e);this.add(e)}if(this.showMonthView){var c=Ext.applyIf({xtype:"extensible.monthview",title:this.monthText,listeners:{weekclick:{fn:function(n,m){this.showWeek(m)},scope:this}}},k);c=Ext.apply(Ext.apply(c,this.viewConfig),this.monthViewCfg);c.id=this.id+"-month";this.initEventRelay(c);this.add(c)}this.add(Ext.applyIf({xtype:"extensible.eventeditform",id:this.id+"-edit",calendarStore:this.calendarStore,enableRecurrence:this.enableRecurrence,listeners:{eventadd:{scope:this,fn:this.onEventAdd},eventupdate:{scope:this,fn:this.onEventUpdate},eventdelete:{scope:this,fn:this.onEventDelete},eventcancel:{scope:this,fn:this.onEventCancel}}},this.editViewCfg))},initEventRelay:function(a){a.listeners=a.listeners||{};a.listeners.afterrender={fn:function(b){this.relayEvents(b,["eventsrendered","eventclick","dayclick","eventover","eventout","beforedatechange","datechange","rangeselect","beforeeventmove","eventmove","initdrag","dayover","dayout","beforeeventresize","eventresize","eventadd","eventupdate","beforeeventdelete","eventdelete","eventcancel"]);b.on("editdetails",this.onEditDetails,this)},scope:this,single:true}},afterRender:function(){this.callParent(arguments);this.body.addCls("x-cal-body");this.updateNavState();this.setActiveView()},getMultiDayText:function(a){return this.multiDayText},getMultiWeekText:function(a){return this.multiWeekText},setStore:function(a,b){var c=this.store;if(!b&&c){c.un("write",this.onWrite,this)}if(a){a.on("write",this.onWrite,this)}this.store=a},onStoreAdd:function(c,b,a){this.hideEditForm()},onStoreUpdate:function(b,c,a){if(a==Ext.data.Record.COMMIT){this.hideEditForm()}},onStoreRemove:function(a,b){this.hideEditForm()},onWrite:function(b,a){var c=a.records[0];switch(a.action){case"create":this.onStoreAdd(b,c);break;case"update":this.onStoreUpdate(b,c,Ext.data.Record.COMMIT);break;case"destroy":this.onStoreRemove(b,c);break}},onEditDetails:function(b,c,a){if(this.fireEvent("editdetails",this,b,c,a)!==false){this.showEditForm(c)}},save:function(){if(!this.store.autoSync){this.store.sync()}},onEventAdd:function(a,b){if(!b.store){this.store.add(b);this.save()}this.fireEvent("eventadd",this,b)},onEventUpdate:function(a,b){this.save();this.fireEvent("eventupdate",this,b)},onEventDelete:function(a,b){this.store.remove(b);this.save();this.fireEvent("eventdelete",this,b)},onEventCancel:function(a,b){this.hideEditForm();this.fireEvent("eventcancel",this,b)},showEditForm:function(a){this.preEditView=this.layout.getActiveItem().id;this.setActiveView(this.id+"-edit");this.layout.getActiveItem().loadRecord(a);return this},hideEditForm:function(){if(this.preEditView){this.setActiveView(this.preEditView);delete this.preEditView}return this},setActiveView:function(g,a){var f=this,e=f.layout,b=f.id+"-edit",c;if(a){f.startDate=a}if(g!==e.getActiveItem().id){c=f.getDockedItems("toolbar")[0];if(c){c[g===b?"hide":"show"]()}e.setActiveItem(g||f.activeItem);f.doComponentLayout();f.activeView=e.getActiveItem();if(g!==b){if(g&&g!==f.preEditView){e.activeItem.setStartDate(f.startDate,true)}f.updateNavState()}f.fireViewChange()}},fireViewChange:function(){if(this.layout&&this.layout.getActiveItem){var a=this.layout.getActiveItem(),b=Ext.Date.clone;if(a){if(a.getViewBounds){var c=a.getViewBounds(),e={activeDate:b(a.getStartDate()),viewStart:b(c.start),viewEnd:b(c.end)}}if(a.dismissEventEditor){a.dismissEventEditor()}this.fireEvent("viewchange",this,a,e)}}},updateNavState:function(){var b=this,e=b.layout.activeItem;if(e&&b.showNavBar!==false){var c=e.id.split(b.id+"-")[1],a=Ext.getCmp(b.id+"-tb-"+c);if(b.showNavToday){Ext.getCmp(b.id+"-tb-today").setDisabled(e.isToday())}a.toggle(true)}},setStartDate:function(a){Extensible.log("setStartDate (CalendarPanel");this.startDate=a;this.layout.activeItem.setStartDate(a,true);this.updateNavState();this.fireViewChange();return this},showWeek:function(a){this.setActiveView(this.id+"-week",a)},onTodayClick:function(){this.startDate=this.layout.activeItem.moveToday(true);this.updateNavState();this.fireViewChange()},onJumpClick:function(){var a=Ext.getCmp(this.id+"-tb-jump-dt").getValue();if(a!==""){this.startDate=this.layout.activeItem.moveTo(a,true);this.updateNavState();this.fireViewChange()}},onPrevClick:function(){this.startDate=this.layout.activeItem.movePrev(true);this.updateNavState();this.fireViewChange()},onNextClick:function(){this.startDate=this.layout.activeItem.moveNext(true);this.updateNavState();this.fireViewChange()},onDayNavClick:function(){this.setActiveView(this.id+"-day")},onMultiDayNavClick:function(){this.setActiveView(this.id+"-multiday")},onWeekNavClick:function(){this.setActiveView(this.id+"-week")},onMultiWeekNavClick:function(){this.setActiveView(this.id+"-multiweek")},onMonthNavClick:function(){this.setActiveView(this.id+"-month")},getActiveView:function(){return this.layout.activeItem}});Ext.define("GeoExt.selection.FeatureModel",{extend:"Ext.selection.RowModel",alias:"selection.featuremodel",autoActivateControl:true,layerFromStore:true,selectControl:null,bound:false,selectedFeatures:[],autoPanMapOnSelection:false,constructor:function(a){a=a||{};if(a.selectControl instanceof OpenLayers.Control.SelectFeature){if(!a.singleSelect){var b=a.selectControl;a.singleSelect=!(b.multiple||!!b.multipleKey)}}else{if(a.layer instanceof OpenLayers.Layer.Vector){this.selectControl=this.createSelectControl(a.layer,a.selectControl);delete a.layer;delete a.selectControl}}if(a.autoPanMapOnSelection){this.autoPanMapOnSelection=true;delete a.autoPanMapOnSelection}this.callParent(arguments)},bindComponent:function(){this.callParent(arguments);if(this.layerFromStore){var a=this.view.getStore()&&this.view.getStore().layer;if(a&&!(this.selectControl instanceof OpenLayers.Control.SelectFeature)){this.selectControl=this.createSelectControl(a,this.selectControl)}}if(this.selectControl){this.bindModel(this.selectControl)}},createSelectControl:function(b,a){a=a||{};var e=a.singleSelect!==undefined?a.singleSelect:this.singleSelect;a=OpenLayers.Util.extend({toggle:true,multipleKey:e?null:(Ext.isMac?"metaKey":"ctrlKey")},a);var c=new OpenLayers.Control.SelectFeature(b,a);b.map.addControl(c);return c},bindModel:function(f,b){if(!this.bound){b=b||{};this.selectControl=f;if(f instanceof OpenLayers.Layer.Vector){this.selectControl=this.createSelectControl(f,b.controlConfig)}if(this.autoActivateControl){this.selectControl.activate()}var e=this.getLayers();for(var c=0,a=e.length;c<a;c++){e[c].events.on({featureselected:this.featureSelected,featureunselected:this.featureUnselected,scope:this})}this.bound=true}return this.selectControl},unbind:function(){var c=this.selectControl;if(this.bound){var e=this.getLayers();for(var b=0,a=e.length;b<a;b++){e[b].events.un({featureselected:this.featureSelected,featureunselected:this.featureUnselected,scope:this})}if(this.autoActivateControl){c.deactivate()}this.selectControl=null;this.bound=false}return c},featureSelected:function(a){if(!this._selecting){var b=this.view.store;var c=b.findBy(function(e,f){return e.raw==a.feature});if(c!=-1&&!this.isSelected(c)){this._selecting=true;this.select(c,!this.singleSelect);this._selecting=false;this.view.focusRow(c)}}},featureUnselected:function(a){if(!this._selecting){var b=this.view.store;var c=b.findBy(function(e,f){return e.raw==a.feature});if(c!=-1&&this.isSelected(c)){this._selecting=true;this.deselect(c);this._selecting=false;this.view.focusRow(c)}}},onSelectChange:function(b,c){this.callParent(arguments);var f=b.raw;if(this.selectControl&&!this._selecting&&f){var g=this.getLayers();if(c){for(var e=0,a=g.length;e<a;e++){if(Ext.Array.indexOf(g[e].selectedFeatures,f)==-1){this._selecting=true;this.selectControl.select(f);this._selecting=false;this.selectedFeatures.push(f);break}}if(this.autoPanMapOnSelection){this.recenterToSelectionExtent()}}else{for(var e=0,a=g.length;e<a;e++){if(Ext.Array.indexOf(g[e].selectedFeatures,f)!=-1){this._selecting=true;this.selectControl.unselect(f);this._selecting=false;OpenLayers.Util.removeItem(this.selectedFeatures,f);break}}if(this.autoPanMapOnSelection&&this.selectedFeatures.length>0){this.recenterToSelectionExtent()}}}},getLayers:function(){return this.selectControl.layers||[this.selectControl.layer]},recenterToSelectionExtent:function(){var c=this.selectControl.map;var b=this.getSelectionExtent();var a=c.getZoomForExtent(b,false);if(a>c.getZoom()){c.setCenter(b.getCenterLonLat())}else{c.zoomToExtent(b)}},getSelectionExtent:function(){var b=null;var e=this.selectedFeatures;if(e&&(e.length>0)){var f=null;for(var c=0,a=e.length;c<a;c++){f=e[c].geometry;if(f){if(b===null){b=new OpenLayers.Bounds()}b.extend(f.getBounds())}}}return b}});Ext.define("GeoExt.data.reader.Feature",{extend:"Ext.data.reader.Json",alias:"reader.feature",extractData:function(l){var k=this,e=[],b=k.model,a=l.length,f,c,h,g;if(!l.length&&Ext.isObject(l)){l=[l];a=1}for(g=0;g<a;g++){c=l[g];if(!c.isModel){h=new b(undefined,k.getId(c),c);h.data=f={};h.phantom=false;k.convertRecordData(f,c,h);e.push(h);if(k.implicitIncludes){k.readAssociated(h,c)}}else{e.push(c)}}return e},buildExtractors:function(b){var g=this,k=g.getIdProperty(),i=g.totalProperty,f=g.successProperty,h=g.messageProperty,e,c,a;if(b===true){delete g.convertRecordData}if(g.convertRecordData){return}if(i){g.getTotal=g.createAccessor(i)}if(f){g.getSuccess=g.createAccessor(f)}if(h){g.getMessage=g.createAccessor(h)}if(k){c=g.model.prototype.fields.get(k);if(c){a=c.mapping;k=(a!==undefined&&a!==null)?a:k}e=g.createAccessor(k);g.getId=function(l){var m=e.call(g,l);return(m===undefined||m==="")?null:m}}else{g.getId=function(){return null}}g.buildFieldExtractors();if(g.root){g.getRoot=g.createAccessor(g.root)}else{g.getRoot=function(l){return l}}g.convertRecordData=g.convertFeatureRecordData},convertFeatureRecordData:function(c,p,g){var b=[];if(p){var i=g.fields;var n={};if(p.attributes){for(var f=0,h=i.length;f<h;f++){var l=i.items[f];var m;if(/[\[\.]/.test(l.mapping)){try{m=new Function("obj","return obj."+l.mapping)(p.attributes)}catch(k){m=l.defaultValue}}else{m=p.attributes[l.mapping||l.name]||l.defaultValue}if(l.convert){m=l.convert(m,g)}c[l.name]=m}}g.state=p.state;if(p.state==OpenLayers.State.INSERT||p.state==OpenLayers.State.UPDATE){g.setDirty()}var a=(p.state===OpenLayers.State.INSERT)?undefined:p.id;c.id=a}return b}});Ext.define("GeoExt.data.LayerModel",{alternateClassName:"GeoExt.data.LayerRecord",extend:"Ext.data.Model",requires:["Ext.data.proxy.Memory","Ext.data.reader.Json"],alias:"model.gx_layer",statics:{createFromLayer:function(a){return this.proxy.reader.readRecords([a]).records[0]}},fields:["id",{name:"title",type:"string",mapping:"name"},{name:"legendURL",type:"string",mapping:"metadata.legendURL"},{name:"hideTitle",type:"bool",mapping:"metadata.hideTitle"},{name:"hideInLegend",type:"bool",mapping:"metadata.hideInLegend"}],proxy:{type:"memory",reader:{type:"json"}},getLayer:function(){return this.raw}});Ext.define("GeoExt.data.FeatureStore",{extend:"Ext.data.Store",requires:["GeoExt.data.reader.Feature"],statics:{LAYER_TO_STORE:1,STORE_TO_LAYER:2},isLayerBinded:false,layer:null,featureFilter:null,constructor:function(b){b=Ext.apply({proxy:{type:"memory",reader:{type:"feature",idProperty:"id"}}},b);if(b.layer){this.layer=b.layer;delete b.layer}if(b.features){b.data=b.features}delete b.features;this.callParent([b]);var a={initDir:b.initDir};delete b.initDir;if(this.layer){this.bind(this.layer,a)}},destroy:function(){this.unbind();this.callParent()},bind:function(b,a){a=a||{};if(this.isLayerBinded){return}this.layer=b;this.isLayerBinded=true;var e=a.initDir;if(a.initDir==undefined){e=GeoExt.data.FeatureStore.LAYER_TO_STORE|GeoExt.data.FeatureStore.STORE_TO_LAYER}var c=b.features.slice(0);if(e&GeoExt.data.FeatureStore.STORE_TO_LAYER){this.each(function(f){b.addFeatures([f.raw])},this)}if(e&GeoExt.data.FeatureStore.LAYER_TO_STORE&&b.features.length>0){this.loadRawData(c,true)}this.layer.events.on({featuresadded:this.onFeaturesAdded,featuresremoved:this.onFeaturesRemoved,featuremodified:this.onFeatureModified,scope:this});this.on({load:this.onLoad,clear:this.onClear,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,scope:this});this.fireEvent("bind",this,this.layer)},unbind:function(){if(this.isLayerBinded){this.layer.events.un({featuresadded:this.onFeaturesAdded,featuresremoved:this.onFeaturesRemoved,featuremodified:this.onFeatureModified,scope:this});this.un({load:this.onLoad,clear:this.onClear,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,scope:this});this.layer=null;this.isLayerBinded=false}},addFeatures:function(a){return this.loadRawData(a,true)},removeFeatures:function(a){if(!Ext.isArray(a)){a=Array.prototype.slice.apply(arguments)}else{a=a.slice(0)}Ext.Array.each(a,function(b){this.remove(this.getByFeature(b))},this)},getByFeature:function(a){return this.getAt(this.findBy(function(b,c){return b.raw==a}))},getById:function(a){return(this.snapshot||this.data).findBy(function(b){return b.raw.id===a})},addFeaturesToLayer:function(b){var e=[];for(var c=0,a=b.length;c<a;c++){e.push(b[c].raw)}this._adding=true;this.layer.addFeatures(e);delete this._adding},onFeaturesAdded:function(b){if(!this._adding){var g=b.features,f=g;if(this.featureFilter){f=[];for(var e=0,a=g.length;e<a;e++){var c=g[e];if(this.featureFilter.evaluate(c)!==false){f.push(c)}}}this._adding=true;this.loadRawData(f,true);delete this._adding}},onFeaturesRemoved:function(b){if(!this._removing){var e=b.features;for(var c=e.length-1;c>=0;c--){var a=this.getByFeature(e[c]);if(a){this._removing=true;this.remove(a);delete this._removing}}}},onFeatureModified:function(a){var c=this.getByFeature(a.feature);if(c){var b=this.proxy.reader.read(a.feature).records[0];Ext.Object.each(b.getData(),function(e,f){c.set(e,f)},this)}},onLoad:function(b,a,c){if(c){if(!this._addRecords){this._removing=true;this.layer.removeAllFeatures();delete this._removing}if(!this._adding){this._adding=true;this.addFeaturesToLayer(a);delete this._adding}}delete this._addRecords},onClear:function(a){this._removing=true;this.layer.removeFeatures(this.layer.features);delete this._removing},onAdd:function(b,a,c){if(!this._adding){this.addFeaturesToLayer(a)}},onRemove:function(b,a,c){if(!this._removing){var e=a.raw;if(this.layer.getFeatureById(e.id)!=null){this._removing=true;this.layer.removeFeatures([e]);delete this._removing}}},onUpdate:function(e,b,c){if(!this._updating){var f=b.raw;if(f.state!==OpenLayers.State.INSERT){f.state=OpenLayers.State.UPDATE}var a=this.layer.events.triggerEvent("beforefeaturemodified",{feature:f});if(a!==false){Ext.Object.each(b.data,function(g){f.attributes[g]=b.get(g)});this._updating=true;this.layer.events.triggerEvent("featuremodified",{feature:f});delete this._updating}}},loadRecords:function(a,b){if(b&&b.addRecords){this._addRecords=true}this.callParent(arguments)}});Ext.define("GeoExt.slider.Tip",{extend:"Ext.slider.Tip",alternateClassName:"GeoExt.SliderTip",hover:true,minWidth:10,offsets:[0,-10],dragging:false,init:function(a){this.callParent(arguments);if(this.hover){a.on("render",this.registerThumbListeners,this)}this.slider=a},registerThumbListeners:function(){var a,e;for(var b=0,c=this.slider.thumbs.length;b<c;++b){a=this.slider.thumbs[b];e=a.tracker.el;(function(f,g){g.on({mouseover:function(h){this.onSlide(this.slider,h,f);this.dragging=false},mouseout:function(){if(!this.dragging){this.hide.apply(this,arguments)}},scope:this})}).apply(this,[a,e])}},onSlide:function(b,c,a){this.dragging=true;return this.callParent(arguments)}});Ext.define("GeoExt.data.LayerStore",{requires:["GeoExt.data.LayerModel"],extend:"Ext.data.Store",model:"GeoExt.data.LayerModel",statics:{MAP_TO_STORE:1,STORE_TO_MAP:2},map:null,constructor:function(b){var c=this;b=Ext.apply({},b);var e=(GeoExt.MapPanel&&b.map instanceof GeoExt.MapPanel)?b.map.map:b.map;delete b.map;if(b.layers){b.data=b.layers}delete b.layers;var a={initDir:b.initDir};delete b.initDir;c.callParent([b]);if(e){this.bind(e,a)}},bind:function(f,a){var b=this;if(b.map){return}b.map=f;a=Ext.apply({},a);var c=a.initDir;if(a.initDir==undefined){c=GeoExt.data.LayerStore.MAP_TO_STORE|GeoExt.data.LayerStore.STORE_TO_MAP}var e=f.layers.slice(0);if(c&GeoExt.data.LayerStore.STORE_TO_MAP){b.each(function(g){b.map.addLayer(g.getLayer())},b)}if(c&GeoExt.data.LayerStore.MAP_TO_STORE){b.loadRawData(e,true)}f.events.on({changelayer:b.onChangeLayer,addlayer:b.onAddLayer,removelayer:b.onRemoveLayer,scope:b});b.on({load:b.onLoad,clear:b.onClear,add:b.onAdd,remove:b.onRemove,update:b.onUpdate,scope:b});b.data.on({replace:b.onReplace,scope:b});b.fireEvent("bind",b,f)},unbind:function(){var a=this;if(a.map){a.map.events.un({changelayer:a.onChangeLayer,addlayer:a.onAddLayer,removelayer:a.onRemoveLayer,scope:a});a.un("load",a.onLoad,a);a.un("clear",a.onClear,a);a.un("add",a.onAdd,a);a.un("remove",a.onRemove,a);a.data.un("replace",a.onReplace,a);a.map=null}},onChangeLayer:function(b){var f=b.layer;var c=this.findBy(function(g,h){return g.getLayer()===f});if(c>-1){var a=this.getAt(c);if(b.property==="order"){if(!this._adding&&!this._removing){var e=this.map.getLayerIndex(f);if(e!==c){this._removing=true;this.remove(a);delete this._removing;this._adding=true;this.insert(e,[a]);delete this._adding}}}else{if(b.property==="name"){a.set("title",f.name)}else{this.fireEvent("update",this,a,Ext.data.Record.EDIT)}}}},onAddLayer:function(b){var c=this;if(!c._adding){c._adding=true;var a=c.proxy.reader.read(b.layer);c.add(a.records);delete c._adding}},onRemoveLayer:function(a){if(this.map.unloadDestroy){if(!this._removing){var b=a.layer;this._removing=true;this.remove(this.getByLayer(b));delete this._removing}}else{this.unbind()}},onLoad:function(c,b,h){if(h){if(!Ext.isArray(b)){b=[b]}if(!this._addRecords){this._removing=true;for(var f=this.map.layers.length-1;f>=0;f--){this.map.removeLayer(this.map.layers[f])}delete this._removing}var a=b.length;if(a>0){var g=new Array(a);for(var e=0;e<a;e++){g[e]=b[e].getLayer()}this._adding=true;this.map.addLayers(g);delete this._adding}}delete this._addRecords},onClear:function(a){this._removing=true;for(var b=this.map.layers.length-1;b>=0;b--){this.map.removeLayer(this.map.layers[b])}delete this._removing},onAdd:function(b,a,c){if(!this._adding){this._adding=true;var f;for(var e=a.length-1;e>=0;--e){f=a[e].getLayer();this.map.addLayer(f);if(c!==this.map.layers.length-1){this.map.setLayerIndex(f,c)}}delete this._adding}},onRemove:function(b,a,c){if(!this._removing){var e=a.getLayer();if(this.map.getLayer(e.id)!=null){this._removing=true;this.removeMapLayer(a);delete this._removing}}},onUpdate:function(c,a,b){if(b===Ext.data.Record.EDIT){if(a.modified&&a.modified.title){var e=a.getLayer();var f=a.get("title");if(f!==e.name){e.setName(f)}}}},removeMapLayer:function(a){this.map.removeLayer(a.getLayer())},onReplace:function(c,a,b){this.removeMapLayer(a)},getByLayer:function(b){var a=this.findBy(function(c){return c.getLayer()===b});if(a>-1){return this.getAt(a)}},destroy:function(){var a=this;a.unbind();a.callParent()},loadRecords:function(a,b){if(b&&b.addRecords){this._addRecords=true}this.callParent(arguments)}});Ext.define("GeoExt.panel.Map",{extend:"Ext.panel.Panel",requires:["GeoExt.data.LayerStore"],alias:"widget.gx_mappanel",alternateClassName:"GeoExt.MapPanel",statics:{guess:function(){var a=Ext.ComponentQuery.query("gx_mappanel");return((a&&a.length>0)?a[0]:null)}},center:null,zoom:null,extent:null,prettyStateKeys:false,map:null,layers:null,stateEvents:["aftermapmove","afterlayervisibilitychange","afterlayeropacitychange","afterlayerorderchange","afterlayernamechange","afterlayeradd","afterlayerremove"],initComponent:function(){if(!(this.map instanceof OpenLayers.Map)){this.map=new OpenLayers.Map(Ext.applyIf(this.map||{},{allOverlays:true}))}var a=this.layers;if(!a||a instanceof Array){this.layers=Ext.create("GeoExt.data.LayerStore",{layers:a,map:this.map.layers.length>0?this.map:null})}if(Ext.isString(this.center)){this.center=OpenLayers.LonLat.fromString(this.center)}else{if(Ext.isArray(this.center)){this.center=new OpenLayers.LonLat(this.center[0],this.center[1])}}if(Ext.isString(this.extent)){this.extent=OpenLayers.Bounds.fromString(this.extent)}else{if(Ext.isArray(this.extent)){this.extent=OpenLayers.Bounds.fromArray(this.extent)}}this.callParent(arguments);this.on("resize",this.onResize,this);this.on("afterlayout",function(){if(typeof this.map.getViewport==="function"){this.items.each(function(b){if(typeof b.addToMapPanel==="function"){b.getEl().appendTo(this.map.getViewport())}},this)}},this);this.map.events.on({moveend:this.onMoveend,changelayer:this.onChangelayer,addlayer:this.onAddlayer,removelayer:this.onRemovelayer,scope:this})},onMoveend:function(a){this.fireEvent("aftermapmove",this,this.map,a)},onChangelayer:function(b){var a=this.map;if(b.property){if(b.property==="visibility"){this.fireEvent("afterlayervisibilitychange",this,a,b)}else{if(b.property==="order"){this.fireEvent("afterlayerorderchange",this,a,b)}else{if(b.property==="nathis"){this.fireEvent("afterlayernathischange",this,a,b)}else{if(b.property==="opacity"){this.fireEvent("afterlayeropacitychange",this,a,b)}}}}}},onAddlayer:function(){this.fireEvent("afterlayeradd")},onRemovelayer:function(){this.fireEvent("afterlayerremove")},onResize:function(){var a=this.map;if(this.body.dom!==a.div){a.render(this.body.dom);this.layers.bind(a);if(a.layers.length>0){this.setInitialExtent()}else{this.layers.on("add",this.setInitialExtent,this,{single:true})}}else{a.updateSize()}},setInitialExtent:function(){var a=this.map;if(!a.getCenter()){if(this.center||this.zoom){a.setCenter(this.center,this.zoom)}else{if(this.extent instanceof OpenLayers.Bounds){a.zoomToExtent(this.extent,true)}else{a.zoomToMaxExtent()}}}},getState:function(){var c=this,f=c.map,e=c.callParent(arguments)||{},b;if(!f){return}var a=f.getCenter();a&&Ext.applyIf(e,{x:a.lon,y:a.lat,zoom:f.getZoom()});c.layers.each(function(g){b=g.getLayer();layerId=this.prettyStateKeys?g.get("title"):g.get("id");e=c.addPropertyToState(e,"visibility_"+layerId,b.getVisibility());e=c.addPropertyToState(e,"opacity_"+layerId,(b.opacity===null)?1:b.opacity)},c);return e},applyState:function(a){var m=this;map=m.map;m.center=new OpenLayers.LonLat(a.x,a.y);m.zoom=a.zoom;var g,c,h,e,b,k;var f=map.layers;for(g=0,c=f.length;g<c;g++){h=f[g];e=m.prettyStateKeys?h.name:h.id;b=a["visibility_"+e];if(b!==undefined){b=(/^true$/i).test(b);if(h.isBaseLayer){if(b){map.setBaseLayer(h)}}else{h.setVisibility(b)}}k=a["opacity_"+e];if(k!==undefined){h.setOpacity(k)}}},onBeforeAdd:function(a){if(Ext.isFunction(a.addToMapPanel)){a.addToMapPanel(this)}this.callParent(arguments)},beforeDestroy:function(){if(this.map&&this.map.events){this.map.events.un({moveend:this.onMoveend,changelayer:this.onChangelayer,scope:this})}if(!this.initialConfig.map||!(this.initialConfig.map instanceof OpenLayers.Map)){if(this.map&&this.map.destroy){this.map.destroy()}}delete this.map;this.callParent(arguments)}});Ext.define("GeoExt.Action",{extend:"Ext.Action",alias:"widget.gx_action",control:null,activateOnEnable:false,deactivateOnDisable:false,map:null,uScope:null,uHandler:null,uToggleHandler:null,uCheckHandler:null,constructor:function(a){this.uScope=a.scope;this.uHandler=a.handler;this.uToggleHandler=a.toggleHandler;this.uCheckHandler=a.checkHandler;a.scope=this;a.handler=this.pHandler;a.toggleHandler=this.pToggleHandler;a.checkHandler=this.pCheckHandler;this.control=a.control;var b=this.control;delete a.control;this.activateOnEnable=!!a.activateOnEnable;delete a.activateOnEnable;this.deactivateOnDisable=!!a.deactivateOnDisable;delete a.deactivateOnDisable;if(b){if(a.map){a.map.addControl(b);delete a.map}if((a.pressed||a.checked)&&b.map){b.activate()}if(b.active){a.pressed=true;a.checked=true}b.events.on({activate:this.onCtrlActivate,deactivate:this.onCtrlDeactivate,scope:this})}this.callParent(arguments)},pHandler:function(a){var b=this.control;if(b&&b.type==OpenLayers.Control.TYPE_BUTTON){b.trigger()}if(this.uHandler){this.uHandler.apply(this.uScope,arguments)}},pToggleHandler:function(a,b){this.changeControlState(b);if(this.uToggleHandler){this.uToggleHandler.apply(this.uScope,arguments)}},pCheckHandler:function(a,b){this.changeControlState(b);if(this.uCheckHandler){this.uCheckHandler.apply(this.uScope,arguments)}},changeControlState:function(a){if(a){if(!this._activating){this._activating=true;this.control.activate();this.initialConfig.pressed=true;this.initialConfig.checked=true;this._activating=false}}else{if(!this._deactivating){this._deactivating=true;this.control.deactivate();this.initialConfig.pressed=false;this.initialConfig.checked=false;this._deactivating=false}}},onCtrlActivate:function(){var a=this.control;if(a.type==OpenLayers.Control.TYPE_BUTTON){this.enable()}else{this.safeCallEach("toggle",[true]);this.safeCallEach("setChecked",[true])}},onCtrlDeactivate:function(){var a=this.control;if(a.type==OpenLayers.Control.TYPE_BUTTON){this.disable()}else{this.safeCallEach("toggle",[false]);this.safeCallEach("setChecked",[false])}},safeCallEach:function(f,b){var e=this.items;for(var c=0,a=e.length;c<a;c++){if(e[c][f]){e[c].rendered?e[c][f].apply(e[c],b):e[c].on({render:Ext.Function.bind(e[c][f],e[c],b),single:true})}}},setDisabled:function(a){if(!a&&this.activateOnEnable&&this.control&&!this.control.active){this.control.activate()}if(a&&this.deactivateOnDisable&&this.control&&this.control.active){this.control.deactivate()}return GeoExt.Action.superclass.setDisabled.apply(this,arguments)}});Ext.define("GeoExt.slider.Zoom",{extend:"Ext.slider.Single",requires:["GeoExt.panel.Map"],alias:"widget.gx_zoomslider",alternateClassName:"GeoExt.ZoomSlider",map:null,baseCls:"gx-zoomslider",aggressive:false,updating:false,initComponent:function(){this.callParent(arguments);if(this.map){if(this.map instanceof GeoExt.MapPanel){this.map=this.map.map}this.bind(this.map)}if(this.aggressive===true){this.on("change",this.changeHandler,this)}else{this.on("changecomplete",this.changeHandler,this)}this.on("beforedestroy",this.unbind,this)},onRender:function(){this.callParent(arguments);this.el.addCls(this.baseCls)},afterRender:function(){this.callParent(arguments);this.update()},addToMapPanel:function(a){this.on({render:function(){var b=this.getEl();b.setStyle({position:"absolute",zIndex:a.map.Z_INDEX_BASE.Control});b.on({mousedown:this.stopMouseEvents,click:this.stopMouseEvents})},afterrender:function(){this.bind(a.map)},scope:this})},stopMouseEvents:function(a){a.stopEvent()},removeFromMapPanel:function(a){var b=this.getEl();b.un("mousedown",this.stopMouseEvents,this);b.un("click",this.stopMouseEvents,this);this.unbind()},bind:function(a){this.map=a;this.map.events.on({zoomend:this.update,changebaselayer:this.initZoomValues,scope:this});if(this.map.baseLayer){this.initZoomValues();this.update()}},unbind:function(){if(this.map&&this.map.events){this.map.events.un({zoomend:this.update,changebaselayer:this.initZoomValues,scope:this})}},initZoomValues:function(){var a=this.map.baseLayer;if(this.initialConfig.minValue===undefined){this.minValue=a.minZoomLevel||0}if(this.initialConfig.maxValue===undefined){this.maxValue=a.minZoomLevel==null?a.numZoomLevels-1:a.maxZoomLevel}},getZoom:function(){return this.getValue()},getScale:function(){return OpenLayers.Util.getScaleFromResolution(this.map.getResolutionForZoom(this.getValue()),this.map.getUnits())},getResolution:function(){return this.map.getResolutionForZoom(this.getValue())},changeHandler:function(){if(this.map&&!this.updating){this.map.zoomTo(this.getValue())}},update:function(){if(this.rendered&&this.map){this.updating=true;this.setValue(this.map.getZoom());this.updating=false}}});Ext.define("GeoExt.slider.LayerOpacity",{alternateClassName:"GeoExt.LayerOpacitySlider",extend:"Ext.slider.Single",requires:"GeoExt.data.LayerModel",alias:"widget.gx_opacityslider",layer:null,complementaryLayer:null,delay:5,changeVisibilityDelay:5,aggressive:false,changeVisibility:false,value:null,inverse:false,constructor:function(a){if(a.layer){this.layer=this.getLayer(a.layer);this.bind();this.complementaryLayer=this.getLayer(a.complementaryLayer);if(a.inverse!==undefined){this.inverse=a.inverse}a.value=(a.value!==undefined)?a.value:this.getOpacityValue(this.layer);delete a.layer;delete a.complementaryLayer}this.callParent([a])},bind:function(){if(this.layer&&this.layer.map){this.layer.map.events.on({changelayer:this.update,scope:this})}},unbind:function(){if(this.layer&&this.layer.map&&this.layer.map.events){this.layer.map.events.un({changelayer:this.update,scope:this})}},update:function(a){if(a.property==="opacity"&&a.layer==this.layer&&!this._settingOpacity){this.setValue(this.getOpacityValue(this.layer))}},setLayer:function(a){this.unbind();this.layer=this.getLayer(a);this.setValue(this.getOpacityValue(a));this.bind()},getOpacityValue:function(a){var b;if(a&&a.opacity!==null){b=parseInt(a.opacity*(this.maxValue-this.minValue))}else{b=this.maxValue}if(this.inverse===true){b=(this.maxValue-this.minValue)-b}return b},getLayer:function(a){if(a instanceof OpenLayers.Layer){return a}else{if(a instanceof GeoExt.data.LayerModel){return a.getLayer()}}},initComponent:function(){this.callParent();if(this.changeVisibility&&this.layer&&(this.layer.opacity==0||(this.inverse===false&&this.value==this.minValue)||(this.inverse===true&&this.value==this.maxValue))){this.layer.setVisibility(false)}if(this.complementaryLayer&&((this.layer&&this.layer.opacity==1)||(this.inverse===false&&this.value==this.maxValue)||(this.inverse===true&&this.value==this.minValue))){this.complementaryLayer.setVisibility(false)}if(this.aggressive===true){this.on("change",this.changeLayerOpacity,this,{buffer:this.delay})}else{this.on("changecomplete",this.changeLayerOpacity,this)}if(this.changeVisibility===true){this.on("change",this.changeLayerVisibility,this,{buffer:this.changeVisibilityDelay})}if(this.complementaryLayer){this.on("change",this.changeComplementaryLayerVisibility,this,{buffer:this.changeVisibilityDelay})}this.on("beforedestroy",this.unbind,this)},changeLayerOpacity:function(a,b){if(this.layer){b=b/(this.maxValue-this.minValue);if(this.inverse===true){b=1-b}this._settingOpacity=true;this.layer.setOpacity(b);delete this._settingOpacity}},changeLayerVisibility:function(b,c){var a=this.layer.getVisibility();if((this.inverse===false&&c==this.minValue)||(this.inverse===true&&c==this.maxValue)&&a===true){this.layer.setVisibility(false)}else{if((this.inverse===false&&c>this.minValue)||(this.inverse===true&&c<this.maxValue)&&a==false){this.layer.setVisibility(true)}}},changeComplementaryLayerVisibility:function(b,c){var a=this.complementaryLayer.getVisibility();if((this.inverse===false&&c==this.maxValue)||(this.inverse===true&&c==this.minValue)&&a===true){this.complementaryLayer.setVisibility(false)}else{if((this.inverse===false&&c<this.maxValue)||(this.inverse===true&&c>this.minValue)&&a==false){this.complementaryLayer.setVisibility(true)}}},addToMapPanel:function(a){this.on({render:function(){var b=this.getEl();b.setStyle({position:"absolute",zIndex:a.map.Z_INDEX_BASE.Control});b.on({mousedown:this.stopMouseEvents,click:this.stopMouseEvents})},scope:this})},removeFromMapPanel:function(a){var b=this.getEl();b.un({mousedown:this.stopMouseEvents,click:this.stopMouseEvents,scope:this});this.unbind()},stopMouseEvents:function(a){a.stopEvent()}});Ext.define("PTS.model.State",{extend:"Ext.data.Model",fields:[{name:"stateid",type:"int"},{name:"unittype",type:"mystring",useNull:true},{name:"statenumeric",type:"mystring",useNull:true},{name:"statealpha",type:"mystring",useNull:true},{name:"statename",type:"mystring",useNull:true},{name:"countryalpha",type:"mystring",useNull:true},{name:"countryname",type:"mystring",useNull:true},{name:"featurename",type:"mystring",useNull:true}],idProperty:"stateid",proxy:{type:"rest",url:"../statelist",reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.store.States",{extend:"Ext.data.Store",model:"PTS.model.State",autoLoad:true});Ext.define("PTS.model.Country",{extend:"Ext.data.Model",fields:[{name:"countryid",mapping:"countryiso",type:"mystring",useNull:true},{name:"iso3",type:"mystring",useNull:true},{name:"isonumeric",type:"mystring",useNull:true},{name:"fips",type:"mystring",useNull:true},{name:"country",type:"mystring",useNull:true},{name:"currencycode",type:"mystring",useNull:true},{name:"currencyname",type:"mystring",useNull:true},{name:"phone",type:"mystring",useNull:true},{name:"postalcodeformat",type:"mystring",useNull:true},{name:"postalcoderegex",type:"mystring",useNull:true}],idProperty:"countryid",proxy:{type:"rest",url:"../country",reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.store.Countries",{extend:"Ext.data.Store",model:"PTS.model.Country",sorters:[{property:"country",direction:"ASC"}],autoLoad:true});Ext.define("PTS.model.Position",{extend:"Ext.data.Model",fields:[{name:"positionid",type:"int"},{name:"title",type:"mystring",useNull:true},{name:"code",type:"mystring",useNull:true}],idProperty:"positionid",proxy:{type:"rest",url:"../position",reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.store.Positions",{extend:"Ext.data.Store",model:"PTS.model.Position",autoLoad:true,sorters:["title"],proxy:{type:"rest",url:"../person",api:{read:"../personpositionlist"},reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.Defaults",{singleton:true,pageSize:25});Ext.define("PTS.model.User",{extend:"Ext.data.Model",fields:[{name:"loginid",mapping:"loginid",type:"int",persist:false},{name:"contactid",mapping:"contactid",type:"int",persist:false},{name:"groupid",mapping:"groupid",type:"int",persist:false},{name:"username",type:"mystring",useNull:true},{name:"firstname",type:"mystring",useNull:true},{name:"lastname",type:"mystring",useNull:true},{name:"middlename",type:"mystring",useNull:true},{name:"suffix",type:"mystring",useNull:true},{name:"groupname",type:"mystring",useNull:true},{name:"acronym",type:"mystring",useNull:true}],idProperty:"loginid",proxy:{type:"rest",url:"../userinfo",reader:{type:"json",root:"data"}},getUserName:function(){var b=this.get("firstname"),a=this.get("lastname");return a+", "+b}});Ext.define("PTS.util.DataTypes",{singleton:true,requires:["Ext.data.Types","Ext.data.SortTypes"]},function(){var a=Ext.data.SortTypes;Ext.JSON.encodeDate=function(b){return Ext.Date.format(b,'"Y-m-d"')};Ext.data.Types.MYDATE={convert:function(c){var e="Y-m-d",b;if(!c){return null}if(Ext.isDate(c)){return c}if(e){if(e==="timestamp"){return new Date(c*1000)}if(e==="time"){return new Date(parseInt(c,10))}return Ext.Date.parse(c,e)}b=Date.parse(c);return b?new Date(b):null},sortType:a.asDate,type:"mydate"};Ext.data.Types.MYBOOLEAN={convert:function(b){if(this.useNull&&(b===undefined||b===null||b==="")){return null}return(b!=="false")&&!!b?1:0},sortType:a.none,type:"myboolean"};Ext.data.Types.MYSTRING={convert:function(b){if(b===undefined||b===null||b===""){return null}return b},sortType:function(b){if(b===undefined||b===null||b===""){return null}return String(b).toUpperCase()},type:"mystring"}});Ext.define("PTS.util.VTypes",{singleton:true,requires:["Ext.form.field.VTypes"]},function(){Ext.apply(Ext.form.field.VTypes,{daterange:function(e,c){var b=c.parseDate(e);if(c.startDateField&&(!c.dateRangeMax||b===null||(b.getTime()!==c.dateRangeMax.getTime()))){var f=c.ownerCt.down("datefield[vfield=beginDate]")||c.up("form").down("datefield[vfield=beginDate]");f.setMaxValue(b);f.validate();c.dateRangeMax=b}else{if(c.endDateField&&(!c.dateRangeMin||b===null||(b.getTime()!==c.dateRangeMin.getTime()))){var a=c.ownerCt.down("datefield[vfield=endDate]")||c.up("form").down("datefield[vfield=endDate]");a.setMinValue(b);a.validate();c.dateRangeMin=b}}return true},daterangeText:"From date must be before To date",moddaterange:function(e,c){var b=c.parseDate(e),a=[c.up("form").down("#startDate")];if(c.startDateField&&(!c.dateRangeMax||b===null||(b.getTime()!==c.dateRangeMax.getTime()))){a.push(c.up("form").down("#"+c.startDateField));Ext.each(a,function(f){f.setMaxValue(b);f.validate()});c.dateRangeMax=b}else{if(c.endDateField&&(!c.dateRangeMin||b===null||(b.getTime()!==c.dateRangeMin.getTime()))){a.push(c.up("form").down("#"+c.endDateField));Ext.each(a,function(f){f.setMinValue(b);f.validate()});c.dateRangeMin=b}}return true},moddaterangeText:"From date must be before To date"})});Ext.define("PTS.util.ActivityMonitor",{singleton:true,ui:null,runner:null,task:null,lastActive:null,ready:false,verbose:false,interval:(1000*60*1),maxInactive:(1000*60*5),init:function(a){if(!a){a={}}Ext.apply(this,a,{runner:new Ext.util.TaskRunner(),ui:Ext.getBody(),task:{run:this.monitorUI,interval:a.interval||this.interval,scope:this}});this.ready=true},isReady:function(){return this.ready},isActive:Ext.emptyFn,isInactive:Ext.emptyFn,start:function(){if(!this.isReady()){this.log("Please run ActivityMonitor.init()");return false}this.ui.on("mousemove",this.captureActivity,this);this.ui.on("keydown",this.captureActivity,this);this.lastActive=new Date();this.log("ActivityMonitor has been started.");this.runner.start(this.task)},stop:function(){if(!this.isReady()){this.log("Please run ActivityMonitor.init()");return false}this.runner.stop(this.task);this.lastActive=null;this.ui.un("mousemove",this.captureActivity);this.ui.un("keydown",this.captureActivity);this.log("ActivityMonitor has been stopped.")},captureActivity:function(c,b,a){this.lastActive=new Date()},monitorUI:function(){var a=new Date(),b=(a-this.lastActive);if(b>=this.maxInactive){this.log("MAXIMUM INACTIVE TIME HAS BEEN REACHED");this.stop();this.isInactive()}else{this.log("CURRENTLY INACTIVE FOR "+b+" (ms)");this.isActive()}},log:function(a){if(this.verbose){window.console.log(a)}}});Ext.define("PTS.util.AssociationJsonWriter",{extend:"Ext.data.writer.Json",alternateClassName:"Ext.data.AssociationJsonWriter",alias:"writer.ajson",getRecordData:function(f){var k=f.phantom===true,b=this.writeAllFields||k,c=this.nameProperty,g=f.fields,e={},i,a,h,l;if(b){g.each(function(m){if(m.persist){a=m[c]||m.name;e[a]=f.get(m.name)}})}else{i=f.getChanges();for(l in i){if(i.hasOwnProperty(l)){h=g.get(l);a=h[c]||h.name;e[a]=i[l]}}if(!k){e[f.idProperty]=f.getId()}}if(f.associations.items.length){f.associations.each(function(s){var n=f[s.name](),p=n.getProxy(),q=n.getRemovedRecords(),r=[],m=[];n.each(function(t){if(t.dirty){r.push(p.getWriter().getRecordData(t))}},this);e[s.name]=r;if(q.length>0){if(undefined===e.destroy){e.destroy={}}Ext.each(q,function(t){m.push({id:t.getId()})},this);e.destroy[s.name]=m}},this)}return e}});Ext.define("PTS.controller.report.Report",{extend:"Ext.app.Controller",init:function(){var a=this.getController("report.tab.ReportTab");a.init()}});Ext.define("PTS.view.MainToolbar",{extend:"Ext.toolbar.Toolbar",alias:"widget.maintoolbar",height:33,id:"pts-main-toolbar",itemId:"main-toolbar",initComponent:function(){var a=this;Ext.applyIf(a,{style:{border:"none",backgroundColor:"#FFF",backgroundImage:"none"},items:[{xtype:"tbtext",html:'<h1>Arctic LCC Project Tracking System <span class="pts-version">v'+PTS.app.version+"</span></h1>",style:{textAlign:"center",fontSize:"18px"},flex:1},{xtype:"container",width:200,items:[{xtype:"label",margin:"0 5",text:"Logged In:"},{xtype:"button",itemId:"userBtn",text:"",menu:{xtype:"menu",items:[{xtype:"menuitem",iconCls:"pts-menu-settings",text:"Settings"},{xtype:"menuitem",iconCls:"pts-menu-logout",text:"Logout",handler:function(){window.location="logout"}}]}}]}]});a.callParent(arguments)}});Ext.define("PTS.model.Modification",{extend:"Ext.data.Model",fields:[{name:"modificationid",type:"int",persist:false},{name:"projectid",type:"int",useNull:true},{name:"modtypeid",type:"int",useNull:true},{name:"personid",type:"int",useNull:true},{name:"parentmodificationid",type:"int",useNull:true},{name:"startdate",type:"mydate"},{name:"enddate",type:"mydate"},{name:"effectivedate",type:"mydate"},{name:"datecreated",type:"mydate"},{name:"modificationcode",type:"mystring",useNull:true},{name:"title",type:"mystring",useNull:true},{name:"shorttitle",type:"mystring",useNull:true},{name:"description",type:"mystring",useNull:true}],idProperty:"modificationid",proxy:{type:"rest",url:"../modification",reader:{type:"json",root:"data"}}});Ext.define("PTS.model.Deliverable",{extend:"Ext.data.Model",fields:[{name:"deliverableid",persist:false,type:"int",useNull:true},{name:"modificationid",type:"int",useNull:true},{name:"parentmodificationid",type:"int",useNull:true},{name:"parentdeliverableid",type:"int",useNull:true},{name:"deliverabletypeid",type:"int",useNull:true},{name:"personid",type:"int",useNull:true},{name:"title",type:"mystring",useNull:true},{name:"description",type:"mystring",useNull:true},{name:"duedate",type:"mydate"},{name:"receiveddate",type:"mydate"},{name:"invalid",type:"boolean",useNull:true},{name:"publish",type:"boolean",defaultValue:true,useNull:true},{name:"restricted",type:"boolean",useNull:true},{name:"accessdescription",type:"mystring",useNull:true},{name:"id",persist:false,convert:function(b,a){if(a.data.modificationid&&a.data.deliverableid){return a.data.modificationid+"/deliverable/"+a.data.deliverableid}return null}}],idProperty:"id",proxy:{type:"rest",url:"../modification",api:{read:"../modification",create:"../deliverable"},reader:{type:"json",root:"data"}}});Ext.define("PTS.model.Funding",{extend:"Ext.data.Model",fields:[{name:"fundingid",type:"int",persist:false},{name:"modificationid",type:"int",persist:true,useNull:true},{name:"fundingtypeid",type:"int",useNull:true},{name:"projectcontactid",type:"int",useNull:true},{name:"fundingrecipientid",type:"int",useNull:true},{name:"amount",type:"number",useNull:true},{name:"title",type:"mystring",useNull:true}],idProperty:"fundingid",proxy:{type:"rest",url:"../funding",reader:{type:"json",root:"data"}}});Ext.define("PTS.data.Calendar",{constructor:function(){return{calendars:[{id:1,title:"Past Due",color:2},{id:2,title:"Due Immediately",color:6},{id:3,title:"Due Soon",color:20},{id:4,title:"Received",color:26},{id:5,title:"Completed",color:33}]}}});Ext.define("PTS.util.mixin.CheckDirty",{requires:["Ext.Array"],isDirty:function(){var a=this.query("field");return !Ext.Array.every(a,function(b){return !b.isDirty()})},isValid:function(){var a=this.query("field");return Ext.Array.every(a,function(b){return b.isValid()})}});Ext.define("PTS.controller.MainToolbar",{extend:"Ext.app.Controller",views:["MainToolbar"],init:function(){this.control({"maintoolbar #userBtn":{beforerender:this.onBeforeShowUserBtn}})},onBeforeShowUserBtn:function(b){var a=PTS.user.getUserName();b.setText(a)}});Ext.define("PTS.view.controls.MyFieldContainer",{extend:"Ext.form.FieldContainer",mixins:{checkDirty:"PTS.util.mixin.CheckDirty"},alias:"widget.myfieldcontainer",initComponent:function(){var a=this;a.callParent(arguments)}});Ext.define("PTS.view.controls.PhoneFieldContainer",{extend:"PTS.view.controls.MyFieldContainer",alias:"widget.phonefieldcontainer",requires:["Ext.form.field.Display"],deleteCheckBox:"delete",deleteCheckBoxAction:function(e,c,b){var a=c?"#C62415":"inherit";e.ownerCt.getEl().setStyle({color:a})},initComponent:function(){var b=this,a=[{xtype:"displayfield",value:"(",flex:0},{xtype:"numberfield",margin:"0 1",width:50,name:"areacode",hideTrigger:true,minValue:0,allowBlank:false},{xtype:"displayfield",value:")",flex:0},{xtype:"numberfield",margin:"0 1",width:150,name:"phnumber",hideTrigger:true,minValue:0,allowBlank:false},{xtype:"numberfield",margin:"0 15 0 0",width:105,name:"extension",fieldLabel:"Ext",labelAlign:"right",labelWidth:50,hideTrigger:true},{xtype:"countrycombo",name:"countryiso",fieldLabel:"Country",labelAlign:"right",labelWidth:50,flex:1,allowBlank:false},{xtype:"hiddenfield",itemId:"recordId",name:"phoneid"}];if(b.deleteCheckBox){a.push({xtype:"checkboxfield",itemId:b.deleteCheckBox,disabled:true,hideEmptyLabel:false,boxLabel:"Delete",labelWidth:10,listeners:{change:this.deleteCheckBoxAction}})}Ext.applyIf(b,{items:a});b.callParent(arguments)}});Ext.define("PTS.view.dashboard.DeliverableList",{extend:"Ext.grid.Panel",alias:"widget.deliverablelist",requires:["Ext.ux.grid.PrintGrid","Ext.ux.grid.SaveGrid"],autoScroll:true,title:"Deliverables",store:"DeliverableListings",initFilter:"over",initComponent:function(){var a=this;Ext.applyIf(a,{viewConfig:{},dockedItems:[{xtype:"pagingtoolbar",store:a.store,dock:"top",displayInfo:true,plugins:[Ext.create("Ext.ux.grid.PrintGrid",{title:function(){return this.child("cycle#filter").getActiveItem().text+" Deliverables"},printHidden:true}),Ext.create("Ext.ux.grid.SaveGrid",{})],items:["-",{xtype:"cycle",itemId:"filter",showText:true,action:"filterdeliverable",tooltip:"Click to filter the Deliverables",menu:{xtype:"menu",width:120,items:[{iconCls:"pts-flag-red",text:"Past Due",filter:"over",checked:a.initFilter==="over"},{iconCls:"pts-flag-orange",text:"Due Soon",filter:"soon",checked:a.initFilter==="soon"},{iconCls:"pts-flag-green",text:"Incomplete",filter:"incomplete",checked:a.initFilter==="incomplete"},{iconCls:"pts-flag-white",text:"All",filter:"all",checked:a.initFilter==="all"},{iconCls:"pts-flag-gray",text:"Completed",filter:"complete",checked:a.initFilter==="complete"}]}}]}],columns:[{xtype:"gridcolumn",width:75,dataIndex:"duedate",text:"Due Date",renderer:function(k,b,g,c,f,l,i){var e=Ext.util.Format.date(k),h=g.get("dayspastdue")>0;if(h){return'<span style="color:red;">'+e+"</span>"}return e}},{xtype:"gridcolumn",dataIndex:"title",flex:2,text:"Title"},{xtype:"gridcolumn",dataIndex:"projectcode",text:"Project"},{xtype:"gridcolumn",dataIndex:"project",text:"Project Title",flex:2},{xtype:"gridcolumn",dataIndex:"status",text:"Status"},{xtype:"gridcolumn",dataIndex:"dayspastdue",text:"Past Due",width:70,renderer:function(h,e,c,g,i,f,b){if(h>0){return'<span style="color:#FF0000;">'+h+"</span>"}return h}},{xtype:"gridcolumn",dataIndex:"contact",hidden:true,text:"Contact"},{xtype:"gridcolumn",dataIndex:"email",hidden:true,text:"E-mail",renderer:function(b){return b?'<a href="mailto:'+b+'">'+b+"</a>":""}}]});a.callParent(arguments)}});Ext.define("PTS.view.dashboard.TaskList",{extend:"Ext.grid.Panel",alias:"widget.tasklist",requires:["Ext.ux.grid.PrintGrid","Ext.ux.grid.SaveGrid"],autoScroll:true,title:"Tasks",store:"Tasks",initComponent:function(){var a=this;Ext.applyIf(a,{viewConfig:{},dockedItems:[{xtype:"pagingtoolbar",store:"Tasks",dock:"top",displayInfo:true,plugins:[Ext.create("Ext.ux.grid.PrintGrid",{title:function(){return this.child("cycle#filter").getActiveItem().text+" (Tasks)"}}),Ext.create("Ext.ux.grid.SaveGrid",{})],items:["-",{xtype:"cycle",itemId:"filter",showText:true,action:"filtertask",tooltip:"Click to filter the Tasks",menu:{xtype:"menu",width:120,items:[{iconCls:"pts-menu-users",text:"Show All",filter:"all"},{iconCls:"pts-menu-user",text:"Show Mine",filter:"user"},{iconCls:"pts-menu-exclamation",text:"Due Today",filter:"today"}]}},"-",{xtype:"button",action:"togglecomplete",text:"Completed",enableToggle:"true",iconCls:"pts-btn-check",tooltip:"Include completed tasks"}]}],columns:[{xtype:"datecolumn",width:83,dataIndex:"duedate",text:"Due Date"},{xtype:"gridcolumn",dataIndex:"assignee",text:"Assignee"},{xtype:"gridcolumn",dataIndex:"title",flex:1,text:"Title"},{xtype:"gridcolumn",dataIndex:"status",hidden:true,text:"Status"}]});a.callParent(arguments)}});Ext.define("PTS.view.contact.window.ContactToolbar",{extend:"Ext.toolbar.Toolbar",alias:"widget.contacttoolbar",requires:["Ext.toolbar.*"],dock:"top",initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"button",text:"Edit",iconCls:"pts-menu-editbasic",action:"editcontact"},{xtype:"button",text:"Delete",iconCls:"pts-menu-deletebasic",action:"deletecontact"},{xtype:"button",text:"Save",iconCls:"pts-menu-savebasic",action:"savecontact"},{xtype:"button",text:"Reset",iconCls:"pts-menu-reset",action:"resetcontact"}]});a.callParent(arguments)}});Ext.define("PTS.view.controls.PositionCombo",{extend:"Ext.form.field.ComboBox",alias:"widget.positioncombo",requires:["PTS.store.Positions"],name:"positionid",fieldLabel:"Position",store:"Positions",displayField:"title",valueField:"positionid",forceSelection:true,allowBlank:false,queryMode:"local",initComponent:function(){var a=this;a.callParent(arguments)}});Ext.define("PTS.view.controls.MyFieldSet",{extend:"Ext.form.FieldSet",alias:"widget.myfieldset",mixins:{checkDirty:"PTS.util.mixin.CheckDirty"},initComponent:function(){var a=this;a.callParent(arguments)}});Ext.define("PTS.view.controls.CountryCombo",{extend:"Ext.form.field.ComboBox",alias:"widget.countrycombo",requires:["PTS.store.Countries"],name:"countryid",fieldLabel:"Country",store:"Countries",displayField:"country",valueField:"countryid",value:"US",forceSelection:true,allowBlank:false,queryMode:"local",initComponent:function(){var a=this;a.callParent(arguments)}});Ext.define("PTS.view.contact.GroupDDList",{extend:"Ext.grid.Panel",alias:"widget.groupddlist",requires:["Ext.ux.grid.FilterBar","Ext.selection.CheckboxModel","Ext.grid.plugin.DragDrop"],title:"Groups",store:"DDContactGroups",itemId:"groupsList",initComponent:function(){var a=this;Ext.applyIf(a,{selModel:Ext.create("Ext.selection.CheckboxModel",{injectCheckbox:false,mode:"SIMPLE",checkOnly:true}),viewConfig:{copy:true,plugins:{ptype:"gridviewdragdrop"}},dockedItems:[{xtype:"pagingtoolbar",store:"DDContactGroups",displayInfo:false}],columns:[{xtype:"gridcolumn",dataIndex:"fullname",flex:1,text:"Full Name"},{xtype:"gridcolumn",dataIndex:"acronym",text:"Acronym"},{xtype:"gridcolumn",dataIndex:"name",flex:1,text:"Name",hidden:true}]});a.callParent(arguments);a.addDocked({xtype:"filterbar",searchStore:a.store,dock:"bottom"})}});Ext.define("PTS.view.contact.PersonDDList",{extend:"Ext.grid.Panel",alias:"widget.personddlist",requires:["Ext.ux.grid.FilterBar","Ext.selection.CheckboxModel","Ext.grid.plugin.DragDrop"],title:"Persons",store:"DDPersons",itemId:"personsList",initComponent:function(){var a=this;Ext.applyIf(a,{selModel:Ext.create("Ext.selection.CheckboxModel",{injectCheckbox:false,mode:"SIMPLE",checkOnly:true}),viewConfig:{copy:true,plugins:{ptype:"gridviewdragdrop"}},dockedItems:[{xtype:"pagingtoolbar",store:"DDPersons",displayInfo:false}],columns:[{xtype:"gridcolumn",dataIndex:"firstname",flex:1,text:"First Name"},{xtype:"gridcolumn",dataIndex:"lastname",flex:3,text:"Last Name"},{xtype:"gridcolumn",dataIndex:"priacronym",width:60,text:"Group"},{xtype:"gridcolumn",dataIndex:"prigroupname",flex:2,hidden:true,text:"Group Name"}]});a.callParent(arguments);a.addDocked({xtype:"filterbar",searchStore:a.store,dock:"bottom"})}});Ext.define("PTS.view.contact.window.PersonGroups",{extend:"Ext.panel.Panel",alias:"widget.persongroups",requires:["Ext.ux.CheckColumn","Ext.ux.grid.HeaderToolTip","PTS.view.contact.GroupDDList","PTS.view.contact.PersonDDList","Ext.selection.CheckboxModel","Ext.grid.plugin.DragDrop"],layout:{align:"stretch",padding:5,type:"hbox"},title:"Manage Contact Groups",disabled:true,initComponent:function(){var b=this,a;a=Ext.create("Ext.grid.plugin.CellEditing",{itemId:"contactEditor",clicksToEdit:1,listeners:{beforeedit:function(c){if(c.column&&(c.column.isCheckerHd||c.column.is("actioncolumn"))){return false}return true}}});Ext.applyIf(b,{items:[{xtype:"panel",itemId:"contactLists",style:{borderWidth:"1px 0 0 1px",padding:0},activeItem:1,flex:1,layout:{type:"card"},defaults:{autoScroll:true,border:0},items:[{xtype:"personddlist",itemId:"personsList",title:"Persons",dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",iconCls:"pts-menu-addbasic",text:"Add Member",action:"addcontacts"}]},{xtype:"pagingtoolbar",store:"DDPersons",displayInfo:true}]},{xtype:"groupddlist",itemId:"groupsList",title:"Groups",dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",iconCls:"pts-menu-addbasic",text:"Assign Group",action:"addcontacts"}]},{xtype:"pagingtoolbar",store:"DDContactGroups",displayInfo:true}]}]},{xtype:"gridpanel",itemId:"groupMembersList",title:"Assigned Groups",store:"ContactContactGroups",flex:1,selModel:Ext.create("Ext.selection.CheckboxModel",{injectCheckbox:false,mode:"SIMPLE",checkOnly:true}),plugins:[a,"headertooltip"],viewConfig:{plugins:[{ptype:"gridviewdragdrop",pluginId:"contactsddplugin"}]},dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",iconCls:"pts-menu-deletebasic",text:"Remove",action:"removecontacts"},{xtype:"button",iconCls:"pts-menu-savebasic",text:"Save",action:"savecontacts"},{xtype:"button",iconCls:"pts-menu-refresh",text:"Refresh",action:"refreshcontacts"}]},{xtype:"pagingtoolbar",store:"ContactContactGroups",displayInfo:true}],columns:[{xtype:"gridcolumn",sortable:false,dataIndex:"name",flex:1,text:"Name"},{xtype:"gridcolumn",dataIndex:"positionid",renderer:function(m,c,i,e,h,n,k){var f=k.getHeaderAtIndex(h).getEditor(),l=f.getStore().find(f.valueField,m,0,false,true,true),g=f.getStore().getAt(l);if(g){return g.get(f.displayField)}return m},editor:{xtype:"positioncombo",fieldLabel:"",typeAhead:true,forceSelection:true,triggerAction:"all",selectOnTab:true,lazyRender:true,listClass:"x-combo-list-small",queryMode:"local",listeners:{blur:function(e){e.getStore().clearFilter()}}},flex:2,text:"Position"}]}]});b.callParent(arguments)}});Ext.define("PTS.Overrides",{singleton:true,requires:["Ext.form.field.Radio","Ext.data.AbstractStore","Ext.data.proxy.Proxy","Ext.view.AbstractView","Ext.form.field.ComboBox","Extensible.calendar.view.Month","Ext.grid.RowEditor","Ext.Array","Ext.util.Sorter","Ext.data.TreeStore","Ext.grid.Scroller"]},function(){Ext.override(Ext.data.Store,{filter:function(f,g){if(Ext.isString(f)){f={property:f,value:g}}var e=this,a=e.decodeFilters(f),b=0,h=e.sortOnFilter&&!e.remoteSort,c=a.length;for(;b<c;b++){e.filters.replace(a[b])}if(e.remoteFilter){delete e.totalCount;if(e.buffered){e.pageMap.clear();e.loadPage(1)}else{e.currentPage=1;e.load()}}else{if(e.filters.getCount()){e.snapshot=e.snapshot||e.data.clone();e.data=e.data.filter(e.filters.items);if(h){e.sort()}if(!h||e.sorters.length<1){e.fireEvent("datachanged",e)}}}}});Ext.override(Ext.grid.RowEditor,{loadRecord:function(a){var c=this,b=c.getForm();b.loadRecord(a);if(b.isValid()){c.hideToolTip()}else{if(c.errorSummary){c.showToolTip()}}Ext.Array.forEach(c.query(">displayfield"),function(e){c.renderColumnData(e,a)},c)}});Ext.override(Ext.util.Sorter,{defaultSorterFn:function(e,c){var b=this,a=b.transform,g=b.getRoot(e)[b.property],f=b.getRoot(c)[b.property];if(a){g=a(g);f=a(f)}if(null!==g&&null!==f){return g>f?1:(g<f?-1:0)}else{if(g===f){return 0}else{return g===null?1:-1}}}});Ext.override(Ext.view.AbstractView,{onMaskBeforeShow:function(){if(!this.el.isVisible(true)){return false}this.callOverridden(arguments)},onAdd:function(f,b,c){var e=this,a;if(e.all.getCount()===0){e.refresh()}else{a=e.bufferRender(b,c);e.doAdd(a,b,c);e.selModel.refresh();e.updateIndexes(c)}e.fireEvent("itemadd",b,c,a)}});Ext.override(Ext.form.field.Radio,{resetOriginalValue:function(){this.getManager().getByName(this.name).each(function(a){a.originalValue=a.getValue();a.checkDirty()})}});Ext.override(Ext.data.AbstractStore,{sync:function(c){var f=this,b={},g=f.getNewRecords(),e=f.getUpdatedRecords(),a=f.getRemovedRecords(),h=false;if(g.length>0){b.create=g;h=true}if(e.length>0){b.update=e;h=true}if(a.length>0){b.destroy=a;h=true}if(h&&f.fireEvent("beforesync",b)!==false){c=c||{};f.proxy.batch(Ext.apply(c,{operations:b,listeners:f.getBatchListeners()}))}return f},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},rejectChanges:function(){var c=this,e=c.getModifiedRecords(),a=e.length,b=0;for(;b<a;b++){e[b].reject();if(e[b].phantom){c.remove(e[b])}}e=c.removed;a=e.length;for(b=0;b<a;b++){c.insert(e[b].lastIndex||0,e[b]);e[b].reject();delete e[b].lastIndex}c.removed.length=0}});Ext.override(Ext.data.proxy.Proxy,{batch:function(e,f){var g=this,c=g.batchActions,b,a;if(e.operations===undefined){e={operations:e,listeners:f}}if(e.batch){if(Ext.isDefined(e.batch.runOperation)){b=Ext.applyIf(e.batch,{proxy:g,listeners:{}})}}else{e.batch={proxy:g,listeners:e.listeners||{}}}if(!b){b=new Ext.data.Batch(e.batch)}b.on("complete",Ext.bind(g.onBatchComplete,g,[e],0));Ext.each(g.batchOrder.split(","),function(h){a=e.operations[h];if(a){if(c){b.add(new Ext.data.Operation({action:h,records:a}))}else{Ext.each(a,function(i){b.add(new Ext.data.Operation({action:h,records:[i]}))})}}},g);b.start();return b},onBatchComplete:function(a,b){var c=a.scope||this;if(b.hasException){if(Ext.isFunction(a.failure)){Ext.callback(a.failure,c,[b,a])}}else{if(Ext.isFunction(a.success)){Ext.callback(a.success,c,[b,a])}}if(Ext.isFunction(a.callback)){Ext.callback(a.callback,c,[b,a])}}});Extensible.calendar.view.Month.override({getEventTemplate:function(){if(!this.eventTpl){var b,a=this.getEventBodyMarkup();b=!(Ext.isIE||Ext.isOpera)?Ext.create("Ext.XTemplate",'<div data-qtip="<b>{Title}</b><br/>Status: {Status}<br/>Project: {ProjectCode}<br/>Type: {Type}<br/>Manager: {Manager}<br/>Description: {Desc}" class="{_extraCls} {spanCls} ext-cal-evt ext-cal-evr">',a,"</div>"):Ext.create("Ext.XTemplate",'<tpl if="_renderAsAllDay">','<div data-qtip="<b>{Title}</b><br/>Status: {Status}<br/>Project: {ProjectCode}<br/>Type: {Type}<br/>Manager: {Manager}<br/>Description: {Desc}" class="{_extraCls} {spanCls} ext-cal-evt ext-cal-evo">','<div class="ext-cal-evm">','<div class="ext-cal-evi">',"</tpl>",'<tpl if="!_renderAsAllDay">','<div data-qtip="<b>{Title}</b><br/>Status: {Status}<br/>Project: {ProjectCode}<br/>Type: {Type}<br/>Manager: {Manager}<br/>Description: {Desc}" class="{_extraCls} ext-cal-evt ext-cal-evr">',"</tpl>",a,'<tpl if="_renderAsAllDay">',"</div>","</div>","</tpl>","</div>");b.compile();this.eventTpl=b}return this.eventTpl}});Ext.override(Ext.data.TreeStore,{load:function(a){a=a||{};a.params=a.params||{};var c=this,b=a.node||c.tree.getRootNode();if(!b){b=c.setRootNode({expanded:true},true)}a.id=b.getId();if(c.clearOnLoad){if(c.clearRemovedOnLoad){c.clearRemoved(b)}c.tree.un("remove",c.onNodeRemove,c);b.removeAll(false);c.tree.on("remove",c.onNodeRemove,c)}Ext.applyIf(a,{node:b});if(b){b.set("loading",true)}return c.callParent([a])}});Ext.override(Ext.grid.Scroller,{onAdded:function(){this.callParent(arguments);var a=this;if(a.scrollEl){a.mun(a.scrollEl,"scroll",a.onElScroll,a);a.mon(a.scrollEl,"scroll",a.onElScroll,a)}}})});Ext.define("PTS.view.dashboard.Calendar",{extend:"Extensible.calendar.CalendarPanel",alias:"widget.dashboardcalendar",requires:["Extensible.calendar.data.MemoryEventStore","Extensible.calendar.data.MemoryCalendarStore","Extensible.calendar.data.EventStore","Extensible.calendar.CalendarPanel","PTS.data.Calendar","Extensible.calendar.data.CalendarMappings","Extensible.calendar.data.EventMappings"],showDayView:false,showWeekView:false,readOnly:true,initComponent:function(){var a=this;Ext.applyIf(a,{eventStore:Ext.create("Extensible.calendar.data.EventStore",{autoLoad:true,pageSize:undefined,proxy:{type:"rest",url:"../deliverable/calendar",noCache:true,reader:{type:"json",root:"data"},listeners:{exception:function(f,c,b,e){var g=c.message?c.message:Ext.decode(c.responseText).message;Ext.Msg.alert("Server Error",g)}}}})});a.callParent(arguments)}});Ext.define("PTS.view.dashboard.Dashboard",{extend:"Ext.panel.Panel",alias:"widget.dashboard",requires:["PTS.view.dashboard.Calendar","Extensible.calendar.gadget.CalendarListPanel","PTS.view.dashboard.DeliverableList","PTS.view.dashboard.TaskList"],layout:{type:"border"},title:"Dashboard",initComponent:function(){var b=this,a=Ext.create("Extensible.calendar.data.MemoryCalendarStore",{data:Ext.create("PTS.data.Calendar"),storeId:"CalendarStore"});Ext.applyIf(b,{items:[{region:"west",width:179,border:false,items:[{xtype:"datepicker",id:"app-nav-picker",cls:"ext-cal-nav-picker",listeners:{select:{fn:function(e,c){Ext.ComponentQuery.query("dashboardcalendar")[0].setStartDate(c)},scope:this}}},{xtype:"extensible.calendarlist",store:a,border:false,width:178}]},{xtype:"dashboardcalendar",id:"pts-dashboardcalendar",calendarStore:a,bodyPadding:"",style:{border:"1px",padding:0},region:"center",viewConfig:{showHeader:true}},{xtype:"tabpanel",width:Ext.getBody().getWidth()>1490?700:590,title:"Tasks and Deliverables",minWidth:550,region:"east",collapsible:true,split:true,preventHeader:true,animCollapse:!Ext.isIE8,items:[{xtype:"tasklist",title:"Tasks"},{xtype:"deliverablelist",title:"Deliverables"}]}]});b.callParent(arguments)}});Ext.define("PTS.controller.dashboard.Dashboard",{extend:"Ext.app.Controller",views:["dashboard.Dashboard","dashboard.DeliverableList","dashboard.TaskList"],init:function(){var c=this.getController("dashboard.Calendar"),b=this.getController("dashboard.TaskList"),a=this.getController("dashboard.DeliverableList");c.init();b.init();a.init();this.control({"dashboard tasklist":{itemdblclick:this.openProject},"dashboard deliverablelist":{itemdblclick:this.openProject}})},openProject:function(a,e){var f=e.getId(),c=e.get("modificationid"),b=function(){var k=this,h=k.down("agreementstree").getStore(),i=k.down("projectagreements"),g=function(l){var m=l.getNodeById("d-"+f+"-"+c).getPath();this.down("agreementstree").selectPath(m);this.getEl().unmask()};k.getEl().mask("Loading...");k.down("tabpanel").setActiveTab(i);if(h.getRootNode().hasChildNodes()){g(h)}else{h.on("load",g,k,{single:true})}};if(e.getProjectCode===undefined){e.getProjectCode=function(){return e.get("projectcode")}}this.getController("project.Project").openProject(e,b)}});Ext.define("PTS.view.controls.MyCombo",{extend:"Ext.form.field.ComboBox",alias:"widget.mycombo",requires:["Ext.form.field.ComboBox"],initComponent:function(){var a=this;a.callParent(arguments);a.on("beforedestroy",function(b){b.getStore().clearFilter(false)})}});Ext.define("PTS.view.controls.FilterCombo",{extend:"PTS.view.controls.MyCombo",alias:"widget.filtercombo",requires:["Ext.form.field.ComboBox"],baseFilter:null,doQuery:function(h,c,f){h=h||"";var e=this,b={query:h,forceAll:c,combo:e,cancel:false},a=e.store,g=e.queryMode==="local";if(e.fireEvent("beforequery",b)===false||b.cancel){return false}h=b.query;c=b.forceAll;if(c||(h.length>=e.minChars)){e.expand();if(!e.queryCaching||e.lastQuery!==h){e.lastQuery=h;if(g){if(c){a.clearFilter()}else{a.clearFilter(true);a.filter(e.displayField,h)}if(this.baseFilter){a.filter(this.baseFilter)}}else{e.rawQuery=f;if(e.pageSize){e.loadPage(1)}else{a.load({params:e.getParams(h)})}}}if(e.getRawValue()!==e.getDisplayValue()){e.ignoreSelection++;e.picker.getSelectionModel().deselectAll();e.ignoreSelection--}if(g){e.doAutoSelect()}if(e.typeAhead){e.doTypeAhead()}}return true},initComponent:function(){var a=this;a.callParent(arguments)}});Ext.define("PTS.view.controls.StateCombo",{extend:"PTS.view.controls.FilterCombo",alias:"widget.statecombo",requires:["PTS.store.States","Ext.form.field.ComboBox"],name:"stateid",fieldLabel:"State",store:"States",displayField:"statename",valueField:"stateid",forceSelection:true,allowBlank:false,queryMode:"local",lastQuery:"",initComponent:function(){var a=this;a.callParent(arguments);a.baseFilter=[{filterFn:function(b){var e=a.up("addressfieldset").down("countrycombo").getValue();return b.get("countryalpha")===e}}]}});Ext.define("PTS.view.controls.AddressFieldSet",{extend:"PTS.view.controls.MyFieldSet",alias:"widget.addressfieldset",requires:["PTS.view.controls.StateCombo","PTS.view.controls.CountryCombo"],cls:"pts-contact-fieldset",itemId:"address",margin:"10 0 0 0",checkboxName:"addressCbx",checkboxToggle:true,collapsed:true,collapsible:true,title:"Address",copyCheckBox:false,deleteCheckBox:"delete",deleteCheckBoxAction:function(e,c,b){var a=c?"#C62415":"inherit";e.ownerCt.getEl().setStyle({color:a})},initComponent:function(){var b=this,a=[{xtype:"textfield",name:"street1",fieldLabel:"Street 1",allowBlank:false,anchor:"100%"},{xtype:"textfield",name:"street2",fieldLabel:"Street 2",anchor:"100%"},{xtype:"fieldcontainer",layout:{align:"middle",defaultMargins:{top:0,right:5,bottom:0,left:0},type:"hbox"},items:[{xtype:"textfield",itemId:"city",disabled:true,width:400,name:"city",fieldLabel:"City",allowBlank:false,flex:0},{xtype:"statecombo",itemId:"state",disabled:true,width:400,name:"stateid",fieldLabel:"State",allowBlank:false,labelAlign:"right",labelWidth:75,flex:0}]},{xtype:"fieldcontainer",layout:{align:"middle",defaultMargins:{top:0,right:5,bottom:0,left:0},type:"hbox"},items:[{xtype:"countrycombo",itemId:"country",width:400,name:"countryiso",fieldLabel:"Country",allowBlank:false},{xtype:"textfield",itemId:"postalcode",width:200,name:"postalcode",fieldLabel:"Zip code",allowBlank:false,labelAlign:"right",labelWidth:75,flex:0},{xtype:"textfield",width:130,name:"postal4",fieldLabel:"Zip4",labelAlign:"right",labelWidth:60,flex:0}]},{xtype:"hiddenfield",itemId:"recordId",name:"addressid",fieldLabel:"Label",anchor:"100%"}];if(b.deleteCheckBox){a.splice(0,0,{xtype:"checkboxfield",itemId:b.deleteCheckBox,disabled:true,hideEmptyLabel:false,boxLabel:"Delete address",anchor:"100%",listeners:{change:this.deleteCheckBoxAction}})}if(b.copyCheckBox){a.splice(0,0,{xtype:"checkboxfield",itemId:b.copyCheckBox,hideEmptyLabel:false,boxLabel:"Copy primary mailing address",anchor:"100%"})}Ext.applyIf(b,{items:a});b.callParent(arguments)}});Ext.define("PTS.view.contact.window.ContactDetail",{extend:"Ext.container.Container",alias:"widget.contactdetail",requires:["PTS.view.controls.MyFieldContainer","PTS.view.controls.AddressFieldSet","Ext.form.field.Hidden","PTS.view.controls.PhoneFieldContainer"],margin:"0 0 10 0",layout:{type:"anchor"},initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"myfieldcontainer",itemId:"emailAddress",layout:{type:"fit"},anchor:"75%",items:[{xtype:"textfield",name:"uri",fieldLabel:"Primary E-mail",vtype:"email"},{xtype:"hiddenfield",itemId:"recordId",name:"eaddressid",fieldLabel:"Label"}]},{xtype:"myfieldcontainer",itemId:"webAddress",layout:{type:"fit"},anchor:"75%",items:[{xtype:"textfield",name:"uri",fieldLabel:"Website",vtype:"url"},{xtype:"hiddenfield",itemId:"recordId",name:"eaddressid",fieldLabel:"Label"}]},{xtype:"addressfieldset",cls:"pts-contact-fieldset",itemId:"mailAddress",margin:"10 0 0 0",checkboxName:"mailingCbx",checkboxToggle:true,collapsed:true,collapsible:true,title:"Primary Mailing Address"},{xtype:"addressfieldset",cls:"pts-contact-fieldset",itemId:"physicalAddress",copyCheckBox:"sameAddCbx",margin:"10 0 0 0",checkboxName:"physicalCbx",checkboxToggle:true,collapsed:true,collapsible:true,title:"Primary Physical Address"},{xtype:"myfieldset",cls:"pts-contact-fieldset",itemId:"phoneNumbers",margin:"10 0 0 0",checkboxName:"phoneCbx",checkboxToggle:true,collapsed:true,collapsible:true,title:"Phone",items:[{xtype:"phonefieldcontainer",itemId:"officePhone",layout:{align:"middle",type:"hbox"},fieldLabel:"Office"},{xtype:"phonefieldcontainer",itemId:"mobilePhone",layout:{align:"middle",type:"hbox"},fieldLabel:"Mobile"},{xtype:"phonefieldcontainer",itemId:"faxPhone",layout:{align:"middle",type:"hbox"},fieldLabel:"Fax"}]}]});a.callParent(arguments)}});Ext.define("PTS.view.contact.window.ContactForm",{extend:"Ext.panel.Panel",alias:"widget.contactform",requires:["PTS.view.contact.window.ContactDetail","PTS.view.contact.window.PersonGroups","PTS.view.contact.window.ContactToolbar","PTS.view.controls.PositionCombo"],activeItem:0,layout:{type:"card"},title:"Edit Contact",preventHeader:true,initComponent:function(){var a=this;Ext.applyIf(a,{defaults:{preventHeader:true},items:[{xtype:"tabpanel",itemId:"person",activeTab:0,items:[{xtype:"form",itemId:"personForm",autoScroll:true,bodyPadding:10,title:"Person",trackResetOnLoad:true,dockedItems:[{xtype:"contacttoolbar"}],items:[{xtype:"checkboxfield",name:"inactive",anchor:"100%",fieldLabel:"Inactive?",hideLabel:true,boxLabel:"Inactive?",boxLabelAlign:"before"},{xtype:"fieldcontainer",defaults:{hideLabel:true},layout:{defaultMargins:{top:0,right:5,bottom:0,left:0},type:"hbox"},combineErrors:true,fieldLabel:"Name",msgTarget:"side",anchor:"100%",items:[{xtype:"textfield",name:"firstname",fieldLabel:"First Name",allowBlank:false,emptyText:"First",flex:1},{xtype:"textfield",name:"middlename",fieldLabel:"Middle Name",emptyText:"Middle",flex:1},{xtype:"textfield",name:"lastname",fieldLabel:"Last Name",allowBlank:false,emptyText:"Last",flex:1},{xtype:"textfield",width:65,name:"suffix",fieldLabel:"Suffix",emptyText:"Suffix"}]},{xtype:"positioncombo",name:"positionid",anchor:"50%"},{xtype:"combobox",anchor:"50%",name:"contacttypeid",fieldLabel:"Type",store:"ContactTypes",displayField:"title",valueField:"contacttypeid",forceSelection:true,allowBlank:false,queryMode:"local",listConfig:{getInnerTpl:function(){return'<div data-qtip="{description}">{title}</div>'}}},{xtype:"textfield",name:"dunsnumber",fieldLabel:"DUNS #",anchor:"100%"},{xtype:"contactdetail"},{xtype:"textareafield",name:"comment",fieldLabel:"Comment",grow:true,growMax:100,growMin:80,anchor:"100%"}]}]},{xtype:"tabpanel",itemId:"group",activeTab:0,items:[{xtype:"form",itemId:"groupForm",autoScroll:true,bodyPadding:10,title:"Group",trackResetOnLoad:true,dockedItems:[{xtype:"contacttoolbar"}],items:[{xtype:"checkboxfield",name:"inactive",anchor:"100%",fieldLabel:"Inactive?",hideLabel:true,boxLabel:"Inactive?",boxLabelAlign:"before"},{xtype:"fieldcontainer",layout:{defaultMargins:{top:0,right:15,bottom:0,left:0},type:"hbox"},combineErrors:true,msgTarget:"side",anchor:"100%",items:[{xtype:"textfield",name:"name",fieldLabel:"Name",allowBlank:false,flex:1},{xtype:"textfield",width:165,name:"acronym",fieldLabel:"Acronym",allowBlank:false,labelWidth:75},{xtype:"checkboxfield",name:"organization",fieldLabel:"Organization?",allowBlank:false,hideLabel:true,boxLabel:"Organization?",boxLabelAlign:"before",inputValue:"true"}]},{xtype:"combobox",anchor:"50%",name:"contacttypeid",fieldLabel:"Type",store:"ContactTypes",displayField:"title",valueField:"contacttypeid",forceSelection:true,allowBlank:false,queryMode:"local",listConfig:{getInnerTpl:function(){return'<div data-qtip="{description}">{title}</div>'}}},{xtype:"filtercombo",itemId:"parentGroup",anchor:"100%",name:"parentgroupid",fieldLabel:"Primary Parent",store:"ContactGroupIDs",displayField:"fullname",valueField:"contactid",forceSelection:false,queryMode:"local",validator:function(c){var e=this.up("form#groupForm").getRecord().getId(),b=this.getValue();if(b===0||b===null){return true}else{if(e===b){return"A group cannot be its own parent"}else{if(this.getStore().indexOfId(b)===-1){return"You must make a selection from the list"}else{return true}}}}},{xtype:"textfield",name:"dunsnumber",fieldLabel:"DUNS #",anchor:"100%"},{xtype:"contactdetail"},{xtype:"textareafield",name:"comment",fieldLabel:"Comment",grow:true,growMax:100,growMin:80,anchor:"100%"}]}]}]});a.callParent(arguments)}});Ext.define("PTS.view.contact.window.Window",{extend:"Ext.window.Window",alias:"widget.contactwindow",requires:["PTS.view.contact.window.ContactForm"],height:Ext.Element.getViewportHeight()-40,minWidth:750,width:900,layout:{type:"border"},closable:false,title:"Edit Contact",constrain:true,modal:true,y:10,initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"contactform",region:"center"}],dockedItems:[{xtype:"toolbar",dock:"bottom",items:[{xtype:"tbfill"},{xtype:"button",text:"Close",action:"closewindow"}]}],tools:[{xtype:"tool",type:"close",action:"closewindow"}]});a.callParent(arguments)}});Ext.define("PTS.controller.contact.Contact",{extend:"Ext.app.Controller",views:["contact.window.Window"],controllers:["contact.window.Window"],init:function(){var a=this.getController("contact.tab.ContactTab"),b=this.getController("contact.window.Window");a.init();b.init()},openContact:function(b,a){var e,c,f=a?a.getId():false;b=b?b:"person";if(f!==false){c=a.getContactName();e=Ext.create(this.getContactWindowWindowView(),{title:"Edit Contact: "+c})}else{e=Ext.create(this.getContactWindowWindowView(),{title:"New Contact"})}this.application.fireEvent("opencontact",f,b);e.show()}});Ext.define("PTS.view.controls.DateRangeField",{extend:"Ext.form.field.Date",alias:"widget.daterangefield",initComponent:function(){var a=this;a.callParent(arguments);a.on("change",function(e,c,b){if(c===null){Ext.form.field.VTypes.daterange(c,e)}})}});Ext.define("PTS.view.controls.TextareaTriggerField",{extend:"Ext.form.field.Trigger",alias:"widget.areatrigger",fieldSubTpl:['<textarea id="{id}" style="height:{height}"','<tpl if="name">name="{name}" </tpl>','<tpl if="rows">rows="{rows}" </tpl>','<tpl if="cols">cols="{cols}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" ','autocomplete="off">',"</textarea>",'<div id="{cmpId}-triggerWrap" class="{triggerWrapCls}" role="presentation">',"{triggerEl}",'<div class="{clearCls}" role="presentation"></div>',"</div>",{compiled:true,disableFormats:true}],rows:2,triggerCls:"pts-trigger-zoom",height:22,style:{overflow:"hidden"},preventScrollbars:true,onTriggerClick:function(b){var a=this,c=a.getRawValue();Ext.MessageBox.show({title:"Comment",width:350,buttons:Ext.MessageBox.OKCANCEL,multiline:true,value:c,fn:function(f,e){if(f==="ok"){a.setValue(e)}},animateTarget:a.getEl()})},onRender:function(b,a){var c=this;Ext.applyIf(c.subTplData,{cols:c.cols,rows:c.rows});c.callParent(arguments)},afterRender:function(){var a=this;a.callParent(arguments);if(a.preventScrollbars){a.inputEl.setStyle("overflow","hidden")}a.inputEl.setStyle("height",a.height+"px")}});Ext.define("PTS.view.button.Edit",{extend:"Ext.button.Button",alias:"widget.editbutton",text:"Edit",iconCls:"pts-menu-editbasic",disabled:true,initComponent:function(){var a=this;Ext.applyIf(a,{handler:function(){Ext.Msg.alert("Click",'You clicked on "Edit".')}});a.callParent(arguments)}});Ext.define("PTS.view.button.Save",{extend:"Ext.button.Button",alias:"widget.savebutton",text:"Save",iconCls:"pts-menu-savebasic",disabled:true,initComponent:function(){var a=this;Ext.applyIf(a,{handler:function(){Ext.Msg.alert("Click",'You clicked on "Save".')}});a.callParent(arguments)}});Ext.define("PTS.model.GroupUser",{extend:"Ext.data.Model",fields:[{name:"contactid",mapping:"contactid",type:"int",persist:false},{name:"groupid",mapping:"groupid",type:"int",persist:false},{name:"firstname",type:"mystring",useNull:true},{name:"lastname",type:"mystring",useNull:true},{name:"middlename",type:"mystring",useNull:true},{name:"suffix",type:"mystring",useNull:true},{name:"groupname",type:"mystring",useNull:true},{name:"acronym",type:"mystring",useNull:true},{name:"fullname",convert:function(b,a){return a.data.lastname+", "+a.data.firstname}}],idProperty:"contactid",getUserName:function(){var b=this.get("firstname"),a=this.get("lastname");return a+", "+b}});Ext.define("PTS.view.button.Delete",{extend:"Ext.button.Button",alias:"widget.deletebutton",text:"Delete",iconCls:"pts-menu-deletebasic",disabled:true,initComponent:function(){var a=this;Ext.applyIf(a,{handler:function(){Ext.Msg.alert("Click",'You clicked on "Delete".')}});a.callParent(arguments)}});Ext.define("PTS.view.button.Reset",{extend:"Ext.button.Button",alias:"widget.resetbutton",text:"Reset",iconCls:"pts-menu-reset",disabled:true,initComponent:function(){var a=this;Ext.applyIf(a,{handler:function(){Ext.Msg.alert("Click",'You clicked on "Reset".')}});a.callParent(arguments)}});Ext.define("PTS.view.project.form.ProjectForm",{extend:"Ext.form.Panel",alias:"widget.projectform",requires:["PTS.view.controls.DateRangeField","Ext.form.field.Display"],autoScroll:true,bodyPadding:5,title:"Project",initComponent:function(){var a=this;a.initialConfig=Ext.apply({trackResetOnLoad:true},a.initialConfig);Ext.applyIf(a,{dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",text:"Edit",iconCls:"pts-menu-editbasic",action:"editproject"},{xtype:"button",text:"Delete",iconCls:"pts-menu-deletebasic",action:"deleteproject"},{xtype:"button",text:"Save",iconCls:"pts-menu-savebasic",formBind:true,action:"saveproject"},{xtype:"button",text:"Reset",iconCls:"pts-menu-reset",action:"resetproject"}]}],items:[{xtype:"fieldset",title:"Project",anchor:"-15",items:[{xtype:"fieldcontainer",minWidth:400,layout:{align:"stretchmax",type:"hbox"},combineErrors:true,fieldLabel:"Project ID",items:[{xtype:"displayfield",padding:"0 35 0 0",value:PTS.orgcode,hideLabel:true},{xtype:"numberfield",width:75,name:"fiscalyear",value:2012,fieldLabel:"Fiscal Year",hideLabel:true,labelAlign:"right",labelPad:3,labelSeparator:"",labelWidth:35,allowBlank:false,emptyText:"Fiscal Year",allowDecimals:false,hideTrigger:true},{xtype:"displayfield",margin:"0 2",value:"--",hideLabel:true},{xtype:"textfield",width:150,name:"number",fieldLabel:"Project ID",hideLabel:true,labelAlign:"right",labelSeparator:"",labelWidth:8,allowBlank:false,emptyText:"Unique ID"},{xtype:"checkboxfield",name:"exportmetadata",margin:"0 0 0 20",width:175,boxLabel:"Export Metadata?",labelPad:3,labelWidth:120}]},{xtype:"textfield",name:"title",fieldLabel:"Title",allowBlank:false,emptyText:"Project Title",maxLength:150,enforceMaxLength:true,anchor:"100%"},{xtype:"textfield",name:"shorttitle",fieldLabel:"Short Title",allowBlank:false,emptyText:"Short Title",maxLength:60,enforceMaxLength:true,anchor:"60%"},{xtype:"combobox",name:"parentprojectid",fieldLabel:"Parent Project",displayField:"projectcode",listConfig:{getInnerTpl:function(){return"<div>{projectcode}: {title}</div>"}},store:"ProjectIDs",valueField:"projectid",anchor:"100%"},{xtype:"fieldcontainer",layout:{type:"anchor"},fieldLabel:"Dates",items:[{xtype:"daterangefield",itemId:"startDate",name:"startdate",fieldLabel:"Start",allowBlank:false,vfield:"beginDate",endDateField:"endDate",vtype:"daterange",labelWidth:50},{xtype:"daterangefield",itemId:"endDate",name:"enddate",allowBlank:false,vfield:"endDate",startDateField:"startDate",vtype:"daterange",fieldLabel:"End",labelWidth:50}]},{xtype:"displayfield",name:"uuid",submitValue:false,value:"6ba7b810-9dad-11d1-80b4-00c04fd430c8",fieldLabel:"UUID",anchor:"100%"}]},{xtype:"fieldset",collapsible:true,title:"Description",anchor:"-15",items:[{xtype:"textareafield",name:"description",allowBlank:false,grow:true,growMin:80,anchor:"100%"}]},{xtype:"fieldset",collapsible:true,title:"Abstract",anchor:"-15",items:[{xtype:"textareafield",name:"abstract",grow:true,growMin:80,anchor:"100%"}]}]});a.callParent(arguments)}});Ext.define("PTS.store.GroupUsers",{extend:"Ext.data.Store",model:"PTS.model.GroupUser",autoLoad:false});Ext.define("PTS.view.controls.RowEditGrid",{extend:"Ext.grid.Panel",alias:"widget.roweditgrid",requires:["Ext.grid.plugin.RowEditing"],bodyPadding:0,syncOnRemoveRow:true,addRow:function(f){var e=f.up("gridpanel"),a=e.getStore(),c=a.getProxy().getModel(),b=e.getPlugin("roweditplugin");a.insert(0,Ext.create(c));b.startEdit(0,0)},removeRow:function(c){var b=c.up("gridpanel"),f=b.getEl(),a=b.getStore(),e=b.getView().getSelectionModel().getSelection()[0];if(b.fireEvent("beforeremoverow",e,a)!==false){if(e){a.remove(e)}a.getBatchListeners=function(){var h=a,i=e,g={scope:h,exception:function(k,m){var l;f.unmask();if(m.action==="destroy"){l=m.records[0];l.reject();Ext.Array.remove(a.removed,l);a.insert(i.index,l)}}};if(h.batchUpdateMode==="operation"){g.operationcomplete=h.onBatchOperationComplete}else{g.complete=h.onBatchComplete}return g};if(!e.phantom&&b.syncOnRemoveRow){f.mask("Deleting...");a.sync({success:function(){f.unmask()}})}}},initComponent:function(){var a=this;Ext.applyIf(a,{plugins:[Ext.create("Ext.grid.plugin.RowEditing",{clicksToEdit:1,autoCancel:false,errorSummary:false,pluginId:"roweditplugin"})],tbar:[{text:"Add",iconCls:"pts-menu-addbasic",handler:this.addRow},{itemId:"removeRow",text:"Remove",iconCls:"pts-menu-deletebasic",handler:this.removeRow,disabled:true}]});a.callParent(arguments);a.addEvents("beforeremoverow");a.getSelectionModel().on("selectionchange",function(b,c){a.down("#removeRow").setDisabled(c.length===0)})}});Ext.define("PTS.view.controls.CommentEditGrid",{extend:"PTS.view.controls.RowEditGrid",alias:"widget.commenteditgrid",requires:["Ext.grid.plugin.RowEditing","PTS.store.GroupUsers","PTS.view.controls.TextareaTriggerField"],columns:[{xtype:"gridcolumn",dataIndex:"comment",text:"Comment",flex:1,editor:{xtype:"areatrigger",text:"Comment"}},{xtype:"gridcolumn",dataIndex:"contactid",width:150,renderer:function(c){var b=Ext.getStore("GroupUsers"),a=b.find("contactid",c,0,false,true,true),e=b.getAt(a);if(e){return e.get("fullname")}return c},text:"User"},{xtype:"datecolumn",dataIndex:"datemodified",text:"Date"}],initComponent:function(){var a=this;a.callParent(arguments);a.getStore().on("add",function(c,b){Ext.each(b,function(){var e=this;if(null===e.get("contactid")){e.set("contactid",PTS.user.get("contactid"))}})});a.on("edit",function(b,c){var f=b.record;if(f.dirty){f.beginEdit();f.set("datemodified",new Date());f.endEdit()}})}});Ext.define("PTS.view.project.window.AgreementsTree",{extend:"Ext.tree.Panel",alias:"widget.agreementstree",requires:["Ext.tree.plugin.TreeViewDragDrop"],border:"0 0 0 1",title:"Agreements",store:"AgreementsTree",rootVisible:false,useArrows:true,viewConfig:{copy:true,plugins:{ptype:"treeviewdragdrop",pluginId:"agreementsddplugin"},getAgreementId:function(a){var b,c=a.getDepth();for(b=0;b<c;b++){if(a.parentNode.get("typeid")===20){return a.getId()}else{a=a.parentNode}}},getDataId:function(a,c){var b,e=a.getDepth();for(b=0;b<e;b++){if(a.parentNode.get("typeid")===c){return a.get("dataid")}else{a=a.parentNode}}}},initComponent:function(){var a=this;Ext.applyIf(a,{columns:[{xtype:"treecolumn",dataIndex:"text",flex:3,text:"Title"},{xtype:"gridcolumn",width:75,align:"center",dataIndex:"type",text:"Type"}],tools:[{xtype:"tool",tooltip:"Refresh",type:"refresh",hidden:false},{xtype:"tool",tooltip:"Expand All",type:"expand"},{xtype:"tool",tooltip:"Collapse All",type:"collapse",hidden:true}]});a.callParent(arguments)}});Ext.define("PTS.view.project.window.ProjectAgreements",{extend:"Ext.panel.Panel",alias:"widget.projectagreements",requires:["PTS.view.project.window.AgreementsTree"],layout:{type:"border"},title:"Agreements",initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"agreementitemdetail",flex:2,region:"center",minWidth:450},{xtype:"agreementstree",split:true,collapsible:false,flex:1,region:"west"}]});a.callParent(arguments)}});Ext.define("PTS.view.controls.KeywordTree",{extend:"Ext.tree.Panel",alias:"widget.keywordtree",requires:["Ext.tree.plugin.TreeViewDragDrop","Ext.grid.column.Template"],rootVisible:false,store:"KeywordNodes",multiSelect:true,singleExpand:true,cls:"pts-keyword-tree",hideHeaders:true,initComponent:function(){var a=this;Ext.applyIf(a,{viewConfig:{copy:true,plugins:{ptype:"treeviewdragdrop",dragGroup:"keywords"}},columns:[{xtype:"treecolumn",text:"Keyword",dataIndex:"text",flex:1},{xtype:"templatecolumn",width:20,text:"",hideable:false,cls:"x-action-col-cell",tpl:'<tpl if="definition"><div data-qtip="{[Ext.htmlEncode(values.definition)]}" class="pts-col-info"></div></tpl>'}]});a.callParent(arguments)}});Ext.define("PTS.view.project.window.ProjectKeywords",{extend:"Ext.panel.Panel",alias:"widget.projectkeywords",requires:["PTS.view.controls.KeywordTree","Ext.ux.grid.FilterBar","Ext.grid.plugin.DragDrop","Ext.grid.column.Template"],layout:{type:"border"},title:"Keywords",initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"gridpanel",itemId:"projectKeywords",region:"center",multiSelect:true,viewConfig:{stripeRows:false,plugins:{ptype:"gridviewdragdrop",dropGroup:"keywords",dragGroup:"deletekeywords"},getRowClass:function(b,f,e,c){return b.phantom?"pts-grid-row-phantom":""}},store:"ProjectKeywords",columns:[{text:"Keyword",flex:1,sortable:true,dataIndex:"text"}],title:"Project Keywords",dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",iconCls:"pts-menu-deletebasic",text:"Remove",action:"removekeywords"},{xtype:"button",iconCls:"pts-menu-savebasic",text:"Save",action:"savekeywords"},{xtype:"button",iconCls:"pts-menu-refresh",text:"Refresh",action:"refreshkeywords"}]}]},{xtype:"tabpanel",flex:1,title:"Keywords",preventHeader:true,region:"west",split:true,activeTab:0,tabPosition:"bottom",items:[{xtype:"keywordtree",itemId:"keywordTree",title:"Keyword Tree"},{xtype:"gridpanel",itemId:"keywordSearch",title:"Search",store:"Keywords",columns:[{xtype:"gridcolumn",dataIndex:"text",flex:1,text:"Keyword",renderer:function(i,f,e,h,k,g,c){var b=e.get("fullname");if(b){return'<span data-qtip="'+b+'">'+i+"</span>"}return i}},{xtype:"gridcolumn",hidden:true,dataIndex:"fullname",flex:2,text:"Full Path"},{xtype:"templatecolumn",width:28,text:"",hideable:false,cls:"x-action-col-cell",tpl:'<tpl if="definition"><div data-qtip="{[Ext.htmlEncode(values.definition)]}" class="pts-col-info"></div></tpl>'},{xtype:"templatecolumn",width:28,text:"",hideable:false,cls:"x-action-col-cell",tpl:'<tpl if="text"><div data-qtip="Add: {[Ext.htmlEncode(values.text)]}" class="pts-col-add"></div></tpl>',action:"addkeyword"}],viewConfig:{copy:true,plugins:{ptype:"gridviewdragdrop",dragGroup:"keywords"}},dockedItems:[{xtype:"filterbar",searchStore:"Keywords",dock:"top"},{xtype:"pagingtoolbar",displayInfo:true,store:"Keywords",dock:"top"}]}]}]});a.callParent(arguments)}});Ext.define("PTS.view.controls.MapToolbar",{extend:"Ext.toolbar.Toolbar",alias:"widget.maptoolbar",requires:["GeoExt.Action","PTS.view.button.Edit","PTS.view.button.Save","PTS.view.button.Delete","PTS.view.button.Reset","Ext.button.Button","Ext.button.Split","Ext.menu.CheckItem","Ext.ux.StoreMenu"],map:null,vectorLayer:null,saveStrategy:null,refreshStrategy:null,commonStore:false,maskCmp:false,showMask:function(e){var c=this,b=c.maskCmp===true?c.ownerCt:c.maskCmp,a=e?e:"Loading Project Features...";if(b){b.getEl().mask(a)}},unmask:function(){var b=this,a=b.maskCmp===true?b.ownerCt:b.maskCmp;if(a){a.getEl().unmask()}},initComponent:function(){var h=this,i=h.map,b=h.vectorLayer,c=[],e,f,a,g;g=new OpenLayers.Control.SelectFeature(b,{id:"PTS-Select-Hover",hover:true,highlightOnly:true,renderIntent:"temporary",unhighlight:function(m){var l=m.layer,k=this.events.triggerEvent("beforefeatureunhighlighted",{feature:m});if(k!==false){if(m._prevHighlighter==undefined){delete m._lastHighlighter}else{if(m._prevHighlighter==this.id){delete m._prevHighlighter}else{m._lastHighlighter=m._prevHighlighter;delete m._prevHighlighter}}l.drawFeature(m,m.style||m.layer.style||"default");this.events.triggerEvent("featureunhighlighted",{feature:m})}},outFeature:function(l){if(this.hover){if(this.highlightOnly){var k=this.events.triggerEvent("beforefeatureunhighlighted",{feature:l});if(k!==false){if(l._lastHighlighter==this.id){if(l._prevHighlighter&&l._prevHighlighter!=this.id){delete l._lastHighlighter;var m=this.map.getControl(l._prevHighlighter);if(m){m.highlight(l)}}else{this.unhighlight(l)}}}}else{this.unselect(l)}}}});e=new OpenLayers.Control.NavigationHistory();i.addControl(e);c.push(Ext.create("Ext.button.Button",Ext.create("GeoExt.Action",{iconCls:"pts-arrow-left",control:e.previous,disabled:true,tooltip:"previous in history"})));c.push(Ext.create("Ext.button.Button",Ext.create("GeoExt.Action",{iconCls:"pts-arrow-right",control:e.next,disabled:true,tooltip:"next in history"})));c.push("-");c.push(Ext.create("Ext.button.Button",{text:"Pan",iconCls:"pts-menu-pan",toggleGroup:"draw",allowDepress:false,pressed:true,tooltip:"Pan the map"}));c.push(Ext.create("Ext.button.Button",Ext.create("GeoExt.Action",{text:"Point",iconCls:"pts-menu-point",control:new OpenLayers.Control.DrawFeature(b,OpenLayers.Handler.Point),map:i,toggleGroup:"draw",allowDepress:false,tooltip:"Draw a point"})));c.push(Ext.create("Ext.button.Button",Ext.create("GeoExt.Action",{text:"Line",iconCls:"pts-menu-line",control:new OpenLayers.Control.DrawFeature(b,OpenLayers.Handler.Path),map:i,toggleGroup:"draw",allowDepress:false,tooltip:"Draw a line"})));c.push(Ext.create("Ext.button.Button",Ext.create("GeoExt.Action",{text:"Polygon",iconCls:"pts-menu-polygon",control:new OpenLayers.Control.DrawFeature(b,OpenLayers.Handler.Polygon),map:i,toggleGroup:"draw",allowDepress:false,tooltip:"Draw a polygon"})));b.styleMap.styles.vertex=new OpenLayers.Style({fillColor:"#EE00E2",fillOpacity:0.4,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"#EE00E2",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3});f=new OpenLayers.Control.ModifyFeature(b,{id:"PTS-Modify-Feature",vertexRenderIntent:"vertex"});c.push(Ext.create("Ext.button.Split",Ext.create("GeoExt.Action",{text:"Modify",itemId:"modify",iconCls:"pts-menu-modify",control:f,map:i,toggleGroup:"draw",allowDepress:false,tooltip:"Modify a feature",menu:{items:[{xtype:"menucheckitem",text:"Modify",iconCls:"pts-menu-modify",group:"modoptions",checked:true,modoption:OpenLayers.Control.ModifyFeature.RESHAPE},{xtype:"menucheckitem",text:"Move",iconCls:"pts-menu-move",group:"modoptions",modoption:OpenLayers.Control.ModifyFeature.DRAG},{xtype:"menucheckitem",text:"Resize",iconCls:"pts-menu-resize",group:"modoptions",modoption:OpenLayers.Control.ModifyFeature.RESIZE},{xtype:"menucheckitem",text:"Rotate",iconCls:"pts-menu-rotate",group:"modoptions",modoption:OpenLayers.Control.ModifyFeature.ROTATE}]},listeners:{render:function(k){k.menu.items.each(function(l){l.on("checkchange",function(m,p){var n=f.feature;if(p){f.mode=m.modoption;k.setText(m.text);k.setIconCls(m.iconCls);if(n){f.unselectFeature(n);f.selectFeature(n)}k.toggle(true)}})})}}})));c.push("-");if(h.maskCmp){h.saveStrategy.events.on({start:function(){this.showMask("Saving project features...")},success:function(){this.unmask()},fail:function(){this.unmask()},scope:this})}c.push({xtype:"savebutton",handler:function(){var k=[],m,l=Ext.Array.some(b.features,function(n){return n.state});if(l){Ext.each(b.features,function(n){if(!!n.state){if(n.fid==undefined&&n.state===OpenLayers.State.DELETE){k.push(n)}else{m=true}}});b.destroyFeatures(k);if(m){h.saveStrategy.save()}else{this.unmask()}}},scope:this,disabled:false,tooltip:"Save project features"});if(h.refreshStrategy){c.push({xtype:"resetbutton",handler:function(){h.showMask();h.refreshStrategy.refresh()},disabled:false,tooltip:"Reload the project features"})}c.push("-");b.styleMap.styles["delete"]=new OpenLayers.Style({fillColor:"#FF272C",strokeColor:"#FF272C"});a=OpenLayers.Class(OpenLayers.Control,{initialize:function(l,k){OpenLayers.Control.prototype.initialize.apply(this,[k]);this.layer=l;this.handler=new OpenLayers.Handler.Feature(this,l,{click:this.clickFeature})},clickFeature:function(k){this.layer.events.triggerEvent("beforedeletetoggle",{feature:k});if(k.state===OpenLayers.State.DELETE){if(k.fid==undefined){k.state=OpenLayers.State.INSERT}else{k.state=OpenLayers.State.UPDATE}this.highlight(k);this.layer.events.triggerEvent("afterfeaturemodified",{feature:k})}else{k.state=OpenLayers.State.DELETE;this.layer.events.triggerEvent("afterfeaturemodified",{feature:k});this.highlight(k)}this.layer.events.triggerEvent("deletetoggle",{feature:k})},highlight:function(l){var k=l.layer;l._prevHighlighter=l._lastHighlighter;l._lastHighlighter=this.id;if(l.state===OpenLayers.State.DELETE){k.drawFeature(l,"delete")}else{k.drawFeature(l,"default")}},setMap:function(k){this.handler.setMap(k);OpenLayers.Control.prototype.setMap.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.DeleteFeature"});c.push(Ext.create("PTS.view.button.Delete",Ext.create("GeoExt.Action",{control:new a(b),map:i,text:"Delete",disabled:false,toggleGroup:"draw",allowDepress:false,tooltip:"Click to mark features for deletion. Click again to unmark."})));c.push("-");if(h.commonStore){c.push({text:"Add Feature",iconCls:"pts-menu-addbasic",itemId:"addFeature",menu:Ext.create("Ext.ux.StoreMenu",{store:"CommonVectors",loadingCls:"pts-loading-small"})})}c.push("->");c.push(Ext.create("Ext.button.Button",{text:"Help"}));Ext.apply(h,{dock:"top",items:c});h.callParent(arguments)}});Ext.define("PTS.view.project.ProjectMap",{extend:"GeoExt.panel.Map",alias:"widget.projectmap",requires:["GeoExt.panel.Map","GeoExt.slider.Zoom","GeoExt.slider.Tip","GeoExt.slider.LayerOpacity","Ext.toolbar.Toolbar","PTS.view.controls.MapToolbar","PTS.view.button.Edit","PTS.view.button.Save"],title:"Map",displayTools:true,commonStore:false,zoomOnLoad:true,maxZoomOnLoad:6,mapToolbar:undefined,initComponent:function(){var w=this,m=new OpenLayers.Layer.WMS("OpenLayers WMS","http://vmap0.tiles.osgeo.org/wms/vmap0?",{layers:"basic"}),v=new OpenLayers.Layer.TMS("SDMI BDL(Alaska Albers)","http://swmha.gina.alaska.edu/tilesrv/bdl/tile/",{type:"jpeg",wrapDateLine:true,isBaseLayer:true,getURL:function(i){var D=this.map.getResolution();var G=Math.round((i.left-this.maxExtent.left)/(D*this.tileSize.w));var F=Math.round((this.maxExtent.top-i.top)/(D*this.tileSize.h));var E=this.map.getZoom();var C=(1<<E);var B=(G%C);if(B<0){B+=C}var H=B+"/"+F+"/"+E;var A=this.url;if(A instanceof Array){A=this.selectUrl(H,A)}return A+H}}),f=new OpenLayers.Strategy.Save(),u=new OpenLayers.Strategy.Fixed(),l=new OpenLayers.Strategy.Refresh(),c=new OpenLayers.Layer.Vector("Project Features",{visibility:false,strategies:[l,u,f],protocol:new OpenLayers.Protocol.HTTP({url:"../projectfeature",format:new OpenLayers.Format.GeoJSON({ignoreExtraDims:true}),deleteWithPOST:true})}),b=function(i){if(i.code!==OpenLayers.Protocol.Response.SUCCESS){PTS.app.showError("There was an error processing the features.</br>Error: "+Ext.decode(i.priv.responseText).message)}else{if(i.requestType.toLowerCase()!=="delete"){this.projectVectors.events.triggerEvent("ptsfeaturesupdated",i)}}};c.protocol.options.update={callback:b,scope:this};c.protocol.options.create={callback:b,scope:this};c.protocol.options["delete"]={callback:b,scope:this};var s={currentVersion:10.01,mapName:"Layers",copyrightText:"Sources: Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, IGN, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community",spatialReference:{wkid:102100},singleFusedMapCache:true,tileInfo:{rows:256,cols:256,dpi:96,format:"JPEG",compressionQuality:90,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,resolution:156543.033928,scale:591657527.591555},{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:0.597164283559817,scale:2256.994353},{level:19,resolution:0.298582141647617,scale:1128.497176}]},initialExtent:{xmin:-20037507.0671618,ymin:-19971868.8804086,xmax:20037507.0671618,ymax:19971868.8804086,spatialReference:{wkid:102100}},fullExtent:{xmin:-20037507.0671618,ymin:-19971868.8804086,xmax:20037507.0671618,ymax:19971868.8804086,spatialReference:{wkid:102100}},units:"esriMeters"};var n=new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34);var t=new OpenLayers.Bounds(s.fullExtent.xmin,s.fullExtent.ymin,s.fullExtent.xmax,s.fullExtent.ymax);var h=[];for(var r=0;r<s.tileInfo.lods.length;r++){h.push(s.tileInfo.lods[r].resolution)}var k=new OpenLayers.Layer.ArcGISCache("Topo","http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",{isBaseLayer:false,wrapDateLine:false,visibility:true,displayInLayerSwitcher:false,resolutions:h,tileSize:new OpenLayers.Size(s.tileInfo.cols,s.tileInfo.rows),tileOrigin:new OpenLayers.LonLat(s.tileInfo.origin.x,s.tileInfo.origin.y),maxExtent:t,projection:"EPSG:"+s.spatialReference.wkid});var g=new OpenLayers.Layer.ArcGISCache("National Map Vector","http://basemap.nationalmap.gov/ArcGIS/rest/services/TNM_Vector_Small/MapServer",{isBaseLayer:false,wrapDateLine:false,visibility:false,resolutions:h,tileSize:new OpenLayers.Size(s.tileInfo.cols,s.tileInfo.rows),tileOrigin:new OpenLayers.LonLat(s.tileInfo.origin.x,s.tileInfo.origin.y),projection:"EPSG:"+s.spatialReference.wkid});var p=new OpenLayers.Layer.XYZ("GINA BDL","http://tiles.gina.alaska.edu/tilesrv/bdl/tile/${x}/${y}/${z}",{sphericalMercator:true,isBaseLayer:false,wrapDateLine:true,displayInLayerSwitcher:false});var q=Ext.create("GeoExt.slider.LayerOpacity",{id:"topoSlider",layer:k,complementaryLayer:p,changeVisibility:true,aggressive:true,vertical:true,height:120,x:10,y:200,plugins:Ext.create("GeoExt.slider.Tip",{getText:function(i){return Ext.String.format("{0}%",i.value)}})});var a=new OpenLayers.Layer("Topo/Imagery",{sphericalMercator:true,isBaseLayer:false,wrapDateLine:true,displayInLayerSwitcher:true});a.events.on({visibilitychanged:function(i){var y=i.object.visibility,x=this;x.setVisible(y);x.complementaryLayer.setVisibility(y);x.layer.setVisibility(y)},scope:q});var e=new OpenLayers.Layer("Empty",{sphericalMercator:true,isBaseLayer:true,wrapDateLine:true,displayInLayerSwitcher:false});w.map=new OpenLayers.Map("map",{maxExtent:n,units:(s.units=="esriFeet")?"ft":"m",resolutions:h,tileSize:new OpenLayers.Size(s.tileInfo.cols,s.tileInfo.rows),projection:"EPSG:"+s.spatialReference.wkid,layers:[e,a,p,k,g,c]});c.events.on({beforefeatureselected:function(i){if(i.feature.state===OpenLayers.State.DELETE){return false}}});Ext.applyIf(w,{items:[{xtype:"gx_zoomslider",vertical:true,height:100,x:10,y:70,plugins:Ext.create("GeoExt.SliderTip",{getText:function(i){var y=i.slider,x="<div>Zoom Level: {0}</div><div>Resolution: {1}</div><div>Scale: 1 : {2}</div>";return Ext.String.format(x,y.getZoom(),y.getResolution(),y.getScale())}})},q],projectVectors:c});w.callParent(arguments);w.map.addControl(new OpenLayers.Control.LayerSwitcher());if(w.displayTools){w.mapToolbar={xtype:"maptoolbar",map:w.map,vectorLayer:c,saveStrategy:f,refreshStrategy:l,commonStore:w.commonStore,maskCmp:true,dock:"top"};w.addDocked(w.mapToolbar)}},addVector:function(g){var f=this,e=f.projectVectors,h=new OpenLayers.Format.WKT(),c,b;b=h.read(g);if(b){if(b.constructor!=Array){b=[b]}for(var a=0;a<b.length;++a){b[a].state=OpenLayers.State.INSERT;if(!c){c=b[a].geometry.getBounds()}else{c.extend(b[a].geometry.getBounds())}}e.addFeatures(b);f.map.zoomToExtent(c)}}});Ext.define("PTS.view.contact.ContactLists",{extend:"Ext.tab.Panel",alias:"widget.contactlists",requires:["PTS.view.contact.GroupDDList","PTS.view.contact.PersonDDList"],itemId:"contactLists",activeTab:0,plain:true,flex:1,initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"personddlist",itemId:"personsList",title:"Persons"},{xtype:"groupddlist",itemId:"groupsList",title:"Groups"}],dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",iconCls:"pts-menu-addbasic",text:"Add to Project",action:"addcontacts"}]}]});a.callParent(arguments)}});Ext.define("PTS.view.project.window.ProjectContacts",{extend:"Ext.panel.Panel",alias:"widget.projectcontacts",requires:["Ext.ux.CheckColumn","Ext.ux.grid.HeaderToolTip","PTS.view.contact.ContactLists","Ext.selection.CheckboxModel","Ext.grid.plugin.DragDrop"],layout:{align:"stretch",padding:5,type:"hbox"},title:"Contacts",initComponent:function(){var b=this,a;a=Ext.create("Ext.grid.plugin.CellEditing",{itemId:"contactEditor",clicksToEdit:1,listeners:{beforeedit:function(c){if(c.column&&(c.column.isCheckerHd||c.column.is("actioncolumn"))){return false}return true}}});Ext.applyIf(b,{items:[{xtype:"contactlists",flex:1},{xtype:"gridpanel",itemId:"projectContactsList",title:"Project Contacts",store:"ProjectContacts",flex:1,selModel:Ext.create("Ext.selection.CheckboxModel",{injectCheckbox:false,mode:"SIMPLE",checkOnly:true}),plugins:[a,"headertooltip"],viewConfig:{plugins:[{ptype:"gridviewdragdrop",pluginId:"contactsddplugin"}]},dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",iconCls:"pts-menu-deletebasic",text:"Remove",action:"removecontacts"},{xtype:"button",iconCls:"pts-menu-savebasic",text:"Save",action:"savecontacts"},{xtype:"button",iconCls:"pts-menu-refresh",text:"Refresh",action:"refreshcontacts"}]},{xtype:"pagingtoolbar",store:"ProjectContacts",displayInfo:true}],columns:[{xtype:"gridcolumn",sortable:false,dataIndex:"name",flex:1,text:"Name"},{xtype:"gridcolumn",dataIndex:"roletypeid",renderer:function(m,c,i,e,h,n,k){var f=k.getHeaderAtIndex(h).getEditor(),l=f.getStore().find(f.valueField,m,0,false,true,true),g=f.getStore().getAt(l);if(g){return g.get(f.displayField)}return m},editor:{xtype:"combobox",typeAhead:true,forceSelection:true,triggerAction:"all",displayField:"code",valueField:"roletypeid",selectOnTab:true,store:"RoleTypes",lazyRender:true,listClass:"x-combo-list-small",queryMode:"local",listConfig:{getInnerTpl:function(){return'<div data-qtip="{description}">{code}</div>'}},listeners:{blur:function(e){e.getStore().clearFilter()}}},flex:2,text:"Role"},{xtype:"checkcolumn",dataIndex:"partner",text:"Partner?",width:55}]}]});b.callParent(arguments)}});Ext.define("PTS.view.project.window.Window",{extend:"Ext.window.Window",alias:"widget.projectwindow",requires:["PTS.view.project.form.ProjectForm","PTS.view.project.window.ProjectContacts","PTS.view.project.window.ProjectAgreements","PTS.view.controls.CommentEditGrid","PTS.view.project.window.ProjectKeywords","PTS.view.project.ProjectMap","GeoExt.selection.FeatureModel","Ext.grid.plugin.CellEditing"],height:Ext.Element.getViewportHeight()-40,minWidth:750,width:900,layout:{type:"fit"},closable:false,maximizable:true,title:"Edit Project",constrain:true,modal:true,y:10,addTools:function(){var a=this;a.callParent();a.addTool({xtype:"tool",type:"close",action:"closewindow"})},initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"tabpanel",itemId:"projecttabpanel",items:[{xtype:"projectform"},{xtype:"projectcontacts"},{xtype:"projectagreements"},{title:"Comments",xtype:"commenteditgrid",store:"ProjectComments"},{xtype:"projectkeywords"},{xtype:"panel",defaults:{preventHeader:true},layout:{type:"border"},title:"Map",items:[{xtype:"projectmap",commonStore:"CommonVectors",center:"-16760019.526289, 9118642.6397498",zoom:4,region:"center"},{xtype:"gridpanel",itemId:"featureGrid",store:"ProjectVectors",height:250,split:true,autoScroll:true,title:"Feature List",region:"south",columns:[{xtype:"gridcolumn",dataIndex:"name",flex:1,text:"Name",editor:{xtype:"textfield",allowBlank:false}},{xtype:"gridcolumn",dataIndex:"comment",flex:2,text:"Description",editor:{xtype:"textfield",allowBlank:false}}],selModel:{selectControl:{id:"PTS-Select-Row"}},selType:"featuremodel",plugins:[Ext.create("Ext.grid.plugin.CellEditing",{pluginId:"cellEdit",clicksToEdit:1})]}]}]}],dockedItems:[{xtype:"toolbar",dock:"bottom",items:[{xtype:"tbfill"},{xtype:"button",text:"Close",action:"closewindow"}]}]});a.callParent(arguments)}});Ext.define("PTS.model.ProjectVector",{extend:"Ext.data.Model",fields:[{name:"fid",convert:function(b,a){if(a.raw instanceof OpenLayers.Feature.Vector){return a.raw.fid}else{return"This is not a Feature"}}},{name:"projectid",type:"int",useNull:true},{name:"name",type:"mystring",useNull:true},{name:"comment",type:"mystring",useNull:true}],getData:function(c){var e=this,a=e.fields.items,i=a.length,h={},b,g;for(g=0;g<i;g++){b=a[g].name;h[b]=e.get(b)}if(c===true){Ext.apply(h,e.getAssociatedData())}return h}});Ext.define("PTS.store.ProjectVectors",{extend:"GeoExt.data.FeatureStore",model:"PTS.model.ProjectVector",autoLoad:false,sorters:["name"]});Ext.define("PTS.controller.project.Project",{extend:"Ext.app.Controller",requires:["PTS.model.Modification","PTS.model.Deliverable","PTS.model.Funding"],views:["project.window.Window"],refs:[{ref:"projectWindow",selector:"projectwindow"}],stores:["ProjectVectors"],init:function(){var a=this.getController("project.tab.ProjectTab"),b=this.getController("project.window.Window");a.init();b.init();this.application.on({saveproject:this.onSaveProject,scope:this})},openProject:function(a,e,g){var f,c,b,h=a?a.get("projectid"):false;if(h!==false){c=a.getProjectCode();f=Ext.create(this.getProjectWindowWindowView(),{title:"Edit Project: "+c,projectId:h});b=f.down("#projecttabpanel>commenteditgrid").getStore();b.setProxy({type:"rest",url:"../projectcomment",appendId:true,api:{read:"../project/"+h+"/projectcomment"},reader:{type:"json",root:"data"}});b.load()}else{f=Ext.create(this.getProjectWindowWindowView(),{title:"New Project"});f.down("#projecttabpanel").items.each(function(){if("projectform"!==this.getXType()){this.disable()}})}this.application.fireEvent("openproject",h);f.show(g,e)},onSaveProject:function(a){var b=this.getProjectWindow();b.down("#projecttabpanel").items.each(function(){if("projectform"!==this.getXType()){this.enable()}})}});Ext.define("PTS.controller.dashboard.Calendar",{extend:"Ext.app.Controller",requires:["Extensible.calendar.data.EventModel","Extensible.calendar.data.CalendarModel"],views:["dashboard.Calendar"],init:function(){this.control({dashboardcalendar:{eventclick:this.eventClick}});Extensible.calendar.data.EventMappings={CreatedBy:{name:"Manager",mapping:"manager"},DateReceived:{name:"Received",mapping:"receiveddate",type:"mydate"},PersonId:{name:"PersonID",mapping:"personid",type:"int"},Type:{name:"Type",mapping:"type",type:"string"},ProjectCode:{name:"ProjectCode",mapping:"projectcode",type:"string"},ProjectId:{name:"projectid",mapping:"projectid",type:"int"},ModificationId:{name:"modificationid",mapping:"modificationid",type:"int"},Status:{name:"Status",mapping:"status",type:"string",convert:function(a){return a?a:"Not Received"}},Completed:{name:"Completed",mapping:"completed",type:"mybool"},EventId:{name:"ID",mapping:"deliverableid",type:"int"},CalendarId:{name:"CalendarId",mapping:"id",type:"int",convert:this.getCalendar},Title:{name:"EvtTitle",mapping:"title"},StartDate:{name:"StartDt",mapping:"duedate",type:"mydate"},EndDate:{name:"EndDt",mapping:"duedate",type:"mydate"},RRule:{name:"RecurRule",mapping:"recur"},Location:{name:"Location",mapping:"location"},Notes:{name:"Desc",mapping:"description"},Url:{name:"LinkUrl",mapping:"uri"},IsAllDay:{name:"AllDay",mapping:"allday",type:"boolean",defaultValue:true},Reminder:{name:"Reminder",mapping:"reminder"}};Extensible.calendar.data.EventModel.reconfigure();Extensible.calendar.data.EventModel.implement({getProjectCode:function(){return this.get("ProjectCode")}})},getCalendar:function(b,e){var c=e.data.StartDt,a=new Date();a.setHours(0,0,0,0);if(e.data.Status==="Overdue"){return 1}else{if(e.data.Completed){return 5}else{if(e.data.Received){return 4}else{if(c<a){return 1}else{if(c>Ext.Date.add(a,Ext.Date.DAY,30)){return 3}else{return 2}}}}}},eventClick:function(a,b){this.getController("dashboard.Dashboard").openProject(a,b)}});Ext.define("PTS.model.Task",{extend:"Ext.data.Model",fields:[{name:"deliverableid",type:"int"},{name:"contactid",type:"int"},{name:"modificationid",type:"int",useNull:true},{name:"projectid",type:"int",useNull:true},{name:"title",type:"mystring",useNull:true},{name:"duedate",type:"mydate"},{name:"assignee",type:"mystring",useNull:true},{name:"status",type:"mystring",useNull:true},{name:"projectcode",type:"mystring",useNull:true}],idProperty:"deliverableid",proxy:{type:"ajax",url:"../task",reader:{type:"json",root:"data"}}});Ext.define("PTS.store.Tasks",{extend:"Ext.data.Store",model:"PTS.model.Task",autoLoad:true,remoteSort:true,remoteFilter:true,storeId:"Tasks",pageSize:PTS.Defaults.pageSize,sorters:["duedate"],filters:[{property:"completed",value:"false"}]});Ext.define("PTS.controller.dashboard.TaskList",{extend:"Ext.app.Controller",stores:["Tasks"],views:["dashboard.TaskList"],init:function(){this.control({"tasklist button[action=togglecomplete]":{toggle:this.toggleComplete},"tasklist button[action=filtertask]":{change:this.filterTask}})},filterTask:function(b,e){var a=this.getTasksStore(),c;a.remoteFilter=false;a.clearFilter(true);a.remoteFilter=true;if(!this.showComplete){a.filters.add(new Ext.util.Filter({property:"completed",value:"false"}))}switch(e.filter){case"user":a.filters.add(new Ext.util.Filter({property:"contactid",value:PTS.user.get("contactid")}));break;case"today":c=new Date();a.filters.add(new Ext.util.Filter({property:"duedate",value:Ext.Date.clearTime(c)}));break;default:a.clearFilter()}a.load()},toggleComplete:function(b,e){var a=this.getTasksStore(),c=a.filters;this.showComplete=e;if(e){c.removeAt(c.findIndex("property","completed"))}else{c.add(new Ext.util.Filter({property:"completed",value:"false"}))}a.load()}});Ext.define("PTS.model.DeliverableListing",{extend:"Ext.data.Model",fields:[{name:"deliverableid",persist:false,type:"int",useNull:true},{name:"modificationid",type:"int",useNull:true},{name:"projectid",type:"int",useNull:true},{name:"duedate",type:"mydate"},{name:"receiveddate",type:"mydate"},{name:"title",type:"mystring",useNull:true},{name:"projectcode",type:"mystring",useNull:true},{name:"project",type:"mystring",useNull:true},{name:"contact",type:"mystring",useNull:true},{name:"email",type:"mystring",useNull:true},{name:"dayspastdue",type:"int",useNull:true},{name:"completed",type:"mybool",useNull:true},{name:"status",type:"mystring",useNull:true}],idProperty:"deliverableid",proxy:{type:"rest",url:"../deliverabledue",reader:{type:"json",root:"data"}}});Ext.define("PTS.store.DeliverableListings",{extend:"Ext.data.Store",model:"PTS.model.DeliverableListing",autoLoad:true,remoteSort:true,remoteFilter:true,pageSize:PTS.Defaults.pageSize,sorters:["duedate"],filters:[{property:"dayspastdue",value:[">",0]}]});Ext.define("PTS.controller.dashboard.DeliverableList",{extend:"Ext.app.Controller",stores:["DeliverableListings"],views:["dashboard.DeliverableList"],init:function(){this.control({"deliverablelist button[action=filterdeliverable]":{change:this.filterDeliverable}})},filterDeliverable:function(b,e){var a=b.up("deliverablelist").getStore(),c;a.remoteFilter=false;a.clearFilter(true);a.remoteFilter=true;switch(e.filter){case"over":a.filter([{property:"dayspastdue",value:[">",0]}]);break;case"soon":a.filter([{property:"dayspastdue",value:["<=",0]},{property:"dayspastdue",value:[">",-30]},{property:"receiveddate",value:["null"]}]);break;case"incomplete":a.filter([{property:"completed",value:"false"},{property:"receiveddate",value:["not null"]}]);break;case"complete":a.filter([{property:"completed",value:"true"}]);break;default:a.clearFilter()}}});Ext.define("PTS.util.Format",{singleton:true,netFunds:function(b){var a=Ext.util.Format.usMoney(b);if(b>0){return'<span style="color:green;">'+a+"</span>"}else{if(b<0){return'<span style="color:red;">'+a+"</span>"}}return b},projectCode:function(c,a){var b=(a<10)?"-0":"-";return c+b+a}});Ext.define("PTS.view.project.tab.ProjectDetail",{extend:"Ext.tab.Panel",alias:"widget.projectdetail",requires:["Ext.ux.grid.PrintGrid","Ext.ux.grid.SaveGrid"],title:"Project Details",activeTab:0,initComponent:function(){var a=this;Ext.applyIf(a,{style:{backgroundColor:"#FFF",backgroundImage:"none"},defaults:{layout:"fit"},items:[{xtype:"treepanel",itemId:"projectAgreements",title:"Agreements",store:"ProjectAgreementsTree",uri:"tree",lines:false,useArrows:true,rootVisible:false,viewConfig:{disableSelection:true},columns:[{xtype:"treecolumn",dataIndex:"text",width:300,text:"Title"},{xtype:"gridcolumn",dataIndex:"type",text:"Type",flex:1}]},{xtype:"deliverablelist",title:"Deliverables",store:"ProjectDeliverables",initFilter:"all",uri:"deliverabledue"},{xtype:"gridpanel",itemId:"projectContacts",title:"Contacts",store:"ProjectContacts",uri:"projectcontactfull",dockedItems:[{xtype:"pagingtoolbar",store:"ProjectContacts",dock:"top",displayInfo:true,plugins:[Ext.create("Ext.ux.grid.PrintGrid",{printHidden:true}),Ext.create("Ext.ux.grid.SaveGrid",{})]}],columns:[{xtype:"gridcolumn",sortable:false,dataIndex:"name",flex:1,text:"Name"},{xtype:"gridcolumn",dataIndex:"role",sortable:false,flex:1,text:"Role"},{xtype:"booleancolumn",dataIndex:"partner",sortable:false,text:"Partner?",width:55}]}]});a.callParent(arguments)}});Ext.define("PTS.view.project.tab.ProjectList",{extend:"Ext.grid.Panel",alias:"widget.projectlist",requires:["PTS.util.Format","Ext.ux.grid.PrintGrid","Ext.ux.grid.SaveGrid","Ext.ux.grid.FilterBar"],store:"ProjectListings",title:"Project List",preventHeader:true,initComponent:function(){var a=this;Ext.applyIf(a,{dockedItems:[{xtype:"pagingtoolbar",store:"ProjectListings",displayInfo:true,plugins:[Ext.create("Ext.ux.grid.PrintGrid",{}),Ext.create("Ext.ux.grid.SaveGrid",{})]}],columns:[{xtype:"actioncolumn",width:25,items:[{iconCls:"pts-world-link",tooltip:"Open Website",handler:function(c,f,b){var e=c.getStore().getAt(f).get("projectcode");window.open("http://arcticlcc.org/projects/"+e)}}]},{xtype:"gridcolumn",dataIndex:"projectcode",text:"Project"},{xtype:"gridcolumn",dataIndex:"title",text:"Title",flex:1},{xtype:"gridcolumn",hidden:true,dataIndex:"shorttitle",text:"Short Title",flex:1},{xtype:"gridcolumn",dataIndex:"status",text:"Status",width:80},{xtype:"booleancolumn",text:"Export",trueText:"Yes",falseText:"No",dataIndex:"exportmetadata",hidden:true,width:55},{text:"Funding",columns:[{dataIndex:"allocated",text:"Allocated",width:75,sortable:true,renderer:Ext.util.Format.usMoney},{dataIndex:"invoiced",text:"Invoiced",width:75,sortable:true,renderer:Ext.util.Format.usMoney},{dataIndex:"difference",text:"Difference",width:75,sortable:true,renderer:PTS.util.Format.netFunds},{dataIndex:"leveraged",text:"Leveraged",width:75,sortable:true,hidden:true,renderer:Ext.util.Format.usMoney}]}]});a.callParent(arguments);a.addDocked({xtype:"filterbar",searchStore:a.store,dock:"bottom"})}});Ext.define("PTS.view.project.tab.ProjectTab",{extend:"Ext.panel.Panel",alias:"widget.projecttab",requires:["PTS.view.project.tab.ProjectList","PTS.view.project.tab.ProjectDetail"],layout:{type:"border"},title:"Projects",initComponent:function(){var a=this;Ext.applyIf(a,{dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",iconCls:"pts-menu-add",text:"Add Project",itemId:"newprojectbtn",action:"addproject"},{xtype:"button",iconCls:"pts-menu-edit",text:"Edit Project",itemId:"editprojectbtn",action:"editproject",disabled:true}]}],items:[{xtype:"projectlist",region:"center",itemId:"pts-project-grid"},{xtype:"panel",width:150,layout:{type:"border"},bodyStyle:{border:"none",backgroundColor:"#FFF",backgroundImage:"none"},collapsible:true,animCollapse:!Ext.isIE8,preventHeader:true,title:"Project Details",flex:1,region:"east",split:true,defaults:{preventHeader:true},items:[{xtype:"projectdetail",region:"center"}]}]});a.callParent(arguments)}});Ext.define("PTS.controller.project.tab.ProjectTab",{extend:"Ext.app.Controller",views:["project.tab.ProjectTab"],refs:[{ref:"projectList",selector:"projecttab > projectlist"},{ref:"projectTab",selector:"projecttab"}],init:function(){var b=this.getController("project.tab.ProjectList"),a=this.getController("project.tab.ProjectDetail");b.init();a.init();this.control({"projecttab button[action=addproject]":{click:this.newProject},"projecttab button[action=editproject]":{click:this.editProject}});this.application.on({projectlistselect:this.onProjectListSelect,scope:this})},newProject:function(){var a=this.getController("project.Project");a.openProject()},editProject:function(){var b=this.getController("project.Project"),a=this.getProjectList().getSelectionModel().getSelection()[0];if(a){b.openProject(a)}},onProjectListSelect:function(a){this.getProjectTab().down("button[action=editproject]").setDisabled(!a)}});Ext.define("PTS.model.ProjectComment",{extend:"Ext.data.Model",fields:[{name:"projectcommentid",type:"integer",useNull:true,persist:false},{name:"projectid",type:"int",useNull:true},{name:"contactid",type:"int",useNull:true},{name:"comment",type:"mystring",useNull:true},{name:"publish",type:"myboolean",useNull:true,defaultValue:false},{name:"datemodified",type:"mydate",useNull:true,defaultValue:new Date()}],idProperty:"projectcommentid",validations:[{type:"length",field:"comment",min:1},{type:"length",field:"projectid",min:1},{type:"length",field:"contactid",min:1}],proxy:{type:"rest",url:"../projectcomment",reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.model.CommonVector",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",useNull:true},{name:"text",type:"mystring",useNull:true},{name:"comment",type:"mystring",useNull:true},{name:"wkt",type:"mystring",useNull:true}],proxy:{type:"ajax",url:"../commonfeature",reader:{type:"json",root:"data"}}});Ext.define("PTS.store.ProjectComments",{extend:"Ext.data.Store",model:"PTS.model.ProjectComment",autoLoad:false});Ext.define("PTS.store.CommonVectors",{extend:"Ext.data.Store",model:"PTS.model.CommonVector",autoLoad:false,sorters:["text"]});Ext.define("PTS.controller.project.window.Window",{extend:"Ext.app.Controller",views:["project.window.Window"],stores:["ProjectComments","ProjectVectors","CommonVectors"],refs:[{ref:"projectWindow",selector:"projectwindow"},{ref:"projectForm",selector:"projectwindow projectform"},{ref:"projectMap",selector:"projectwindow projectmap"},{ref:"featureGrid",selector:"projectwindow #featureGrid"}],init:function(){var a=this.getController("project.form.ProjectForm"),b=this.getController("project.window.ProjectContacts"),c=this.getController("project.window.ProjectAgreements"),e=this.getController("project.window.ProjectKeywords");a.init();b.init();c.init();e.init();this.control({"projectwindow [action=closewindow]":{click:this.closeWindow},projectwindow:{beforeclose:this.onBeforeClose},"projectwindow>tabpanel>commenteditgrid":{edit:this.onCommentRowEdit},"projectwindow projectmap":{beforerender:this.onProjectMapBeforeRender,afterlayout:this.onProjectMapAfterLayout},"projectwindow projectmap maptoolbar":{beforerender:this.onMapToolbarBeforeRender},"projectwindow projectmap maptoolbar #addFeature menuitem":{click:this.onAddFeatureMenuClick},"projectwindow projectmap maptoolbar button#modify":{toggle:this.onModifyBtnToggle},"projectwindow #featureGrid gridview":{viewready:this.onFeatureGridReady},"projectwindow #featureGrid":{deselect:this.onFeatureGridDeselect}})},closeWindow:function(){this.getProjectWindow().close()},onBeforeClose:function(){this.getProjectVectorsStore().unbind();this.application.fireEvent("closeproject")},onCommentRowEdit:function(b,c){var a=this.getProjectForm().getRecord(),f=a.getId();b.record.set("projectid",f);b.store.sync()},onMapToolbarBeforeRender:function(a){a.maskCmp=this.getProjectMap().ownerCt},onAddFeatureMenuClick:function(c,a){var e=this.getCommonVectorsStore().getById(c.itemId),b=e.get("wkt");if(b){this.getProjectMap().addVector(b)}},onProjectMapAfterLayout:function(a){a.projectVectors.protocol.options.params={projectid:this.getProjectWindow().projectId};a.projectVectors.events.on({beforedeletetoggle:function(b){if(b.feature.state!==OpenLayers.State.DELETE){this.getSelectionModel().deselect(this.getStore().getByFeature(b.feature),true)}},deletetoggle:function(b){var f=this.getStore().getByFeature(b.feature),e=this.getView().getNode(f),c=Ext.get(e);if(b.feature.state===OpenLayers.State.DELETE){if(c){c.addCls("pts-delete-highlight")}}else{if(c){c.removeCls("pts-delete-highlight")}}},loadstart:function(b){a.ownerCt.getEl().mask("Loading project features...")},loadend:function(b){var g=b.response,c,f,e;if(g.code!==OpenLayers.Protocol.Response.SUCCESS){PTS.app.showError("There was an error loading the features.</br>Error: "+Ext.decode(g.priv.responseText).message)}if(a.zoomOnLoad&&b.object.features.length){c=b.object.getDataExtent();f=a.map;e=f.getZoomForExtent(c);if(e<=a.maxZoomOnLoad){f.zoomToExtent(c)}else{f.setCenter(c.getCenterLonLat(),a.maxZoomOnLoad,false,false)}}a.zoomOnLoad=false;a.ownerCt.getEl().unmask()},refresh:function(b){this.getSelectionModel().deselectAll()},ptsfeaturesupdated:function(f){var b=this.getStore(),e=f.requestType.toLowerCase(),c;if(e==="create"){c=f.reqFeatures;if(Ext.typeOf(c)!=="array"){c=[c]}Ext.each(c,function(g){b.getById(g.id).commit()})}else{c=f.features;Ext.each(c,function(g){b.data.findBy(function(h){return h.raw.fid===g.fid}).commit()})}},scope:this.getFeatureGrid()});a.projectVectors.setVisibility(true)},onProjectMapBeforeRender:function(c){var a,b=this.getFeatureGrid();a=new OpenLayers.Control.SelectFeature(c.projectVectors,{id:"PTS-Select-Hover",hover:true,highlightOnly:true,renderIntent:"temporary",unhighlight:function(g){var f=g.layer,e=this.events.triggerEvent("beforefeatureunhighlighted",{feature:g});if(e!==false){if(g._prevHighlighter==undefined){delete g._lastHighlighter}else{if(g._prevHighlighter==this.id){delete g._prevHighlighter}else{g._lastHighlighter=g._prevHighlighter;delete g._prevHighlighter}}f.drawFeature(g,g.style||g.layer.style||"default");this.events.triggerEvent("featureunhighlighted",{feature:g})}},overFeature:function(g,k){var f=g.layer;if(this.hover){if(this.highlightOnly){this.highlight(g)}else{if(OpenLayers.Util.indexOf(f.selectedFeatures,g)==-1){this.select(g)}}}if(!k){var i=b.getStore().getByFeature(g),h=b.getView().getNode(i),e=Ext.get(h);if(e){e.addCls("pts-vector-highlight")}}},outFeature:function(g){if(this.hover){if(this.highlightOnly){var e=this.events.triggerEvent("beforefeatureunhighlighted",{feature:g});if(e!==false){if(g._lastHighlighter==this.id){if(g._prevHighlighter&&g._prevHighlighter!=this.id){delete g._lastHighlighter;var h=this.map.getControl(g._prevHighlighter);if(h){h.highlight(g)}}else{this.unhighlight(g)}}}}else{this.unselect(g)}var k=b.getStore().getByFeature(g),i=b.getView().getNode(k),f=Ext.get(i);if(f){f.removeCls("pts-vector-highlight")}}}});a.events.on({beforefeatureunhighlighted:function(e){var f=a.map.getControlsBy("id","PTS-Modify-Feature")[0].feature;if(a.highlightOnly&&e.feature===f){a.layer.drawFeature(e.feature,"select");return false}},beforefeaturehighlighted:function(e){if(e.feature.renderIntent==="vertex"){var f=a.map.getControlsBy("id","PTS-Modify-Feature")[0].feature;if(a.highlightOnly&&e.feature===f){a.layer.drawFeature(e.feature,"temporary");return false}return false}},scope:this});c.map.addControl(a);a.activate();this.getProjectVectorsStore().bind(c.projectVectors)},onModifyBtnToggle:function(a,c){var e,b=this.getFeatureGrid().getSelectionModel().selected;if(c&&b.length===1){e=a.up("projectmap").map;e.getControlsBy("id","PTS-Modify-Feature")[0].selectControl.select(b.first().raw)}},onFeatureGridReady:function(a){var c,e,h=a.getSelectionModel().selectControl,f=this.getProjectMap().map.getControlsBy("id","PTS-Select-Hover")[0],b=a.getStore(),g=a.ownerCt.getPlugin("cellEdit");h.onSelect=function(i){c=this.map.getControlsBy("id","PTS-Modify-Feature")[0];if(c.active){c.selectFeature(i)}};e=function(k,i){Ext.each(i,function(l){l.beginEdit();l.set("projectid",a.up("projectwindow").projectId);l.endEdit()})};b.on({add:e,load:e});g.on({beforeedit:function(i){if(i.record.raw.state===OpenLayers.State.DELETE){return false}}});a.ownerCt.on({beforeselect:function(i,k){if(k.raw.state===OpenLayers.State.DELETE){return false}}});a.on({itemmouseenter:function(i,l){if(i.ownerCt.getPlugin("cellEdit").activeRecord!==l){var k=l.raw.layer.map.getControlsBy("id","PTS-Select-Hover")[0];k.overFeature(l.raw,true)}},itemmouseleave:function(i,n){var k,l=n.raw.layer,m=l.map;if(i.ownerCt.getPlugin("cellEdit").activeRecord!==n){k=m.getControlsBy("id","PTS-Select-Hover")[0];k.outFeature(n.raw)}else{l.drawFeature(n.raw,"select")}},destroy:function(i){b.un("add",e,b);b.un("load",e,b)},scope:this})},onFeatureGridDeselect:function(c,e,b){var a=c.view.ownerCt.getPlugin("cellEdit");a.completeEdit();c.selectControl.unselect(e.raw)}});Ext.define("PTS.model.ProjectListing",{extend:"Ext.data.Model",requires:["PTS.util.Format"],fields:[{name:"projectid",type:"int"},{name:"orgid",type:"int"},{name:"parentprojectid",type:"int"},{name:"title",type:"mystring",useNull:true},{name:"shorttitle",type:"mystring",useNull:true},{name:"fiscalyear",type:"int"},{name:"number",type:"int"},{name:"allocated",type:"number"},{name:"invoiced",type:"number"},{name:"difference",type:"number"},{name:"leveraged",type:"number"},{name:"startdate",type:"mydate"},{name:"enddate",type:"mydate"},{name:"description",type:"mystring",useNull:true},{name:"abstract",type:"mystring",useNull:true},{name:"uuid",type:"mystring",useNull:true},{name:"projectcode",type:"mystring",useNull:true},{name:"status",type:"mystring",useNull:true},{name:"exportmetadata",type:"myboolean"}],idProperty:"projectid",proxy:{type:"rest",url:"../projectlist",reader:{type:"json",root:"data"}},getProjectCode:function(){var a=this.get("projectcode");if(!a){a=PTS.orgcode+this.get("fiscalyear")+"-"+this.get("number")}return a}});Ext.define("PTS.store.ProjectListings",{extend:"Ext.data.Store",model:"PTS.model.ProjectListing",remoteSort:true,remoteFilter:true,pageSize:PTS.Defaults.pageSize,sorters:[{property:"fiscalyear",direction:"DESC"},{property:"number",direction:"DESC"}]});Ext.define("PTS.controller.project.tab.ProjectList",{extend:"Ext.app.Controller",stores:["ProjectListings"],models:["ProjectListing"],views:["project.tab.ProjectList"],refs:[{ref:"projectList",selector:"projecttab > projectlist"}],init:function(){this.control({projectlist:{itemdblclick:this.editProject,viewready:this.onProjectListReady,select:this.onProjectListSelect}});this.application.on({saveproject:this.onSaveProject,deleteproject:this.onDeleteProject,scope:this})},editProject:function(c,a){var b=this.getController("project.Project");b.openProject(a)},onProjectListReady:function(b){var a=b.getStore();if(a){a.on("load",function(e,c,f,g){if(e.count()>0){this.getSelectionModel().select(0)}},b)}a.load()},onProjectListSelect:function(b,a){this.application.fireEvent("projectlistselect",a)},onSaveProject:function(a,h){var e,g,b=this.getProjectListingsStore(),c=this.getProjectListingModel(),f=a.getId();e=b.indexOfId(f);if(e===-1){g=Ext.create(c);b.insert(0,g)}else{g=b.getAt(e)}g.fields.each(function(i){g.set(i.name,a.get(i.name))});g.set("projectcode",g.getProjectCode());g.commit()},onDeleteProject:function(a,c){var b=this.getProjectListingsStore();Ext.each(c.records,function(e){var f=e.getId();b.remove(b.getById(f))})}});Ext.define("PTS.model.AgreementsTree",{extend:"Ext.data.Model",fields:[{name:"dataid",type:"string"},{name:"fkey",type:"auto"},{name:"typeid",type:"int"},{name:"text",type:"mystring",useNull:true},{name:"type",type:"mystring",useNull:true},{name:"status",type:"mystring",useNull:true},{name:"invalid",type:"boolean"},{name:"hilite",type:"boolean"},{name:"readonly",type:"boolean",defaultValue:false},{name:"defIcon",type:"mystring",useNull:true},{name:"parentItm",type:"mystring",useNull:true}],idProperty:"id",proxy:{type:"memory"}});Ext.define("PTS.store.ProjectAgreementsTree",{extend:"Ext.data.TreeStore",model:"PTS.model.AgreementsTree",clearOnLoad:true,folderSort:false,autoLoad:false,root:{children:[]}});Ext.define("PTS.store.ProjectDeliverables",{extend:"PTS.store.DeliverableListings",model:"PTS.model.DeliverableListing",autoLoad:false,filters:[]});Ext.define("PTS.model.ProjectContact",{extend:"Ext.data.Model",fields:[{name:"projectcontactid",type:"int",persist:false,useNull:true},{name:"contactid",type:"int",useNull:true},{name:"projectid",type:"int",useNull:true},{name:"roletypeid",type:"int",useNull:true},{name:"priority",type:"int",useNull:true},{name:"name",persist:false},{name:"role",persist:false},{name:"type",persist:false},{name:"contactprojectcode"},{name:"partner",type:"boolean","default":false,useNull:true,convert:function(a){if(this.useNull&&(a===undefined||a===null||a==="")){return null}return(a!=="false")&&!!a}},{name:"projectcode",type:"mystring",persist:false},{name:"shorttitle",type:"mystring",persist:false}],idProperty:"projectcontactid",proxy:{type:"rest",url:"../projectcontact",appendId:true,reader:{type:"json",root:"data"}}});Ext.define("PTS.store.ProjectInvoicers",{extend:"Ext.data.Store",model:"PTS.model.ProjectContact",autoLoad:false,sorters:["name"]});Ext.define("PTS.store.ProjectRecipients",{extend:"Ext.data.Store",model:"PTS.model.ProjectContact",autoLoad:false,sorters:["name"]});Ext.define("PTS.store.NoticeRecipients",{extend:"Ext.data.Store",model:"PTS.model.ProjectContact",autoLoad:false,sorters:["name"]});Ext.define("PTS.store.ProjectFunders",{extend:"Ext.data.Store",model:"PTS.model.ProjectContact",autoLoad:false,sorters:["name"]});Ext.define("PTS.store.ProjectContacts",{extend:"Ext.data.Store",model:"PTS.model.ProjectContact",requires:["PTS.store.ProjectFunders","PTS.store.ProjectInvoicers","PTS.store.ProjectRecipients","PTS.store.NoticeRecipients"],autoLoad:false,listeners:{datachanged:{fn:function(q,n,s,h){var g=[],f=[],i=[],r=[],e=[1,5,6,7,10,11],l=[],b=[5,6,7],p=[],c=Ext.getStore("ProjectFunders"),a=Ext.getStore("ProjectInvoicers"),m=Ext.getStore("ProjectRecipients"),k=Ext.getStore("NoticeRecipients");q.each(function(t){var v=t.get("roletypeid"),u=t.get("contactid");if(4===v||10===v){g.push(t.copy())}if(Ext.Array.indexOf(e,v)>-1&&Ext.Array.indexOf(l,u)===-1){f.push(t.copy());l.push(u)}if(Ext.Array.indexOf(b,v)>-1&&Ext.Array.indexOf(p,u)===-1){r.push(t.copy());p.push(u)}if(11===v){i.push(t.copy())}});c.loadRecords(g,{addRecords:false});a.loadRecords(f,{addRecords:false});m.loadRecords(i,{addRecords:false});k.loadRecords(r,{addRecords:false});return true}}}});Ext.define("PTS.controller.project.tab.ProjectDetail",{extend:"Ext.app.Controller",stores:["ProjectAgreementsTree","ProjectDeliverables","ProjectContacts"],models:["AgreementsTree"],views:["project.tab.ProjectDetail"],refs:[{ref:"projectAgreements",selector:"projectdetail > #projectAgreements"},{ref:"projectDetail",selector:"projecttab projectdetail"}],init:function(){this.control({"projectdetail > #projectAgreements":{beforeitemdblclick:this.onProjectAgreementsDblClick},"projectdetail > deliverablelist":{itemdblclick:this.onDeliverableDblClick},"projectdetail > #projectContacts":{itemdblclick:this.onContactDblClick},"projectdetail > deliverablelist #printBtn":{render:this.onDelPrintBtnRender},"projectdetail > #projectContacts #printBtn":{render:this.onContactPrintBtnRender},"projecttab projectdetail tab":{activate:this.onProjectDetailTabActivate}});this.application.on({projectlistselect:this.onSelectProject,scope:this})},onSelectProject:function(a){var e=a.getId(),b=this.getProjectDetail(),c=b.query("treepanel, grid");Ext.each(c,function(f){f.getStore().setProxy({type:"ajax",url:"../project/"+e+"/"+f.uri,reader:{type:"json",root:f.isXType("grid")?"data":""}})});b.getActiveTab().getStore().load();this.projectRecord=a},onProjectDetailTabActivate:function(a){a.card.getStore().load()},onDelPrintBtnRender:function(a){var b=this.projectRecord.get("projectcode");a.mainTitle=function(){return this.child("cycle#filter").getActiveItem().text+" Deliverables for "+b}},onContactPrintBtnRender:function(a){var b=this.projectRecord.get("projectcode");a.mainTitle=function(){return"Project Contacts for "+b}},onProjectAgreementsDblClick:function(a,e){var c=e.getPath(),b=function(f){this.down("agreementstree").selectPath(c);this.getEl().unmask()};this.openProjectAgreement(b);return false},onDeliverableDblClick:function(a,e){var f=e.getId(),c=e.get("modificationid"),b=function(g){var h=g.getNodeById("d-"+f+"-"+c).getPath();this.down("agreementstree").selectPath(h);this.getEl().unmask()};this.openProjectAgreement(b);return false},onContactDblClick:function(b,f){var g=f.get("contactid"),c=f.get("name").split(" -> ").pop(),e=f.get("type"),a={getId:function(){return g},getContactName:function(){return c}};this.getController("contact.Contact").openContact(e,a);return false},openProjectAgreement:function(a){var b=function(){var f=this,c=f.down("agreementstree").getStore(),e=f.down("projectagreements");f.getEl().mask("Loading...");f.down("tabpanel").setActiveTab(e);if(c.getRootNode().hasChildNodes()){a(c)}else{c.on("load",a,f,{single:true})}};this.getController("project.Project").openProject(this.projectRecord,b)}});Ext.define("PTS.model.Project",{extend:"Ext.data.Model",requires:["PTS.util.Format"],fields:[{name:"projectid",type:"int",persist:false},{name:"orgid",type:"int",useNull:true,convert:function(b,a){return b?b:PTS.user.get("groupid")}},{name:"parentprojectid",type:"int",useNull:true},{name:"title",type:"mystring",useNull:true},{name:"shorttitle",type:"mystring",useNull:true},{name:"fiscalyear",type:"int",useNull:true},{name:"number",type:"int",useNull:true},{name:"startdate",type:"mydate"},{name:"enddate",type:"mydate"},{name:"description",type:"mystring",useNull:true},{name:"abstract",type:"mystring",useNull:true},{name:"uuid",persist:false},{name:"exportmetadata",type:"myboolean"},{name:"projectcode",persist:false,convert:function(b,a){return PTS.orgcode+PTS.util.Format.projectCode(a.data.fiscalyear,a.data.number)}}],idProperty:"projectid",proxy:{type:"rest",url:"../project",reader:{type:"json",root:"data"}},getProjectCode:function(){var b=this.get("fiscalyear"),a=this.get("number");return b+"-"+a}});Ext.define("PTS.store.ProjectIDs",{extend:"Ext.data.Store",model:"PTS.model.Project",fields:[{name:"id",type:"int"},{name:"projectid",type:"string"},{name:"title"}],autoLoad:true});Ext.define("PTS.controller.project.form.ProjectForm",{extend:"Ext.app.Controller",views:["project.form.ProjectForm"],models:["Project"],stores:["ProjectIDs"],refs:[{ref:"projectForm",selector:"projectform"}],init:function(){this.control({"projectform button[action=saveproject]":{click:this.saveProject},"projectform button[action=resetproject]":{click:this.resetProject},"projectform button[action=deleteproject]":{click:this.confirmDelete}});this.application.on({openproject:this.onOpenProject,scope:this})},onOpenProject:function(a){this.loadRecord(a)},onSaveProject:function(a,b){this.application.fireEvent("saveproject",a,b)},onDeleteProject:function(a,b){this.application.fireEvent("deleteproject",a,b)},saveProject:function(){var c=this.getProjectForm().getForm(),b=this.getProjectForm().getEl(),a=c.getRecord();b.mask("Saving...");c.updateRecord(a);a.save({success:function(e,g){var f=this.getProjectForm();f.loadRecord(e);f.up("window").projectId=e.getId();b.unmask();this.onSaveProject(e,g)},failure:function(e,f){b.unmask();Ext.MessageBox.show({title:"Error",msg:"There was an error saving the project.</br>Error:"+PTS.app.getError(),buttons:Ext.MessageBox.OK,icon:Ext.Msg.ERROR})},scope:this})},confirmDelete:function(b){var c=b.getEl(),a=function(e){if("yes"===e){this.deleteProject()}};Ext.MessageBox.show({title:"Confirm Deletion",msg:"Are you sure you want to delete this project?",buttons:Ext.MessageBox.YESNO,icon:Ext.Msg.WARNING,fn:a,scope:this,animateTarget:c})},deleteProject:function(){var c=this.getProjectForm().getForm(),b=this.getProjectForm().getEl(),a=c.getRecord();b.mask("Deleting...");a.destroy({success:function(e,f){b.unmask();this.onDeleteProject(e,f);this.getProjectForm().up("window").close()},failure:function(e,f){b.unmask();Ext.MessageBox.show({title:"Error",msg:"There was an error deleting the project.</br>Error:"+PTS.app.getError(),buttons:Ext.MessageBox.OK,icon:Ext.Msg.ERROR})},scope:this})},resetProject:function(){var a=this.getProjectForm().getForm();a.reset()},loadRecord:function(c){var a=this.getProjectModel(),b=this.getProjectForm();if(c){a.load(c,{success:function(e){b.loadRecord(e)},failure:function(e,f){Ext.MessageBox.show({title:"Error",msg:"There was an error loading the project.</br>Error:"+PTS.app.getError(),buttons:Ext.MessageBox.OK,icon:Ext.Msg.ERROR})}})}else{b.loadRecord(Ext.create(a))}}});Ext.define("PTS.view.controls.ReorderColumn",{extend:"Ext.grid.column.Action",alias:"widget.reordercolumn",header:"Priority",tooltip:"The priority is set by order of appearance.",constructor:function(b){var c=this,a=Ext.apply({},b);Ext.apply(a,{width:50,items:[{getClass:function(e,f,g,h){if(h>0){this.items[0].tooltip="Move up";return"pts-arrow-up"}else{return"pts-arrow-up-disabled"}},handler:function(h,l,g){if(l>0){var e=h.getStore(),k,f,i=e.getAt(l);e.removeAt(l);if(!i.phantom){Ext.Array.remove(e.removed,i)}e.insert(l-1,i);k=h.getNode(l-1);f=Ext.get(k);f.addCls("pts-grid-row-hilite");f.highlight("ffff9c",{attr:"backgroundColor",easing:"easeIn",duration:1500,callback:function(){f.removeCls("pts-grid-row-hilite")},scope:f})}}},{getClass:function(f,h,i,k,g,e){if(k+1!==e.getCount()){this.items[1].tooltip="Move down";return"pts-arrow-down"}else{return"pts-arrow-down-disabled"}},handler:function(h,l,g){if(l-1<h.getStore().getCount()){var e=h.getStore(),k,f,i=e.getAt(l);e.removeAt(l);if(!i.phantom){Ext.Array.remove(e.removed,i)}e.insert(l+1,i);k=h.getNode(l+1);f=Ext.get(k);f.addCls("pts-grid-row-hilite");f.highlight("ffff9c",{attr:"backgroundColor",easing:"easeIn",duration:1500,callback:function(){f.removeCls("pts-grid-row-hilite")},scope:f})}}}]});c.callParent([a])}});Ext.define("PTS.model.ContactGroup",{extend:"Ext.data.Model",fields:[{name:"contactid",mapping:"contactid",type:"int",persist:false},{name:"parentgroupid",type:"int",persist:false},{name:"name",type:"mystring",useNull:true},{name:"fullname",type:"mystring",useNull:true,persist:false},{name:"acronym",type:"mystring",useNull:true},{name:"organization",type:"myboolean",useNull:true},{name:"contacttypeid",type:"int",useNull:true},{name:"dunsnumber",type:"mystring",useNull:true},{name:"comment",type:"mystring",useNull:true},{name:"inactive",type:"myboolean"}],idProperty:"contactid",hasMany:[{model:"PTS.model.Address",name:"addresses"},{model:"PTS.model.Phone",name:"phones"},{model:"PTS.model.EAddress",name:"eaddresses"},{model:"PTS.model.ContactContactGroup",name:"contactcontactgroups"}],proxy:{type:"rest",url:"../contactgroup",reader:{type:"json",root:"data"},writer:{type:"ajson"}},getContactName:function(){return this.get("name")},getContactType:function(){return"group"}});Ext.define("PTS.store.ContactGroups",{extend:"Ext.data.Store",model:"PTS.model.ContactGroup",remoteSort:true,remoteFilter:true,pageSize:PTS.Defaults.pageSize,sorters:{property:"fullname",direction:"ASC"}});Ext.define("PTS.store.DDContactGroups",{extend:"PTS.store.ContactGroups",remoteFilter:true});Ext.define("PTS.model.Person",{extend:"Ext.data.Model",fields:[{name:"contactid",mapping:"contactid",type:"int",persist:false},{name:"firstname",type:"mystring",useNull:true},{name:"lastname",type:"mystring",useNull:true},{name:"middlename",type:"mystring",useNull:true},{name:"suffix",type:"mystring",useNull:true},{name:"positionid",type:"int",useNull:true},{name:"contacttypeid",type:"int",useNull:true},{name:"dunsnumber",type:"mystring"},{name:"comment",type:"mystring"},{name:"inactive",type:"myboolean"},{name:"prigroupid",type:"int",persist:false},{name:"priacronym",type:"mystring",persist:false,useNull:true},{name:"prigroupname",type:"mystring",persist:false,useNull:true},{name:"priareacode",type:"int",persist:false,useNull:true},{name:"priphnumber",type:"int",persist:false,useNull:true},{name:"priextension",type:"int",persist:false,useNull:true},{name:"pricountryiso",type:"mystring",persist:false,useNull:true},{name:"priemail",type:"mystring",persist:false,useNull:true}],idProperty:"contactid",hasMany:[{model:"PTS.model.Address",name:"addresses"},{model:"PTS.model.Phone",name:"phones"},{model:"PTS.model.EAddress",name:"eaddresses"}],proxy:{type:"rest",url:"../person",reader:{type:"json",root:"data"},writer:{type:"ajson"}},getContactName:function(){var b=this.get("firstname"),a=this.get("lastname");return a+", "+b},getContactType:function(){return"person"}});Ext.define("PTS.store.Persons",{extend:"Ext.data.Store",model:"PTS.model.Person",remoteSort:true,remoteFilter:true,pageSize:PTS.Defaults.pageSize,sorters:{property:"lastname",direction:"ASC"},proxy:{type:"rest",url:"../person",api:{read:"../personlist"},reader:{type:"json",root:"data"},writer:{type:"ajson"}}});Ext.define("PTS.model.RoleType",{extend:"Ext.data.Model",fields:[{name:"roletypeid",type:"int",persist:false},{name:"code",type:"mystring",useNull:true},{name:"roletype",type:"mystring",useNull:true},{name:"description",type:"mystring",useNull:true}],idProperty:"roletypeid",proxy:{type:"rest",url:"../roletype",reader:{type:"json",root:"data"}}});Ext.define("PTS.store.RoleTypes",{extend:"Ext.data.Store",model:"PTS.model.RoleType",autoLoad:true,sorters:["code"]});Ext.define("PTS.store.DDPersons",{extend:"PTS.store.Persons",remoteFilter:true});Ext.define("PTS.controller.project.window.ProjectContacts",{extend:"Ext.app.Controller",requires:["PTS.view.controls.ReorderColumn"],views:["project.window.ProjectContacts"],models:["ProjectContact"],stores:["ProjectContacts","ContactGroups","DDContactGroups","Persons","RoleTypes","DDPersons"],refs:[{ref:"projectContacts",selector:"projectcontacts"},{ref:"contactLists",selector:"projectcontacts #contactLists"},{ref:"projectContactsList",selector:"projectcontacts #projectContactsList"}],init:function(){this.control({projectcontacts:{activate:this.activate},"projectcontacts button[action=addcontacts]":{click:this.addContacts},"projectcontacts button[action=removecontacts]":{click:this.removeContacts},"projectcontacts button[action=savecontacts]":{click:this.saveContacts},"projectcontacts button[action=refreshcontacts]":{click:this.refreshContacts},"projectcontacts #contactLists > gridpanel":{activate:this.activateList,beforerender:this.beforeRenderContactLists},"projectcontacts #contactLists > gridpanel > gridview":{beforedrop:this.removeContactsByDrag},"projectcontacts #projectContactsList > gridview":{afterrender:this.afterRenderProjectContactsList},"projectcontacts #projectContactsList":{beforerender:this.beforeRenderProjectContactsList}});this.application.on({openproject:this.onOpenProject,saveproject:this.onSaveProject,scope:this})},setProxy:function(b,a){a.setProxy({type:"rest",url:"../projectcontact",appendId:true,api:{read:"../project/"+b+"/contacts"},reader:{type:"json",root:"data"}})},onOpenProject:function(b){var a=this.getProjectContactsStore();if(b){this.setProxy(b,a);a.load()}},onSaveProject:function(a){var b=this.getProjectContactsStore(),c=a.getId();if(c){this.setProxy(c,b);b.load()}},activate:function(a){},activateList:function(b){var a=b.getStore();if(a.getCount()===0){a.load()}},beforeRenderContactLists:function(a){var b=Ext.create("Ext.grid.column.Column",a.getSelectionModel().getHeaderConfig());a.headerCt.insert(0,b)},saveContacts:function(){var a=this.getProjectContactsStore(),b=this.getProjectContactsList().getEl(),c=!!(a.getRemovedRecords().length+a.getUpdatedRecords().length+a.getNewRecords().length);if(c){b.mask("Saving...")}a.each(function(){var g=this,f=g.get("priority"),e=a.indexOf(g);if(f!==e){g.set("priority",e)}});a.getBatchListeners=function(){var f=a,e={scope:f,exception:function(g,h){b.unmask();Ext.MessageBox.show({title:"Error",msg:"There was an error saving the contacts.</br>Error:"+PTS.app.getError(),buttons:Ext.MessageBox.OK,icon:Ext.Msg.ERROR})}};if(f.batchUpdateMode=="operation"){e.operationcomplete=f.onBatchOperationComplete}else{e.complete=f.onBatchComplete}return e};a.sync({success:function(){b.unmask()},failure:function(){b.unmask();Ext.MessageBox.show({title:"Error",msg:"There was an error saving the contacts.</br>Error:"+PTS.app.getError(),buttons:Ext.MessageBox.OK,icon:Ext.Msg.ERROR})},callback:function(){}})},removeContacts:function(){var a=this.getProjectContactsList(),b=a.getSelectionModel().getSelection();a.getStore().remove(b)},refreshContacts:function(){var a=this.getProjectContactsList();a.getStore().load({callback:function(c,b,e){a.getStore().removed=[]}})},addContacts:function(){var b=this.getContactLists().getActiveTab(),e=b.getSelectionModel().getSelection(),c={copy:true,view:b.getView(),records:e},a=this.getProjectContactsList().getView().getPlugin("contactsddplugin").dropZone;a.handleNodeDrop(c)},removeContactsByDrag:function(c,f,e,b,a){this.getProjectContactsStore().remove(f.records);return false},beforeRenderProjectContactsList:function(a){var b=Ext.create("Ext.grid.column.Column",a.getSelectionModel().getHeaderConfig());a.headerCt.insert(0,b);a.headerCt.insert(a.headerCt.getColumnCount()+1,{xtype:"reordercolumn"})},afterRenderProjectContactsList:function(a){var b=a.getPlugin("contactsddplugin"),c=b.dropZone;c.handleNodeDrop=function(k,m,n){var r=this.view,s=r.getStore(),l=r.up("projectwindow").projectId,q,f,h,p;if(k.copy){f=k.records;k.records=[];for(h=0,p=f.length;h<p;h++){var e=f[h].data;if(e.name===undefined){e.name=e.lastname+", "+e.firstname}var g=Ext.create("PTS.model.ProjectContact",{name:e.name,roletypeid:"",contactid:e.contactid,projectid:l,partner:false});g.phantom=true;k.records.push(g)}k.view.getSelectionModel().deselect(f)}else{k.view.store.remove(k.records,k.view===r)}q=s.indexOf(m);if(n!=="before"){q++}s.insert(q,k.records);r.getSelectionModel().select(k.records)}}});Ext.define("PTS.controller.project.window.ProjectAgreements",{extend:"Ext.app.Controller",views:["project.window.ProjectAgreements"],models:["Modification"],refs:[{ref:"agreementsTab",selector:"projectagreements"},{ref:"agreementsTree",selector:"agreementstree"},{ref:"itemDetail",selector:"agreementitemdetail"}],init:function(){var a=this.getController("project.window.AgreementsTree"),b=this.getController("project.window.ItemDetail");a.init();b.init();this.control({projectagreements:{beforerender:this.onBeforeRender},agreementstree:{select:this.onSelectItem},agreementitemdetail:{beforerender:this.onBeforeRenderItemDetail},"agreementitemdetail #mainItemToolbar":{beforerender:this.onRenderItemToolbar}})},newItemBtn:Ext.create("Ext.Action",{itemId:"newItemBtn",text:"New",iconCls:"pts-menu-addbasic",hidden:true,handler:function(){Ext.Msg.alert("Click",'You clicked on "New".')},listeners:{show:function(){var a=this.ownerCt.child("#rootBtn");if(a){a.hide()}}}}),editItemBtn:Ext.create("Ext.Action",{itemId:"editItemBtn",text:"Edit",iconCls:"pts-menu-editbasic",disabled:true,handler:function(a,g){var c=Ext.ComponentQuery.query("projectagreements #itemDetail")[0],f=c.getLayout().getActiveItem().child("#itemForm");c.setIconCls("pts-panel-unlocked");Ext.each(f.query("field"),function(){if(!this.doNotEnable){this.setReadOnly(false)}else{this.getEl().setOpacity(0.5)}});Ext.each(Ext.ComponentQuery.query("#editItemBtn"),function(){this.disable()})}}),deleteItemBtn:Ext.create("Ext.Action",{itemId:"deleteItemBtn",text:"Delete",iconCls:"pts-menu-deletebasic",disabled:true,handler:function(){var e=Ext.ComponentQuery.query("projectagreements")[0],b=e.down("#itemDetail"),c=b.getLayout().getActiveItem(),f=c.child("#itemForm").getForm(),a=function(i){if("yes"===i){var k=f.getRecord(),h=e.down("agreementstree"),g=h.getSelectionModel().getSelection()[0];e.getEl().mask("Deleting...");k.destroy({success:function(m,n){var l=g.get("parentItm");h.getView().select(g.parentNode);g.remove(true);if(!!l&&!h.getRootNode().findChild("parentItm",l,true)){h.getStore().getNodeById(l).set("readonly",false)}e.getEl().unmask()},failure:function(l,m){Ext.MessageBox.show({title:"Error",msg:"There was a problem deleting the record.</br>"+PTS.app.getError(),buttons:Ext.MessageBox.OK,animateTarget:b.down("#deleteItemBtn").getEl(),fn:function(){e.getEl().unmask()},icon:Ext.Msg.ERROR})}})}};if(c.ptsConfirmDelete===true){Ext.MessageBox.show({title:"Confirm Deletion",msg:"Are you sure you want to delete this <b>"+c.title+"</b>?",buttons:Ext.MessageBox.YESNO,icon:Ext.Msg.WARNING,fn:a,animateTarget:b.down("#deleteItemBtn").getEl()})}else{a("yes")}}}),resetItemBtn:Ext.create("Ext.Action",{itemId:"resetItemBtn",text:"Reset",iconCls:"pts-menu-reset",disabled:true,handler:function(a){var c=a.up("panel"),e=c.getLayout().getActiveItem().child("#itemForm").getForm();e.reset()}}),saveItemBtn:Ext.create("Ext.Action",{itemId:"saveItemBtn",text:"Save",iconCls:"pts-menu-savebasic",disabled:true,handler:function(){var h=Ext.ComponentQuery.query("projectagreements")[0],e=h.down("#itemDetail"),g=e.getLayout().getActiveItem(),i=g.child("#itemForm").getForm(),c=i.getRecord(),b=h.down("agreementstree"),a=b.getSelectionModel().getSelection()[0],f=c.phantom;h.getEl().mask("Saving...");i.updateRecord(c);c.save({success:function(n,p){var q,k,l,m,s=n.get("title"),r=g.itemId,t;i.loadRecord(n);q={text:s,cls:n.get("invalid")?"pts-deliverable-invalid":null,leaf:true,draggable:false,dataid:n.getId()};if(f){if(r==="itemCard-20"||r==="itemCard-60"){l=[{children:[],text:"Deliverables",id:"df-"+n.getId(),iconCls:"task-folder",leaf:false,draggable:false,typeid:30,fkey:{modificationid:n.getId()},defIcon:"pts-page-blue"},{children:[],text:"Funds",id:"ff-"+n.getId(),iconCls:"task-folder",leaf:false,draggable:false,typeid:50,fkey:{modificationid:n.getId()},defIcon:"pts-money-dollar"},{children:[],text:"Tasks",id:"tf-"+n.getId(),iconCls:"task-folder",leaf:false,draggable:false,typeid:40,fkey:{modificationid:n.getId()},defIcon:"pts-page-orange"}];if(!n.get("parentmodificationid")){m={children:[],text:"Modifications",id:"mf-"+n.getId(),iconCls:"task-folder",leaf:false,draggable:false,typeid:60,fkey:{projectid:n.get("projectid"),modtypeid:n.get("modtypeid"),parentmodificationid:n.getId()}};l.push(m)}q.children=l;q.leaf=false}if(!a){if(r==="itemCard-10"){a=h.down("agreementstree").getStore().getNodeById("prt-0")}else{if(r==="itemCard-20"){a=h.down("agreementstree").getStore().getNodeById("art-0")}else{Ext.Error.raise("TreeRecord Not Set")}}}if(!!a.get("dataid")){t=a.parentNode;q.iconCls=t.get("defIcon");k=t.appendChild(q)}else{q.iconCls=a.get("defIcon");k=a.appendChild(q)}b.getView().select(k);b.expandPath(k.getPath())}e.setTitle(s);h.getEl().unmask()},failure:function(n,p){var m,l=h.down("agreementstree"),k=l.getSelectionModel().getSelection()[0];if(k){m="There was an error saving "+k.get("text")}else{m="There was an error saving the record"}Ext.MessageBox.show({title:"Error",msg:m+".</br>Error:"+PTS.app.getError(),buttons:Ext.MessageBox.OK,icon:Ext.Msg.ERROR});h.getEl().unmask()},scope:h})}}),getContextMenu:function(){var a=Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",items:[this.newItemBtn,this.editItemBtn,this.deleteItemBtn]});return a},getNewItemBtnHandler:function(c,g,f){var e=this,a=e.getItemDetail(),b=a.up("projectwindow").projectId;return function(){var k,i=a.down("#itemCard-"+c+" #itemForm"),h=Ext.create(i.model);a.getLayout().setActiveItem("itemCard-"+c);if(f){k=f.get("fkey")?f.get("fkey"):f.parentNode.get("fkey")}else{k={projectid:b}}h.beginEdit();h.set(k);h.endEdit(true);i.loadRecord(h).reset();e.application.fireEvent("newitem",h,i);Ext.each(i.query("field"),function(){this.setReadOnly(false)});a.setTitle(g);a.setIconCls("pts-menu-addbasic");Ext.each(a.query("#editItemBtn, #deleteItemBtn"),function(){this.disable()});a.enable()}},getBtnConfig:function(c){var e="pts-menu-addbasic",b,a;switch(c){case 0:return false;case 10:a="New Proposal";break;case 20:a="New Agreement";break;case 30:a="New Deliverable";break;case 40:a="New Task";break;case 50:a="New Funding";break;case 60:a="New Modification";break;default:return false}b={iconCls:e,text:a};return b},updateNewItemBtn:function(a,f){var c=this.newItemBtn,e=this.getBtnConfig(a).text,b=this.getNewItemBtnHandler(a,e,f);c.setText(e);c.setHandler(b);c.enable();c.show()},onBeforeRender:function(b){var a=this.getBtnConfig(20),c=this.getBtnConfig(10);a.handler=this.getNewItemBtnHandler(20,a.text);c.handler=this.getNewItemBtnHandler(10,c.text);b.addDocked([{xtype:"toolbar",dock:"top",items:[{xtype:"button",itemId:"rootBtn",text:"New",iconCls:"pts-menu-add",menu:{xtype:"menu",items:[a,c]},listeners:{afterrender:function(){this.ownerCt.child("#newItemBtn").hide()},show:function(){this.ownerCt.child("#newItemBtn").hide()}}},this.newItemBtn]}])},onBeforeRenderItemDetail:function(a){var b=this;a.items.each(function(f){var e=f.down("#itemForm");if(e){e.on({dirtychange:{fn:function(g,c){if(c){this.resetItemBtn.enable();if(g.isValid()){this.saveItemBtn.enable()}}else{this.resetItemBtn.disable();this.saveItemBtn.disable()}},scope:b},validitychange:{fn:function(g,c){if(c&&g.isDirty()){this.saveItemBtn.enable()}else{this.saveItemBtn.disable()}},scope:b}})}},b)},onRenderItemToolbar:function(a){a.add([this.editItemBtn,this.deleteItemBtn,this.saveItemBtn,this.resetItemBtn])},onSelectItem:function(l,f,k,b){var r=this,t=f.get("typeid"),c=f.get("dataid"),n=f.get("parentItm"),h=!!f.get("readonly"),q=this.getAgreementsTab(),s=this.getItemDetail(),g=[this.editItemBtn,this.deleteItemBtn],m=this.saveItemBtn,i=this.resetItemBtn,p=this.getAgreementsTree().getView(),a,e;if(!t&&c){t=f.parentNode.get("typeid");e=s.down("#itemCard-"+t);a=e.down("#itemForm");s.getEl().mask("Loading...");Ext.each(a.query("field"),function(){var u=this;if(u.isXType("combobox")){u.getStore().clearFilter()}});Ext.ModelMgr.getModel(a.model).load(c,{success:function(v){a.loadRecord(v);r.application.fireEvent("itemload",v,a);Ext.each(a.query("field"),function(){this.setReadOnly(true)});s.setIconCls("pts-panel-locked");Ext.each(g,function(){this.setDisabled(h)});s.getLayout().setActiveItem(e);if(a.isXType("form")){if(a.getForm().isDirty()){i.enable();if(a.getForm().isValid()){m.enable()}}else{i.disable();m.disable()}}if(n){var u=p.getStore().getById(n);p.addRowCls(u,"pts-deliverable-highlight");p.getSelectionModel().on("selectionchange",function(w,x){this.removeRowCls(u,"pts-deliverable-highlight")},p,{single:true})}s.setTitle(f.get("text"));s.getEl().unmask();s.enable()},failure:function(u,v){Ext.MessageBox.show({title:"Error",msg:"There was an error loading the record.</br>Error:"+PTS.app.getError(),buttons:Ext.MessageBox.OK,icon:Ext.Msg.ERROR});s.getEl().unmask()}})}else{Ext.each(g,function(){this.disable()});s.getLayout().setActiveItem(0);s.setTitle(f.get("text"));s.setIconCls("x-tree-icon-parent")}this.updateNewItemBtn(t,f);q.down("#rootBtn").hide()}});Ext.define("PTS.model.KeywordNode",{extend:"Ext.data.Model",fields:[{name:"keywordid",type:"string"},{name:"text",type:"mystring",useNull:true},{name:"definition",type:"mystring",useNull:true},{name:"fullname",type:"mystring",useNull:true}],idProperty:"keywordid",proxy:{type:"rest",url:"../keyword/tree",reader:{type:"json"},appendId:true}});Ext.define("PTS.model.ProjectKeyword",{extend:"Ext.data.Model",fields:[{name:"projectkeywordid",type:"integer",useNull:true,persist:false},{name:"keywordid",type:"mystring",useNull:true},{name:"projectid",type:"integer",useNull:true},{name:"text",type:"mystring",useNull:true,persist:false},{name:"definition",type:"mystring",useNull:true,persist:false}],idProperty:"projectkeywordid",proxy:{type:"rest",url:"../project/keyword",reader:{type:"json"},appendId:true}});Ext.define("PTS.store.KeywordNodes",{extend:"Ext.data.TreeStore",model:"PTS.model.KeywordNode",clearOnLoad:true,autoLoad:true});Ext.define("PTS.store.ProjectKeywords",{extend:"Ext.data.Store",model:"PTS.model.ProjectKeyword",clearOnLoad:true,autoLoad:false,sorters:{property:"text",direction:"ASC"}});Ext.define("PTS.store.Keywords",{extend:"Ext.data.Store",model:"PTS.model.KeywordNode",autoLoad:true,remoteSort:true,remoteFilter:true,pageSize:PTS.Defaults.pageSize+5,sorters:{property:"text",direction:"ASC"},proxy:{type:"rest",url:"../keywordlist",reader:{type:"json",root:"data"}}});Ext.define("PTS.controller.project.window.ProjectKeywords",{extend:"Ext.app.Controller",views:["project.window.ProjectKeywords"],models:["KeywordNode","ProjectKeyword"],stores:["KeywordNodes","ProjectKeywords","Keywords"],refs:[{ref:"projectWindow",selector:"projectwindow"},{ref:"keywordTree",selector:"projectwindow projectkeywords #keywordTree"},{ref:"keywordSearch",selector:"projectwindow projectkeywords #keywordSearch"},{ref:"projectKeywords",selector:"projectwindow #projectKeywords"}],init:function(){this.control({"projectwindow projectkeywords #keywordTree":{render:this.onRemoveTargetRender},"projectwindow projectkeywords #keywordSearch":{render:this.onRemoveTargetRender},"projectwindow #projectKeywords gridview":{itemadd:this.onItemAdd,beforedrop:this.onBeforeDrop},"projectwindow projectkeywords button[action=removekeywords]":{render:this.onRemoveTargetRender,click:this.removeKeywords},"projectwindow projectkeywords button[action=savekeywords]":{click:this.saveKeywords},"projectwindow projectkeywords button[action=refreshkeywords]":{click:this.refreshKeywords},"projectwindow projectkeywords templatecolumn[action=addkeyword]":{click:this.onActionAddClick}});this.application.on({openproject:this.onOpenProject,scope:this})},setProxy:function(b,a){a.setProxy({type:"rest",url:"../projectkeyword",appendId:true,api:{read:"../project/"+b+"/projectkeywordlist"},reader:{type:"json",root:"data"},limitParam:undefined})},onOpenProject:function(b){var a=this.getProjectKeywordsStore();if(b){this.setProxy(b,a);a.load()}},onBeforeDrop:function(b,f,k,q){var p=this.getProjectKeywordsStore(),e=f.records,l=e.length,n="",h=p.getRemovedRecords(),m=q==="before"?p.indexOf(k):p.indexOf(k)+1,c,g,a=[];for(c=0;c<l;c++){g=e[c];if(p.findExact("keywordid",g.getId())!==-1){n+="<br /> "+g.get("text")}else{if(h.length>0&&Ext.Array.some(h,function(i){if(i.get("keywordid")===g.get("keywordid")){g=i;return true}})){g.reject();g.restored=true;a.push(g);Ext.Array.remove(p.removed,g)}else{a.push(this.getProjectKeywordModel().create({projectid:g.get("projectid"),keywordid:g.get("keywordid"),text:g.get("text")}))}}}if(a.length){p.insert(m,a)}if(n!==""){Ext.create("widget.uxNotification",{title:"Notice",iconCls:"ux-notification-icon-information",html:"The following keywords have already been added:<br />"+n}).show()}return false},onItemAdd:function(b,c,e){var a=this.getProjectWindow().projectId;Ext.each(b,function(f){if(!f.restored){f.set("projectid",a);f.setDirty();f.phantom=true}})},removeKeywordsByDrag:function(c,f,e,b,a){this.getProjectKeywordsStore().remove(f.records);return false},onRemoveTargetRender:function(b){var a=this.getProjectKeywordsStore();Ext.create("Ext.dd.DropTarget",b.getEl(),{ddGroup:"deletekeywords",notifyDrop:function(f,c,e){a.remove(e.records);return true}})},saveKeywords:function(){var a=this.getProjectKeywordsStore(),b=this.getProjectKeywords().getEl(),c=!!(a.getRemovedRecords().length+a.getUpdatedRecords().length+a.getNewRecords().length);if(c){b.mask("Saving...")}a.getBatchListeners=function(){var f=a,e={scope:f,exception:function(g,h){b.unmask();PTS.app.setError("There was an error saving the keywords.</br>Error:"+PTS.app.getError())}};if(f.batchUpdateMode==="operation"){e.operationcomplete=f.onBatchOperationComplete}else{e.complete=f.onBatchComplete}return e};a.sync({success:function(){b.unmask()},failure:function(){b.unmask();Ext.create("widget.uxNotification",{title:"Error",iconCls:"ux-notification-icon-error",html:"There was an error saving the keywords.</br>Error:"+PTS.app.getError()}).show()},callback:function(){}})},removeKeywords:function(){var a=this.getProjectKeywords(),b=a.getSelectionModel().getSelection();a.getStore().remove(b)},refreshKeywords:function(){var a=this.getProjectKeywords();a.getStore().load({callback:function(c,b,e){a.getStore().removed=[]}})},onActionAddClick:function(a,c,h,b){var f=a.getStore().getAt(h),e={records:[f]},g=this.getProjectKeywordsStore().last();this.onBeforeDrop(undefined,e,g)}});Ext.define("PTS.view.controls.ManagerCombo",{extend:"Ext.form.field.ComboBox",alias:"widget.managercombo",name:"personid",fieldLabel:"Manager",store:"GroupUsers",displayField:"fullname",valueField:"contactid",forceSelection:true,allowBlank:false,queryMode:"local",initComponent:function(){var a=this;a.callParent(arguments)}});Ext.define("PTS.model.Status",{extend:"Ext.data.Model",fields:[{name:"statusid",type:"int"},{name:"modtypeid",type:"int"},{name:"code",type:"mystring",useNull:true},{name:"status",type:"mystring",useNull:true},{name:"description",type:"mystring",useNull:true}],proxy:{type:"rest",url:"../statuslist",reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.view.controls.CurrencyField",{extend:"Ext.form.field.Number",alias:"widget.currencyfield",hideTrigger:true,setValue:function(a){this.callParent(arguments);if(!Ext.isEmpty(this.getValue())){this.setRawValue(Ext.util.Format.currency(this.getValue()))}},removeFormat:function(b){if(Ext.isEmpty(b)){return""}else{var a=new RegExp(Ext.util.Format.thousandSeparator,"gi");b=b.toString().replace(Ext.util.Format.currencySign,"").replace(a,"");if(b%1===0){return Ext.util.Format.number(b,"0")}else{return Ext.util.Format.number(b,"0.00")}}},parseValue:function(a){return this.callParent([this.removeFormat(a)])},getErrors:function(a){return this.callParent([this.removeFormat(a)])},getSubmitData:function(){var a={};a[this.name]=this.removeFormat(this.callParent(arguments)[this.name]);return a},preFocus:function(){this.setRawValue(this.removeFormat(this.getRawValue()));this.callParent(arguments)}});Ext.define("PTS.store.AgreementsTree",{extend:"Ext.data.TreeStore",model:"PTS.model.AgreementsTree",clearOnLoad:false,folderSort:true,autoLoad:false,root:{children:[]}});Ext.define("PTS.store.Statuses",{extend:"Ext.data.Store",model:"PTS.model.Status",autoLoad:true});Ext.define("PTS.view.controls.StatusCombo",{extend:"PTS.view.controls.FilterCombo",alias:"widget.statuscombo",requires:["PTS.store.Statuses","Ext.form.field.ComboBox"],displayField:"code",store:"Statuses",valueField:"statusid",forceSelection:true,typeAhead:false,queryMode:"local",lastQuery:"",listConfig:{getInnerTpl:function(){return'<div data-qtip="{description}">{code}</div>'}},initComponent:function(){var a=this;a.callParent(arguments)}});Ext.define("PTS.view.project.form.ProposalForm",{extend:"Ext.panel.Panel",alias:"widget.proposalform",requires:["PTS.view.controls.ManagerCombo","PTS.view.controls.StatusCombo","PTS.view.controls.CommentEditGrid"],itemId:"itemCard-10",ptsConfirmDelete:true,title:"Proposal",layout:"border",defaults:{trackResetOnLoad:true,autoScroll:true,preventHeader:true},initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"form",itemId:"itemForm",model:"PTS.model.Modification",layout:"anchor",region:"center",bodyPadding:10,defaults:{anchor:"100%"},items:[{xtype:"datefield",name:"datecreated",fieldLabel:"Received",allowBlank:false},{xtype:"combobox",name:"personid",fieldLabel:"Manager",store:"GroupUsers",displayField:"fullname",valueField:"contactid",forceSelection:true,allowBlank:false,queryMode:"local"},{xtype:"combobox",name:"modtypeid",fieldLabel:"Type",store:"ProposalTypes",displayField:"type",valueField:"modtypeid",forceSelection:true,allowBlank:false,queryMode:"local",listConfig:{getInnerTpl:function(){return'<div data-qtip="{description}">{type}</div>'}}},{xtype:"textfield",name:"modificationcode",fieldLabel:"Proposal #"},{xtype:"textfield",name:"title",fieldLabel:"Title",emptyText:"Title",maxLength:250,enforceMaxLength:true,allowBlank:false},{xtype:"textfield",name:"shorttitle",fieldLabel:"Short Title",emptyText:"Short Title",maxLength:60,enforceMaxLength:true,allowBlank:false},{xtype:"textareafield",name:"description",fieldLabel:"Description",allowBlank:false,grow:true}]},{xtype:"tabpanel",disabled:true,itemId:"relatedDetails",title:"Details",region:"south",collapsible:true,animCollapse:!Ext.isIE8,split:true,activeTab:0,flex:1,defaults:{bodyStyle:"padding:10px"},items:[{xtype:"roweditgrid",store:"ModStatuses",uri:"modstatus",title:"Status",columns:[{xtype:"gridcolumn",dataIndex:"statusid",renderer:function(l,b,h,c,g,m,i){var e=i.getHeaderAtIndex(g).getEditor(),k=e.getStore().find(e.valueField,l,0,false,true,true),f=e.getStore().getAt(k);if(f){return f.get(e.displayField)}return l},editor:{xtype:"statuscombo"},text:"Status"},{xtype:"datecolumn",dataIndex:"effectivedate",editor:{xtype:"datefield"},text:"Effective Date"},{xtype:"gridcolumn",dataIndex:"comment",editor:{xtype:"textfield"},flex:2,text:"Comment"}]},{title:"Contacts",disabled:true},{title:"Comments",disabled:false,xtype:"commenteditgrid",store:"ModificationComments",uri:"modcomment"}]}]});a.callParent(arguments)}});Ext.define("PTS.view.project.form.AgreementForm",{extend:"Ext.panel.Panel",alias:"widget.agreementform",requires:["PTS.view.controls.ManagerCombo","PTS.view.controls.StatusCombo","PTS.view.controls.RowEditGrid","Ext.form.field.VTypes","PTS.view.controls.CommentEditGrid"],itemId:"itemCard-20",ptsConfirmDelete:true,title:"Agreement",layout:"border",defaults:{trackResetOnLoad:true,autoScroll:true,preventHeader:true},initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"form",itemId:"itemForm",model:"PTS.model.Modification",layout:"anchor",region:"center",bodyPadding:10,items:[{xtype:"fieldset",title:"Dates",items:[{xtype:"fieldcontainer",layout:{type:"hbox"},defaults:{flex:1},items:[{xtype:"datefield",itemId:"dateCreated",margin:"0 10 0 0",name:"datecreated",fieldLabel:"Created",endDateField:"endDate",vtype:"moddaterange",labelWidth:60,allowBlank:false,listeners:{change:function(e,c,b){if(c===null){Ext.form.field.VTypes.moddaterange(c,e)}}}},{xtype:"daterangefield",itemId:"startDate",margin:"0 10 0 0",name:"startdate",fieldLabel:"Start",vfield:"beginDate",vtype:"daterange",labelWidth:45},{xtype:"datefield",itemId:"endDate",name:"enddate",fieldLabel:"End",startDateField:"dateCreated",vtype:"moddaterange",labelWidth:40,listeners:{change:function(e,c,b){if(c===null){Ext.form.field.VTypes.moddaterange(c,e)}}}}]}]},{xtype:"textfield",name:"modificationcode",fieldLabel:"Agreement #",anchor:"100%"},{xtype:"textfield",name:"title",fieldLabel:"Title",allowBlank:false,anchor:"100%"},{xtype:"managercombo",allowBlank:false},{xtype:"combobox",name:"modtypeid",fieldLabel:"Type",store:"AgreementTypes",displayField:"type",valueField:"modtypeid",forceSelection:true,allowBlank:false,queryMode:"local",listConfig:{getInnerTpl:function(){return'<div data-qtip="{description}">{type}</div>'}},anchor:"50%"},{xtype:"textareafield",name:"description",fieldLabel:"Description",grow:true,allowBlank:false,anchor:"100%"}]},{xtype:"tabpanel",disabled:true,itemId:"relatedDetails",title:"Details",region:"south",collapsible:true,animCollapse:!Ext.isIE8,split:true,activeTab:0,flex:1,defaults:{bodyStyle:"padding:10px"},items:[{xtype:"roweditgrid",store:"PurchaseRequests",uri:"purchaserequest",title:"Reference Number",columns:[{header:"Reference #",dataIndex:"purchaserequest",sortable:true,hideable:false,flex:1,editor:{xtype:"textfield",allowBlank:false}},{header:"Comment",dataIndex:"comment",flex:2,editor:{xtype:"textfield"}}]},{xtype:"roweditgrid",store:"ModStatuses",uri:"modstatus",title:"Status",columns:[{xtype:"gridcolumn",dataIndex:"statusid",renderer:function(l,b,h,c,g,m,i){var e=i.getHeaderAtIndex(g).getEditor(),k=e.getStore().find(e.valueField,l,0,false,true,true),f=e.getStore().getAt(k);if(f){return f.get(e.displayField)}return l},editor:{xtype:"statuscombo",allowBlank:false},text:"Status"},{xtype:"datecolumn",dataIndex:"effectivedate",editor:{xtype:"datefield",allowBlank:false},text:"Effective Date"},{xtype:"gridcolumn",dataIndex:"comment",editor:{xtype:"textfield"},flex:2,text:"Comment"}]},{title:"Contacts",disabled:true},{title:"Comments",disabled:false,xtype:"commenteditgrid",store:"ModificationComments",uri:"modcomment"}]}]});a.callParent(arguments)}});Ext.define("PTS.view.project.form.DeliverableForm",{extend:"Ext.panel.Panel",alias:"widget.deliverableform",requires:["PTS.view.controls.ManagerCombo","PTS.view.controls.StatusCombo","PTS.view.controls.RowEditGrid","PTS.view.controls.CommentEditGrid","Ext.form.CheckboxGroup"],itemId:"itemCard-30",title:"Deliverable",layout:"border",defaults:{trackResetOnLoad:true,autoScroll:true,preventHeader:true},initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"form",itemId:"itemForm",model:"PTS.model.Deliverable",layout:"anchor",region:"center",bodyPadding:10,items:[{xtype:"container",itemId:"mainCon",layout:{type:"anchor"},anchor:"100%",defaults:{allowBlank:false},items:[{xtype:"textfield",name:"title",fieldLabel:"Title",anchor:"100%"},{xtype:"textareafield",name:"description",fieldLabel:"Description",grow:true,anchor:"100%"},{xtype:"combobox",name:"deliverabletypeid",fieldLabel:"Type",anchor:"100%",store:"DeliverableTypes",displayField:"type",valueField:"deliverabletypeid",forceSelection:true,queryMode:"local",listConfig:{getInnerTpl:function(){return'<div data-qtip="{description}">{type}</div>'}}}]},{xtype:"managercombo"},{xtype:"datefield",name:"duedate",fieldLabel:"Date Due",allowBlank:false},{xtype:"checkboxgroup",fieldLabel:"Publication",columns:[100,100],anchor:"100%",items:[{xtype:"checkboxfield",name:"publish",boxLabel:"Publishable"},{xtype:"checkboxfield",name:"restricted",boxLabel:"Restricted",listeners:{change:function(e,c,b){e.up("form").down("field[name=accessdescription]").validate()}}}]},{xtype:"textareafield",name:"accessdescription",fieldLabel:"Access Description",grow:true,anchor:"100%",validator:function(c){var b=this.up("form").down("checkboxfield[name=restricted]");if(!b.getValue()||b.getValue()===!!c){return true}return"Access Description is required when publication is restricted"}}]},{xtype:"tabpanel",itemId:"relatedDetails",title:"Details",region:"south",collapsible:true,animCollapse:!Ext.isIE8,split:true,flex:1,defaults:{bodyStyle:"padding:10px",disabled:true},items:[{xtype:"roweditgrid",store:"DeliverableModStatuses",uri:"deliverablemodstatus",title:"Status",disabled:false,columns:[{xtype:"gridcolumn",dataIndex:"deliverablestatusid",renderer:function(l,b,h,c,g,m,i){var e=i.getHeaderAtIndex(g).getEditor(),k=e.getStore().find(e.valueField,l,0,false,true,true),f=e.getStore().getAt(k);if(f){return f.get(e.displayField)}return l},editor:{xtype:"statuscombo",store:"DeliverableStatuses",valueField:"deliverablestatusid",allowBlank:false},text:"Status"},{xtype:"datecolumn",dataIndex:"effectivedate",editor:{xtype:"datefield",allowBlank:false,maxValue:new Date()},text:"Effective Date"},{xtype:"gridcolumn",dataIndex:"contactid",hidden:false,renderer:function(e){var c=Ext.getStore("GroupUsers"),b=c.find("contactid",e,0,false,true,true),f=c.getAt(b);if(f){return f.get("fullname")}return e},text:"User"},{xtype:"gridcolumn",dataIndex:"comment",editor:{xtype:"textfield"},flex:1,text:"Comment"}]},{xtype:"roweditgrid",store:"DeliverableNotices",uri:"deliverablenotice",title:"Notices",disabled:false,columns:[{xtype:"gridcolumn",dataIndex:"noticeid",renderer:function(l,b,h,c,g,m,i){var e=i.getHeaderAtIndex(g).getEditor(),k=e.getStore().find(e.valueField,l,0,false,true,true),f=e.getStore().getAt(k);if(f){return f.get(e.displayField)}return l},editor:{xtype:"statuscombo",store:"Notices",valueField:"noticeid",allowBlank:false},text:"Notice"},{xtype:"gridcolumn",dataIndex:"recipientid",renderer:function(l,b,h,c,g,m,i){var e=i.getHeaderAtIndex(g).getEditor(),k=e.getStore().find(e.valueField,l,0,false,true,true),f=e.getStore().getAt(k);if(f){return f.get(e.displayField)}return l},editor:{xtype:"filtercombo",store:"NoticeRecipients",displayField:"name",valueField:"contactid",allowBlank:false,forceSelection:true,typeAhead:false,queryMode:"local",lastQuery:""},text:"Recipient"},{xtype:"datecolumn",dataIndex:"datesent",editor:{xtype:"datefield",allowBlank:false,maxValue:new Date()},text:"Date Sent"},{xtype:"gridcolumn",dataIndex:"contactid",hidden:false,renderer:function(e){var c=Ext.getStore("GroupUsers"),b=c.find("contactid",e,0,false,true,true),f=c.getAt(b);if(f){return f.get("fullname")}return e},text:"User"},{xtype:"gridcolumn",dataIndex:"comment",editor:{xtype:"textfield"},flex:1,text:"Comment"}]},{title:"Contacts"},{title:"Progress"},{title:"Comments",disabled:false,xtype:"commenteditgrid",store:"DeliverableComments",uri:"deliverablecomment"}]}]});a.callParent(arguments)}});Ext.define("PTS.view.project.form.TaskForm",{extend:"PTS.view.project.form.DeliverableForm",alias:"widget.taskform",requires:["Ext.form.RadioGroup"],itemId:"itemCard-40",title:"Task",initComponent:function(){var a=this;a.callParent(arguments)}});Ext.define("PTS.view.project.form.FundingForm",{extend:"Ext.panel.Panel",alias:"widget.fundingform",requires:["PTS.view.controls.CurrencyField","PTS.view.controls.CommentEditGrid"],itemId:"itemCard-50",title:"Funding",layout:"border",defaults:{trackResetOnLoad:true,autoScroll:false,preventHeader:true},initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"form",itemId:"itemForm",model:"PTS.model.Funding",title:"Funding",layout:"anchor",region:"north",height:200,collapsible:true,animCollapse:!Ext.isIE8,split:true,bodyPadding:10,autoScroll:true,items:[{xtype:"textfield",name:"title",fieldLabel:"Title",anchor:"100%",allowBlank:false},{xtype:"combobox",name:"projectcontactid",fieldLabel:"Funding Source",anchor:"100%",store:"ProjectFunders",displayField:"name",valueField:"projectcontactid",forceSelection:true,allowBlank:false,queryMode:"local"},{xtype:"combobox",name:"fundingtypeid",fieldLabel:"Type",anchor:"100%",store:"FundingTypes",displayField:"type",valueField:"fundingtypeid",forceSelection:true,allowBlank:false,queryMode:"local",listConfig:{getInnerTpl:function(){return'<div data-qtip="{description}">{type}</div>'}}},{xtype:"currencyfield",name:"amount",fieldLabel:"Amount",allowBlank:false,minValue:0.01},{xtype:"combobox",name:"fundingrecipientid",itemId:"recipientCombo",fieldLabel:"Funding Recipient",anchor:"100%",store:"ProjectRecipients",displayField:"name",valueField:"projectcontactid",forceSelection:true,allowBlank:false,queryMode:"local"}]},{xtype:"tabpanel",itemId:"relatedDetails",title:"Details",region:"center",activeTab:0,items:[{xtype:"roweditgrid",store:"CostCodes",uri:"costcode",title:"Cost Codes",columns:[{xtype:"gridcolumn",dataIndex:"costcode",width:250,renderer:function(l,b,h,c,g,m,i){var e=i.getHeaderAtIndex(g).getEditor(),k=e.getStore().find(e.valueField,l,0,false,true,true),f=e.getStore().getAt(k);if(f){return f.get(e.displayField)}return l},editor:{xtype:"combobox",store:"ContactCostCodes",queryMode:"local",displayField:"costcode",valueField:"costcode",typeAhead:false,allowBlank:false,blankText:"A Cost Code is required."},text:"Cost Code"},{xtype:"datecolumn",dataIndex:"startdate",editor:{xtype:"datefield",allowBlank:false,blankText:"The Start Date is required."},text:"Start Date"},{xtype:"datecolumn",dataIndex:"enddate",editor:{xtype:"datefield",allowBlank:false,blankText:"The End Date is required."},text:"End Date"}]},{xtype:"invoicegridform",title:"Invoices"},{title:"Comments",disabled:false,xtype:"commenteditgrid",store:"FundingComments",uri:"fundingcomment"}]}]});a.callParent(arguments)}});Ext.define("PTS.view.project.form.ModificationForm",{extend:"PTS.view.project.form.AgreementForm",alias:"widget.modificationform",itemId:"itemCard-60",title:"Modification",initComponent:function(){var a=this;a.callParent(arguments);this.down("#itemForm").getForm().findField("modtypeid").disable(true)}});Ext.define("PTS.view.project.window.ItemDetail",{extend:"Ext.panel.Panel",alias:"widget.agreementitemdetail",requires:["PTS.view.project.form.ProposalForm","PTS.view.project.form.AgreementForm","PTS.view.project.form.DeliverableForm","PTS.view.project.form.TaskForm","PTS.view.project.form.FundingForm","PTS.view.project.form.ModificationForm"],itemId:"itemDetail",style:{borderWidth:"1px 0 0 1px",padding:0},activeItem:0,layout:{type:"card"},title:"Detail",initComponent:function(){var a=this;Ext.applyIf(a,{defaults:{preventHeader:true,trackResetOnLoad:true,autoScroll:false,border:0},items:[{xtype:"container",html:'<div style="margin: 2em auto;text-align:center;">Use the toolbar to create a new item or select anexisting item from the tree.</div>',itemId:"itemCard-0"},{xtype:"proposalform",itemId:"itemCard-10",title:"Proposal"},{xtype:"agreementform",itemId:"itemCard-20",title:"Agreement"},{xtype:"deliverableform",itemId:"itemCard-30",title:"Deliverable"},{xtype:"taskform",itemId:"itemCard-40",title:"Task"},{xtype:"fundingform",title:"Funding",itemId:"itemCard-50"},{xtype:"modificationform",title:"Modification",itemId:"itemCard-60"}],dockedItems:[{xtype:"toolbar",itemId:"mainItemToolbar",dock:"top"}]});a.callParent(arguments)}});Ext.define("PTS.controller.project.window.AgreementsTree",{extend:"Ext.app.Controller",views:["project.window.AgreementsTree","project.window.ItemDetail"],models:["AgreementsTree"],stores:["AgreementsTree"],refs:[{ref:"itemDetail",selector:"agreementitemdetail"},{ref:"treeView",selector:"agreementstree treeview"}],init:function(){this.control({agreementstree:{beforerender:this.beforeRender},"agreementstree treeview":{afterrender:this.afterRenderView,beforedrop:this.beforeDrop},"agreementstree tool[type=expand]":{click:this.expandAll},"agreementstree tool[type=collapse]":{click:this.collapseAll},"agreementstree tool[type=refresh]":{click:this.refresh}});this.application.on({closeproject:this.onCloseProject,scope:this})},beforeRender:function(a){var c=a.up("window").projectId,b=a.getStore();b.setProxy({type:"ajax",url:"../project/"+c+"/tree",reader:{type:"json"}});b.load()},afterRenderView:function(a){var c=a.getPlugin("agreementsddplugin"),b=c.dragZone;b.isPreventDrag=function(g,f){return(f.get("allowDrag")===false)||f.parentNode.get("typeid")!==30||!!g.getTarget(this.view.expanderSelector)};c.dropZone.onNodeDrop=function(k,f,m,l){var i=this,h=false,g={wait:false,processDrop:function(e){l.records=e?e:l.records;i.invalidateDrop();i.handleNodeDrop(l,i.overRecord,i.currentPosition);h=true;i.fireViewEvent("drop",k,l,i.overRecord,i.currentPosition);return l},cancelDrop:function(){i.invalidateDrop();h=true}},n=false;if(i.valid){n=i.fireViewEvent("beforedrop",k,l,i.overRecord,i.currentPosition,g);if(g.wait){return}if(n!==false){if(!h){g.processDrop()}}}return n};c.dropZone.isValidDropPoint=function(g,n,t,p,l){if(!g||!l.item){return false}var u=this.view,q=u.getRecord(g),k=l.records,f=k.length,s=k.length,h,m,r=function(e){return e.get("parentItm")===m.getId()};if(!(q.get("typeid")==30&&n==="append")){return false}for(h=0;h<s;h++){m=k[h];if(q.contains(m)){return false}if(q.findChildBy(r)){return false}}if(!(q&&n&&f)){return false}for(h=0;h<s;h++){m=k[h];if(m.isNode&&m.contains(q)){return false}}if(n==="append"&&q.get("allowDrop")===false){return false}else{if(n!=="append"&&q.parentNode.get("allowDrop")===false){return false}}if(Ext.Array.contains(k,q)){return false}return true}},beforeDrop:function(c,e,l,m,g){var b,f,a,i,h=this.getTreeView(),k=e.records[0];g.wait=true;b=h.getAgreementId(k);f=h.getAgreementId(l);if(i=(b===f)){a="Are you sure you want to copy this Deliverable? <br/>The original will be cancelled."}else{a="Create a copy of the deliverable?"}Ext.MessageBox.confirm("Confirm",a,function(r){var s,p,t,q;if(r==="yes"){if(i){s=h.up("tabpanel");p=s.down("deliverableform #itemForm").getRecord();s.getEl().mask("Processing...");q=p.copy();Ext.data.Model.id(q);k.set("invalid",true);k.set("readonly",true);h.addRowCls(k,"pts-deliverable-invalid");q.beginEdit();q.phantom=true;q.data.id=null;q.set("deliverableid",null);q.set("modificationid",h.getDataId(l,60));q.set("invalid",false);q.set("parentmodificationid",p.get("modificationid"));q.set("parentdeliverableid",p.get("deliverableid"));q.endEdit();q.save({success:function(v,A){var z,x,u=A.records[0],w=u.get("deliverableid"),y=u.get("modificationid");t=k.copy();t.setId("d-"+w+"-"+y);t.set("dataid",y+"/deliverable/"+w);t.set("invalid",false);t.set("readonly",false);t.set("cls","");t.set("parentItm","d-"+p.get("deliverableid")+"-"+p.get("modificationid"));t.set("iconCls","pts-page-bluecopy");z=g.processDrop([t]);x=h.getNode(z.records[0]);h.getSelectionModel().select(h.getTreeStore().getNodeById(x.id));s.getEl().unmask()},failure:function(u,v){Ext.MessageBox.show({title:"Error",msg:"Could not update the new deliverable.</br>Error:"+PTS.app.getError(),buttons:Ext.MessageBox.OK,icon:Ext.Msg.ERROR});s.getEl().unmask()},scope:this})}else{var n=h.getDataId(l,60)||h.getDataId(l,20);s=h.up("tabpanel");p=s.down("deliverableform #itemForm").getRecord();s.getEl().mask("Processing...");q=p.copy();Ext.data.Model.id(q);q.beginEdit();q.phantom=true;q.data.id=null;q.set("deliverableid",null);q.set("modificationid",n);q.set("invalid",false);q.endEdit();q.save({success:function(v,A){var z,x,u=A.records[0],w=u.get("deliverableid"),y=u.get("modificationid");t=k.copy();t.setId("d-"+w+"-"+y);t.set("dataid",y+"/deliverable/"+w);t.set("invalid",false);t.set("readonly",false);t.set("cls","");z=g.processDrop([t]);x=h.getNode(z.records[0]);h.getSelectionModel().select(h.getTreeStore().getNodeById(x.id));s.getEl().unmask()},failure:function(u,v){Ext.MessageBox.show({title:"Error",msg:"Could not update the new deliverable.</br>Error:"+PTS.app.getError(),buttons:Ext.MessageBox.OK,icon:Ext.Msg.ERROR});s.getEl().unmask()},scope:this})}}else{g.cancelDrop()}},this)},expandAll:function(c,e){var a=c.ownerCt;a.child("tool[type=collapse]").show();c.hide();a.up("treepanel").collapseAll();a.up("treepanel").expandAll()},collapseAll:function(c,e){var a=c.ownerCt;a.child("tool[type=expand]").show();c.hide();a.up("treepanel").collapseAll()},refresh:function(c,g){var a=c.ownerCt,f=this.getItemDetail(),e=a.up("treepanel").getStore();f.getLayout().setActiveItem(0);a.up("projectagreements").down("#rootBtn").show();f.setTitle("Detail");f.setIconCls("x-tree-icon-parent");e.getRootNode().removeAll();e.load()},clear:function(){var a=this.getAgreementsTreeStore();a.getRootNode().removeAll()},onCloseProject:function(){this.clear()}});Ext.define("PTS.model.ModType",{extend:"Ext.data.Model",fields:[{name:"modtypeid",type:"int",persist:false},{name:"code",type:"mystring",useNull:true},{name:"type",type:"mystring",useNull:true},{name:"description",type:"mystring",useNull:true}],idProperty:"modtypeid",proxy:{type:"rest",url:"../modtype",reader:{type:"json",root:"data"}}});Ext.define("PTS.store.ModTypes",{extend:"Ext.data.Store",model:"PTS.model.ModType",autoLoad:true,listeners:{load:{fn:function(b,f,h,i){var e=[],g=[],a=Ext.getStore("ProposalTypes"),c=Ext.getStore("AgreementTypes");b.each(function(l){var k="proposal".toLowerCase(),m=l.get("type");if(!(m.indexOf(k)+1)){e.push(l)}else{g.push(l)}});if(undefined===a){Ext.create("Ext.data.Store",{storeId:"ProposalTypes",model:"PTS.model.ModType",data:g})}else{a.loadRecords(g,{addRecords:false})}if(undefined===c){Ext.create("Ext.data.Store",{storeId:"AgreementTypes",model:"PTS.model.ModType",data:e})}else{c.loadRecords(e,{addRecords:false})}}}}});Ext.define("PTS.controller.project.window.ItemDetail",{extend:"Ext.app.Controller",views:["project.window.ItemDetail","project.form.ProposalForm"],models:["GroupUser","ModType"],stores:["GroupUsers","ModTypes"],init:function(){var a=[this.getController("project.form.AgreementForm"),this.getController("project.form.ModificationForm"),this.getController("project.form.ProposalForm"),this.getController("project.form.FundingForm"),this.getController("project.form.DeliverableForm"),this.getController("project.form.TaskForm")];Ext.each(a,function(b){b.init()})}});Ext.define("PTS.model.PurchaseRequest",{extend:"Ext.data.Model",fields:[{name:"purchaserequestid",type:"integer",useNull:true,persist:false},{name:"purchaserequest",type:"mystring",useNull:true},{name:"modificationid",type:"int",useNull:true},{name:"comment",type:"mystring",useNull:true}],idProperty:"purchaserequestid",validations:[{type:"length",field:"purchaserequest",min:1},{type:"length",field:"modificationid",min:1}],proxy:{type:"rest",url:"../purchaserequest",reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.model.ModStatus",{extend:"Ext.data.Model",fields:[{name:"modstatusid",persist:false,type:"int",useNull:true},{name:"modificationid",type:"int",useNull:true},{name:"statusid",type:"int",useNull:true},{name:"effectivedate",type:"mydate",useNull:true},{name:"comment",type:"mystring",useNull:true}],idProperty:"modstatusid",validations:[{type:"length",field:"modificationid",min:1},{type:"length",field:"statusid",min:1},{type:"presence",field:"effectivedate"}],proxy:{type:"rest",url:"../modstatus",reader:{type:"json",root:"data"}}});Ext.define("PTS.store.PurchaseRequests",{extend:"Ext.data.Store",model:"PTS.model.PurchaseRequest",autoLoad:false,autoSync:false,proxy:{type:"rest",url:"../purchaserequest",reader:{type:"json",root:"data"},writer:{type:"json"}}});Ext.define("PTS.store.ModStatuses",{extend:"Ext.data.Store",model:"PTS.model.ModStatus",autoLoad:false,autoSync:false,sorters:[{property:"effectivedate",direction:"DESC"},{property:"weight",direction:"DESC"}]});Ext.define("PTS.controller.project.form.BaseModificationForm",{extend:"Ext.app.Controller",stores:["PurchaseRequests","Statuses","ModStatuses"],init:function(){},onNewItem:function(a,c){if(this.getAgreementCard().itemId===c.ownerCt.itemId){var b=c.ownerCt.query("#relatedDetails>roweditgrid");c.ownerCt.down("#relatedDetails").disable();Ext.each(b,function(e){e.getStore().removeAll()})}},onItemLoad:function(a,e){var g=this.getStatusesStore(),b=[{id:"type",property:"modtypeid",value:a.get("modtypeid")}];if(this.getAgreementCard().itemId===e.ownerCt.itemId){var c=e.ownerCt.query("#relatedDetails>roweditgrid"),f=a.getId();Ext.each(c,function(i){var h=i.getStore();if(i.tab.active){this.updateDetailStore(h,f,i.uri);h.load({callback:function(l,m,k){if(k){i.up("#relatedDetails").enable()}},scope:i})}else{h.removeAll()}},this);e.ownerCt.down("#relatedDetails gridcolumn[dataIndex=statusid]").getEditor().baseFilter=b;g.clearFilter();g.filter(b)}},onDetailRowEdit:function(b,c){var a=this.getAgreementForm().getRecord(),f=a.getId();b.record.set("modificationid",f);b.store.sync()},onDetailActivate:function(c){var b=this.getAgreementForm().getRecord(),a,e;if(b!==undefined){a=c.getStore();if(!a.isLoading()&&a.count()===0){e=b.getId();this.updateDetailStore(a,e,c.uri);a.load()}}},updateDetailStore:function(a,c,b){a.setProxy({type:"rest",url:"../"+b,api:{read:"../modification/"+c+"/"+b},reader:{type:"json",root:"data"}})}});Ext.define("PTS.model.ModificationComment",{extend:"Ext.data.Model",fields:[{name:"modcommentid",type:"integer",useNull:true,persist:false},{name:"modificationid",type:"int",useNull:true},{name:"contactid",type:"int",useNull:true},{name:"comment",type:"mystring",useNull:true},{name:"publish",type:"myboolean",useNull:true,defaultValue:false},{name:"datemodified",type:"mydate",useNull:true,defaultValue:new Date()}],idProperty:"modcommentid",validations:[{type:"length",field:"comment",min:1},{type:"length",field:"modificationid",min:1},{type:"length",field:"contactid",min:1}],proxy:{type:"rest",url:"../modcomment",reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.store.ModificationComments",{extend:"Ext.data.Store",model:"PTS.model.ModificationComment",autoLoad:false});Ext.define("PTS.controller.project.form.AgreementForm",{extend:"PTS.controller.project.form.BaseModificationForm",views:["project.form.AgreementForm"],models:["PurchaseRequest","Status","ModStatus"],stores:["PurchaseRequests","Statuses","ModStatuses","ModificationComments"],refs:[{ref:"agreementForm",selector:"agreementform#itemCard-20 #itemForm"},{ref:"agreementCard",selector:"agreementform#itemCard-20"}],init:function(){this.control({"agreementform#itemCard-20 roweditgrid":{edit:this.onDetailRowEdit,activate:this.onDetailActivate}});this.application.on({itemload:this.onItemLoad,newitem:this.onNewItem,scope:this})}});Ext.define("PTS.controller.project.form.ModificationForm",{extend:"PTS.controller.project.form.BaseModificationForm",views:["project.form.AgreementForm","project.form.ModificationForm"],models:["PurchaseRequest","Status","ModStatus"],stores:["PurchaseRequests","Statuses","ModStatuses"],refs:[{ref:"agreementForm",selector:"modificationform#itemCard-60 #itemForm"},{ref:"agreementCard",selector:"modificationform#itemCard-60"}],init:function(){this.control({"modificationform#itemCard-60 roweditgrid":{edit:this.onDetailRowEdit,activate:this.onDetailActivate}});this.application.on({itemload:this.onItemLoad,newitem:this.onNewItem,scope:this})}});Ext.define("PTS.controller.project.form.ProposalForm",{extend:"PTS.controller.project.form.BaseModificationForm",views:["project.form.ProposalForm"],models:["Status","ModStatus"],stores:["Statuses","ModStatuses","ModificationComments"],refs:[{ref:"agreementForm",selector:"proposalform#itemCard-10 #itemForm"},{ref:"agreementCard",selector:"proposalform#itemCard-10"}],init:function(){this.control({"proposalform#itemCard-10 roweditgrid":{edit:this.onDetailRowEdit,activate:this.onDetailActivate}});this.application.on({itemload:this.onItemLoad,newitem:this.onNewItem,scope:this})}});Ext.define("PTS.model.FundingType",{extend:"Ext.data.Model",fields:[{name:"fundingtypeid",type:"int",persist:false},{name:"code",type:"mystring",useNull:true},{name:"type",type:"mystring",useNull:true},{name:"description",type:"mystring",useNull:true}],idProperty:"fundingtypeid",proxy:{type:"rest",url:"../fundingtype",reader:{type:"json",root:"data"}}});Ext.define("PTS.model.CostCode",{extend:"Ext.data.Model",fields:[{name:"costcodeid",type:"int",persist:false},{name:"fundingid",type:"int",persist:true},{name:"costcode",type:"mystring",useNull:true},{name:"startdate",type:"mydate",useNull:true},{name:"enddate",type:"mydate",useNull:true}],idProperty:"costcodeid",validations:[{type:"length",field:"costcodeid",min:1},{type:"length",field:"fundingid",min:1},{type:"presence",field:"costcode"},{type:"presence",field:"startdate"},{type:"presence",field:"enddate"}],proxy:{type:"rest",url:"../costcode",reader:{type:"json",root:"data"}}});Ext.define("PTS.model.ContactCostCode",{extend:"Ext.data.Model",fields:[{name:"costcode",type:"mystring",persist:false,useNull:true},{name:"contactid",type:"int",persist:false,useNull:true}],idProperty:"costcode",proxy:{type:"rest",url:"../contactcostcode",reader:{type:"json",root:"data"}}});Ext.define("PTS.model.FundingComment",{extend:"Ext.data.Model",fields:[{name:"fundingcommentid",type:"integer",useNull:true,persist:false},{name:"fundingid",type:"int",useNull:true},{name:"contactid",type:"int",useNull:true},{name:"comment",type:"mystring",useNull:true},{name:"datemodified",type:"mydate",useNull:true,defaultValue:new Date()}],idProperty:"fundingcommentid",validations:[{type:"length",field:"comment",min:1},{type:"length",field:"fundingid",min:1},{type:"length",field:"contactid",min:1}],proxy:{type:"rest",url:"../fundingcomment",reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.store.FundingTypes",{extend:"Ext.data.Store",model:"PTS.model.FundingType",autoLoad:true});Ext.define("PTS.store.CostCodes",{extend:"Ext.data.Store",model:"PTS.model.CostCode",autoLoad:false,autoSync:false});Ext.define("PTS.store.ContactCostCodes",{extend:"Ext.data.Store",model:"PTS.model.ContactCostCode",autoLoad:true});Ext.define("PTS.store.FundingComments",{extend:"Ext.data.Store",model:"PTS.model.FundingComment",autoLoad:false});Ext.define("PTS.controller.project.form.FundingForm",{extend:"Ext.app.Controller",views:["project.form.FundingForm"],stores:["FundingTypes","ProjectFunders","CostCodes","ContactCostCodes","FundingComments","ProjectRecipients"],refs:[{ref:"fundingForm",selector:"fundingform>form"},{ref:"fundingCard",selector:"fundingform"}],init:function(){var a=this.getController("project.form.InvoiceGridForm");a.init();this.control({"fundingform #relatedDetails>roweditgrid":{edit:this.onDetailRowEdit,activate:this.onDetailActivate},"fundingform #relatedDetails invoicegridform":{activate:this.onInvoiceActivate}});this.application.on({openproject:this.onOpenProject,itemload:this.onItemLoad,newitem:this.onNewItem,scope:this})},onOpenProject:function(b){var a=this.getProjectFundersStore();a.setProxy({type:"rest",url:"../projectfunder",appendId:true,api:{read:"../project/"+b+"/funder"},reader:{type:"json",root:"data"}})},onNewItem:function(b,e){if(this.getFundingCard().itemId===e.ownerCt.itemId){var c=e.ownerCt.query("#relatedDetails>roweditgrid, #relatedDetails invoicegridform #invoiceList"),a=this.getProjectRecipientsStore();e.ownerCt.down("#relatedDetails").disable();Ext.each(c,function(f){f.getStore().removeAll()});if(a.count()===1){this.getFundingForm().down("combo#recipientCombo").setValue(a.getAt(0).getId())}}},onItemLoad:function(b,e){if(this.getFundingCard().itemId===e.ownerCt.itemId){var c=e.ownerCt.query("#relatedDetails>roweditgrid,#relatedDetails invoicegridform #invoiceList"),f=b.getId(),a=e.ownerCt.down("invoicegridform");Ext.each(c,function(h){var g=h.getStore(),i=h.tab===undefined?h.ownerCt.tab.active:h.tab.active;if(i){this.updateDetailStore(g,f,h.uri);g.load({callback:function(l,m,k){if(k){h.up("#relatedDetails").enable()}},scope:h})}else{g.removeAll()}},this);if(a.rendered){a.getLayout().setActiveItem(0)}}},onDetailRowEdit:function(b,c){var a=this.getFundingForm().getRecord(),f=a.getId();b.record.set("fundingid",f);b.store.sync()},onDetailActivate:function(c){var b=this.getFundingForm().getRecord(),a,e;if(b!==undefined){a=c.getStore();if(!a.isLoading()&&a.count()===0){e=b.getId();this.updateDetailStore(a,e,c.uri);a.load()}}},onInvoiceActivate:function(a){var b=a.down("#invoiceList");this.onDetailActivate(b)},updateDetailStore:function(a,c,b){a.setProxy({type:"rest",url:"../"+b,api:{read:"../funding/"+c+"/"+b},reader:{type:"json",root:"data"}})}});Ext.define("PTS.model.DeliverableType",{extend:"Ext.data.Model",fields:[{name:"deliverabletypeid",type:"int",persist:false},{name:"code",type:"mystring",useNull:true},{name:"type",type:"mystring",useNull:true},{name:"description",type:"mystring",useNull:true}],idProperty:"deliverabletypeid",proxy:{type:"rest",url:"../deliverabletype",reader:{type:"json",root:"data"}}});Ext.define("PTS.store.DeliverableTypes",{extend:"Ext.data.Store",model:"PTS.model.DeliverableType",autoLoad:true,sorters:[{property:"code",direction:"ASC"}],listeners:{load:{fn:function(a,b,e,g){var f=[],c=Ext.getStore("TaskTypes");a.each(function(i){var h="task".toLowerCase(),k=i.get("type");if(k.indexOf(h)>-1){f.push(i);a.remove(i)}});if(undefined===c){Ext.create("Ext.data.Store",{storeId:"TaskTypes",model:"PTS.model.DeliverableType",data:f})}else{c.loadRecords(f,{addRecords:false})}}}}});Ext.define("PTS.model.DeliverableComment",{extend:"Ext.data.Model",fields:[{name:"deliverablecommentid",type:"integer",useNull:true,persist:false},{name:"deliverableid",type:"int",useNull:true},{name:"contactid",type:"int",useNull:true},{name:"comment",type:"mystring",useNull:true},{name:"datemodified",type:"mydate",useNull:true,defaultValue:new Date()}],idProperty:"deliverablecommentid",validations:[{type:"length",field:"comment",min:1},{type:"length",field:"deliverableid",min:1},{type:"length",field:"contactid",min:1}],proxy:{type:"rest",url:"../deliverablecomment",reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.model.DeliverableStatus",{extend:"Ext.data.Model",fields:[{name:"deliverablestatusid",type:"int",persist:false},{name:"code",type:"mystring",useNull:true},{name:"status",type:"mystring",useNull:true},{name:"description",type:"mystring",useNull:true}],idProperty:"deliverablestatusid",proxy:{type:"rest",url:"../deliverablestatus",reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.model.DeliverableModStatus",{extend:"Ext.data.Model",fields:[{name:"deliverablemodstatusid",persist:false,type:"int",useNull:true},{name:"deliverableid",type:"int",useNull:true},{name:"modificationid",type:"int",useNull:true},{name:"deliverablestatusid",type:"int",useNull:true},{name:"contactid",type:"int",useNull:true},{name:"effectivedate",type:"mydate",useNull:true,defaultValue:new Date()},{name:"comment",type:"mystring",useNull:true}],idProperty:"deliverablemodstatusid",validations:[{type:"length",field:"modificationid",min:1},{type:"length",field:"deliverableid",min:1},{type:"length",field:"deliverablestatusid",min:1},{type:"presence",field:"effectivedate"}],proxy:{type:"rest",url:"../deliverablemodstatus",reader:{type:"json",root:"data"}}});Ext.define("PTS.model.DeliverableNotice",{extend:"Ext.data.Model",fields:[{name:"deliverablenoticeid",persist:false,type:"int",useNull:true},{name:"deliverableid",type:"int",useNull:true},{name:"modificationid",type:"int",useNull:true},{name:"noticeid",type:"int",useNull:true},{name:"recipientid",type:"int",useNull:true},{name:"contactid",type:"int",useNull:true},{name:"datesent",type:"mydate",useNull:true,defaultValue:new Date()},{name:"comment",type:"mystring",useNull:true}],idProperty:"deliverablenoticeid",validations:[{type:"length",field:"modificationid",min:1},{type:"length",field:"deliverableid",min:1},{type:"length",field:"noticeid",min:1},{type:"presence",field:"effectivedate"}],proxy:{type:"rest",url:"../deliverablenotice",reader:{type:"json",root:"data"}}});Ext.define("PTS.model.Notice",{extend:"Ext.data.Model",fields:[{name:"noticeid",type:"int",persist:false},{name:"code",type:"mystring",useNull:true},{name:"title",type:"mystring",useNull:true},{name:"description",type:"mystring",useNull:true}],idProperty:"noticeid",proxy:{type:"rest",url:"../notice",reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.store.DeliverableComments",{extend:"Ext.data.Store",model:"PTS.model.DeliverableComment",autoLoad:false});Ext.define("PTS.store.DeliverableStatuses",{extend:"Ext.data.Store",model:"PTS.model.DeliverableStatus",autoLoad:true,sorters:[{property:"deliverablestatusid",direction:"ASC"}]});Ext.define("PTS.store.DeliverableModStatuses",{extend:"Ext.data.Store",model:"PTS.model.DeliverableModStatus",autoLoad:false,autoSync:false,sorters:[{property:"effectivedate",direction:"DESC"},{property:"deliverablestatusid",direction:"DESC"}],listeners:{add:function(b,a){Ext.each(a,function(){var c=this;if(null===c.get("contactid")){c.set("contactid",PTS.user.get("contactid"))}})}}});Ext.define("PTS.store.DeliverableNotices",{extend:"Ext.data.Store",model:"PTS.model.DeliverableNotice",autoLoad:false,autoSync:false,sorters:[{property:"datesent",direction:"DESC"},{property:"deliverablenoticeid",direction:"DESC"}],listeners:{add:function(b,a){Ext.each(a,function(){var c=this;if(null===c.get("contactid")){c.set("contactid",PTS.user.get("contactid"))}})}}});Ext.define("PTS.store.Notices",{extend:"Ext.data.Store",model:"PTS.model.Notice",autoLoad:true,sorters:[{property:"noticeid",direction:"ASC"}]});Ext.define("PTS.controller.project.form.DeliverableForm",{extend:"Ext.app.Controller",views:["project.form.DeliverableForm"],models:["DeliverableType"],stores:["DeliverableTypes","DeliverableComments","DeliverableStatuses","DeliverableModStatuses","DeliverableNotices","NoticeRecipients","Notices"],refs:[{ref:"deliverableForm",selector:"deliverableform#itemCard-30 #itemForm"},{ref:"deliverableCard",selector:"deliverableform#itemCard-30"}],init:function(){this.control({"deliverableform#itemCard-30 #relatedDetails>roweditgrid":{edit:this.onDetailRowEdit,activate:this.onDetailActivate}});this.application.on({itemload:this.onItemLoad,newitem:this.onNewItem,scope:this})},onNewItem:function(a,c){if(this.getDeliverableCard().itemId===c.ownerCt.itemId){var b=c.ownerCt.query("#relatedDetails>roweditgrid");c.ownerCt.down("#relatedDetails").disable();Ext.each(b,function(e){e.getStore().removeAll()})}},onItemLoad:function(b,f){var a,c=!!b.get("parentdeliverableid");if(Ext.getClassName(b)==="PTS.model.Deliverable"){a=this.getDeliverableForm().down("#mainCon");a.items.each(function(h){h.doNotEnable=c?true:false;h.getEl().setOpacity(1)})}if(this.getDeliverableCard().itemId===f.ownerCt.itemId){var e=f.ownerCt.query("#relatedDetails>roweditgrid"),g=b.get("deliverableid");Ext.each(e,function(i){var h=i.getStore(),k=i.tab===undefined?i.ownerCt.tab.active:i.tab.active;if(k){this.updateDetailStore(h,g,i.uri);h.load({callback:function(m,n,l){if(l){i.up("#relatedDetails").enable()}},scope:i})}else{h.removeAll()}},this)}},onDetailRowEdit:function(c,f){var b=this.getDeliverableForm().getRecord(),g=b.get("deliverableid"),a=b.get("modificationid");c.record.set("deliverableid",g);if(b.fields.containsKey("modificationid")){c.record.set("modificationid",a)}c.store.sync()},onDetailActivate:function(c){var b=this.getDeliverableForm().getRecord(),a,e;if(b!==undefined){a=c.getStore();if(!a.isLoading()&&a.count()===0){e=b.get("deliverableid");this.updateDetailStore(a,e,c.uri);a.load()}}},updateDetailStore:function(a,c,b){a.setProxy({type:"rest",url:"../"+b,api:{read:"../deliverable/"+c+"/"+b},reader:{type:"json",root:"data"}})}});Ext.define("PTS.controller.project.form.TaskForm",{extend:"PTS.controller.project.form.DeliverableForm",views:["project.form.TaskForm"],models:["DeliverableType"],stores:["DeliverableTypes","DeliverableComments"],refs:[{ref:"deliverableForm",selector:"deliverableform#itemCard-40 #itemForm"},{ref:"deliverableCard",selector:"deliverableform#itemCard-40"}],init:function(){this.control({"taskform #itemForm":{beforerender:this.onBeforeRender},"taskform#itemCard-40 #relatedDetails>roweditgrid":{edit:this.onDetailRowEdit,activate:this.onDetailActivate}});this.application.on({itemload:this.onItemLoad,newitem:this.onNewItem,scope:this})},onBeforeRender:function(e){var f=[],c,g,b,a;Ext.getStore("TaskTypes").each(function(h){f.push({boxLabel:h.get("type"),name:"deliverabletypeid",inputValue:h.get("deliverabletypeid")})});c={xtype:"radiogroup",fieldLabel:"Type",items:f,width:300,listeners:{change:function(k,i,h){k.up("#itemForm").getForm().checkDirty()}}};a=e.down("#mainCon");g=a.down("combobox[name=deliverabletypeid]");b=a.items.indexOf(g);a.remove(g);a.insert(b,c)}});Ext.define("PTS.model.Invoice",{extend:"Ext.data.Model",fields:[{name:"invoiceid",type:"int",persist:false},{name:"fundingid",type:"int",useNull:true},{name:"projectcontactid",type:"int",useNull:true},{name:"datereceived",type:"mydate",useNull:true},{name:"dateclosed",type:"mydate",useNull:true},{name:"amount",type:"number",useNull:true},{name:"title",type:"mystring",useNull:true}],idProperty:"invoiceid",hasMany:[{model:"PTS.model.CostCodeInvoice",name:"costcodes"}],proxy:{type:"rest",url:"../invoice",reader:{type:"json",root:"data"},writer:{type:"ajson"}}});Ext.define("PTS.store.Invoices",{extend:"Ext.data.Store",model:"PTS.model.Invoice",autoLoad:false,autoSync:false});Ext.define("PTS.model.CostCodeInvoice",{extend:"Ext.data.Model",fields:[{name:"costcodeinvoiceid",type:"int",useNull:true},{name:"costcodeid",type:"int",useNull:true},{name:"invoiceid",type:"int",useNull:true},{name:"datecharged",type:"mydate",useNull:true},{name:"amount",type:"number",useNull:true}],idProperty:"costcodeinvoiceid",validations:[{type:"length",field:"costcodeid",min:1},{type:"length",field:"invoiceid",min:1},{type:"presence",field:"datecharged"},{type:"presence",field:"amount"}],proxy:{type:"rest",url:"../costcodeinvoice",reader:{type:"json",root:"data"}}});Ext.define("PTS.view.project.form.InvoiceGridForm",{extend:"Ext.panel.Panel",alias:"widget.invoicegridform",requires:["PTS.view.controls.RowEditGrid","PTS.view.controls.CurrencyField","Ext.util.Format.usMoney","Ext.grid.column.Number"],activeItem:0,layout:{type:"card"},title:"Invoices",defaults:{autoScroll:true,border:0},initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"gridpanel",itemId:"invoiceList",uri:"invoice",store:"Invoices",columns:[{xtype:"gridcolumn",dataIndex:"title",text:"Title",flex:1},{xtype:"numbercolumn",dataIndex:"amount",text:"Amount"},{xtype:"datecolumn",dataIndex:"datereceived",text:"Received"},{xtype:"datecolumn",dataIndex:"dateclosed",text:"Closed"}],dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",text:"Edit",iconCls:"pts-menu-editbasic",action:"editinvoice",disabled:true},{xtype:"button",text:"Add",iconCls:"pts-menu-addbasic",action:"addinvoice"}]}]},{xtype:"form",itemId:"invoiceForm",model:"PTS.model.Invoice",trackResetOnLoad:true,border:0,layout:{align:"stretch",padding:10,type:"vbox"},dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",action:"showlist",iconCls:"pts-menu-viewlist",text:"Show List"},{xtype:"button",action:"deleteinvoice",iconCls:"pts-menu-deletebasic",text:"Delete"},{xtype:"button",action:"saveinvoice",iconCls:"pts-menu-savebasic",text:"Save",formBind:true},{xtype:"button",action:"resetinvoice",iconCls:"pts-menu-reset",text:"Reset"}]}],items:[{xtype:"container",border:0,padding:"0 0 10 0",layout:{type:"anchor"},items:[{xtype:"textfield",name:"title",fieldLabel:"Title",anchor:"100%",allowBlank:false},{xtype:"combobox",name:"projectcontactid",fieldLabel:"Contact",displayField:"name",valueField:"projectcontactid",store:"ProjectInvoicers",typeAhead:false,queryMode:"local",forceSelection:true,allowBlank:false,anchor:"100%"},{xtype:"currencyfield",name:"amount",fieldLabel:"Amount",allowBlank:false},{xtype:"fieldcontainer",layout:{type:"hbox"},fieldLabel:"Dates",hideLabel:true,items:[{xtype:"datefield",name:"datereceived",fieldLabel:"Received",flex:1},{xtype:"datefield",name:"dateclosed",margin:"0 0 0 10",fieldLabel:"Closed",labelAlign:"right",labelPad:15,flex:0}]}]},{xtype:"roweditgrid",itemId:"costCodes",title:"Cost Codes",syncOnRemoveRow:false,flex:1,columns:[{xtype:"gridcolumn",dataIndex:"costcodeid",renderer:function(l,b,h,c,g,m,i){var e=i.getHeaderAtIndex(g).getEditor(),k=e.getStore().find(e.valueField,l,0,false,true,true),f=e.getStore().getAt(k);if(f){return f.get(e.displayField)}return l},editor:{xtype:"combobox",displayField:"costcode",valueField:"costcodeid",store:"CostCodes",typeAhead:false,queryMode:"local",forceSelection:false,allowBlank:false},text:"Cost Code",flex:2},{xtype:"datecolumn",dataIndex:"datecharged",editor:{xtype:"datefield"},text:"Date Charged"},{xtype:"numbercolumn",dataIndex:"amount",editor:{xtype:"currencyfield",allowBlank:false},flex:1,text:"Amount",renderer:Ext.util.Format.usMoney}]}]}]});a.callParent(arguments)}});Ext.define("PTS.store.CostCodeInvoices",{extend:"Ext.data.Store",model:"PTS.model.CostCodeInvoice",autoLoad:false,autoSync:false});Ext.define("PTS.controller.project.form.InvoiceGridForm",{extend:"Ext.app.Controller",views:["project.form.InvoiceGridForm"],models:["Invoice"],stores:["ProjectContacts","ProjectInvoicers","Invoices","CostCodeInvoices","CostCodes"],refs:[{ref:"invoiceGridForm",selector:"invoicegridform"},{ref:"invoiceList",selector:"invoicegridform>#invoiceList"},{ref:"invoiceForm",selector:"invoicegridform>#invoiceForm"},{ref:"fundingForm",selector:"fundingform>form"}],init:function(){this.control({"invoicegridform>#invoiceList":{selectionchange:this.onInvoiceSelection,itemdblclick:this.onDblClickInvoice},"#invoiceList button[action=editinvoice]":{click:this.editInvoiceHandler},"#invoiceList button[action=addinvoice]":{click:this.addInvoice},"#invoiceForm button[action=saveinvoice]":{click:this.saveInvoice},"#invoiceForm button[action=deleteinvoice]":{click:this.deleteInvoice},"#invoiceForm button[action=resetinvoice]":{click:this.resetInvoice},"#invoiceForm button[action=showlist]":{click:this.showInvoiceList},"invoicegridform>#invoiceForm roweditgrid#costCodes":{beforeremoverow:this.beforeRemoveCostcode}})},onInvoiceSelection:function(c,b){var a=this.getInvoiceGridForm().down("#invoiceList button[action=editinvoice]");a.setDisabled(!c.getCount())},showInvoiceList:function(){this.getInvoiceGridForm().getLayout().setActiveItem("invoiceList")},editInvoiceHandler:function(){var a=this.getInvoiceList().getSelectionModel().getSelection()[0];this.editInvoice(a)},resetInvoice:function(){this.getInvoiceForm().getForm().reset()},onDblClickInvoice:function(a,b){this.editInvoice(b)},editInvoice:function(f){var c,e=this.getInvoiceForm(),b=this.getCostCodesStore(),a;if(!b.count()){if(!b.isLoading()&&b.count()===0){a=e.down("roweditgrid#costCodes");a.getEl().mask("Loading...");c=e.up("fundingform").down("#itemForm").getRecord().getId();this.getController("project.form.FundingForm").updateDetailStore(b,c,"costcode");b.load(function(h,g,i){a.getView().refresh();a.getEl().unmask()})}}e.loadRecord(f);e.down("roweditgrid#costCodes").bindStore(f.costcodes());this.getInvoiceGridForm().getLayout().setActiveItem(1)},addInvoice:function(){var c,e=this.getInvoiceForm(),b=this.getCostCodesStore(),a,f=Ext.create(this.getInvoiceModel());if(!b.count()){if(!b.isLoading()&&b.count()===0){a=e.down("roweditgrid#costCodes");a.getEl().mask("Loading...");c=e.up("fundingform").down("#itemForm").getRecord().getId();this.getController("project.form.FundingForm").updateDetailStore(b,c,"costcode");b.load(function(h,g,i){a.getView().refresh();a.getEl().unmask()})}}e.loadRecord(f);e.down("roweditgrid#costCodes").bindStore(f.costcodes());this.getInvoiceGridForm().getLayout().setActiveItem(1)},saveInvoice:function(){var c={},b=this.getInvoiceForm(),g=b.getForm(),a=g.getRecord(),e=b.down("roweditgrid#costCodes").getStore(),f=e.getRemovedRecords(),h=this.getFundingForm().getRecord().getId();if(0===e.count()||0===e.collect("costcodeid").length){Ext.MessageBox.show({title:"Error",msg:"At least one Cost Code is required.</br>",buttons:Ext.MessageBox.OK,animateTarget:b.down("button[action=saveinvoice]").getEl(),fn:function(){b.getEl().unmask()},icon:Ext.Msg.ERROR});return}b.getEl().mask("Saving...");a.set("fundingid",h);g.updateRecord(a);if(f.length>0){c.destroy=f}e.getProxy().batch(c,{scope:this,exception:function(k,m){var i=e,l;b.getEl().unmask();if(m.action==="destroy"){l=m.records[0];l.reject();Ext.Array.remove(i.removed,l);i.add(l)}},complete:{fn:function(){var i=this;a.save({success:function(l,n){var m=i.getInvoicesStore(),k=m.indexOfId(l.getId());g.loadRecord(l);b.down("roweditgrid#costCodes").bindStore(l.costcodes());Ext.each(b.query("field"),function(){this.resetOriginalValue()});if(k!==-1){m.removeAt(k);m.insert(k,l)}else{m.add(l)}b.getEl().unmask()},failure:function(k,l){Ext.MessageBox.show({title:"Error",msg:"There was a problem saving the invoice.</br>"+PTS.app.getError(),buttons:Ext.MessageBox.OK,animateTarget:b.down("button[action=saveinvoice]").getEl(),fn:function(){b.getEl().unmask()},icon:Ext.Msg.ERROR})},scope:this})},scope:this}})},deleteInvoice:function(){var b=this.getInvoiceForm(),c=b.getForm(),a=c.getRecord();b.getEl().mask("Loading...");a.destroy({success:function(f,h){var g=this.getInvoicesStore(),e=g.indexOfId(a.getId());if(e!==-1){g.removeAt(e)}b.getEl().unmask();this.getInvoiceGridForm().getLayout().setActiveItem("invoiceList")},failure:function(e,f){Ext.MessageBox.show({title:"Error",msg:"There was a problem deleting the invoice.</br>"+PTS.app.getError(),buttons:Ext.MessageBox.OK,animateTarget:b.down("button[action=deleteinvoice]").getEl(),fn:function(){b.getEl().unmask()},icon:Ext.Msg.ERROR})},scope:this})},beforeRemoveCostcode:function(b,a){if(a.count()===1){Ext.MessageBox.show({title:"Error",msg:"At least one Cost Code is required.</br>",buttons:Ext.MessageBox.OK,animateTarget:this.getInvoiceForm().down("roweditgrid#costCodes button#removeRow").getEl(),icon:Ext.Msg.ERROR});return false}}});Ext.define("PTS.view.contact.GroupList",{extend:"Ext.grid.Panel",alias:"widget.grouplist",requires:["Ext.ux.grid.PrintGrid","Ext.ux.grid.SaveGrid","Ext.ux.grid.FilterBar"],title:"Group",store:"ContactGroups",itemId:"group",initComponent:function(){var a=this;Ext.applyIf(a,{dockedItems:[{xtype:"pagingtoolbar",store:"ContactGroups",displayInfo:true,plugins:[Ext.create("Ext.ux.grid.PrintGrid",{}),Ext.create("Ext.ux.grid.SaveGrid",{})]}],columns:[{xtype:"gridcolumn",dataIndex:"fullname",text:"Full Name",flex:1},{xtype:"gridcolumn",dataIndex:"name",text:"Name",flex:1,hidden:true},{xtype:"gridcolumn",dataIndex:"acronym",text:"Acronym"},{xtype:"booleancolumn",dataIndex:"organization",text:"Organization?",trueText:"Yes",falseText:"No"}]});a.callParent(arguments);a.addDocked({xtype:"filterbar",searchStore:a.store,dock:"bottom"})}});Ext.define("PTS.view.contact.tab.ContactTabDetail",{extend:"Ext.tab.Panel",alias:"widget.contacttabdetail",requires:["Ext.ux.grid.PrintGrid","Ext.ux.grid.SaveGrid","PTS.view.contact.GroupDDList","PTS.view.contact.PersonDDList"],title:"Contact Details",activeTab:0,initComponent:function(){var a=this;Ext.applyIf(a,{style:{backgroundColor:"#FFF",backgroundImage:"none"},defaults:{layout:"fit"},items:[{xtype:"gridpanel",itemId:"contactProjects",title:"Projects",store:"ContactProjects",dockedItems:[{xtype:"pagingtoolbar",store:"ContactProjects",dock:"top",displayInfo:true,plugins:[Ext.create("Ext.ux.grid.PrintGrid",{printHidden:true}),Ext.create("Ext.ux.grid.SaveGrid",{})]}],columns:[{xtype:"gridcolumn",dataIndex:"projectcode",text:"Project"},{xtype:"gridcolumn",dataIndex:"shorttitle",text:"Short Title",flex:2},{xtype:"gridcolumn",dataIndex:"role",flex:1,text:"Role"}]},{xtype:"panel",itemId:"contactLists",getStore:function(){return this.getLayout().getActiveItem().getStore()},title:"Contacts",style:{borderWidth:"1px 0 0 1px",padding:0},activeItem:1,layout:{type:"card"},defaults:{autoScroll:true,border:0},items:[{xtype:"gridpanel",itemId:"personsList",store:"PersonGroups",uri:"grouppersonfull",columns:[{xtype:"gridcolumn",dataIndex:"firstname",text:"First Name"},{xtype:"gridcolumn",dataIndex:"lastname",text:"Last Name"},{xtype:"gridcolumn",dataIndex:"position",text:"Position",flex:1},{xtype:"gridcolumn",dataIndex:"groupname",flex:1,text:"Name"}]},{xtype:"gridpanel",itemId:"groupsList",store:"PersonGroups",uri:"grouppersonfull",columns:[{xtype:"gridcolumn",dataIndex:"groupfullname",flex:2,text:"Full Name"},{xtype:"gridcolumn",dataIndex:"acronym",text:"Acronym"},{xtype:"gridcolumn",dataIndex:"position",text:"Position",flex:1},{xtype:"gridcolumn",dataIndex:"groupname",flex:1,text:"Name",hidden:true}]}]}]});a.callParent(arguments)}});Ext.define("PTS.view.contact.PersonList",{extend:"Ext.grid.Panel",alias:"widget.personlist",requires:["Ext.ux.grid.PrintGrid","Ext.ux.grid.SaveGrid","Ext.ux.grid.FilterBar","Ext.ux.grid.GrabField"],title:"Person",remoteSort:"true",filterBar:true,initComponent:function(){var a=this,b;Ext.applyIf(a,{store:"Persons",itemId:"person",columns:[{xtype:"gridcolumn",dataIndex:"firstname",text:"First"},{xtype:"gridcolumn",dataIndex:"lastname",text:"Last"},{xtype:"gridcolumn",dataIndex:"prigroupname",text:"Primary Group",flex:1},{xtype:"gridcolumn",dataIndex:"priemail",text:"E-mail",flex:1},{text:"Phone",defaults:{menuDisabled:true},columns:[{xtype:"gridcolumn",dataIndex:"pricountryiso",text:"Country",sortable:true,hidden:true,width:65},{xtype:"gridcolumn",dataIndex:"priareacode",text:"Area",sortable:true,width:60},{xtype:"gridcolumn",dataIndex:"priphnumber",text:"Phone",width:100},{xtype:"gridcolumn",dataIndex:"priextension",text:"Ext",width:75}]}]});a.callParent(arguments);b=[{xtype:"pagingtoolbar",store:a.store,displayInfo:true,plugins:[Ext.create("Ext.ux.grid.GrabField",{iconCls:"pts-menu-email",dataindex:"priemail",tooltip:"Get all visible e-mail addresses",delimiter:", \n",windowTitle:"E-mail addresses"}),Ext.create("Ext.ux.grid.PrintGrid",{}),Ext.create("Ext.ux.grid.SaveGrid",{})],dock:"top"}];if(a.filterBar){b.push({xtype:"filterbar",searchStore:a.store,dock:"bottom"})}a.addDocked(b)}});Ext.define("PTS.view.contact.tab.ContactTab",{extend:"Ext.panel.Panel",alias:"widget.contacttab",requires:["PTS.view.contact.PersonList","PTS.view.contact.GroupList","PTS.view.contact.tab.ContactTabDetail"],border:0,layout:{type:"border"},title:"Contacts",initComponent:function(){var a=this;Ext.applyIf(a,{dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",iconCls:"pts-menu-add",text:"Add Contact",itemId:"newcontactbtn",action:"addcontact"},{xtype:"button",iconCls:"pts-menu-edit",text:"Edit Contact",itemId:"editcontactbtn",action:"editcontact",disabled:true}]}],items:[{xtype:"tabpanel",border:0,itemId:"contactList",activeTab:0,flex:1,region:"center",items:[{xtype:"personlist",title:"Person"},{xtype:"grouplist",title:"Group"}]},{xtype:"panel",border:0,width:150,layout:{type:"border"},bodyStyle:{border:"none",backgroundColor:"#FFF",backgroundImage:"none"},collapsible:true,animCollapse:!Ext.isIE8,preventHeader:true,title:"Contact Details",flex:1,region:"east",split:true,items:[{xtype:"contacttabdetail",region:"center",preventHeader:true}]}]});a.callParent(arguments)}});Ext.define("PTS.controller.contact.tab.ContactTab",{extend:"Ext.app.Controller",views:["contact.tab.ContactTab"],refs:[{ref:"personList",selector:"contacttab > personlist"},{ref:"contactTab",selector:"contacttab"}],init:function(){var b=this.getController("contact.tab.ContactList"),a=this.getController("contact.tab.ContactTabDetail");b.init();a.init();this.control({"contacttab button[action=addcontact]":{click:this.newContact},"contacttab button[action=editcontact]":{click:this.editContact}});this.application.on({contactlistselect:this.onContactListSelect,contactlistactivate:this.onContactListActivate,scope:this})},newContact:function(){var b=this.getController("contact.Contact"),a=this.getController("contact.tab.ContactList"),c=a.getContactList().getItemId();b.openContact(c)},editContact:function(){var c=this.getController("contact.Contact"),b=this.getController("contact.tab.ContactList"),a=b.getContactList().getSelectionModel().getSelection()[0],e=a.getContactType();if(a){c.openContact(e,a)}},onContactListSelect:function(a){this.getContactTab().down("button[action=editcontact]").setDisabled(!a)},onContactListActivate:function(a){var b=a.getSelectionModel().getCount();this.getContactTab().down("button[action=editcontact]").setDisabled(!b)}});Ext.define("PTS.controller.contact.window.Window",{extend:"Ext.app.Controller",views:["contact.window.Window"],refs:[{ref:"contactWindow",selector:"contactwindow"}],init:function(){var a=this.getController("contact.window.ContactForm");a.init();this.control({"contactwindow [action=closewindow]":{click:this.closeWindow}})},closeWindow:function(){this.getContactWindow().close()}});Ext.define("PTS.controller.contact.tab.ContactList",{extend:"Ext.app.Controller",stores:["Persons","ContactGroups"],views:["contact.PersonList","contact.GroupList","contact.tab.ContactTab"],refs:[{ref:"contactLists",selector:"contacttab > #contactList"}],init:function(){this.control({"contacttab personlist":{itemdblclick:this.editContact,viewready:this.onContactListReady,select:this.onContactListSelect,activate:this.onContactListActivate},"contacttab grouplist":{itemdblclick:this.editContact,viewready:this.onContactListReady,select:this.onContactListSelect,activate:this.onContactListActivate}});this.application.on({savecontact:this.onSaveContact,deletecontact:this.onDeleteContact,scope:this})},getContactList:function(){var a=this.getContactLists();return a.getActiveTab()},editContact:function(c,a){var b=this.getController("contact.Contact"),e=a.getContactType();b.openContact(e,a)},onContactListReady:function(b){var a=b.getStore();if(a){a.on("load",function(e,c,f,g){if(e.count()>0){this.getSelectionModel().select(0)}},b)}a.load()},onContactListSelect:function(b,a){this.application.fireEvent("contactlistselect",a)},onContactListActivate:function(a){this.application.fireEvent("contactlistactivate",a)},onSaveContact:function(a,h){var b,c,g,f=a.getId(),e=a.getContactType();switch(e){case"person":b=this.getPersonsStore();break;case"group":b=this.getContactGroupsStore();break}c=b.indexOfId(f);if(c===-1){b.insert(0,a)}else{g=b.getAt(c);g.fields.each(function(i){g.set(i.name,a.get(i.name))});g.commit()}},onDeleteContact:function(a,e){var b,c=e.records[0].getContactType();switch(c){case"person":b=this.getPersonsStore();break;case"group":b=this.getContactGroupsStore();break}Ext.each(e.records,function(f){var g=f.getId();b.remove(b.getById(g))})}});Ext.define("PTS.store.ContactProjects",{extend:"Ext.data.Store",model:"PTS.model.ProjectContact",remoteFilter:true,autoLoad:false,proxy:{type:"ajax",url:"../projectcontactfull",reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.model.PersonGroup",{extend:"Ext.data.Model",fields:[{name:"contactid",type:"int",persist:false},{name:"groupid",type:"int",persist:false},{name:"positionid",type:"int",persist:false},{name:"firstname",type:"mystring",useNull:true},{name:"lastname",type:"mystring",useNull:true},{name:"middlename",type:"mystring",useNull:true},{name:"suffix",type:"mystring",useNull:true},{name:"groupfullname",type:"mystring",useNull:true},{name:"groupname",type:"mystring",useNull:true},{name:"acronym",type:"mystring",useNull:true},{name:"position",type:"mystring",useNull:true},{name:"fullname",convert:function(b,a){return a.data.lastname+", "+a.data.firstname}}],proxy:{type:"ajax",url:"../grouppersonfull",reader:{type:"json",root:"data"}}});Ext.define("PTS.store.PersonGroups",{extend:"Ext.data.Store",model:"PTS.model.PersonGroup",autoLoad:false});Ext.define("PTS.controller.contact.tab.ContactTabDetail",{extend:"Ext.app.Controller",stores:["ContactProjects","PersonGroups"],views:["contact.tab.ContactTabDetail"],refs:[{ref:"contactDetail",selector:"contacttab contacttabdetail"},{ref:"contactLists",selector:"contacttab contacttabdetail #contactLists"}],init:function(){this.control({"contacttab contacttabdetail tab":{activate:this.onContactDetailTabActivate},"contacttab contacttabdetail #contactLists":{activate:this.onContactDetailListsActivate}});this.application.on({contactlistselect:this.onSelectContact,contactlistactivate:this.onContactListActivate,scope:this})},onSelectContact:function(g){var a=g.getId(),i=g.getContactType()==="group"?0:1,h=this.getContactDetail(),k=h.getActiveTab().getStore(),l=this.getContactLists(),c,b={property:"contactids",value:["where in array",a]},f="Projects for ",e;if(i===0){e={property:"groupids",value:["where in array",a]};l.setTitle("Persons");f+=g.get("fullname")}else{e={property:"contactid",value:a};l.setTitle("Groups");f+=g.getContactName()}if(l.rendered){l.getLayout().setActiveItem(i)}c=[[this.getContactProjectsStore(),b],[this.getPersonGroupsStore(),e]];Ext.each(c,function(m){var n=m[0];n.remoteFilter=false;n.clearFilter(true);n.filter(m[1]);n.remoteFilter=true});k.load();this.contactRecord=g;this.updateProjectsPrintBtnTitle(f)},onContactListActivate:function(b){var a=b.getSelectionModel().getSelection()[0];if(a){this.onSelectContact(a)}},onContactDetailTabActivate:function(a){a.card.getStore().load()},onContactDetailListsActivate:function(b){var a=this.contactRecord.getContactType()==="group"?0:1;b.getLayout().setActiveItem(a)},updateProjectsPrintBtnTitle:function(b){var a=this.getContactDetail().down("#contactProjects #printBtn");a.mainTitle=function(){return b}}});Ext.define("PTS.model.Address",{extend:"Ext.data.Model",fields:[{name:"addressid",type:"int",useNull:true},{name:"contactid",type:"int",useNull:true},{name:"addresstypeid",type:"int",useNull:true},{name:"street1",type:"mystring",useNull:true},{name:"street2",type:"mystring",useNull:true},{name:"city",type:"mystring",useNull:true},{name:"postalcode",type:"mystring",useNull:true},{name:"postal4",type:"int",useNull:true},{name:"stateid",type:"int",useNull:true},{name:"countyid",type:"int",useNull:true},{name:"countryiso",type:"mystring",useNull:true},{name:"comment",type:"mystring",useNull:true},{name:"priority",type:"int",useNull:true,defaultValue:1}],idProperty:"addressid",proxy:{type:"rest",url:"../address",reader:{type:"json",root:"data"}}});Ext.define("PTS.model.EAddress",{extend:"Ext.data.Model",fields:[{name:"eaddressid",type:"int",useNull:true},{name:"contactid",type:"int",useNull:true},{name:"eaddresstypeid",type:"int",useNull:true},{name:"uri",type:"mystring",useNull:true},{name:"priority",type:"int",useNull:true,defaultValue:1}],idProperty:"eaddressid",proxy:{type:"rest",url:"../eaddress",reader:{type:"json",root:"data"}}});Ext.define("PTS.model.Phone",{extend:"Ext.data.Model",fields:[{name:"phoneid",type:"int",useNull:true},{name:"contactid",type:"int",useNull:true},{name:"phonetypeid",type:"int",useNull:true},{name:"areacode",type:"int",useNull:true},{name:"phnumber",type:"int",useNull:true},{name:"extension",type:"int",useNull:true},{name:"countryiso",type:"mystring",useNull:true},{name:"priority",type:"int",useNull:true,defaultValue:1}],idProperty:"phoneid",proxy:{type:"rest",url:"../phone",reader:{type:"json",root:"data"}}});Ext.define("PTS.model.ContactType",{extend:"Ext.data.Model",fields:[{name:"contacttypeid",type:"int",persist:false},{name:"code",type:"mystring",useNull:true},{name:"title",type:"mystring",useNull:true},{name:"description",type:"mystring",useNull:true}],idProperty:"contacttypeid",proxy:{type:"rest",url:"../contacttype",reader:{type:"json",root:"data"}}});Ext.define("PTS.model.ContactContactGroup",{extend:"Ext.data.Model",fields:[{name:"contactcontactgroupid",type:"int",useNull:true},{name:"contactid",type:"int",useNull:true},{name:"groupid",type:"int",useNull:true},{name:"positionid",type:"int",useNull:true},{name:"priority",type:"int",useNull:true,defaultValue:10000},{name:"name",persist:false,type:"mystring",useNull:true}],idProperty:"contactcontactgroupid",proxy:{type:"rest",url:"../contactcontactgroup",appendId:true,reader:{type:"json",root:"data"}}});Ext.define("PTS.model.ContactGroupID",{extend:"Ext.data.Model",fields:[{name:"contactid",mapping:"contactid",type:"int",persist:false},{name:"fullname",type:"mystring",useNull:true,persist:false}],idProperty:"contactid"});Ext.define("PTS.store.ContactTypes",{extend:"Ext.data.Store",model:"PTS.model.ContactType",autoLoad:true});Ext.define("PTS.store.ContactContactGroups",{extend:"Ext.data.Store",model:"PTS.model.ContactContactGroup"});Ext.define("PTS.store.ContactGroupIDs",{extend:"Ext.data.Store",model:"PTS.model.ContactGroupID",remoteSort:false,autoLoad:true,sorters:{property:"fullname",direction:"ASC"},proxy:{type:"ajax",url:"../contactgrouplist",reader:{type:"json",root:"data"},limitParam:undefined}});Ext.define("PTS.controller.contact.window.ContactForm",{extend:"Ext.app.Controller",views:["contact.window.ContactForm","contact.window.PersonGroups"],models:["Person","ContactGroup","Address","EAddress","Phone"],stores:["ContactTypes","ContactContactGroups","ContactGroupIDs","ContactGroups","DDContactGroups","Persons","DDPersons"],refs:[{ref:"contactForm",selector:"contactform"}],init:function(){var b=this.getController("contact.window.PersonGroups"),a=this.getController("contact.window.ContactDetail");b.init();a.init();this.control({"contactform button[action=savecontact]":{click:this.saveContact},"contactform button[action=resetcontact]":{click:this.resetContact},"contactform button[action=deletecontact]":{click:this.confirmDelete}});this.application.on({opencontact:this.onOpenContact,scope:this})},getActiveForm:function(){return this.getContactForm().getLayout().getActiveItem().down("form")},getActiveModel:function(){var a=this.getActiveForm();switch(a.getItemId()){case"personForm":return this.getPersonModel();case"groupForm":return this.getContactGroupModel();default:Ext.Error.raise("No model found for item!")}},onOpenContact:function(g,f){var c=this.getContactForm(),e,b,a;switch(f){case"person":b={title:"Manage Groups",disabled:!g};break;case"group":b={title:"Manage Members",disabled:!g};break}e=Ext.create("PTS.view.contact.window.PersonGroups",b);a=function(){c.getLayout().setActiveItem(f);this.loadRecord(g);c.getLayout().getActiveItem().add(e)};if(c.rendered){a.call(this)}else{c.on("render",a,this,{single:true})}},onSaveContact:function(a,e){var c,b;if(Ext.getClassName(a)==="PTS.model.ContactGroup"){b=this.getContactGroupIDsStore();c=b.getById(a.getId());if(c){c.set("fullname",a.get("fullname"))}else{b.add(a)}b.sort()}this.application.fireEvent("savecontact",a,e)},onDeleteContact:function(a,e){var c,b;if(Ext.getClassName(a)==="PTS.model.ContactGroup"){b=this.getContactGroupIDsStore();c=b.getById(a.getId());b.remove(c)}this.application.fireEvent("deletecontact",a,e)},onLoadContact:function(b,a){this.application.fireEvent("loadcontact",b,a)},saveFieldSet:function(e,a,f){var h,c,g=a.isDirty()&&a.isValid();if(g){c=parseInt(a.down("#recordId").getValue(),10);if(h=e.getById(c)){h.beginEdit();Ext.each(a.query("field"),function(){h.set(this.name,this.getValue())});h.endEdit()}else{var b={};Ext.each(a.query("field"),function(){b[this.name]=this.getValue()});Ext.applyIf(b,f);h=e.add(b);h[0].setDirty()}}},saveParentGroup:function(c,h,g){var f,b,e=h.isValid()&&h.isDirty();if(e){b=parseInt(h.getValue(),10);if(f=c.getAt(0)){f.beginEdit();f.set("groupid",h.getValue());f.endEdit()}else{var a={contactid:g,groupid:h.getValue(),positionid:0,priority:1};f=c.add(a);f[0].setDirty()}}},deleteFieldSet:function(e,a){var f,c,b;c=parseInt(a.down("#recordId").getValue(),10);if(f=e.getById(c)){e.remove(f)}if(b=a.down("checkboxfield#delete")){b.disable()}},deleteParentGroup:function(a){var b;if(b=a.getAt(0)){a.remove(b)}},saveAllFieldSets:function(e,i,c){var a=e?e:this.getActiveForm(),b=i?i:a.getForm(),f=c?c:b.getRecord(),l,m,g=[{type:"fax",val:"1"},{type:"office",val:"3"},{type:"mobile",val:"2"}],k=[{type:"mail",val:"1"},{type:"physical",val:"2"}],h=[{type:"web",val:"2"},{type:"email",val:"1"}];Ext.each(k,function(n){l=f.addresses();m=a.down("fieldset#"+n.type+"Address");if(m.down("checkboxfield#delete").getValue()){this.deleteFieldSet(l,m)}else{this.saveFieldSet(l,m,{addresstypeid:n.val})}},this);Ext.each(h,function(n){l=f.eaddresses();m=a.down("fieldcontainer#"+n.type+"Address");if(Ext.String.trim(m.down("textfield[name=uri]").getValue())===""&&m.isDirty()){this.deleteFieldSet(l,m)}else{this.saveFieldSet(l,m,{eaddresstypeid:n.val})}},this);Ext.each(g,function(n){l=f.phones();m=a.down("fieldcontainer#"+n.type+"Phone");if(m.down("checkboxfield#delete").getValue()){this.deleteFieldSet(l,m)}else{this.saveFieldSet(l,m,{phonetypeid:n.val})}},this);if(m=a.down("field#parentGroup")){l=f.contactcontactgroups();if(null===m.getValue()&&m.isDirty()){this.deleteParentGroup(l,m)}else{this.saveParentGroup(l,m,f.getId())}}},saveContact:function(){var b=this.getActiveForm(),c=b.getForm(),a=c.getRecord();b.getEl().mask("Saving...");c.updateRecord(a);this.saveAllFieldSets(b,c,a);a.save({success:function(e,f){Ext.each(b.query("field"),function(){this.setValue("");this.clearInvalid()});c.loadRecord(e);this.loadRecordDetails(e,b);Ext.each(this.getActiveForm().query("field"),function(){this.resetOriginalValue()});this.onSaveContact(e,f);b.getEl().unmask()},failure:function(e,f){if(a.associations.items.length){a.associations.each(function(h){var g=a[h.name]();g.remove(g.getNewRecords())},this)}b.getEl().unmask();Ext.MessageBox.show({title:"Error",msg:"There was a problem saving the contact.</br>"+PTS.app.getError(),buttons:Ext.MessageBox.OK,animateTarget:b.down("button[action=savecontact]").getEl(),icon:Ext.Msg.ERROR})},scope:this})},confirmDelete:function(b){var c=b.getEl(),a=function(e){if("yes"===e){this.deleteContact()}};Ext.MessageBox.show({title:"Confirm Deletion",msg:"Are you sure you want to delete this contact?",buttons:Ext.MessageBox.YESNO,icon:Ext.Msg.WARNING,fn:a,scope:this,animateTarget:c})},deleteContact:function(){var b=this.getActiveForm().getForm(),a=b.getRecord();a.destroy({success:function(c,e){this.onDeleteContact(a,e);this.getContactForm().up("window").close()},scope:this})},resetContact:function(){var b=this.getActiveForm(),c=b.getForm(),a=c.getRecord();if(a.associations.items.length){a.associations.each(function(f){var e=a[f.name]();e.rejectChanges()})}a.reject();c.reset()},loadFieldSet:function(e,b,c){var a=b.items.get("delete");if(c){c.setValue(true);c.resetOriginalValue()}Ext.each(b.query("field"),function(){var g=this,h,f=this.getName();if(undefined!==(h=e.get(f))){g.setValue(h);g.resetOriginalValue()}});if(a){a.enable()}},loadRecord:function(c){var a=this.getActiveModel(),b=this.getActiveForm();if(c){b.getEl().mask("Loading...");a.load(c,{success:function(e){b.loadRecord(e);this.loadRecordDetails(e,b);this.onLoadContact(b,e);b.getEl().unmask()},failure:function(e,f){b.getEl().unmask();Ext.MessageBox.show({title:"Error",msg:"The was a problem loading the record.</br>Error:"+PTS.app.getError(),buttons:Ext.MessageBox.OK,icon:Ext.Msg.ERROR})},scope:this})}else{b.loadRecord(Ext.create(a))}},loadRecordDetails:function(f,g){var c,e,b,a=[{type:"fax",val:"1"},{type:"office",val:"3"},{type:"mobile",val:"2"}],h=[{type:"web",val:"2"},{type:"email",val:"1"}];if(f.addresses().count()){if(c=f.addresses().findRecord("addresstypeid",1)){e=g.down("fieldset#mailAddress");b=e.down("checkbox[name=mailingCbx]");this.loadFieldSet(c,e,b)}if(c=f.addresses().findRecord("addresstypeid",2)){e=g.down("fieldset#physicalAddress");b=e.down("checkbox[name=physicalCbx]");this.loadFieldSet(c,e,b)}}if(f.phones().count()){b=g.down("checkbox[name=phoneCbx]");Ext.each(a,function(i){if(c=f.phones().findRecord("phonetypeid",i.val)){e=g.down("fieldcontainer#"+i.type+"Phone");this.loadFieldSet(c,e,b)}},this)}if(f.eaddresses().count()){Ext.each(h,function(i){if(c=f.eaddresses().findRecord("eaddresstypeid",i.val)){e=g.down("fieldcontainer#"+i.type+"Address");this.loadFieldSet(c,e)}},this)}if(e=g.down("field#parentGroup")){if(c=f.contactcontactgroups().getAt(0)){e.setValue(c.get("groupid"))}}}});Ext.define("PTS.controller.contact.window.PersonGroups",{extend:"Ext.app.Controller",requires:["PTS.view.controls.ReorderColumn"],views:["contact.window.PersonGroups"],models:["ContactContactGroup"],stores:["ContactGroups","DDContactGroups","ContactContactGroups","Persons","Positions","DDPersons"],refs:[{ref:"personGroups",selector:"persongroups"},{ref:"contactLists",selector:"persongroups #contactLists"},{ref:"groupMembersList",selector:"persongroups #groupMembersList"}],init:function(){this.control({persongroups:{afterrender:this.afterRender},"persongroups button[action=addcontacts]":{click:this.addContacts},"persongroups button[action=removecontacts]":{click:this.removeContacts},"persongroups button[action=savecontacts]":{click:this.saveContacts},"persongroups button[action=refreshcontacts]":{click:this.refreshContacts},"persongroups #contactLists > gridpanel":{beforerender:this.beforeRenderContactLists},"persongroups #contactLists > gridpanel > gridview":{beforedrop:this.removeContactsByDrag},"persongroups #groupMembersList > gridview":{afterrender:this.afterRenderGroupMembersList},"persongroups #groupMembersList":{beforerender:this.beforeRenderGroupMembersList}});this.application.on({opencontact:this.onOpenContact,savecontact:this.onSaveContact,scope:this})},contactType:null,contactId:null,reorderCol:true,setProxy:function(e,a,b){var c;switch(b){case"person":c="../person/"+e+"/group";break;case"group":c="../contactgroup/"+e+"/member";break;default:Ext.Error.raise("Contact type not supplied!")}a.setProxy({type:"rest",url:"../contactcontactgroup",appendId:true,api:{read:c,create:c,update:c},reader:{type:"json",root:"data"}})},onOpenContact:function(c,b){var a=this.getContactContactGroupsStore();if(c){this.setProxy(c,a,b);a.load()}this.contactType=b;this.reorderCol=b==="group"?false:true;this.contactId=c},onSaveContact:function(a){var b=this.getContactContactGroupsStore(),e=a.getId(),c=a.getContactType();if(e){this.setProxy(e,b,c);this.contactId=e;b.load();this.getPersonGroups().enable()}},afterRender:function(a){var b,c=this.getContactLists().getLayout();switch(this.contactType){case"person":c.setActiveItem(1);break;case"group":c.setActiveItem(0);a.down("#groupMembersList").setTitle("Group Members");break;default:Ext.Error.raise("Contact type not supplied! Cannot activate card.")}b=c.getActiveItem().getStore();if(b.getCount()===0){b.load()}},beforeRenderContactLists:function(a){var b=Ext.create("Ext.grid.column.Column",a.getSelectionModel().getHeaderConfig());a.headerCt.insert(0,b)},beforeRenderGroupMembersList:function(b){var a,c=Ext.create("Ext.grid.column.Column",b.getSelectionModel().getHeaderConfig()),e=b.headerCt;e.insert(0,c);if(this.reorderCol){a=e.insert(e.getColumnCount()+1,{xtype:"reordercolumn"})}else{e.items.each(function(){this.sortable=true})}},afterRenderGroupMembersList:function(b){var c=b.getPlugin("contactsddplugin"),e=this.contactId,a=this.contactType,f=c.dropZone;f.handleNodeDrop=function(l,n,p){var t=this.view,u=t.getStore(),s,h,m,r;if(l.copy){h=l.records;l.records=[];for(m=0,r=h.length;m<r;m++){var g=h[m].data,k,q;if(g.name===undefined){g.name=g.lastname+", "+g.firstname}switch(a){case"person":q={name:g.name,positionid:"",groupid:g.contactid,contactid:e};break;case"group":q={name:g.name,positionid:"",groupid:e,contactid:g.contactid};break;default:Ext.Error.raise("Contact type not supplied!")}k=Ext.create("PTS.model.ContactContactGroup",q);k.phantom=true;l.records.push(k)}l.view.getSelectionModel().deselect(h)}else{l.view.store.remove(l.records,l.view===t)}s=u.indexOf(n);if(p!=="before"){s++}u.insert(s,l.records);t.getSelectionModel().select(l.records)}},removeContactsByDrag:function(c,f,e,b,a){this.getContactContactGroupsStore().remove(f.records);return false},removeContacts:function(){var a=this.getGroupMembersList(),b=a.getSelectionModel().getSelection();a.getStore().remove(b)},refreshContacts:function(){var a=this.getGroupMembersList();a.getStore().load({callback:function(c,b,e){a.getStore().removed=[]}})},addContacts:function(){var b=this.getContactLists().getLayout().getActiveItem(),e=b.getSelectionModel().getSelection(),c={copy:true,view:b.getView(),records:e},a=this.getGroupMembersList().getView().getPlugin("contactsddplugin").dropZone;a.handleNodeDrop(c)},saveContacts:function(){var a=this.getContactContactGroupsStore(),b=this.getGroupMembersList().getEl();if(this.reorderCol){a.each(function(){var f=this,e=f.get("priority"),c=a.indexOf(f);if(e!==c){f.set("priority",c)}})}if(!!(a.getRemovedRecords().length+a.getUpdatedRecords().length+a.getNewRecords().length)){b.mask("Saving...")}a.getBatchListeners=function(){var e=a,c={scope:e,exception:function(f,g){b.unmask()}};if(e.batchUpdateMode=="operation"){c.operationcomplete=e.onBatchOperationComplete}else{c.complete=e.onBatchComplete}return c};a.sync({success:function(){b.unmask()},failure:function(){b.unmask();Ext.MessageBox.show({title:"Error",msg:"The was a problem saving the contacts.</br>Error:"+PTS.app.getError(),buttons:Ext.MessageBox.OK,icon:Ext.Msg.ERROR})},callback:function(){}})}});Ext.define("PTS.controller.contact.window.ContactDetail",{extend:"Ext.app.Controller",views:["contact.window.ContactDetail"],models:["Address","EAddress","Phone"],stores:["States"],refs:[{ref:"contactForm",selector:"contactform"}],init:function(){this.control({"contactform contactdetail #sameAddCbx":{change:this.copyMailAddress},"contactform contactdetail countrycombo":{select:this.countryChange},"contactform addressfieldset #postalcode":{blur:this.onPostalBlur,validitychange:this.onPostalValidate},"contactform addressfieldset statecombo":{expand:this.onStateExpand}});this.application.on({loadcontact:this.onLoadContact,scope:this})},copyMailAddress:function(c){var a=c.up("fieldset"),b=c.up("contactdetail").down("#mailAddress");if(c.getValue()){Ext.each(b.query("field"),function(h){var f=h.getValue(),e=h.getName(),g=a.down("field[name="+e+"]");if("addressid"!==e&&g){g.setValue(f);g.disable()}})}else{Ext.each(a.query("field"),function(e){e.enable()})}},countryChange:function(c){var a=this.getStatesStore(),b=c.getValue();a.clearFilter();this.filterState(b)},onPostalBlur:function(a){var e=a.getValue(),b=a.up("addressfieldset"),c=b.down("#country").getValue();if(a.isDirty()&&!Ext.isEmpty(a.getValue())){Ext.Ajax.request({url:"../country/"+c+"/postalcode/"+e,success:function(f){var h=b.down("#state"),i=b.down("#city"),g=Ext.decode(f.responseText).data;h.setValue(g.stateid);h.enable();i.setValue(g.placename);i.enable()},failure:function(f){var g=Ext.decode(f.responseText).message;a.markInvalid(g)}})}},onPostalValidate:function(a,c){var b=a.up("addressfieldset");b.down("#state").setDisabled(!c);b.down("#city").setDisabled(!c)},onLoadContact:function(c,b){var a=c.query("#postalcode");Ext.each(a,function(e){var f=e.up("addressfieldset").query("#city, #state"),g=Ext.isEmpty(e.getValue());Ext.each(f,function(){this.setDisabled(g)})})},onStateExpand:function(a){var c=a.up("addressfieldset").down("countrycombo").getValue(),b=this.getStatesStore().filters.get("country");if(c&&!(b&&(c===b.value))){this.filterState(c)}},filterState:function(a){this.getStatesStore().filter({id:"country",property:"countryalpha",value:a})}});Ext.define("PTS.model.ReportTree",{extend:"Ext.data.Model",fields:[{name:"cols",type:"auto"},{name:"fields",type:"auto"},{name:"text",type:"mystring",useNull:true},{name:"url",type:"mystring",useNull:true},{name:"model",type:"mystring",useNull:true},{name:"xtype",type:"mystring",useNull:true},{name:"limit",type:"myboolean",defaultValue:false},{name:"summary",type:"myboolean",defaultValue:false},{name:"pbarPlugins",type:"auto"}],idProperty:"id"});Ext.define("PTS.store.ReportTree",{extend:"Ext.data.TreeStore",model:"PTS.model.ReportTree",clearOnLoad:true,folderSort:true,autoLoad:true,proxy:{type:"ajax",url:"../report/tree",reader:{type:"json"}}});Ext.define("PTS.view.report.ReportGrid",{extend:"Ext.grid.Panel",alias:"widget.reportgrid",requires:["Ext.ux.grid.PrintGrid","Ext.ux.grid.SaveGrid","Ext.ux.grid.GrabField","Ext.ux.grid.PagingToolbarResizer"],autoScroll:true,title:"Report",store:undefined,pbarPlugins:[],initComponent:function(){var a=this;a.callParent(arguments);a.addDocked({xtype:"pagingtoolbar",store:a.store,dock:"top",displayInfo:true,plugins:a.pbarPlugins.concat([Ext.create("Ext.ux.grid.PrintGrid",{}),Ext.create("Ext.ux.grid.SaveGrid",{}),Ext.create("Ext.ux.grid.PagingToolbarResizer",{options:[25,50,100]})])})}});Ext.define("PTS.view.report.tab.ReportTab",{extend:"Ext.panel.Panel",alias:"widget.reporttab",requires:["PTS.view.report.ReportGrid"],layout:{type:"border"},title:"Reports",initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"tabpanel",itemId:"reportPanel",activeTab:0,region:"center",items:[{xtype:"panel",itemId:"helpTab",title:"Help",closable:false,closeAction:"hide",hidden:true,bodyPadding:10,html:'Choose a report from the tree on the left. The report will open in a new tab. Tabs may be closed by clicking the button <img height="11px" width="11px" src="extjs/resources/themes/images/default/tab/tab-default-close.gif"/> next to the title. <br /> Some reports have columns that are hidden by default. Hover your pointer over the column title and click the down arrow <img height="11px" width="11px" src="extjs/resources/themes/images/default/button/arrow.gif"/> next to the title to display or hide columns.'}]},{xtype:"treepanel",itemId:"reportTree",width:225,title:"Reports",region:"west",store:"ReportTree",rootVisible:false,split:true}]});a.callParent(arguments)}});Ext.define("PTS.controller.report.tab.ReportTab",{extend:"Ext.app.Controller",stores:["ReportTree"],models:["ReportTree"],views:["report.tab.ReportTab","report.ReportGrid"],refs:[{ref:"reportTree",selector:"reporttab #reportTree"},{ref:"reportPanel",selector:"reporttab #reportPanel"},{ref:"helpTab",selector:"reporttab #helpTab"}],init:function(){this.control({"reporttab #reportTree":{itemclick:this.onClickItem},"reporttab #reportPanel":{add:this.onAddTab}})},onClickItem:function(k,e,i,a){var b,h,f,l=e.internalId+"-reportgrid",g=this.getReportPanel(),c=g.down("#"+l);h={proxy:{type:"ajax",url:e.data.url,reader:{type:"json",root:"data"}},autoLoad:true,remoteSort:true};if(e.data.limit){h.pageSize=limit}if(e.data.model){h.model=e.data.model}else{h.fields=e.data.fields}if(e.isLeaf()){if(c){g.setActiveTab(c)}else{c={xtype:e.data.xtype?e.data.xtype:"reportgrid",filterBar:!!e.data.filterBar,itemId:l,closable:true,title:e.data.text,store:Ext.create("Ext.data.Store",h)};if(e.data.cols){Ext.each(e.data.cols,function(m){if(m.renderer){m.renderer=Ext.util.Format[m.renderer]}});c.columns=e.data.cols}if(e.data.summary){c.features=[{ftype:"summary"}]}if(e.data.pbarPlugins){c.pbarPlugins=[];Ext.each(e.data.pbarPlugins,function(m){c.pbarPlugins.push(Ext.create(m.type,m.cfg))})}g.add(c)}}},onAddTab:function(a,b){a.setActiveTab(b)}});Ext.define("PTS.view.Viewport",{extend:"Ext.container.Viewport",requires:["PTS.view.MainToolbar","PTS.view.dashboard.Dashboard","PTS.view.project.tab.ProjectTab","PTS.view.contact.tab.ContactTab","PTS.view.report.tab.ReportTab"],layout:{type:"border"},initComponent:function(){var a=this;Ext.applyIf(a,{items:[{xtype:"tabpanel",style:{border:"none",backgroundColor:"#FFF",backgroundImage:"none"},bodyPadding:0,preventHeader:true,title:"Main",activeTab:0,plain:true,region:"center",items:[{xtype:"dashboard"},{xtype:"projecttab"},{xtype:"contacttab",title:"Contacts"},{xtype:"reporttab"}]},{xtype:"maintoolbar",region:"north"},{xtype:"toolbar",height:20,hidden:true,itemId:"status-toolbar",flex:0,region:"south",items:[{xtype:"tbtext",text:"My Text"}]}]});a.callParent(arguments)}});Ext.Loader.setConfig({enabled:true,paths:{Extensible:"extensible-1.5.1/src","Extensible.example":"extensible-1.5.1/examples","Ext.ux":"./ux",GeoExt:"./lib/geoext/src/GeoExt"},disableCaching:true});Ext.application({requires:["PTS.Defaults","PTS.model.User","PTS.util.DataTypes","PTS.util.VTypes","PTS.Overrides","PTS.util.ActivityMonitor","PTS.util.AssociationJsonWriter","Ext.ux.window.Notification"],name:"PTS",version:"0.9",appFolder:"app",autoCreateViewport:false,enableQuickTips:true,models:["User"],stores:["States","Countries","Positions"],controllers:["MainToolbar","dashboard.Dashboard","project.Project","contact.Contact","report.Report"],setError:function(a){this.lastError=a},getError:function(){return this.lastError},showError:function(a){Ext.create("widget.uxNotification",{title:"Error",iconCls:"ux-notification-icon-error",html:a}).show()},launch:function(){var b=this,a=new Ext.LoadMask(Ext.getBody(),{msg:"Please wait...Fetching User Info"});a.show();b.getModel("PTS.model.User").load(UserId.id,{success:function(e){var c=this.getStore("GroupUsers");PTS.user=e;PTS.orgcode=PTS.user.get("acronym");c.setProxy({type:"ajax",url:"../contactgroup/"+PTS.user.get("groupid")+"/person",reader:{type:"json",root:"data"},extraParams:{filter:Ext.encode([{property:"positionid",value:["where not in",[96,85]]}])}});c.load();Ext.create("PTS.view.Viewport");a.destroy();PTS.util.ActivityMonitor.init({verbose:false,interval:(1000*900*1),maxInactive:(1000*13470*1),isActive:function(){Ext.Ajax.request({url:"../poll"})},isInactive:function(){var f=Ext.create("Ext.window.MessageBox",{buttonText:{ok:"Keep Working"}});f.show({buttons:Ext.MessageBox.OK,closable:false,fn:function(g){Ext.TaskManager.stop(f.task);PTS.util.ActivityMonitor.start()},msg:"Your session has been idle for too long. Click the button to keep working.",progress:true,scope:this,title:"Inactivity Warning"});f.updateProgress(0);f.seconds=0;f.task=Ext.TaskManager.start({run:function(){f.seconds+=1;if(f.seconds>6){Ext.TaskManager.stop(f.task);window.location="../logout"}else{f.updateProgress(f.seconds/6)}},scope:this,interval:(1000*2)})}});PTS.util.ActivityMonitor.start()},failure:function(c,e){Ext.MessageBox.show({title:"Error",msg:"There was an error.",buttons:Ext.MessageBox.OK,icon:Ext.Msg.ERROR})},scope:b});Ext.Error.handle=function(c){PTS.app.showError(c.msg)};Ext.Ajax.on("requestexception",function(f,e,g){var c=Ext.JSON.decode(e.responseText);PTS.app.setError(c.message);if(undefined===g.failure&&undefined===g.operation.failure){Ext.create("widget.uxNotification",{title:"Error",iconCls:"ux-notification-icon-error",html:c.message}).show()}});PTS.app=this}});
